var QE=Object.defineProperty;var JE=(t,e,r)=>e in t?QE(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var H=(t,e,r)=>JE(t,typeof e!="symbol"?e+"":e,r);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function r(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(n){if(n.ep)return;n.ep=!0;const s=r(n);fetch(n.href,s)}})();var Gt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function tp(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function eS(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var n=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(r,i,n.get?n:{enumerable:!0,get:function(){return t[i]}})}),r}var dx={exports:{}},Fu={},fx={exports:{}},se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sa=Symbol.for("react.element"),tS=Symbol.for("react.portal"),rS=Symbol.for("react.fragment"),iS=Symbol.for("react.strict_mode"),nS=Symbol.for("react.profiler"),sS=Symbol.for("react.provider"),oS=Symbol.for("react.context"),aS=Symbol.for("react.forward_ref"),lS=Symbol.for("react.suspense"),uS=Symbol.for("react.memo"),hS=Symbol.for("react.lazy"),Jm=Symbol.iterator;function cS(t){return t===null||typeof t!="object"?null:(t=Jm&&t[Jm]||t["@@iterator"],typeof t=="function"?t:null)}var px={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},mx=Object.assign,gx={};function Rs(t,e,r){this.props=t,this.context=e,this.refs=gx,this.updater=r||px}Rs.prototype.isReactComponent={};Rs.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Rs.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function yx(){}yx.prototype=Rs.prototype;function rp(t,e,r){this.props=t,this.context=e,this.refs=gx,this.updater=r||px}var ip=rp.prototype=new yx;ip.constructor=rp;mx(ip,Rs.prototype);ip.isPureReactComponent=!0;var eg=Array.isArray,vx=Object.prototype.hasOwnProperty,np={current:null},xx={key:!0,ref:!0,__self:!0,__source:!0};function _x(t,e,r){var i,n={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)vx.call(e,i)&&!xx.hasOwnProperty(i)&&(n[i]=e[i]);var a=arguments.length-2;if(a===1)n.children=r;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];n.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)n[i]===void 0&&(n[i]=a[i]);return{$$typeof:sa,type:t,key:s,ref:o,props:n,_owner:np.current}}function dS(t,e){return{$$typeof:sa,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function sp(t){return typeof t=="object"&&t!==null&&t.$$typeof===sa}function fS(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var tg=/\/+/g;function gh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?fS(""+t.key):e.toString(36)}function dl(t,e,r,i,n){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case sa:case tS:o=!0}}if(o)return o=t,n=n(o),t=i===""?"."+gh(o,0):i,eg(n)?(r="",t!=null&&(r=t.replace(tg,"$&/")+"/"),dl(n,e,r,"",function(u){return u})):n!=null&&(sp(n)&&(n=dS(n,r+(!n.key||o&&o.key===n.key?"":(""+n.key).replace(tg,"$&/")+"/")+t)),e.push(n)),1;if(o=0,i=i===""?".":i+":",eg(t))for(var a=0;a<t.length;a++){s=t[a];var l=i+gh(s,a);o+=dl(s,e,r,l,n)}else if(l=cS(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=i+gh(s,a++),o+=dl(s,e,r,l,n);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function wa(t,e,r){if(t==null)return t;var i=[],n=0;return dl(t,i,"","",function(s){return e.call(r,s,n++)}),i}function pS(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ft={current:null},fl={transition:null},mS={ReactCurrentDispatcher:ft,ReactCurrentBatchConfig:fl,ReactCurrentOwner:np};function wx(){throw Error("act(...) is not supported in production builds of React.")}se.Children={map:wa,forEach:function(t,e,r){wa(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return wa(t,function(){e++}),e},toArray:function(t){return wa(t,function(e){return e})||[]},only:function(t){if(!sp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};se.Component=Rs;se.Fragment=rS;se.Profiler=nS;se.PureComponent=rp;se.StrictMode=iS;se.Suspense=lS;se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mS;se.act=wx;se.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=mx({},t.props),n=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=np.current),e.key!==void 0&&(n=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)vx.call(e,l)&&!xx.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=r;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];i.children=a}return{$$typeof:sa,type:t.type,key:n,ref:s,props:i,_owner:o}};se.createContext=function(t){return t={$$typeof:oS,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:sS,_context:t},t.Consumer=t};se.createElement=_x;se.createFactory=function(t){var e=_x.bind(null,t);return e.type=t,e};se.createRef=function(){return{current:null}};se.forwardRef=function(t){return{$$typeof:aS,render:t}};se.isValidElement=sp;se.lazy=function(t){return{$$typeof:hS,_payload:{_status:-1,_result:t},_init:pS}};se.memo=function(t,e){return{$$typeof:uS,type:t,compare:e===void 0?null:e}};se.startTransition=function(t){var e=fl.transition;fl.transition={};try{t()}finally{fl.transition=e}};se.unstable_act=wx;se.useCallback=function(t,e){return ft.current.useCallback(t,e)};se.useContext=function(t){return ft.current.useContext(t)};se.useDebugValue=function(){};se.useDeferredValue=function(t){return ft.current.useDeferredValue(t)};se.useEffect=function(t,e){return ft.current.useEffect(t,e)};se.useId=function(){return ft.current.useId()};se.useImperativeHandle=function(t,e,r){return ft.current.useImperativeHandle(t,e,r)};se.useInsertionEffect=function(t,e){return ft.current.useInsertionEffect(t,e)};se.useLayoutEffect=function(t,e){return ft.current.useLayoutEffect(t,e)};se.useMemo=function(t,e){return ft.current.useMemo(t,e)};se.useReducer=function(t,e,r){return ft.current.useReducer(t,e,r)};se.useRef=function(t){return ft.current.useRef(t)};se.useState=function(t){return ft.current.useState(t)};se.useSyncExternalStore=function(t,e,r){return ft.current.useSyncExternalStore(t,e,r)};se.useTransition=function(){return ft.current.useTransition()};se.version="18.3.1";fx.exports=se;var N=fx.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gS=N,yS=Symbol.for("react.element"),vS=Symbol.for("react.fragment"),xS=Object.prototype.hasOwnProperty,_S=gS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,wS={key:!0,ref:!0,__self:!0,__source:!0};function Tx(t,e,r){var i,n={},s=null,o=null;r!==void 0&&(s=""+r),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)xS.call(e,i)&&!wS.hasOwnProperty(i)&&(n[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)n[i]===void 0&&(n[i]=e[i]);return{$$typeof:yS,type:t,key:s,ref:o,props:n,_owner:_S.current}}Fu.Fragment=vS;Fu.jsx=Tx;Fu.jsxs=Tx;dx.exports=Fu;var R=dx.exports,Ex={exports:{}},It={},Sx={exports:{}},Ax={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(I,G){var P=I.length;I.push(G);e:for(;0<P;){var k=P-1>>>1,Z=I[k];if(0<n(Z,G))I[k]=G,I[P]=Z,P=k;else break e}}function r(I){return I.length===0?null:I[0]}function i(I){if(I.length===0)return null;var G=I[0],P=I.pop();if(P!==G){I[0]=P;e:for(var k=0,Z=I.length,le=Z>>>1;k<le;){var oe=2*(k+1)-1,Re=I[oe],ce=oe+1,we=I[ce];if(0>n(Re,P))ce<Z&&0>n(we,Re)?(I[k]=we,I[ce]=P,k=ce):(I[k]=Re,I[oe]=P,k=oe);else if(ce<Z&&0>n(we,P))I[k]=we,I[ce]=P,k=ce;else break e}}return G}function n(I,G){var P=I.sortIndex-G.sortIndex;return P!==0?P:I.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],h=1,c=null,d=3,f=!1,p=!1,g=!1,x=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function m(I){for(var G=r(u);G!==null;){if(G.callback===null)i(u);else if(G.startTime<=I)i(u),G.sortIndex=G.expirationTime,e(l,G);else break;G=r(u)}}function _(I){if(g=!1,m(I),!p)if(r(l)!==null)p=!0,q(w);else{var G=r(u);G!==null&&O(_,G.startTime-I)}}function w(I,G){p=!1,g&&(g=!1,y(T),T=-1),f=!0;var P=d;try{for(m(G),c=r(l);c!==null&&(!(c.expirationTime>G)||I&&!B());){var k=c.callback;if(typeof k=="function"){c.callback=null,d=c.priorityLevel;var Z=k(c.expirationTime<=G);G=t.unstable_now(),typeof Z=="function"?c.callback=Z:c===r(l)&&i(l),m(G)}else i(l);c=r(l)}if(c!==null)var le=!0;else{var oe=r(u);oe!==null&&O(_,oe.startTime-G),le=!1}return le}finally{c=null,d=P,f=!1}}var S=!1,E=null,T=-1,C=5,A=-1;function B(){return!(t.unstable_now()-A<C)}function D(){if(E!==null){var I=t.unstable_now();A=I;var G=!0;try{G=E(!0,I)}finally{G?b():(S=!1,E=null)}}else S=!1}var b;if(typeof v=="function")b=function(){v(D)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,z=M.port2;M.port1.onmessage=D,b=function(){z.postMessage(null)}}else b=function(){x(D,0)};function q(I){E=I,S||(S=!0,b())}function O(I,G){T=x(function(){I(t.unstable_now())},G)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(I){I.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,q(w))},t.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<I?Math.floor(1e3/I):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(I){switch(d){case 1:case 2:case 3:var G=3;break;default:G=d}var P=d;d=G;try{return I()}finally{d=P}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(I,G){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var P=d;d=I;try{return G()}finally{d=P}},t.unstable_scheduleCallback=function(I,G,P){var k=t.unstable_now();switch(typeof P=="object"&&P!==null?(P=P.delay,P=typeof P=="number"&&0<P?k+P:k):P=k,I){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=P+Z,I={id:h++,callback:G,priorityLevel:I,startTime:P,expirationTime:Z,sortIndex:-1},P>k?(I.sortIndex=P,e(u,I),r(l)===null&&I===r(u)&&(g?(y(T),T=-1):g=!0,O(_,P-k))):(I.sortIndex=Z,e(l,I),p||f||(p=!0,q(w))),I},t.unstable_shouldYield=B,t.unstable_wrapCallback=function(I){var G=d;return function(){var P=d;d=G;try{return I.apply(this,arguments)}finally{d=P}}}})(Ax);Sx.exports=Ax;var TS=Sx.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ES=N,Pt=TS;function F(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var bx=new Set,ko={};function yn(t,e){gs(t,e),gs(t+"Capture",e)}function gs(t,e){for(ko[t]=e,t=0;t<e.length;t++)bx.add(e[t])}var $r=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Zc=Object.prototype.hasOwnProperty,SS=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,rg={},ig={};function AS(t){return Zc.call(ig,t)?!0:Zc.call(rg,t)?!1:SS.test(t)?ig[t]=!0:(rg[t]=!0,!1)}function bS(t,e,r,i){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function CS(t,e,r,i){if(e===null||typeof e>"u"||bS(t,e,r,i))return!0;if(i)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function pt(t,e,r,i,n,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=n,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var rt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){rt[t]=new pt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];rt[e]=new pt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){rt[t]=new pt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){rt[t]=new pt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){rt[t]=new pt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){rt[t]=new pt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){rt[t]=new pt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){rt[t]=new pt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){rt[t]=new pt(t,5,!1,t.toLowerCase(),null,!1,!1)});var op=/[\-:]([a-z])/g;function ap(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(op,ap);rt[e]=new pt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(op,ap);rt[e]=new pt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(op,ap);rt[e]=new pt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){rt[t]=new pt(t,1,!1,t.toLowerCase(),null,!1,!1)});rt.xlinkHref=new pt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){rt[t]=new pt(t,1,!1,t.toLowerCase(),null,!0,!0)});function lp(t,e,r,i){var n=rt.hasOwnProperty(e)?rt[e]:null;(n!==null?n.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(CS(e,r,n,i)&&(r=null),i||n===null?AS(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):n.mustUseProperty?t[n.propertyName]=r===null?n.type===3?!1:"":r:(e=n.attributeName,i=n.attributeNamespace,r===null?t.removeAttribute(e):(n=n.type,r=n===3||n===4&&r===!0?"":""+r,i?t.setAttributeNS(i,e,r):t.setAttribute(e,r))))}var Jr=ES.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ta=Symbol.for("react.element"),Nn=Symbol.for("react.portal"),On=Symbol.for("react.fragment"),up=Symbol.for("react.strict_mode"),Qc=Symbol.for("react.profiler"),Cx=Symbol.for("react.provider"),Px=Symbol.for("react.context"),hp=Symbol.for("react.forward_ref"),Jc=Symbol.for("react.suspense"),ed=Symbol.for("react.suspense_list"),cp=Symbol.for("react.memo"),si=Symbol.for("react.lazy"),Rx=Symbol.for("react.offscreen"),ng=Symbol.iterator;function Os(t){return t===null||typeof t!="object"?null:(t=ng&&t[ng]||t["@@iterator"],typeof t=="function"?t:null)}var Ce=Object.assign,yh;function Qs(t){if(yh===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);yh=e&&e[1]||""}return`
`+yh+t}var vh=!1;function xh(t,e){if(!t||vh)return"";vh=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var i=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){i=u}t.call(e.prototype)}else{try{throw Error()}catch(u){i=u}t()}}catch(u){if(u&&i&&typeof u.stack=="string"){for(var n=u.stack.split(`
`),s=i.stack.split(`
`),o=n.length-1,a=s.length-1;1<=o&&0<=a&&n[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(n[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||n[o]!==s[a]){var l=`
`+n[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{vh=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Qs(t):""}function PS(t){switch(t.tag){case 5:return Qs(t.type);case 16:return Qs("Lazy");case 13:return Qs("Suspense");case 19:return Qs("SuspenseList");case 0:case 2:case 15:return t=xh(t.type,!1),t;case 11:return t=xh(t.type.render,!1),t;case 1:return t=xh(t.type,!0),t;default:return""}}function td(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case On:return"Fragment";case Nn:return"Portal";case Qc:return"Profiler";case up:return"StrictMode";case Jc:return"Suspense";case ed:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Px:return(t.displayName||"Context")+".Consumer";case Cx:return(t._context.displayName||"Context")+".Provider";case hp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case cp:return e=t.displayName||null,e!==null?e:td(t.type)||"Memo";case si:e=t._payload,t=t._init;try{return td(t(e))}catch{}}return null}function RS(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return td(e);case 8:return e===up?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ai(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ix(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function IS(t){var e=Ix(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var n=r.get,s=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return n.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ea(t){t._valueTracker||(t._valueTracker=IS(t))}function Mx(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),i="";return t&&(i=Ix(t)?t.checked?"true":"false":t.value),t=i,t!==r?(e.setValue(t),!0):!1}function Ol(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function rd(t,e){var r=e.checked;return Ce({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function sg(t,e){var r=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;r=Ai(e.value!=null?e.value:r),t._wrapperState={initialChecked:i,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function kx(t,e){e=e.checked,e!=null&&lp(t,"checked",e,!1)}function id(t,e){kx(t,e);var r=Ai(e.value),i=e.type;if(r!=null)i==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?nd(t,e.type,r):e.hasOwnProperty("defaultValue")&&nd(t,e.type,Ai(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function og(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function nd(t,e,r){(e!=="number"||Ol(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Js=Array.isArray;function rs(t,e,r,i){if(t=t.options,e){e={};for(var n=0;n<r.length;n++)e["$"+r[n]]=!0;for(r=0;r<t.length;r++)n=e.hasOwnProperty("$"+t[r].value),t[r].selected!==n&&(t[r].selected=n),n&&i&&(t[r].defaultSelected=!0)}else{for(r=""+Ai(r),e=null,n=0;n<t.length;n++){if(t[n].value===r){t[n].selected=!0,i&&(t[n].defaultSelected=!0);return}e!==null||t[n].disabled||(e=t[n])}e!==null&&(e.selected=!0)}}function sd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(F(91));return Ce({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ag(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(F(92));if(Js(r)){if(1<r.length)throw Error(F(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Ai(r)}}function Dx(t,e){var r=Ai(e.value),i=Ai(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),i!=null&&(t.defaultValue=""+i)}function lg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Fx(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function od(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Fx(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Sa,Bx=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,i,n){MSApp.execUnsafeLocalFunction(function(){return t(e,r,i,n)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Sa=Sa||document.createElement("div"),Sa.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Sa.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Do(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var po={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},MS=["Webkit","ms","Moz","O"];Object.keys(po).forEach(function(t){MS.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),po[e]=po[t]})});function Lx(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||po.hasOwnProperty(t)&&po[t]?(""+e).trim():e+"px"}function Nx(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var i=r.indexOf("--")===0,n=Lx(r,e[r],i);r==="float"&&(r="cssFloat"),i?t.setProperty(r,n):t[r]=n}}var kS=Ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ad(t,e){if(e){if(kS[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(F(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(F(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(F(61))}if(e.style!=null&&typeof e.style!="object")throw Error(F(62))}}function ld(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ud=null;function dp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var hd=null,is=null,ns=null;function ug(t){if(t=la(t)){if(typeof hd!="function")throw Error(F(280));var e=t.stateNode;e&&(e=Uu(e),hd(t.stateNode,t.type,e))}}function Ox(t){is?ns?ns.push(t):ns=[t]:is=t}function Ux(){if(is){var t=is,e=ns;if(ns=is=null,ug(t),e)for(t=0;t<e.length;t++)ug(e[t])}}function Gx(t,e){return t(e)}function Vx(){}var _h=!1;function jx(t,e,r){if(_h)return t(e,r);_h=!0;try{return Gx(t,e,r)}finally{_h=!1,(is!==null||ns!==null)&&(Vx(),Ux())}}function Fo(t,e){var r=t.stateNode;if(r===null)return null;var i=Uu(r);if(i===null)return null;r=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(F(231,e,typeof r));return r}var cd=!1;if($r)try{var Us={};Object.defineProperty(Us,"passive",{get:function(){cd=!0}}),window.addEventListener("test",Us,Us),window.removeEventListener("test",Us,Us)}catch{cd=!1}function DS(t,e,r,i,n,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(h){this.onError(h)}}var mo=!1,Ul=null,Gl=!1,dd=null,FS={onError:function(t){mo=!0,Ul=t}};function BS(t,e,r,i,n,s,o,a,l){mo=!1,Ul=null,DS.apply(FS,arguments)}function LS(t,e,r,i,n,s,o,a,l){if(BS.apply(this,arguments),mo){if(mo){var u=Ul;mo=!1,Ul=null}else throw Error(F(198));Gl||(Gl=!0,dd=u)}}function vn(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function zx(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function hg(t){if(vn(t)!==t)throw Error(F(188))}function NS(t){var e=t.alternate;if(!e){if(e=vn(t),e===null)throw Error(F(188));return e!==t?null:t}for(var r=t,i=e;;){var n=r.return;if(n===null)break;var s=n.alternate;if(s===null){if(i=n.return,i!==null){r=i;continue}break}if(n.child===s.child){for(s=n.child;s;){if(s===r)return hg(n),t;if(s===i)return hg(n),e;s=s.sibling}throw Error(F(188))}if(r.return!==i.return)r=n,i=s;else{for(var o=!1,a=n.child;a;){if(a===r){o=!0,r=n,i=s;break}if(a===i){o=!0,i=n,r=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===r){o=!0,r=s,i=n;break}if(a===i){o=!0,i=s,r=n;break}a=a.sibling}if(!o)throw Error(F(189))}}if(r.alternate!==i)throw Error(F(190))}if(r.tag!==3)throw Error(F(188));return r.stateNode.current===r?t:e}function Hx(t){return t=NS(t),t!==null?$x(t):null}function $x(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=$x(t);if(e!==null)return e;t=t.sibling}return null}var Wx=Pt.unstable_scheduleCallback,cg=Pt.unstable_cancelCallback,OS=Pt.unstable_shouldYield,US=Pt.unstable_requestPaint,Be=Pt.unstable_now,GS=Pt.unstable_getCurrentPriorityLevel,fp=Pt.unstable_ImmediatePriority,Xx=Pt.unstable_UserBlockingPriority,Vl=Pt.unstable_NormalPriority,VS=Pt.unstable_LowPriority,Yx=Pt.unstable_IdlePriority,Bu=null,wr=null;function jS(t){if(wr&&typeof wr.onCommitFiberRoot=="function")try{wr.onCommitFiberRoot(Bu,t,void 0,(t.current.flags&128)===128)}catch{}}var er=Math.clz32?Math.clz32:$S,zS=Math.log,HS=Math.LN2;function $S(t){return t>>>=0,t===0?32:31-(zS(t)/HS|0)|0}var Aa=64,ba=4194304;function eo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function jl(t,e){var r=t.pendingLanes;if(r===0)return 0;var i=0,n=t.suspendedLanes,s=t.pingedLanes,o=r&268435455;if(o!==0){var a=o&~n;a!==0?i=eo(a):(s&=o,s!==0&&(i=eo(s)))}else o=r&~n,o!==0?i=eo(o):s!==0&&(i=eo(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&n)&&(n=i&-i,s=e&-e,n>=s||n===16&&(s&4194240)!==0))return e;if(i&4&&(i|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)r=31-er(e),n=1<<r,i|=t[r],e&=~n;return i}function WS(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function XS(t,e){for(var r=t.suspendedLanes,i=t.pingedLanes,n=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-er(s),a=1<<o,l=n[o];l===-1?(!(a&r)||a&i)&&(n[o]=WS(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function fd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Kx(){var t=Aa;return Aa<<=1,!(Aa&4194240)&&(Aa=64),t}function wh(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function oa(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-er(e),t[e]=r}function YS(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<r;){var n=31-er(r),s=1<<n;e[n]=0,i[n]=-1,t[n]=-1,r&=~s}}function pp(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var i=31-er(r),n=1<<i;n&e|t[i]&e&&(t[i]|=e),r&=~n}}var he=0;function qx(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Zx,mp,Qx,Jx,e_,pd=!1,Ca=[],gi=null,yi=null,vi=null,Bo=new Map,Lo=new Map,li=[],KS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function dg(t,e){switch(t){case"focusin":case"focusout":gi=null;break;case"dragenter":case"dragleave":yi=null;break;case"mouseover":case"mouseout":vi=null;break;case"pointerover":case"pointerout":Bo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lo.delete(e.pointerId)}}function Gs(t,e,r,i,n,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:r,eventSystemFlags:i,nativeEvent:s,targetContainers:[n]},e!==null&&(e=la(e),e!==null&&mp(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,n!==null&&e.indexOf(n)===-1&&e.push(n),t)}function qS(t,e,r,i,n){switch(e){case"focusin":return gi=Gs(gi,t,e,r,i,n),!0;case"dragenter":return yi=Gs(yi,t,e,r,i,n),!0;case"mouseover":return vi=Gs(vi,t,e,r,i,n),!0;case"pointerover":var s=n.pointerId;return Bo.set(s,Gs(Bo.get(s)||null,t,e,r,i,n)),!0;case"gotpointercapture":return s=n.pointerId,Lo.set(s,Gs(Lo.get(s)||null,t,e,r,i,n)),!0}return!1}function t_(t){var e=Zi(t.target);if(e!==null){var r=vn(e);if(r!==null){if(e=r.tag,e===13){if(e=zx(r),e!==null){t.blockedOn=e,e_(t.priority,function(){Qx(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function pl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=md(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var i=new r.constructor(r.type,r);ud=i,r.target.dispatchEvent(i),ud=null}else return e=la(r),e!==null&&mp(e),t.blockedOn=r,!1;e.shift()}return!0}function fg(t,e,r){pl(t)&&r.delete(e)}function ZS(){pd=!1,gi!==null&&pl(gi)&&(gi=null),yi!==null&&pl(yi)&&(yi=null),vi!==null&&pl(vi)&&(vi=null),Bo.forEach(fg),Lo.forEach(fg)}function Vs(t,e){t.blockedOn===e&&(t.blockedOn=null,pd||(pd=!0,Pt.unstable_scheduleCallback(Pt.unstable_NormalPriority,ZS)))}function No(t){function e(n){return Vs(n,t)}if(0<Ca.length){Vs(Ca[0],t);for(var r=1;r<Ca.length;r++){var i=Ca[r];i.blockedOn===t&&(i.blockedOn=null)}}for(gi!==null&&Vs(gi,t),yi!==null&&Vs(yi,t),vi!==null&&Vs(vi,t),Bo.forEach(e),Lo.forEach(e),r=0;r<li.length;r++)i=li[r],i.blockedOn===t&&(i.blockedOn=null);for(;0<li.length&&(r=li[0],r.blockedOn===null);)t_(r),r.blockedOn===null&&li.shift()}var ss=Jr.ReactCurrentBatchConfig,zl=!0;function QS(t,e,r,i){var n=he,s=ss.transition;ss.transition=null;try{he=1,gp(t,e,r,i)}finally{he=n,ss.transition=s}}function JS(t,e,r,i){var n=he,s=ss.transition;ss.transition=null;try{he=4,gp(t,e,r,i)}finally{he=n,ss.transition=s}}function gp(t,e,r,i){if(zl){var n=md(t,e,r,i);if(n===null)Mh(t,e,i,Hl,r),dg(t,i);else if(qS(n,t,e,r,i))i.stopPropagation();else if(dg(t,i),e&4&&-1<KS.indexOf(t)){for(;n!==null;){var s=la(n);if(s!==null&&Zx(s),s=md(t,e,r,i),s===null&&Mh(t,e,i,Hl,r),s===n)break;n=s}n!==null&&i.stopPropagation()}else Mh(t,e,i,null,r)}}var Hl=null;function md(t,e,r,i){if(Hl=null,t=dp(i),t=Zi(t),t!==null)if(e=vn(t),e===null)t=null;else if(r=e.tag,r===13){if(t=zx(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Hl=t,null}function r_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(GS()){case fp:return 1;case Xx:return 4;case Vl:case VS:return 16;case Yx:return 536870912;default:return 16}default:return 16}}var ci=null,yp=null,ml=null;function i_(){if(ml)return ml;var t,e=yp,r=e.length,i,n="value"in ci?ci.value:ci.textContent,s=n.length;for(t=0;t<r&&e[t]===n[t];t++);var o=r-t;for(i=1;i<=o&&e[r-i]===n[s-i];i++);return ml=n.slice(t,1<i?1-i:void 0)}function gl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Pa(){return!0}function pg(){return!1}function Mt(t){function e(r,i,n,s,o){this._reactName=r,this._targetInst=n,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(r=t[a],this[a]=r?r(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Pa:pg,this.isPropagationStopped=pg,this}return Ce(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Pa)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Pa)},persist:function(){},isPersistent:Pa}),e}var Is={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vp=Mt(Is),aa=Ce({},Is,{view:0,detail:0}),eA=Mt(aa),Th,Eh,js,Lu=Ce({},aa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==js&&(js&&t.type==="mousemove"?(Th=t.screenX-js.screenX,Eh=t.screenY-js.screenY):Eh=Th=0,js=t),Th)},movementY:function(t){return"movementY"in t?t.movementY:Eh}}),mg=Mt(Lu),tA=Ce({},Lu,{dataTransfer:0}),rA=Mt(tA),iA=Ce({},aa,{relatedTarget:0}),Sh=Mt(iA),nA=Ce({},Is,{animationName:0,elapsedTime:0,pseudoElement:0}),sA=Mt(nA),oA=Ce({},Is,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),aA=Mt(oA),lA=Ce({},Is,{data:0}),gg=Mt(lA),uA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},cA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dA(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=cA[t])?!!e[t]:!1}function xp(){return dA}var fA=Ce({},aa,{key:function(t){if(t.key){var e=uA[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=gl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?hA[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xp,charCode:function(t){return t.type==="keypress"?gl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?gl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),pA=Mt(fA),mA=Ce({},Lu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),yg=Mt(mA),gA=Ce({},aa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xp}),yA=Mt(gA),vA=Ce({},Is,{propertyName:0,elapsedTime:0,pseudoElement:0}),xA=Mt(vA),_A=Ce({},Lu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),wA=Mt(_A),TA=[9,13,27,32],_p=$r&&"CompositionEvent"in window,go=null;$r&&"documentMode"in document&&(go=document.documentMode);var EA=$r&&"TextEvent"in window&&!go,n_=$r&&(!_p||go&&8<go&&11>=go),vg=" ",xg=!1;function s_(t,e){switch(t){case"keyup":return TA.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function o_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Un=!1;function SA(t,e){switch(t){case"compositionend":return o_(e);case"keypress":return e.which!==32?null:(xg=!0,vg);case"textInput":return t=e.data,t===vg&&xg?null:t;default:return null}}function AA(t,e){if(Un)return t==="compositionend"||!_p&&s_(t,e)?(t=i_(),ml=yp=ci=null,Un=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return n_&&e.locale!=="ko"?null:e.data;default:return null}}var bA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _g(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!bA[t.type]:e==="textarea"}function a_(t,e,r,i){Ox(i),e=$l(e,"onChange"),0<e.length&&(r=new vp("onChange","change",null,r,i),t.push({event:r,listeners:e}))}var yo=null,Oo=null;function CA(t){v_(t,0)}function Nu(t){var e=jn(t);if(Mx(e))return t}function PA(t,e){if(t==="change")return e}var l_=!1;if($r){var Ah;if($r){var bh="oninput"in document;if(!bh){var wg=document.createElement("div");wg.setAttribute("oninput","return;"),bh=typeof wg.oninput=="function"}Ah=bh}else Ah=!1;l_=Ah&&(!document.documentMode||9<document.documentMode)}function Tg(){yo&&(yo.detachEvent("onpropertychange",u_),Oo=yo=null)}function u_(t){if(t.propertyName==="value"&&Nu(Oo)){var e=[];a_(e,Oo,t,dp(t)),jx(CA,e)}}function RA(t,e,r){t==="focusin"?(Tg(),yo=e,Oo=r,yo.attachEvent("onpropertychange",u_)):t==="focusout"&&Tg()}function IA(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Nu(Oo)}function MA(t,e){if(t==="click")return Nu(e)}function kA(t,e){if(t==="input"||t==="change")return Nu(e)}function DA(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var nr=typeof Object.is=="function"?Object.is:DA;function Uo(t,e){if(nr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;for(i=0;i<r.length;i++){var n=r[i];if(!Zc.call(e,n)||!nr(t[n],e[n]))return!1}return!0}function Eg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Sg(t,e){var r=Eg(t);t=0;for(var i;r;){if(r.nodeType===3){if(i=t+r.textContent.length,t<=e&&i>=e)return{node:r,offset:e-t};t=i}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Eg(r)}}function h_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?h_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function c_(){for(var t=window,e=Ol();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=Ol(t.document)}return e}function wp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function FA(t){var e=c_(),r=t.focusedElem,i=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&h_(r.ownerDocument.documentElement,r)){if(i!==null&&wp(r)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var n=r.textContent.length,s=Math.min(i.start,n);i=i.end===void 0?s:Math.min(i.end,n),!t.extend&&s>i&&(n=i,i=s,s=n),n=Sg(r,s);var o=Sg(r,i);n&&o&&(t.rangeCount!==1||t.anchorNode!==n.node||t.anchorOffset!==n.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(n.node,n.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var BA=$r&&"documentMode"in document&&11>=document.documentMode,Gn=null,gd=null,vo=null,yd=!1;function Ag(t,e,r){var i=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;yd||Gn==null||Gn!==Ol(i)||(i=Gn,"selectionStart"in i&&wp(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),vo&&Uo(vo,i)||(vo=i,i=$l(gd,"onSelect"),0<i.length&&(e=new vp("onSelect","select",null,e,r),t.push({event:e,listeners:i}),e.target=Gn)))}function Ra(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Vn={animationend:Ra("Animation","AnimationEnd"),animationiteration:Ra("Animation","AnimationIteration"),animationstart:Ra("Animation","AnimationStart"),transitionend:Ra("Transition","TransitionEnd")},Ch={},d_={};$r&&(d_=document.createElement("div").style,"AnimationEvent"in window||(delete Vn.animationend.animation,delete Vn.animationiteration.animation,delete Vn.animationstart.animation),"TransitionEvent"in window||delete Vn.transitionend.transition);function Ou(t){if(Ch[t])return Ch[t];if(!Vn[t])return t;var e=Vn[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in d_)return Ch[t]=e[r];return t}var f_=Ou("animationend"),p_=Ou("animationiteration"),m_=Ou("animationstart"),g_=Ou("transitionend"),y_=new Map,bg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ii(t,e){y_.set(t,e),yn(e,[t])}for(var Ph=0;Ph<bg.length;Ph++){var Rh=bg[Ph],LA=Rh.toLowerCase(),NA=Rh[0].toUpperCase()+Rh.slice(1);Ii(LA,"on"+NA)}Ii(f_,"onAnimationEnd");Ii(p_,"onAnimationIteration");Ii(m_,"onAnimationStart");Ii("dblclick","onDoubleClick");Ii("focusin","onFocus");Ii("focusout","onBlur");Ii(g_,"onTransitionEnd");gs("onMouseEnter",["mouseout","mouseover"]);gs("onMouseLeave",["mouseout","mouseover"]);gs("onPointerEnter",["pointerout","pointerover"]);gs("onPointerLeave",["pointerout","pointerover"]);yn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));yn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));yn("onBeforeInput",["compositionend","keypress","textInput","paste"]);yn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));yn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));yn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var to="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),OA=new Set("cancel close invalid load scroll toggle".split(" ").concat(to));function Cg(t,e,r){var i=t.type||"unknown-event";t.currentTarget=r,LS(i,e,void 0,t),t.currentTarget=null}function v_(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var i=t[r],n=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&n.isPropagationStopped())break e;Cg(n,a,u),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&n.isPropagationStopped())break e;Cg(n,a,u),s=l}}}if(Gl)throw t=dd,Gl=!1,dd=null,t}function pe(t,e){var r=e[Td];r===void 0&&(r=e[Td]=new Set);var i=t+"__bubble";r.has(i)||(x_(e,t,2,!1),r.add(i))}function Ih(t,e,r){var i=0;e&&(i|=4),x_(r,t,i,e)}var Ia="_reactListening"+Math.random().toString(36).slice(2);function Go(t){if(!t[Ia]){t[Ia]=!0,bx.forEach(function(r){r!=="selectionchange"&&(OA.has(r)||Ih(r,!1,t),Ih(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ia]||(e[Ia]=!0,Ih("selectionchange",!1,e))}}function x_(t,e,r,i){switch(r_(e)){case 1:var n=QS;break;case 4:n=JS;break;default:n=gp}r=n.bind(null,e,r,t),n=void 0,!cd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(n=!0),i?n!==void 0?t.addEventListener(e,r,{capture:!0,passive:n}):t.addEventListener(e,r,!0):n!==void 0?t.addEventListener(e,r,{passive:n}):t.addEventListener(e,r,!1)}function Mh(t,e,r,i,n){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===n||a.nodeType===8&&a.parentNode===n)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===n||l.nodeType===8&&l.parentNode===n))return;o=o.return}for(;a!==null;){if(o=Zi(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}jx(function(){var u=s,h=dp(r),c=[];e:{var d=y_.get(t);if(d!==void 0){var f=vp,p=t;switch(t){case"keypress":if(gl(r)===0)break e;case"keydown":case"keyup":f=pA;break;case"focusin":p="focus",f=Sh;break;case"focusout":p="blur",f=Sh;break;case"beforeblur":case"afterblur":f=Sh;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=mg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=rA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=yA;break;case f_:case p_:case m_:f=sA;break;case g_:f=xA;break;case"scroll":f=eA;break;case"wheel":f=wA;break;case"copy":case"cut":case"paste":f=aA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=yg}var g=(e&4)!==0,x=!g&&t==="scroll",y=g?d!==null?d+"Capture":null:d;g=[];for(var v=u,m;v!==null;){m=v;var _=m.stateNode;if(m.tag===5&&_!==null&&(m=_,y!==null&&(_=Fo(v,y),_!=null&&g.push(Vo(v,_,m)))),x)break;v=v.return}0<g.length&&(d=new f(d,p,null,r,h),c.push({event:d,listeners:g}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",d&&r!==ud&&(p=r.relatedTarget||r.fromElement)&&(Zi(p)||p[Wr]))break e;if((f||d)&&(d=h.window===h?h:(d=h.ownerDocument)?d.defaultView||d.parentWindow:window,f?(p=r.relatedTarget||r.toElement,f=u,p=p?Zi(p):null,p!==null&&(x=vn(p),p!==x||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=u),f!==p)){if(g=mg,_="onMouseLeave",y="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(g=yg,_="onPointerLeave",y="onPointerEnter",v="pointer"),x=f==null?d:jn(f),m=p==null?d:jn(p),d=new g(_,v+"leave",f,r,h),d.target=x,d.relatedTarget=m,_=null,Zi(h)===u&&(g=new g(y,v+"enter",p,r,h),g.target=m,g.relatedTarget=x,_=g),x=_,f&&p)t:{for(g=f,y=p,v=0,m=g;m;m=Sn(m))v++;for(m=0,_=y;_;_=Sn(_))m++;for(;0<v-m;)g=Sn(g),v--;for(;0<m-v;)y=Sn(y),m--;for(;v--;){if(g===y||y!==null&&g===y.alternate)break t;g=Sn(g),y=Sn(y)}g=null}else g=null;f!==null&&Pg(c,d,f,g,!1),p!==null&&x!==null&&Pg(c,x,p,g,!0)}}e:{if(d=u?jn(u):window,f=d.nodeName&&d.nodeName.toLowerCase(),f==="select"||f==="input"&&d.type==="file")var w=PA;else if(_g(d))if(l_)w=kA;else{w=IA;var S=RA}else(f=d.nodeName)&&f.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(w=MA);if(w&&(w=w(t,u))){a_(c,w,r,h);break e}S&&S(t,d,u),t==="focusout"&&(S=d._wrapperState)&&S.controlled&&d.type==="number"&&nd(d,"number",d.value)}switch(S=u?jn(u):window,t){case"focusin":(_g(S)||S.contentEditable==="true")&&(Gn=S,gd=u,vo=null);break;case"focusout":vo=gd=Gn=null;break;case"mousedown":yd=!0;break;case"contextmenu":case"mouseup":case"dragend":yd=!1,Ag(c,r,h);break;case"selectionchange":if(BA)break;case"keydown":case"keyup":Ag(c,r,h)}var E;if(_p)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Un?s_(t,r)&&(T="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(T="onCompositionStart");T&&(n_&&r.locale!=="ko"&&(Un||T!=="onCompositionStart"?T==="onCompositionEnd"&&Un&&(E=i_()):(ci=h,yp="value"in ci?ci.value:ci.textContent,Un=!0)),S=$l(u,T),0<S.length&&(T=new gg(T,t,null,r,h),c.push({event:T,listeners:S}),E?T.data=E:(E=o_(r),E!==null&&(T.data=E)))),(E=EA?SA(t,r):AA(t,r))&&(u=$l(u,"onBeforeInput"),0<u.length&&(h=new gg("onBeforeInput","beforeinput",null,r,h),c.push({event:h,listeners:u}),h.data=E))}v_(c,e)})}function Vo(t,e,r){return{instance:t,listener:e,currentTarget:r}}function $l(t,e){for(var r=e+"Capture",i=[];t!==null;){var n=t,s=n.stateNode;n.tag===5&&s!==null&&(n=s,s=Fo(t,r),s!=null&&i.unshift(Vo(t,s,n)),s=Fo(t,e),s!=null&&i.push(Vo(t,s,n))),t=t.return}return i}function Sn(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Pg(t,e,r,i,n){for(var s=e._reactName,o=[];r!==null&&r!==i;){var a=r,l=a.alternate,u=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&u!==null&&(a=u,n?(l=Fo(r,s),l!=null&&o.unshift(Vo(r,l,a))):n||(l=Fo(r,s),l!=null&&o.push(Vo(r,l,a)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var UA=/\r\n?/g,GA=/\u0000|\uFFFD/g;function Rg(t){return(typeof t=="string"?t:""+t).replace(UA,`
`).replace(GA,"")}function Ma(t,e,r){if(e=Rg(e),Rg(t)!==e&&r)throw Error(F(425))}function Wl(){}var vd=null,xd=null;function _d(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var wd=typeof setTimeout=="function"?setTimeout:void 0,VA=typeof clearTimeout=="function"?clearTimeout:void 0,Ig=typeof Promise=="function"?Promise:void 0,jA=typeof queueMicrotask=="function"?queueMicrotask:typeof Ig<"u"?function(t){return Ig.resolve(null).then(t).catch(zA)}:wd;function zA(t){setTimeout(function(){throw t})}function kh(t,e){var r=e,i=0;do{var n=r.nextSibling;if(t.removeChild(r),n&&n.nodeType===8)if(r=n.data,r==="/$"){if(i===0){t.removeChild(n),No(e);return}i--}else r!=="$"&&r!=="$?"&&r!=="$!"||i++;r=n}while(r);No(e)}function xi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Mg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Ms=Math.random().toString(36).slice(2),xr="__reactFiber$"+Ms,jo="__reactProps$"+Ms,Wr="__reactContainer$"+Ms,Td="__reactEvents$"+Ms,HA="__reactListeners$"+Ms,$A="__reactHandles$"+Ms;function Zi(t){var e=t[xr];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Wr]||r[xr]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=Mg(t);t!==null;){if(r=t[xr])return r;t=Mg(t)}return e}t=r,r=t.parentNode}return null}function la(t){return t=t[xr]||t[Wr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function jn(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(F(33))}function Uu(t){return t[jo]||null}var Ed=[],zn=-1;function Mi(t){return{current:t}}function ge(t){0>zn||(t.current=Ed[zn],Ed[zn]=null,zn--)}function fe(t,e){zn++,Ed[zn]=t.current,t.current=e}var bi={},ut=Mi(bi),vt=Mi(!1),ln=bi;function ys(t,e){var r=t.type.contextTypes;if(!r)return bi;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var n={},s;for(s in r)n[s]=e[s];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=n),n}function xt(t){return t=t.childContextTypes,t!=null}function Xl(){ge(vt),ge(ut)}function kg(t,e,r){if(ut.current!==bi)throw Error(F(168));fe(ut,e),fe(vt,r)}function __(t,e,r){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return r;i=i.getChildContext();for(var n in i)if(!(n in e))throw Error(F(108,RS(t)||"Unknown",n));return Ce({},r,i)}function Yl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||bi,ln=ut.current,fe(ut,t),fe(vt,vt.current),!0}function Dg(t,e,r){var i=t.stateNode;if(!i)throw Error(F(169));r?(t=__(t,e,ln),i.__reactInternalMemoizedMergedChildContext=t,ge(vt),ge(ut),fe(ut,t)):ge(vt),fe(vt,r)}var Fr=null,Gu=!1,Dh=!1;function w_(t){Fr===null?Fr=[t]:Fr.push(t)}function WA(t){Gu=!0,w_(t)}function ki(){if(!Dh&&Fr!==null){Dh=!0;var t=0,e=he;try{var r=Fr;for(he=1;t<r.length;t++){var i=r[t];do i=i(!0);while(i!==null)}Fr=null,Gu=!1}catch(n){throw Fr!==null&&(Fr=Fr.slice(t+1)),Wx(fp,ki),n}finally{he=e,Dh=!1}}return null}var Hn=[],$n=0,Kl=null,ql=0,Bt=[],Lt=0,un=null,Br=1,Lr="";function Ui(t,e){Hn[$n++]=ql,Hn[$n++]=Kl,Kl=t,ql=e}function T_(t,e,r){Bt[Lt++]=Br,Bt[Lt++]=Lr,Bt[Lt++]=un,un=t;var i=Br;t=Lr;var n=32-er(i)-1;i&=~(1<<n),r+=1;var s=32-er(e)+n;if(30<s){var o=n-n%5;s=(i&(1<<o)-1).toString(32),i>>=o,n-=o,Br=1<<32-er(e)+n|r<<n|i,Lr=s+t}else Br=1<<s|r<<n|i,Lr=t}function Tp(t){t.return!==null&&(Ui(t,1),T_(t,1,0))}function Ep(t){for(;t===Kl;)Kl=Hn[--$n],Hn[$n]=null,ql=Hn[--$n],Hn[$n]=null;for(;t===un;)un=Bt[--Lt],Bt[Lt]=null,Lr=Bt[--Lt],Bt[Lt]=null,Br=Bt[--Lt],Bt[Lt]=null}var bt=null,At=null,_e=!1,Qt=null;function E_(t,e){var r=Nt(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function Fg(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,bt=t,At=xi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,bt=t,At=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=un!==null?{id:Br,overflow:Lr}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Nt(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,bt=t,At=null,!0):!1;default:return!1}}function Sd(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ad(t){if(_e){var e=At;if(e){var r=e;if(!Fg(t,e)){if(Sd(t))throw Error(F(418));e=xi(r.nextSibling);var i=bt;e&&Fg(t,e)?E_(i,r):(t.flags=t.flags&-4097|2,_e=!1,bt=t)}}else{if(Sd(t))throw Error(F(418));t.flags=t.flags&-4097|2,_e=!1,bt=t}}}function Bg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;bt=t}function ka(t){if(t!==bt)return!1;if(!_e)return Bg(t),_e=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!_d(t.type,t.memoizedProps)),e&&(e=At)){if(Sd(t))throw S_(),Error(F(418));for(;e;)E_(t,e),e=xi(e.nextSibling)}if(Bg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(F(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){At=xi(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}At=null}}else At=bt?xi(t.stateNode.nextSibling):null;return!0}function S_(){for(var t=At;t;)t=xi(t.nextSibling)}function vs(){At=bt=null,_e=!1}function Sp(t){Qt===null?Qt=[t]:Qt.push(t)}var XA=Jr.ReactCurrentBatchConfig;function zs(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(F(309));var i=r.stateNode}if(!i)throw Error(F(147,t));var n=i,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=n.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(F(284));if(!r._owner)throw Error(F(290,t))}return t}function Da(t,e){throw t=Object.prototype.toString.call(e),Error(F(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Lg(t){var e=t._init;return e(t._payload)}function A_(t){function e(y,v){if(t){var m=y.deletions;m===null?(y.deletions=[v],y.flags|=16):m.push(v)}}function r(y,v){if(!t)return null;for(;v!==null;)e(y,v),v=v.sibling;return null}function i(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function n(y,v){return y=Ei(y,v),y.index=0,y.sibling=null,y}function s(y,v,m){return y.index=m,t?(m=y.alternate,m!==null?(m=m.index,m<v?(y.flags|=2,v):m):(y.flags|=2,v)):(y.flags|=1048576,v)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,v,m,_){return v===null||v.tag!==6?(v=Gh(m,y.mode,_),v.return=y,v):(v=n(v,m),v.return=y,v)}function l(y,v,m,_){var w=m.type;return w===On?h(y,v,m.props.children,_,m.key):v!==null&&(v.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===si&&Lg(w)===v.type)?(_=n(v,m.props),_.ref=zs(y,v,m),_.return=y,_):(_=El(m.type,m.key,m.props,null,y.mode,_),_.ref=zs(y,v,m),_.return=y,_)}function u(y,v,m,_){return v===null||v.tag!==4||v.stateNode.containerInfo!==m.containerInfo||v.stateNode.implementation!==m.implementation?(v=Vh(m,y.mode,_),v.return=y,v):(v=n(v,m.children||[]),v.return=y,v)}function h(y,v,m,_,w){return v===null||v.tag!==7?(v=rn(m,y.mode,_,w),v.return=y,v):(v=n(v,m),v.return=y,v)}function c(y,v,m){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Gh(""+v,y.mode,m),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Ta:return m=El(v.type,v.key,v.props,null,y.mode,m),m.ref=zs(y,null,v),m.return=y,m;case Nn:return v=Vh(v,y.mode,m),v.return=y,v;case si:var _=v._init;return c(y,_(v._payload),m)}if(Js(v)||Os(v))return v=rn(v,y.mode,m,null),v.return=y,v;Da(y,v)}return null}function d(y,v,m,_){var w=v!==null?v.key:null;if(typeof m=="string"&&m!==""||typeof m=="number")return w!==null?null:a(y,v,""+m,_);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Ta:return m.key===w?l(y,v,m,_):null;case Nn:return m.key===w?u(y,v,m,_):null;case si:return w=m._init,d(y,v,w(m._payload),_)}if(Js(m)||Os(m))return w!==null?null:h(y,v,m,_,null);Da(y,m)}return null}function f(y,v,m,_,w){if(typeof _=="string"&&_!==""||typeof _=="number")return y=y.get(m)||null,a(v,y,""+_,w);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Ta:return y=y.get(_.key===null?m:_.key)||null,l(v,y,_,w);case Nn:return y=y.get(_.key===null?m:_.key)||null,u(v,y,_,w);case si:var S=_._init;return f(y,v,m,S(_._payload),w)}if(Js(_)||Os(_))return y=y.get(m)||null,h(v,y,_,w,null);Da(v,_)}return null}function p(y,v,m,_){for(var w=null,S=null,E=v,T=v=0,C=null;E!==null&&T<m.length;T++){E.index>T?(C=E,E=null):C=E.sibling;var A=d(y,E,m[T],_);if(A===null){E===null&&(E=C);break}t&&E&&A.alternate===null&&e(y,E),v=s(A,v,T),S===null?w=A:S.sibling=A,S=A,E=C}if(T===m.length)return r(y,E),_e&&Ui(y,T),w;if(E===null){for(;T<m.length;T++)E=c(y,m[T],_),E!==null&&(v=s(E,v,T),S===null?w=E:S.sibling=E,S=E);return _e&&Ui(y,T),w}for(E=i(y,E);T<m.length;T++)C=f(E,y,T,m[T],_),C!==null&&(t&&C.alternate!==null&&E.delete(C.key===null?T:C.key),v=s(C,v,T),S===null?w=C:S.sibling=C,S=C);return t&&E.forEach(function(B){return e(y,B)}),_e&&Ui(y,T),w}function g(y,v,m,_){var w=Os(m);if(typeof w!="function")throw Error(F(150));if(m=w.call(m),m==null)throw Error(F(151));for(var S=w=null,E=v,T=v=0,C=null,A=m.next();E!==null&&!A.done;T++,A=m.next()){E.index>T?(C=E,E=null):C=E.sibling;var B=d(y,E,A.value,_);if(B===null){E===null&&(E=C);break}t&&E&&B.alternate===null&&e(y,E),v=s(B,v,T),S===null?w=B:S.sibling=B,S=B,E=C}if(A.done)return r(y,E),_e&&Ui(y,T),w;if(E===null){for(;!A.done;T++,A=m.next())A=c(y,A.value,_),A!==null&&(v=s(A,v,T),S===null?w=A:S.sibling=A,S=A);return _e&&Ui(y,T),w}for(E=i(y,E);!A.done;T++,A=m.next())A=f(E,y,T,A.value,_),A!==null&&(t&&A.alternate!==null&&E.delete(A.key===null?T:A.key),v=s(A,v,T),S===null?w=A:S.sibling=A,S=A);return t&&E.forEach(function(D){return e(y,D)}),_e&&Ui(y,T),w}function x(y,v,m,_){if(typeof m=="object"&&m!==null&&m.type===On&&m.key===null&&(m=m.props.children),typeof m=="object"&&m!==null){switch(m.$$typeof){case Ta:e:{for(var w=m.key,S=v;S!==null;){if(S.key===w){if(w=m.type,w===On){if(S.tag===7){r(y,S.sibling),v=n(S,m.props.children),v.return=y,y=v;break e}}else if(S.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===si&&Lg(w)===S.type){r(y,S.sibling),v=n(S,m.props),v.ref=zs(y,S,m),v.return=y,y=v;break e}r(y,S);break}else e(y,S);S=S.sibling}m.type===On?(v=rn(m.props.children,y.mode,_,m.key),v.return=y,y=v):(_=El(m.type,m.key,m.props,null,y.mode,_),_.ref=zs(y,v,m),_.return=y,y=_)}return o(y);case Nn:e:{for(S=m.key;v!==null;){if(v.key===S)if(v.tag===4&&v.stateNode.containerInfo===m.containerInfo&&v.stateNode.implementation===m.implementation){r(y,v.sibling),v=n(v,m.children||[]),v.return=y,y=v;break e}else{r(y,v);break}else e(y,v);v=v.sibling}v=Vh(m,y.mode,_),v.return=y,y=v}return o(y);case si:return S=m._init,x(y,v,S(m._payload),_)}if(Js(m))return p(y,v,m,_);if(Os(m))return g(y,v,m,_);Da(y,m)}return typeof m=="string"&&m!==""||typeof m=="number"?(m=""+m,v!==null&&v.tag===6?(r(y,v.sibling),v=n(v,m),v.return=y,y=v):(r(y,v),v=Gh(m,y.mode,_),v.return=y,y=v),o(y)):r(y,v)}return x}var xs=A_(!0),b_=A_(!1),Zl=Mi(null),Ql=null,Wn=null,Ap=null;function bp(){Ap=Wn=Ql=null}function Cp(t){var e=Zl.current;ge(Zl),t._currentValue=e}function bd(t,e,r){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===r)break;t=t.return}}function os(t,e){Ql=t,Ap=Wn=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(gt=!0),t.firstContext=null)}function jt(t){var e=t._currentValue;if(Ap!==t)if(t={context:t,memoizedValue:e,next:null},Wn===null){if(Ql===null)throw Error(F(308));Wn=t,Ql.dependencies={lanes:0,firstContext:t}}else Wn=Wn.next=t;return e}var Qi=null;function Pp(t){Qi===null?Qi=[t]:Qi.push(t)}function C_(t,e,r,i){var n=e.interleaved;return n===null?(r.next=r,Pp(e)):(r.next=n.next,n.next=r),e.interleaved=r,Xr(t,i)}function Xr(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var oi=!1;function Rp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function P_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Vr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function _i(t,e,r){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,ue&2){var n=i.pending;return n===null?e.next=e:(e.next=n.next,n.next=e),i.pending=e,Xr(t,r)}return n=i.interleaved,n===null?(e.next=e,Pp(i)):(e.next=n.next,n.next=e),i.interleaved=e,Xr(t,r)}function yl(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,r|=i,e.lanes=r,pp(t,r)}}function Ng(t,e){var r=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,r===i)){var n=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?n=s=o:s=s.next=o,r=r.next}while(r!==null);s===null?n=s=e:s=s.next=e}else n=s=e;r={baseState:i.baseState,firstBaseUpdate:n,lastBaseUpdate:s,shared:i.shared,effects:i.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function Jl(t,e,r,i){var n=t.updateQueue;oi=!1;var s=n.firstBaseUpdate,o=n.lastBaseUpdate,a=n.shared.pending;if(a!==null){n.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=l))}if(s!==null){var c=n.baseState;o=0,h=u=l=null,a=s;do{var d=a.lane,f=a.eventTime;if((i&d)===d){h!==null&&(h=h.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,g=a;switch(d=e,f=r,g.tag){case 1:if(p=g.payload,typeof p=="function"){c=p.call(f,c,d);break e}c=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,d=typeof p=="function"?p.call(f,c,d):p,d==null)break e;c=Ce({},c,d);break e;case 2:oi=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,d=n.effects,d===null?n.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=f,l=c):h=h.next=f,o|=d;if(a=a.next,a===null){if(a=n.shared.pending,a===null)break;d=a,a=d.next,d.next=null,n.lastBaseUpdate=d,n.shared.pending=null}}while(!0);if(h===null&&(l=c),n.baseState=l,n.firstBaseUpdate=u,n.lastBaseUpdate=h,e=n.shared.interleaved,e!==null){n=e;do o|=n.lane,n=n.next;while(n!==e)}else s===null&&(n.shared.lanes=0);cn|=o,t.lanes=o,t.memoizedState=c}}function Og(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],n=i.callback;if(n!==null){if(i.callback=null,i=r,typeof n!="function")throw Error(F(191,n));n.call(i)}}}var ua={},Tr=Mi(ua),zo=Mi(ua),Ho=Mi(ua);function Ji(t){if(t===ua)throw Error(F(174));return t}function Ip(t,e){switch(fe(Ho,e),fe(zo,t),fe(Tr,ua),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:od(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=od(e,t)}ge(Tr),fe(Tr,e)}function _s(){ge(Tr),ge(zo),ge(Ho)}function R_(t){Ji(Ho.current);var e=Ji(Tr.current),r=od(e,t.type);e!==r&&(fe(zo,t),fe(Tr,r))}function Mp(t){zo.current===t&&(ge(Tr),ge(zo))}var Ee=Mi(0);function eu(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Fh=[];function kp(){for(var t=0;t<Fh.length;t++)Fh[t]._workInProgressVersionPrimary=null;Fh.length=0}var vl=Jr.ReactCurrentDispatcher,Bh=Jr.ReactCurrentBatchConfig,hn=0,be=null,ze=null,We=null,tu=!1,xo=!1,$o=0,YA=0;function nt(){throw Error(F(321))}function Dp(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!nr(t[r],e[r]))return!1;return!0}function Fp(t,e,r,i,n,s){if(hn=s,be=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,vl.current=t===null||t.memoizedState===null?QA:JA,t=r(i,n),xo){s=0;do{if(xo=!1,$o=0,25<=s)throw Error(F(301));s+=1,We=ze=null,e.updateQueue=null,vl.current=eb,t=r(i,n)}while(xo)}if(vl.current=ru,e=ze!==null&&ze.next!==null,hn=0,We=ze=be=null,tu=!1,e)throw Error(F(300));return t}function Bp(){var t=$o!==0;return $o=0,t}function mr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return We===null?be.memoizedState=We=t:We=We.next=t,We}function zt(){if(ze===null){var t=be.alternate;t=t!==null?t.memoizedState:null}else t=ze.next;var e=We===null?be.memoizedState:We.next;if(e!==null)We=e,ze=t;else{if(t===null)throw Error(F(310));ze=t,t={memoizedState:ze.memoizedState,baseState:ze.baseState,baseQueue:ze.baseQueue,queue:ze.queue,next:null},We===null?be.memoizedState=We=t:We=We.next=t}return We}function Wo(t,e){return typeof e=="function"?e(t):e}function Lh(t){var e=zt(),r=e.queue;if(r===null)throw Error(F(311));r.lastRenderedReducer=t;var i=ze,n=i.baseQueue,s=r.pending;if(s!==null){if(n!==null){var o=n.next;n.next=s.next,s.next=o}i.baseQueue=n=s,r.pending=null}if(n!==null){s=n.next,i=i.baseState;var a=o=null,l=null,u=s;do{var h=u.lane;if((hn&h)===h)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:t(i,u.action);else{var c={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=c,o=i):l=l.next=c,be.lanes|=h,cn|=h}u=u.next}while(u!==null&&u!==s);l===null?o=i:l.next=a,nr(i,e.memoizedState)||(gt=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,r.lastRenderedState=i}if(t=r.interleaved,t!==null){n=t;do s=n.lane,be.lanes|=s,cn|=s,n=n.next;while(n!==t)}else n===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Nh(t){var e=zt(),r=e.queue;if(r===null)throw Error(F(311));r.lastRenderedReducer=t;var i=r.dispatch,n=r.pending,s=e.memoizedState;if(n!==null){r.pending=null;var o=n=n.next;do s=t(s,o.action),o=o.next;while(o!==n);nr(s,e.memoizedState)||(gt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),r.lastRenderedState=s}return[s,i]}function I_(){}function M_(t,e){var r=be,i=zt(),n=e(),s=!nr(i.memoizedState,n);if(s&&(i.memoizedState=n,gt=!0),i=i.queue,Lp(F_.bind(null,r,i,t),[t]),i.getSnapshot!==e||s||We!==null&&We.memoizedState.tag&1){if(r.flags|=2048,Xo(9,D_.bind(null,r,i,n,e),void 0,null),Ye===null)throw Error(F(349));hn&30||k_(r,e,n)}return n}function k_(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=be.updateQueue,e===null?(e={lastEffect:null,stores:null},be.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function D_(t,e,r,i){e.value=r,e.getSnapshot=i,B_(e)&&L_(t)}function F_(t,e,r){return r(function(){B_(e)&&L_(t)})}function B_(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!nr(t,r)}catch{return!0}}function L_(t){var e=Xr(t,1);e!==null&&tr(e,t,1,-1)}function Ug(t){var e=mr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Wo,lastRenderedState:t},e.queue=t,t=t.dispatch=ZA.bind(null,be,t),[e.memoizedState,t]}function Xo(t,e,r,i){return t={tag:t,create:e,destroy:r,deps:i,next:null},e=be.updateQueue,e===null?(e={lastEffect:null,stores:null},be.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(i=r.next,r.next=t,t.next=i,e.lastEffect=t)),t}function N_(){return zt().memoizedState}function xl(t,e,r,i){var n=mr();be.flags|=t,n.memoizedState=Xo(1|e,r,void 0,i===void 0?null:i)}function Vu(t,e,r,i){var n=zt();i=i===void 0?null:i;var s=void 0;if(ze!==null){var o=ze.memoizedState;if(s=o.destroy,i!==null&&Dp(i,o.deps)){n.memoizedState=Xo(e,r,s,i);return}}be.flags|=t,n.memoizedState=Xo(1|e,r,s,i)}function Gg(t,e){return xl(8390656,8,t,e)}function Lp(t,e){return Vu(2048,8,t,e)}function O_(t,e){return Vu(4,2,t,e)}function U_(t,e){return Vu(4,4,t,e)}function G_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function V_(t,e,r){return r=r!=null?r.concat([t]):null,Vu(4,4,G_.bind(null,e,t),r)}function Np(){}function j_(t,e){var r=zt();e=e===void 0?null:e;var i=r.memoizedState;return i!==null&&e!==null&&Dp(e,i[1])?i[0]:(r.memoizedState=[t,e],t)}function z_(t,e){var r=zt();e=e===void 0?null:e;var i=r.memoizedState;return i!==null&&e!==null&&Dp(e,i[1])?i[0]:(t=t(),r.memoizedState=[t,e],t)}function H_(t,e,r){return hn&21?(nr(r,e)||(r=Kx(),be.lanes|=r,cn|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,gt=!0),t.memoizedState=r)}function KA(t,e){var r=he;he=r!==0&&4>r?r:4,t(!0);var i=Bh.transition;Bh.transition={};try{t(!1),e()}finally{he=r,Bh.transition=i}}function $_(){return zt().memoizedState}function qA(t,e,r){var i=Ti(t);if(r={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null},W_(t))X_(e,r);else if(r=C_(t,e,r,i),r!==null){var n=dt();tr(r,t,i,n),Y_(r,e,i)}}function ZA(t,e,r){var i=Ti(t),n={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null};if(W_(t))X_(e,n);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,r);if(n.hasEagerState=!0,n.eagerState=a,nr(a,o)){var l=e.interleaved;l===null?(n.next=n,Pp(e)):(n.next=l.next,l.next=n),e.interleaved=n;return}}catch{}finally{}r=C_(t,e,n,i),r!==null&&(n=dt(),tr(r,t,i,n),Y_(r,e,i))}}function W_(t){var e=t.alternate;return t===be||e!==null&&e===be}function X_(t,e){xo=tu=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function Y_(t,e,r){if(r&4194240){var i=e.lanes;i&=t.pendingLanes,r|=i,e.lanes=r,pp(t,r)}}var ru={readContext:jt,useCallback:nt,useContext:nt,useEffect:nt,useImperativeHandle:nt,useInsertionEffect:nt,useLayoutEffect:nt,useMemo:nt,useReducer:nt,useRef:nt,useState:nt,useDebugValue:nt,useDeferredValue:nt,useTransition:nt,useMutableSource:nt,useSyncExternalStore:nt,useId:nt,unstable_isNewReconciler:!1},QA={readContext:jt,useCallback:function(t,e){return mr().memoizedState=[t,e===void 0?null:e],t},useContext:jt,useEffect:Gg,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,xl(4194308,4,G_.bind(null,e,t),r)},useLayoutEffect:function(t,e){return xl(4194308,4,t,e)},useInsertionEffect:function(t,e){return xl(4,2,t,e)},useMemo:function(t,e){var r=mr();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var i=mr();return e=r!==void 0?r(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=qA.bind(null,be,t),[i.memoizedState,t]},useRef:function(t){var e=mr();return t={current:t},e.memoizedState=t},useState:Ug,useDebugValue:Np,useDeferredValue:function(t){return mr().memoizedState=t},useTransition:function(){var t=Ug(!1),e=t[0];return t=KA.bind(null,t[1]),mr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var i=be,n=mr();if(_e){if(r===void 0)throw Error(F(407));r=r()}else{if(r=e(),Ye===null)throw Error(F(349));hn&30||k_(i,e,r)}n.memoizedState=r;var s={value:r,getSnapshot:e};return n.queue=s,Gg(F_.bind(null,i,s,t),[t]),i.flags|=2048,Xo(9,D_.bind(null,i,s,r,e),void 0,null),r},useId:function(){var t=mr(),e=Ye.identifierPrefix;if(_e){var r=Lr,i=Br;r=(i&~(1<<32-er(i)-1)).toString(32)+r,e=":"+e+"R"+r,r=$o++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=YA++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},JA={readContext:jt,useCallback:j_,useContext:jt,useEffect:Lp,useImperativeHandle:V_,useInsertionEffect:O_,useLayoutEffect:U_,useMemo:z_,useReducer:Lh,useRef:N_,useState:function(){return Lh(Wo)},useDebugValue:Np,useDeferredValue:function(t){var e=zt();return H_(e,ze.memoizedState,t)},useTransition:function(){var t=Lh(Wo)[0],e=zt().memoizedState;return[t,e]},useMutableSource:I_,useSyncExternalStore:M_,useId:$_,unstable_isNewReconciler:!1},eb={readContext:jt,useCallback:j_,useContext:jt,useEffect:Lp,useImperativeHandle:V_,useInsertionEffect:O_,useLayoutEffect:U_,useMemo:z_,useReducer:Nh,useRef:N_,useState:function(){return Nh(Wo)},useDebugValue:Np,useDeferredValue:function(t){var e=zt();return ze===null?e.memoizedState=t:H_(e,ze.memoizedState,t)},useTransition:function(){var t=Nh(Wo)[0],e=zt().memoizedState;return[t,e]},useMutableSource:I_,useSyncExternalStore:M_,useId:$_,unstable_isNewReconciler:!1};function qt(t,e){if(t&&t.defaultProps){e=Ce({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function Cd(t,e,r,i){e=t.memoizedState,r=r(i,e),r=r==null?e:Ce({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var ju={isMounted:function(t){return(t=t._reactInternals)?vn(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var i=dt(),n=Ti(t),s=Vr(i,n);s.payload=e,r!=null&&(s.callback=r),e=_i(t,s,n),e!==null&&(tr(e,t,n,i),yl(e,t,n))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var i=dt(),n=Ti(t),s=Vr(i,n);s.tag=1,s.payload=e,r!=null&&(s.callback=r),e=_i(t,s,n),e!==null&&(tr(e,t,n,i),yl(e,t,n))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=dt(),i=Ti(t),n=Vr(r,i);n.tag=2,e!=null&&(n.callback=e),e=_i(t,n,i),e!==null&&(tr(e,t,i,r),yl(e,t,i))}};function Vg(t,e,r,i,n,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!Uo(r,i)||!Uo(n,s):!0}function K_(t,e,r){var i=!1,n=bi,s=e.contextType;return typeof s=="object"&&s!==null?s=jt(s):(n=xt(e)?ln:ut.current,i=e.contextTypes,s=(i=i!=null)?ys(t,n):bi),e=new e(r,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ju,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=n,t.__reactInternalMemoizedMaskedChildContext=s),e}function jg(t,e,r,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,i),e.state!==t&&ju.enqueueReplaceState(e,e.state,null)}function Pd(t,e,r,i){var n=t.stateNode;n.props=r,n.state=t.memoizedState,n.refs={},Rp(t);var s=e.contextType;typeof s=="object"&&s!==null?n.context=jt(s):(s=xt(e)?ln:ut.current,n.context=ys(t,s)),n.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Cd(t,e,s,r),n.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(e=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),e!==n.state&&ju.enqueueReplaceState(n,n.state,null),Jl(t,r,n,i),n.state=t.memoizedState),typeof n.componentDidMount=="function"&&(t.flags|=4194308)}function ws(t,e){try{var r="",i=e;do r+=PS(i),i=i.return;while(i);var n=r}catch(s){n=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:n,digest:null}}function Oh(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function Rd(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var tb=typeof WeakMap=="function"?WeakMap:Map;function q_(t,e,r){r=Vr(-1,r),r.tag=3,r.payload={element:null};var i=e.value;return r.callback=function(){nu||(nu=!0,Ud=i),Rd(t,e)},r}function Z_(t,e,r){r=Vr(-1,r),r.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var n=e.value;r.payload=function(){return i(n)},r.callback=function(){Rd(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){Rd(t,e),typeof i!="function"&&(wi===null?wi=new Set([this]):wi.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function zg(t,e,r){var i=t.pingCache;if(i===null){i=t.pingCache=new tb;var n=new Set;i.set(e,n)}else n=i.get(e),n===void 0&&(n=new Set,i.set(e,n));n.has(r)||(n.add(r),t=mb.bind(null,t,e,r),e.then(t,t))}function Hg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function $g(t,e,r,i,n){return t.mode&1?(t.flags|=65536,t.lanes=n,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Vr(-1,1),e.tag=2,_i(r,e,1))),r.lanes|=1),t)}var rb=Jr.ReactCurrentOwner,gt=!1;function ht(t,e,r,i){e.child=t===null?b_(e,null,r,i):xs(e,t.child,r,i)}function Wg(t,e,r,i,n){r=r.render;var s=e.ref;return os(e,n),i=Fp(t,e,r,i,s,n),r=Bp(),t!==null&&!gt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n,Yr(t,e,n)):(_e&&r&&Tp(e),e.flags|=1,ht(t,e,i,n),e.child)}function Xg(t,e,r,i,n){if(t===null){var s=r.type;return typeof s=="function"&&!$p(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=s,Q_(t,e,s,i,n)):(t=El(r.type,null,i,e,e.mode,n),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&n)){var o=s.memoizedProps;if(r=r.compare,r=r!==null?r:Uo,r(o,i)&&t.ref===e.ref)return Yr(t,e,n)}return e.flags|=1,t=Ei(s,i),t.ref=e.ref,t.return=e,e.child=t}function Q_(t,e,r,i,n){if(t!==null){var s=t.memoizedProps;if(Uo(s,i)&&t.ref===e.ref)if(gt=!1,e.pendingProps=i=s,(t.lanes&n)!==0)t.flags&131072&&(gt=!0);else return e.lanes=t.lanes,Yr(t,e,n)}return Id(t,e,r,i,n)}function J_(t,e,r){var i=e.pendingProps,n=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},fe(Yn,Et),Et|=r;else{if(!(r&1073741824))return t=s!==null?s.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,fe(Yn,Et),Et|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:r,fe(Yn,Et),Et|=i}else s!==null?(i=s.baseLanes|r,e.memoizedState=null):i=r,fe(Yn,Et),Et|=i;return ht(t,e,n,r),e.child}function e1(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function Id(t,e,r,i,n){var s=xt(r)?ln:ut.current;return s=ys(e,s),os(e,n),r=Fp(t,e,r,i,s,n),i=Bp(),t!==null&&!gt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n,Yr(t,e,n)):(_e&&i&&Tp(e),e.flags|=1,ht(t,e,r,n),e.child)}function Yg(t,e,r,i,n){if(xt(r)){var s=!0;Yl(e)}else s=!1;if(os(e,n),e.stateNode===null)_l(t,e),K_(e,r,i),Pd(e,r,i,n),i=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=jt(u):(u=xt(r)?ln:ut.current,u=ys(e,u));var h=r.getDerivedStateFromProps,c=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";c||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==u)&&jg(e,o,i,u),oi=!1;var d=e.memoizedState;o.state=d,Jl(e,i,o,n),l=e.memoizedState,a!==i||d!==l||vt.current||oi?(typeof h=="function"&&(Cd(e,r,h,i),l=e.memoizedState),(a=oi||Vg(e,r,a,i,d,l,u))?(c||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=u,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,P_(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:qt(e.type,a),o.props=u,c=e.pendingProps,d=o.context,l=r.contextType,typeof l=="object"&&l!==null?l=jt(l):(l=xt(r)?ln:ut.current,l=ys(e,l));var f=r.getDerivedStateFromProps;(h=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==c||d!==l)&&jg(e,o,i,l),oi=!1,d=e.memoizedState,o.state=d,Jl(e,i,o,n);var p=e.memoizedState;a!==c||d!==p||vt.current||oi?(typeof f=="function"&&(Cd(e,r,f,i),p=e.memoizedState),(u=oi||Vg(e,r,u,i,d,p,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=p),o.props=i,o.state=p,o.context=l,i=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),i=!1)}return Md(t,e,r,i,s,n)}function Md(t,e,r,i,n,s){e1(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return n&&Dg(e,r,!1),Yr(t,e,s);i=e.stateNode,rb.current=e;var a=o&&typeof r.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=xs(e,t.child,null,s),e.child=xs(e,null,a,s)):ht(t,e,a,s),e.memoizedState=i.state,n&&Dg(e,r,!0),e.child}function t1(t){var e=t.stateNode;e.pendingContext?kg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&kg(t,e.context,!1),Ip(t,e.containerInfo)}function Kg(t,e,r,i,n){return vs(),Sp(n),e.flags|=256,ht(t,e,r,i),e.child}var kd={dehydrated:null,treeContext:null,retryLane:0};function Dd(t){return{baseLanes:t,cachePool:null,transitions:null}}function r1(t,e,r){var i=e.pendingProps,n=Ee.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(n&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(n|=1),fe(Ee,n&1),t===null)return Ad(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,t=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=$u(o,i,0,null),t=rn(t,i,r,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Dd(r),e.memoizedState=kd,t):Op(e,o));if(n=t.memoizedState,n!==null&&(a=n.dehydrated,a!==null))return ib(t,e,o,i,a,n,r);if(s){s=i.fallback,o=e.mode,n=t.child,a=n.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==n?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=Ei(n,l),i.subtreeFlags=n.subtreeFlags&14680064),a!==null?s=Ei(a,s):(s=rn(s,o,r,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=t.child.memoizedState,o=o===null?Dd(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~r,e.memoizedState=kd,i}return s=t.child,t=s.sibling,i=Ei(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=r),i.return=e,i.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=i,e.memoizedState=null,i}function Op(t,e){return e=$u({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Fa(t,e,r,i){return i!==null&&Sp(i),xs(e,t.child,null,r),t=Op(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function ib(t,e,r,i,n,s,o){if(r)return e.flags&256?(e.flags&=-257,i=Oh(Error(F(422))),Fa(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=i.fallback,n=e.mode,i=$u({mode:"visible",children:i.children},n,0,null),s=rn(s,n,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&xs(e,t.child,null,o),e.child.memoizedState=Dd(o),e.memoizedState=kd,s);if(!(e.mode&1))return Fa(t,e,o,null);if(n.data==="$!"){if(i=n.nextSibling&&n.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(F(419)),i=Oh(s,i,void 0),Fa(t,e,o,i)}if(a=(o&t.childLanes)!==0,gt||a){if(i=Ye,i!==null){switch(o&-o){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=n&(i.suspendedLanes|o)?0:n,n!==0&&n!==s.retryLane&&(s.retryLane=n,Xr(t,n),tr(i,t,n,-1))}return Hp(),i=Oh(Error(F(421))),Fa(t,e,o,i)}return n.data==="$?"?(e.flags|=128,e.child=t.child,e=gb.bind(null,t),n._reactRetry=e,null):(t=s.treeContext,At=xi(n.nextSibling),bt=e,_e=!0,Qt=null,t!==null&&(Bt[Lt++]=Br,Bt[Lt++]=Lr,Bt[Lt++]=un,Br=t.id,Lr=t.overflow,un=e),e=Op(e,i.children),e.flags|=4096,e)}function qg(t,e,r){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),bd(t.return,e,r)}function Uh(t,e,r,i,n){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:r,tailMode:n}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=r,s.tailMode=n)}function i1(t,e,r){var i=e.pendingProps,n=i.revealOrder,s=i.tail;if(ht(t,e,i.children,r),i=Ee.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&qg(t,r,e);else if(t.tag===19)qg(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(fe(Ee,i),!(e.mode&1))e.memoizedState=null;else switch(n){case"forwards":for(r=e.child,n=null;r!==null;)t=r.alternate,t!==null&&eu(t)===null&&(n=r),r=r.sibling;r=n,r===null?(n=e.child,e.child=null):(n=r.sibling,r.sibling=null),Uh(e,!1,n,r,s);break;case"backwards":for(r=null,n=e.child,e.child=null;n!==null;){if(t=n.alternate,t!==null&&eu(t)===null){e.child=n;break}t=n.sibling,n.sibling=r,r=n,n=t}Uh(e,!0,r,null,s);break;case"together":Uh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function _l(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Yr(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),cn|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(F(153));if(e.child!==null){for(t=e.child,r=Ei(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Ei(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function nb(t,e,r){switch(e.tag){case 3:t1(e),vs();break;case 5:R_(e);break;case 1:xt(e.type)&&Yl(e);break;case 4:Ip(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,n=e.memoizedProps.value;fe(Zl,i._currentValue),i._currentValue=n;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(fe(Ee,Ee.current&1),e.flags|=128,null):r&e.child.childLanes?r1(t,e,r):(fe(Ee,Ee.current&1),t=Yr(t,e,r),t!==null?t.sibling:null);fe(Ee,Ee.current&1);break;case 19:if(i=(r&e.childLanes)!==0,t.flags&128){if(i)return i1(t,e,r);e.flags|=128}if(n=e.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),fe(Ee,Ee.current),i)break;return null;case 22:case 23:return e.lanes=0,J_(t,e,r)}return Yr(t,e,r)}var n1,Fd,s1,o1;n1=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Fd=function(){};s1=function(t,e,r,i){var n=t.memoizedProps;if(n!==i){t=e.stateNode,Ji(Tr.current);var s=null;switch(r){case"input":n=rd(t,n),i=rd(t,i),s=[];break;case"select":n=Ce({},n,{value:void 0}),i=Ce({},i,{value:void 0}),s=[];break;case"textarea":n=sd(t,n),i=sd(t,i),s=[];break;default:typeof n.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=Wl)}ad(r,i);var o;r=null;for(u in n)if(!i.hasOwnProperty(u)&&n.hasOwnProperty(u)&&n[u]!=null)if(u==="style"){var a=n[u];for(o in a)a.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ko.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in i){var l=i[u];if(a=n!=null?n[u]:void 0,i.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(r||(r={}),r[o]=l[o])}else r||(s||(s=[]),s.push(u,r)),r=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ko.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&pe("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}r&&(s=s||[]).push("style",r);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};o1=function(t,e,r,i){r!==i&&(e.flags|=4)};function Hs(t,e){if(!_e)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function st(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,i=0;if(e)for(var n=t.child;n!==null;)r|=n.lanes|n.childLanes,i|=n.subtreeFlags&14680064,i|=n.flags&14680064,n.return=t,n=n.sibling;else for(n=t.child;n!==null;)r|=n.lanes|n.childLanes,i|=n.subtreeFlags,i|=n.flags,n.return=t,n=n.sibling;return t.subtreeFlags|=i,t.childLanes=r,e}function sb(t,e,r){var i=e.pendingProps;switch(Ep(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return st(e),null;case 1:return xt(e.type)&&Xl(),st(e),null;case 3:return i=e.stateNode,_s(),ge(vt),ge(ut),kp(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(ka(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Qt!==null&&(jd(Qt),Qt=null))),Fd(t,e),st(e),null;case 5:Mp(e);var n=Ji(Ho.current);if(r=e.type,t!==null&&e.stateNode!=null)s1(t,e,r,i,n),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(F(166));return st(e),null}if(t=Ji(Tr.current),ka(e)){i=e.stateNode,r=e.type;var s=e.memoizedProps;switch(i[xr]=e,i[jo]=s,t=(e.mode&1)!==0,r){case"dialog":pe("cancel",i),pe("close",i);break;case"iframe":case"object":case"embed":pe("load",i);break;case"video":case"audio":for(n=0;n<to.length;n++)pe(to[n],i);break;case"source":pe("error",i);break;case"img":case"image":case"link":pe("error",i),pe("load",i);break;case"details":pe("toggle",i);break;case"input":sg(i,s),pe("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},pe("invalid",i);break;case"textarea":ag(i,s),pe("invalid",i)}ad(r,s),n=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&Ma(i.textContent,a,t),n=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Ma(i.textContent,a,t),n=["children",""+a]):ko.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&pe("scroll",i)}switch(r){case"input":Ea(i),og(i,s,!0);break;case"textarea":Ea(i),lg(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=Wl)}i=n,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=n.nodeType===9?n:n.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Fx(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(r,{is:i.is}):(t=o.createElement(r),r==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,r),t[xr]=e,t[jo]=i,n1(t,e,!1,!1),e.stateNode=t;e:{switch(o=ld(r,i),r){case"dialog":pe("cancel",t),pe("close",t),n=i;break;case"iframe":case"object":case"embed":pe("load",t),n=i;break;case"video":case"audio":for(n=0;n<to.length;n++)pe(to[n],t);n=i;break;case"source":pe("error",t),n=i;break;case"img":case"image":case"link":pe("error",t),pe("load",t),n=i;break;case"details":pe("toggle",t),n=i;break;case"input":sg(t,i),n=rd(t,i),pe("invalid",t);break;case"option":n=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},n=Ce({},i,{value:void 0}),pe("invalid",t);break;case"textarea":ag(t,i),n=sd(t,i),pe("invalid",t);break;default:n=i}ad(r,n),a=n;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?Nx(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Bx(t,l)):s==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&Do(t,l):typeof l=="number"&&Do(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ko.hasOwnProperty(s)?l!=null&&s==="onScroll"&&pe("scroll",t):l!=null&&lp(t,s,l,o))}switch(r){case"input":Ea(t),og(t,i,!1);break;case"textarea":Ea(t),lg(t);break;case"option":i.value!=null&&t.setAttribute("value",""+Ai(i.value));break;case"select":t.multiple=!!i.multiple,s=i.value,s!=null?rs(t,!!i.multiple,s,!1):i.defaultValue!=null&&rs(t,!!i.multiple,i.defaultValue,!0);break;default:typeof n.onClick=="function"&&(t.onclick=Wl)}switch(r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return st(e),null;case 6:if(t&&e.stateNode!=null)o1(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(F(166));if(r=Ji(Ho.current),Ji(Tr.current),ka(e)){if(i=e.stateNode,r=e.memoizedProps,i[xr]=e,(s=i.nodeValue!==r)&&(t=bt,t!==null))switch(t.tag){case 3:Ma(i.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ma(i.nodeValue,r,(t.mode&1)!==0)}s&&(e.flags|=4)}else i=(r.nodeType===9?r:r.ownerDocument).createTextNode(i),i[xr]=e,e.stateNode=i}return st(e),null;case 13:if(ge(Ee),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(_e&&At!==null&&e.mode&1&&!(e.flags&128))S_(),vs(),e.flags|=98560,s=!1;else if(s=ka(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(F(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(F(317));s[xr]=e}else vs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;st(e),s=!1}else Qt!==null&&(jd(Qt),Qt=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Ee.current&1?He===0&&(He=3):Hp())),e.updateQueue!==null&&(e.flags|=4),st(e),null);case 4:return _s(),Fd(t,e),t===null&&Go(e.stateNode.containerInfo),st(e),null;case 10:return Cp(e.type._context),st(e),null;case 17:return xt(e.type)&&Xl(),st(e),null;case 19:if(ge(Ee),s=e.memoizedState,s===null)return st(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)Hs(s,!1);else{if(He!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=eu(t),o!==null){for(e.flags|=128,Hs(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=r,r=e.child;r!==null;)s=r,t=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return fe(Ee,Ee.current&1|2),e.child}t=t.sibling}s.tail!==null&&Be()>Ts&&(e.flags|=128,i=!0,Hs(s,!1),e.lanes=4194304)}else{if(!i)if(t=eu(o),t!==null){if(e.flags|=128,i=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Hs(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!_e)return st(e),null}else 2*Be()-s.renderingStartTime>Ts&&r!==1073741824&&(e.flags|=128,i=!0,Hs(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(r=s.last,r!==null?r.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Be(),e.sibling=null,r=Ee.current,fe(Ee,i?r&1|2:r&1),e):(st(e),null);case 22:case 23:return zp(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Et&1073741824&&(st(e),e.subtreeFlags&6&&(e.flags|=8192)):st(e),null;case 24:return null;case 25:return null}throw Error(F(156,e.tag))}function ob(t,e){switch(Ep(e),e.tag){case 1:return xt(e.type)&&Xl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return _s(),ge(vt),ge(ut),kp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Mp(e),null;case 13:if(ge(Ee),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(F(340));vs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ge(Ee),null;case 4:return _s(),null;case 10:return Cp(e.type._context),null;case 22:case 23:return zp(),null;case 24:return null;default:return null}}var Ba=!1,at=!1,ab=typeof WeakSet=="function"?WeakSet:Set,$=null;function Xn(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(i){ke(t,e,i)}else r.current=null}function Bd(t,e,r){try{r()}catch(i){ke(t,e,i)}}var Zg=!1;function lb(t,e){if(vd=zl,t=c_(),wp(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var i=r.getSelection&&r.getSelection();if(i&&i.rangeCount!==0){r=i.anchorNode;var n=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var o=0,a=-1,l=-1,u=0,h=0,c=t,d=null;t:for(;;){for(var f;c!==r||n!==0&&c.nodeType!==3||(a=o+n),c!==s||i!==0&&c.nodeType!==3||(l=o+i),c.nodeType===3&&(o+=c.nodeValue.length),(f=c.firstChild)!==null;)d=c,c=f;for(;;){if(c===t)break t;if(d===r&&++u===n&&(a=o),d===s&&++h===i&&(l=o),(f=c.nextSibling)!==null)break;c=d,d=c.parentNode}c=f}r=a===-1||l===-1?null:{start:a,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(xd={focusedElem:t,selectionRange:r},zl=!1,$=e;$!==null;)if(e=$,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,$=t;else for(;$!==null;){e=$;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,x=p.memoizedState,y=e.stateNode,v=y.getSnapshotBeforeUpdate(e.elementType===e.type?g:qt(e.type,g),x);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var m=e.stateNode.containerInfo;m.nodeType===1?m.textContent="":m.nodeType===9&&m.documentElement&&m.removeChild(m.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(F(163))}}catch(_){ke(e,e.return,_)}if(t=e.sibling,t!==null){t.return=e.return,$=t;break}$=e.return}return p=Zg,Zg=!1,p}function _o(t,e,r){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var n=i=i.next;do{if((n.tag&t)===t){var s=n.destroy;n.destroy=void 0,s!==void 0&&Bd(e,r,s)}n=n.next}while(n!==i)}}function zu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var i=r.create;r.destroy=i()}r=r.next}while(r!==e)}}function Ld(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function a1(t){var e=t.alternate;e!==null&&(t.alternate=null,a1(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[xr],delete e[jo],delete e[Td],delete e[HA],delete e[$A])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function l1(t){return t.tag===5||t.tag===3||t.tag===4}function Qg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||l1(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Nd(t,e,r){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Wl));else if(i!==4&&(t=t.child,t!==null))for(Nd(t,e,r),t=t.sibling;t!==null;)Nd(t,e,r),t=t.sibling}function Od(t,e,r){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(Od(t,e,r),t=t.sibling;t!==null;)Od(t,e,r),t=t.sibling}var Qe=null,Zt=!1;function ei(t,e,r){for(r=r.child;r!==null;)u1(t,e,r),r=r.sibling}function u1(t,e,r){if(wr&&typeof wr.onCommitFiberUnmount=="function")try{wr.onCommitFiberUnmount(Bu,r)}catch{}switch(r.tag){case 5:at||Xn(r,e);case 6:var i=Qe,n=Zt;Qe=null,ei(t,e,r),Qe=i,Zt=n,Qe!==null&&(Zt?(t=Qe,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Qe.removeChild(r.stateNode));break;case 18:Qe!==null&&(Zt?(t=Qe,r=r.stateNode,t.nodeType===8?kh(t.parentNode,r):t.nodeType===1&&kh(t,r),No(t)):kh(Qe,r.stateNode));break;case 4:i=Qe,n=Zt,Qe=r.stateNode.containerInfo,Zt=!0,ei(t,e,r),Qe=i,Zt=n;break;case 0:case 11:case 14:case 15:if(!at&&(i=r.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){n=i=i.next;do{var s=n,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Bd(r,e,o),n=n.next}while(n!==i)}ei(t,e,r);break;case 1:if(!at&&(Xn(r,e),i=r.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=r.memoizedProps,i.state=r.memoizedState,i.componentWillUnmount()}catch(a){ke(r,e,a)}ei(t,e,r);break;case 21:ei(t,e,r);break;case 22:r.mode&1?(at=(i=at)||r.memoizedState!==null,ei(t,e,r),at=i):ei(t,e,r);break;default:ei(t,e,r)}}function Jg(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new ab),e.forEach(function(i){var n=yb.bind(null,t,i);r.has(i)||(r.add(i),i.then(n,n))})}}function Ht(t,e){var r=e.deletions;if(r!==null)for(var i=0;i<r.length;i++){var n=r[i];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Qe=a.stateNode,Zt=!1;break e;case 3:Qe=a.stateNode.containerInfo,Zt=!0;break e;case 4:Qe=a.stateNode.containerInfo,Zt=!0;break e}a=a.return}if(Qe===null)throw Error(F(160));u1(s,o,n),Qe=null,Zt=!1;var l=n.alternate;l!==null&&(l.return=null),n.return=null}catch(u){ke(n,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)h1(e,t),e=e.sibling}function h1(t,e){var r=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ht(e,t),lr(t),i&4){try{_o(3,t,t.return),zu(3,t)}catch(g){ke(t,t.return,g)}try{_o(5,t,t.return)}catch(g){ke(t,t.return,g)}}break;case 1:Ht(e,t),lr(t),i&512&&r!==null&&Xn(r,r.return);break;case 5:if(Ht(e,t),lr(t),i&512&&r!==null&&Xn(r,r.return),t.flags&32){var n=t.stateNode;try{Do(n,"")}catch(g){ke(t,t.return,g)}}if(i&4&&(n=t.stateNode,n!=null)){var s=t.memoizedProps,o=r!==null?r.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&kx(n,s),ld(a,o);var u=ld(a,s);for(o=0;o<l.length;o+=2){var h=l[o],c=l[o+1];h==="style"?Nx(n,c):h==="dangerouslySetInnerHTML"?Bx(n,c):h==="children"?Do(n,c):lp(n,h,c,u)}switch(a){case"input":id(n,s);break;case"textarea":Dx(n,s);break;case"select":var d=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?rs(n,!!s.multiple,f,!1):d!==!!s.multiple&&(s.defaultValue!=null?rs(n,!!s.multiple,s.defaultValue,!0):rs(n,!!s.multiple,s.multiple?[]:"",!1))}n[jo]=s}catch(g){ke(t,t.return,g)}}break;case 6:if(Ht(e,t),lr(t),i&4){if(t.stateNode===null)throw Error(F(162));n=t.stateNode,s=t.memoizedProps;try{n.nodeValue=s}catch(g){ke(t,t.return,g)}}break;case 3:if(Ht(e,t),lr(t),i&4&&r!==null&&r.memoizedState.isDehydrated)try{No(e.containerInfo)}catch(g){ke(t,t.return,g)}break;case 4:Ht(e,t),lr(t);break;case 13:Ht(e,t),lr(t),n=t.child,n.flags&8192&&(s=n.memoizedState!==null,n.stateNode.isHidden=s,!s||n.alternate!==null&&n.alternate.memoizedState!==null||(Vp=Be())),i&4&&Jg(t);break;case 22:if(h=r!==null&&r.memoizedState!==null,t.mode&1?(at=(u=at)||h,Ht(e,t),at=u):Ht(e,t),lr(t),i&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for($=t,h=t.child;h!==null;){for(c=$=h;$!==null;){switch(d=$,f=d.child,d.tag){case 0:case 11:case 14:case 15:_o(4,d,d.return);break;case 1:Xn(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){i=d,r=d.return;try{e=i,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(g){ke(i,r,g)}}break;case 5:Xn(d,d.return);break;case 22:if(d.memoizedState!==null){ty(c);continue}}f!==null?(f.return=d,$=f):ty(c)}h=h.sibling}e:for(h=null,c=t;;){if(c.tag===5){if(h===null){h=c;try{n=c.stateNode,u?(s=n.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=c.stateNode,l=c.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Lx("display",o))}catch(g){ke(t,t.return,g)}}}else if(c.tag===6){if(h===null)try{c.stateNode.nodeValue=u?"":c.memoizedProps}catch(g){ke(t,t.return,g)}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===t)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===t)break e;for(;c.sibling===null;){if(c.return===null||c.return===t)break e;h===c&&(h=null),c=c.return}h===c&&(h=null),c.sibling.return=c.return,c=c.sibling}}break;case 19:Ht(e,t),lr(t),i&4&&Jg(t);break;case 21:break;default:Ht(e,t),lr(t)}}function lr(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(l1(r)){var i=r;break e}r=r.return}throw Error(F(160))}switch(i.tag){case 5:var n=i.stateNode;i.flags&32&&(Do(n,""),i.flags&=-33);var s=Qg(t);Od(t,s,n);break;case 3:case 4:var o=i.stateNode.containerInfo,a=Qg(t);Nd(t,a,o);break;default:throw Error(F(161))}}catch(l){ke(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function ub(t,e,r){$=t,c1(t)}function c1(t,e,r){for(var i=(t.mode&1)!==0;$!==null;){var n=$,s=n.child;if(n.tag===22&&i){var o=n.memoizedState!==null||Ba;if(!o){var a=n.alternate,l=a!==null&&a.memoizedState!==null||at;a=Ba;var u=at;if(Ba=o,(at=l)&&!u)for($=n;$!==null;)o=$,l=o.child,o.tag===22&&o.memoizedState!==null?ry(n):l!==null?(l.return=o,$=l):ry(n);for(;s!==null;)$=s,c1(s),s=s.sibling;$=n,Ba=a,at=u}ey(t)}else n.subtreeFlags&8772&&s!==null?(s.return=n,$=s):ey(t)}}function ey(t){for(;$!==null;){var e=$;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:at||zu(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!at)if(r===null)i.componentDidMount();else{var n=e.elementType===e.type?r.memoizedProps:qt(e.type,r.memoizedProps);i.componentDidUpdate(n,r.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Og(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}Og(e,o,r)}break;case 5:var a=e.stateNode;if(r===null&&e.flags&4){r=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var c=h.dehydrated;c!==null&&No(c)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(F(163))}at||e.flags&512&&Ld(e)}catch(d){ke(e,e.return,d)}}if(e===t){$=null;break}if(r=e.sibling,r!==null){r.return=e.return,$=r;break}$=e.return}}function ty(t){for(;$!==null;){var e=$;if(e===t){$=null;break}var r=e.sibling;if(r!==null){r.return=e.return,$=r;break}$=e.return}}function ry(t){for(;$!==null;){var e=$;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{zu(4,e)}catch(l){ke(e,r,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var n=e.return;try{i.componentDidMount()}catch(l){ke(e,n,l)}}var s=e.return;try{Ld(e)}catch(l){ke(e,s,l)}break;case 5:var o=e.return;try{Ld(e)}catch(l){ke(e,o,l)}}}catch(l){ke(e,e.return,l)}if(e===t){$=null;break}var a=e.sibling;if(a!==null){a.return=e.return,$=a;break}$=e.return}}var hb=Math.ceil,iu=Jr.ReactCurrentDispatcher,Up=Jr.ReactCurrentOwner,Vt=Jr.ReactCurrentBatchConfig,ue=0,Ye=null,Oe=null,tt=0,Et=0,Yn=Mi(0),He=0,Yo=null,cn=0,Hu=0,Gp=0,wo=null,mt=null,Vp=0,Ts=1/0,kr=null,nu=!1,Ud=null,wi=null,La=!1,di=null,su=0,To=0,Gd=null,wl=-1,Tl=0;function dt(){return ue&6?Be():wl!==-1?wl:wl=Be()}function Ti(t){return t.mode&1?ue&2&&tt!==0?tt&-tt:XA.transition!==null?(Tl===0&&(Tl=Kx()),Tl):(t=he,t!==0||(t=window.event,t=t===void 0?16:r_(t.type)),t):1}function tr(t,e,r,i){if(50<To)throw To=0,Gd=null,Error(F(185));oa(t,r,i),(!(ue&2)||t!==Ye)&&(t===Ye&&(!(ue&2)&&(Hu|=r),He===4&&ui(t,tt)),_t(t,i),r===1&&ue===0&&!(e.mode&1)&&(Ts=Be()+500,Gu&&ki()))}function _t(t,e){var r=t.callbackNode;XS(t,e);var i=jl(t,t===Ye?tt:0);if(i===0)r!==null&&cg(r),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(r!=null&&cg(r),e===1)t.tag===0?WA(iy.bind(null,t)):w_(iy.bind(null,t)),jA(function(){!(ue&6)&&ki()}),r=null;else{switch(qx(i)){case 1:r=fp;break;case 4:r=Xx;break;case 16:r=Vl;break;case 536870912:r=Yx;break;default:r=Vl}r=x1(r,d1.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function d1(t,e){if(wl=-1,Tl=0,ue&6)throw Error(F(327));var r=t.callbackNode;if(as()&&t.callbackNode!==r)return null;var i=jl(t,t===Ye?tt:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=ou(t,i);else{e=i;var n=ue;ue|=2;var s=p1();(Ye!==t||tt!==e)&&(kr=null,Ts=Be()+500,tn(t,e));do try{fb();break}catch(a){f1(t,a)}while(!0);bp(),iu.current=s,ue=n,Oe!==null?e=0:(Ye=null,tt=0,e=He)}if(e!==0){if(e===2&&(n=fd(t),n!==0&&(i=n,e=Vd(t,n))),e===1)throw r=Yo,tn(t,0),ui(t,i),_t(t,Be()),r;if(e===6)ui(t,i);else{if(n=t.current.alternate,!(i&30)&&!cb(n)&&(e=ou(t,i),e===2&&(s=fd(t),s!==0&&(i=s,e=Vd(t,s))),e===1))throw r=Yo,tn(t,0),ui(t,i),_t(t,Be()),r;switch(t.finishedWork=n,t.finishedLanes=i,e){case 0:case 1:throw Error(F(345));case 2:Gi(t,mt,kr);break;case 3:if(ui(t,i),(i&130023424)===i&&(e=Vp+500-Be(),10<e)){if(jl(t,0)!==0)break;if(n=t.suspendedLanes,(n&i)!==i){dt(),t.pingedLanes|=t.suspendedLanes&n;break}t.timeoutHandle=wd(Gi.bind(null,t,mt,kr),e);break}Gi(t,mt,kr);break;case 4:if(ui(t,i),(i&4194240)===i)break;for(e=t.eventTimes,n=-1;0<i;){var o=31-er(i);s=1<<o,o=e[o],o>n&&(n=o),i&=~s}if(i=n,i=Be()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*hb(i/1960))-i,10<i){t.timeoutHandle=wd(Gi.bind(null,t,mt,kr),i);break}Gi(t,mt,kr);break;case 5:Gi(t,mt,kr);break;default:throw Error(F(329))}}}return _t(t,Be()),t.callbackNode===r?d1.bind(null,t):null}function Vd(t,e){var r=wo;return t.current.memoizedState.isDehydrated&&(tn(t,e).flags|=256),t=ou(t,e),t!==2&&(e=mt,mt=r,e!==null&&jd(e)),t}function jd(t){mt===null?mt=t:mt.push.apply(mt,t)}function cb(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var i=0;i<r.length;i++){var n=r[i],s=n.getSnapshot;n=n.value;try{if(!nr(s(),n))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ui(t,e){for(e&=~Gp,e&=~Hu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-er(e),i=1<<r;t[r]=-1,e&=~i}}function iy(t){if(ue&6)throw Error(F(327));as();var e=jl(t,0);if(!(e&1))return _t(t,Be()),null;var r=ou(t,e);if(t.tag!==0&&r===2){var i=fd(t);i!==0&&(e=i,r=Vd(t,i))}if(r===1)throw r=Yo,tn(t,0),ui(t,e),_t(t,Be()),r;if(r===6)throw Error(F(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Gi(t,mt,kr),_t(t,Be()),null}function jp(t,e){var r=ue;ue|=1;try{return t(e)}finally{ue=r,ue===0&&(Ts=Be()+500,Gu&&ki())}}function dn(t){di!==null&&di.tag===0&&!(ue&6)&&as();var e=ue;ue|=1;var r=Vt.transition,i=he;try{if(Vt.transition=null,he=1,t)return t()}finally{he=i,Vt.transition=r,ue=e,!(ue&6)&&ki()}}function zp(){Et=Yn.current,ge(Yn)}function tn(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,VA(r)),Oe!==null)for(r=Oe.return;r!==null;){var i=r;switch(Ep(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Xl();break;case 3:_s(),ge(vt),ge(ut),kp();break;case 5:Mp(i);break;case 4:_s();break;case 13:ge(Ee);break;case 19:ge(Ee);break;case 10:Cp(i.type._context);break;case 22:case 23:zp()}r=r.return}if(Ye=t,Oe=t=Ei(t.current,null),tt=Et=e,He=0,Yo=null,Gp=Hu=cn=0,mt=wo=null,Qi!==null){for(e=0;e<Qi.length;e++)if(r=Qi[e],i=r.interleaved,i!==null){r.interleaved=null;var n=i.next,s=r.pending;if(s!==null){var o=s.next;s.next=n,i.next=o}r.pending=i}Qi=null}return t}function f1(t,e){do{var r=Oe;try{if(bp(),vl.current=ru,tu){for(var i=be.memoizedState;i!==null;){var n=i.queue;n!==null&&(n.pending=null),i=i.next}tu=!1}if(hn=0,We=ze=be=null,xo=!1,$o=0,Up.current=null,r===null||r.return===null){He=1,Yo=e,Oe=null;break}e:{var s=t,o=r.return,a=r,l=e;if(e=tt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,h=a,c=h.tag;if(!(h.mode&1)&&(c===0||c===11||c===15)){var d=h.alternate;d?(h.updateQueue=d.updateQueue,h.memoizedState=d.memoizedState,h.lanes=d.lanes):(h.updateQueue=null,h.memoizedState=null)}var f=Hg(o);if(f!==null){f.flags&=-257,$g(f,o,a,s,e),f.mode&1&&zg(s,u,e),e=f,l=u;var p=e.updateQueue;if(p===null){var g=new Set;g.add(l),e.updateQueue=g}else p.add(l);break e}else{if(!(e&1)){zg(s,u,e),Hp();break e}l=Error(F(426))}}else if(_e&&a.mode&1){var x=Hg(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),$g(x,o,a,s,e),Sp(ws(l,a));break e}}s=l=ws(l,a),He!==4&&(He=2),wo===null?wo=[s]:wo.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=q_(s,l,e);Ng(s,y);break e;case 1:a=l;var v=s.type,m=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(wi===null||!wi.has(m)))){s.flags|=65536,e&=-e,s.lanes|=e;var _=Z_(s,a,e);Ng(s,_);break e}}s=s.return}while(s!==null)}g1(r)}catch(w){e=w,Oe===r&&r!==null&&(Oe=r=r.return);continue}break}while(!0)}function p1(){var t=iu.current;return iu.current=ru,t===null?ru:t}function Hp(){(He===0||He===3||He===2)&&(He=4),Ye===null||!(cn&268435455)&&!(Hu&268435455)||ui(Ye,tt)}function ou(t,e){var r=ue;ue|=2;var i=p1();(Ye!==t||tt!==e)&&(kr=null,tn(t,e));do try{db();break}catch(n){f1(t,n)}while(!0);if(bp(),ue=r,iu.current=i,Oe!==null)throw Error(F(261));return Ye=null,tt=0,He}function db(){for(;Oe!==null;)m1(Oe)}function fb(){for(;Oe!==null&&!OS();)m1(Oe)}function m1(t){var e=v1(t.alternate,t,Et);t.memoizedProps=t.pendingProps,e===null?g1(t):Oe=e,Up.current=null}function g1(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=ob(r,e),r!==null){r.flags&=32767,Oe=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{He=6,Oe=null;return}}else if(r=sb(r,e,Et),r!==null){Oe=r;return}if(e=e.sibling,e!==null){Oe=e;return}Oe=e=t}while(e!==null);He===0&&(He=5)}function Gi(t,e,r){var i=he,n=Vt.transition;try{Vt.transition=null,he=1,pb(t,e,r,i)}finally{Vt.transition=n,he=i}return null}function pb(t,e,r,i){do as();while(di!==null);if(ue&6)throw Error(F(327));r=t.finishedWork;var n=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(F(177));t.callbackNode=null,t.callbackPriority=0;var s=r.lanes|r.childLanes;if(YS(t,s),t===Ye&&(Oe=Ye=null,tt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||La||(La=!0,x1(Vl,function(){return as(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=Vt.transition,Vt.transition=null;var o=he;he=1;var a=ue;ue|=4,Up.current=null,lb(t,r),h1(r,t),FA(xd),zl=!!vd,xd=vd=null,t.current=r,ub(r),US(),ue=a,he=o,Vt.transition=s}else t.current=r;if(La&&(La=!1,di=t,su=n),s=t.pendingLanes,s===0&&(wi=null),jS(r.stateNode),_t(t,Be()),e!==null)for(i=t.onRecoverableError,r=0;r<e.length;r++)n=e[r],i(n.value,{componentStack:n.stack,digest:n.digest});if(nu)throw nu=!1,t=Ud,Ud=null,t;return su&1&&t.tag!==0&&as(),s=t.pendingLanes,s&1?t===Gd?To++:(To=0,Gd=t):To=0,ki(),null}function as(){if(di!==null){var t=qx(su),e=Vt.transition,r=he;try{if(Vt.transition=null,he=16>t?16:t,di===null)var i=!1;else{if(t=di,di=null,su=0,ue&6)throw Error(F(331));var n=ue;for(ue|=4,$=t.current;$!==null;){var s=$,o=s.child;if($.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for($=u;$!==null;){var h=$;switch(h.tag){case 0:case 11:case 15:_o(8,h,s)}var c=h.child;if(c!==null)c.return=h,$=c;else for(;$!==null;){h=$;var d=h.sibling,f=h.return;if(a1(h),h===u){$=null;break}if(d!==null){d.return=f,$=d;break}$=f}}}var p=s.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var x=g.sibling;g.sibling=null,g=x}while(g!==null)}}$=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,$=o;else e:for(;$!==null;){if(s=$,s.flags&2048)switch(s.tag){case 0:case 11:case 15:_o(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,$=y;break e}$=s.return}}var v=t.current;for($=v;$!==null;){o=$;var m=o.child;if(o.subtreeFlags&2064&&m!==null)m.return=o,$=m;else e:for(o=v;$!==null;){if(a=$,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:zu(9,a)}}catch(w){ke(a,a.return,w)}if(a===o){$=null;break e}var _=a.sibling;if(_!==null){_.return=a.return,$=_;break e}$=a.return}}if(ue=n,ki(),wr&&typeof wr.onPostCommitFiberRoot=="function")try{wr.onPostCommitFiberRoot(Bu,t)}catch{}i=!0}return i}finally{he=r,Vt.transition=e}}return!1}function ny(t,e,r){e=ws(r,e),e=q_(t,e,1),t=_i(t,e,1),e=dt(),t!==null&&(oa(t,1,e),_t(t,e))}function ke(t,e,r){if(t.tag===3)ny(t,t,r);else for(;e!==null;){if(e.tag===3){ny(e,t,r);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(wi===null||!wi.has(i))){t=ws(r,t),t=Z_(e,t,1),e=_i(e,t,1),t=dt(),e!==null&&(oa(e,1,t),_t(e,t));break}}e=e.return}}function mb(t,e,r){var i=t.pingCache;i!==null&&i.delete(e),e=dt(),t.pingedLanes|=t.suspendedLanes&r,Ye===t&&(tt&r)===r&&(He===4||He===3&&(tt&130023424)===tt&&500>Be()-Vp?tn(t,0):Gp|=r),_t(t,e)}function y1(t,e){e===0&&(t.mode&1?(e=ba,ba<<=1,!(ba&130023424)&&(ba=4194304)):e=1);var r=dt();t=Xr(t,e),t!==null&&(oa(t,e,r),_t(t,r))}function gb(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),y1(t,r)}function yb(t,e){var r=0;switch(t.tag){case 13:var i=t.stateNode,n=t.memoizedState;n!==null&&(r=n.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(F(314))}i!==null&&i.delete(e),y1(t,r)}var v1;v1=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||vt.current)gt=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return gt=!1,nb(t,e,r);gt=!!(t.flags&131072)}else gt=!1,_e&&e.flags&1048576&&T_(e,ql,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;_l(t,e),t=e.pendingProps;var n=ys(e,ut.current);os(e,r),n=Fp(null,e,i,t,n,r);var s=Bp();return e.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,xt(i)?(s=!0,Yl(e)):s=!1,e.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,Rp(e),n.updater=ju,e.stateNode=n,n._reactInternals=e,Pd(e,i,t,r),e=Md(null,e,i,!0,s,r)):(e.tag=0,_e&&s&&Tp(e),ht(null,e,n,r),e=e.child),e;case 16:i=e.elementType;e:{switch(_l(t,e),t=e.pendingProps,n=i._init,i=n(i._payload),e.type=i,n=e.tag=xb(i),t=qt(i,t),n){case 0:e=Id(null,e,i,t,r);break e;case 1:e=Yg(null,e,i,t,r);break e;case 11:e=Wg(null,e,i,t,r);break e;case 14:e=Xg(null,e,i,qt(i.type,t),r);break e}throw Error(F(306,i,""))}return e;case 0:return i=e.type,n=e.pendingProps,n=e.elementType===i?n:qt(i,n),Id(t,e,i,n,r);case 1:return i=e.type,n=e.pendingProps,n=e.elementType===i?n:qt(i,n),Yg(t,e,i,n,r);case 3:e:{if(t1(e),t===null)throw Error(F(387));i=e.pendingProps,s=e.memoizedState,n=s.element,P_(t,e),Jl(e,i,null,r);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){n=ws(Error(F(423)),e),e=Kg(t,e,i,r,n);break e}else if(i!==n){n=ws(Error(F(424)),e),e=Kg(t,e,i,r,n);break e}else for(At=xi(e.stateNode.containerInfo.firstChild),bt=e,_e=!0,Qt=null,r=b_(e,null,i,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(vs(),i===n){e=Yr(t,e,r);break e}ht(t,e,i,r)}e=e.child}return e;case 5:return R_(e),t===null&&Ad(e),i=e.type,n=e.pendingProps,s=t!==null?t.memoizedProps:null,o=n.children,_d(i,n)?o=null:s!==null&&_d(i,s)&&(e.flags|=32),e1(t,e),ht(t,e,o,r),e.child;case 6:return t===null&&Ad(e),null;case 13:return r1(t,e,r);case 4:return Ip(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=xs(e,null,i,r):ht(t,e,i,r),e.child;case 11:return i=e.type,n=e.pendingProps,n=e.elementType===i?n:qt(i,n),Wg(t,e,i,n,r);case 7:return ht(t,e,e.pendingProps,r),e.child;case 8:return ht(t,e,e.pendingProps.children,r),e.child;case 12:return ht(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(i=e.type._context,n=e.pendingProps,s=e.memoizedProps,o=n.value,fe(Zl,i._currentValue),i._currentValue=o,s!==null)if(nr(s.value,o)){if(s.children===n.children&&!vt.current){e=Yr(t,e,r);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=Vr(-1,r&-r),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}s.lanes|=r,l=s.alternate,l!==null&&(l.lanes|=r),bd(s.return,r,e),a.lanes|=r;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(F(341));o.lanes|=r,a=o.alternate,a!==null&&(a.lanes|=r),bd(o,r,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}ht(t,e,n.children,r),e=e.child}return e;case 9:return n=e.type,i=e.pendingProps.children,os(e,r),n=jt(n),i=i(n),e.flags|=1,ht(t,e,i,r),e.child;case 14:return i=e.type,n=qt(i,e.pendingProps),n=qt(i.type,n),Xg(t,e,i,n,r);case 15:return Q_(t,e,e.type,e.pendingProps,r);case 17:return i=e.type,n=e.pendingProps,n=e.elementType===i?n:qt(i,n),_l(t,e),e.tag=1,xt(i)?(t=!0,Yl(e)):t=!1,os(e,r),K_(e,i,n),Pd(e,i,n,r),Md(null,e,i,!0,t,r);case 19:return i1(t,e,r);case 22:return J_(t,e,r)}throw Error(F(156,e.tag))};function x1(t,e){return Wx(t,e)}function vb(t,e,r,i){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nt(t,e,r,i){return new vb(t,e,r,i)}function $p(t){return t=t.prototype,!(!t||!t.isReactComponent)}function xb(t){if(typeof t=="function")return $p(t)?1:0;if(t!=null){if(t=t.$$typeof,t===hp)return 11;if(t===cp)return 14}return 2}function Ei(t,e){var r=t.alternate;return r===null?(r=Nt(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function El(t,e,r,i,n,s){var o=2;if(i=t,typeof t=="function")$p(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case On:return rn(r.children,n,s,e);case up:o=8,n|=8;break;case Qc:return t=Nt(12,r,e,n|2),t.elementType=Qc,t.lanes=s,t;case Jc:return t=Nt(13,r,e,n),t.elementType=Jc,t.lanes=s,t;case ed:return t=Nt(19,r,e,n),t.elementType=ed,t.lanes=s,t;case Rx:return $u(r,n,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Cx:o=10;break e;case Px:o=9;break e;case hp:o=11;break e;case cp:o=14;break e;case si:o=16,i=null;break e}throw Error(F(130,t==null?t:typeof t,""))}return e=Nt(o,r,e,n),e.elementType=t,e.type=i,e.lanes=s,e}function rn(t,e,r,i){return t=Nt(7,t,i,e),t.lanes=r,t}function $u(t,e,r,i){return t=Nt(22,t,i,e),t.elementType=Rx,t.lanes=r,t.stateNode={isHidden:!1},t}function Gh(t,e,r){return t=Nt(6,t,null,e),t.lanes=r,t}function Vh(t,e,r){return e=Nt(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function _b(t,e,r,i,n){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=wh(0),this.expirationTimes=wh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wh(0),this.identifierPrefix=i,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function Wp(t,e,r,i,n,s,o,a,l){return t=new _b(t,e,r,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Nt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Rp(s),t}function wb(t,e,r){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Nn,key:i==null?null:""+i,children:t,containerInfo:e,implementation:r}}function _1(t){if(!t)return bi;t=t._reactInternals;e:{if(vn(t)!==t||t.tag!==1)throw Error(F(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(xt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(F(171))}if(t.tag===1){var r=t.type;if(xt(r))return __(t,r,e)}return e}function w1(t,e,r,i,n,s,o,a,l){return t=Wp(r,i,!0,t,n,s,o,a,l),t.context=_1(null),r=t.current,i=dt(),n=Ti(r),s=Vr(i,n),s.callback=e??null,_i(r,s,n),t.current.lanes=n,oa(t,n,i),_t(t,i),t}function Wu(t,e,r,i){var n=e.current,s=dt(),o=Ti(n);return r=_1(r),e.context===null?e.context=r:e.pendingContext=r,e=Vr(s,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=_i(n,e,o),t!==null&&(tr(t,n,o,s),yl(t,n,o)),o}function au(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function sy(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function Xp(t,e){sy(t,e),(t=t.alternate)&&sy(t,e)}function Tb(){return null}var T1=typeof reportError=="function"?reportError:function(t){console.error(t)};function Yp(t){this._internalRoot=t}Xu.prototype.render=Yp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(F(409));Wu(t,e,null,null)};Xu.prototype.unmount=Yp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;dn(function(){Wu(null,t,null,null)}),e[Wr]=null}};function Xu(t){this._internalRoot=t}Xu.prototype.unstable_scheduleHydration=function(t){if(t){var e=Jx();t={blockedOn:null,target:t,priority:e};for(var r=0;r<li.length&&e!==0&&e<li[r].priority;r++);li.splice(r,0,t),r===0&&t_(t)}};function Kp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Yu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function oy(){}function Eb(t,e,r,i,n){if(n){if(typeof i=="function"){var s=i;i=function(){var u=au(o);s.call(u)}}var o=w1(e,i,t,0,null,!1,!1,"",oy);return t._reactRootContainer=o,t[Wr]=o.current,Go(t.nodeType===8?t.parentNode:t),dn(),o}for(;n=t.lastChild;)t.removeChild(n);if(typeof i=="function"){var a=i;i=function(){var u=au(l);a.call(u)}}var l=Wp(t,0,!1,null,null,!1,!1,"",oy);return t._reactRootContainer=l,t[Wr]=l.current,Go(t.nodeType===8?t.parentNode:t),dn(function(){Wu(e,l,r,i)}),l}function Ku(t,e,r,i,n){var s=r._reactRootContainer;if(s){var o=s;if(typeof n=="function"){var a=n;n=function(){var l=au(o);a.call(l)}}Wu(e,o,t,n)}else o=Eb(r,e,t,n,i);return au(o)}Zx=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=eo(e.pendingLanes);r!==0&&(pp(e,r|1),_t(e,Be()),!(ue&6)&&(Ts=Be()+500,ki()))}break;case 13:dn(function(){var i=Xr(t,1);if(i!==null){var n=dt();tr(i,t,1,n)}}),Xp(t,1)}};mp=function(t){if(t.tag===13){var e=Xr(t,134217728);if(e!==null){var r=dt();tr(e,t,134217728,r)}Xp(t,134217728)}};Qx=function(t){if(t.tag===13){var e=Ti(t),r=Xr(t,e);if(r!==null){var i=dt();tr(r,t,e,i)}Xp(t,e)}};Jx=function(){return he};e_=function(t,e){var r=he;try{return he=t,e()}finally{he=r}};hd=function(t,e,r){switch(e){case"input":if(id(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var i=r[e];if(i!==t&&i.form===t.form){var n=Uu(i);if(!n)throw Error(F(90));Mx(i),id(i,n)}}}break;case"textarea":Dx(t,r);break;case"select":e=r.value,e!=null&&rs(t,!!r.multiple,e,!1)}};Gx=jp;Vx=dn;var Sb={usingClientEntryPoint:!1,Events:[la,jn,Uu,Ox,Ux,jp]},$s={findFiberByHostInstance:Zi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Ab={bundleType:$s.bundleType,version:$s.version,rendererPackageName:$s.rendererPackageName,rendererConfig:$s.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Jr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Hx(t),t===null?null:t.stateNode},findFiberByHostInstance:$s.findFiberByHostInstance||Tb,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Na=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Na.isDisabled&&Na.supportsFiber)try{Bu=Na.inject(Ab),wr=Na}catch{}}It.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Sb;It.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Kp(e))throw Error(F(200));return wb(t,e,null,r)};It.createRoot=function(t,e){if(!Kp(t))throw Error(F(299));var r=!1,i="",n=T1;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(n=e.onRecoverableError)),e=Wp(t,1,!1,null,null,r,!1,i,n),t[Wr]=e.current,Go(t.nodeType===8?t.parentNode:t),new Yp(e)};It.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(F(188)):(t=Object.keys(t).join(","),Error(F(268,t)));return t=Hx(e),t=t===null?null:t.stateNode,t};It.flushSync=function(t){return dn(t)};It.hydrate=function(t,e,r){if(!Yu(e))throw Error(F(200));return Ku(null,t,e,!0,r)};It.hydrateRoot=function(t,e,r){if(!Kp(t))throw Error(F(405));var i=r!=null&&r.hydratedSources||null,n=!1,s="",o=T1;if(r!=null&&(r.unstable_strictMode===!0&&(n=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=w1(e,null,t,1,r??null,n,!1,s,o),t[Wr]=e.current,Go(t),i)for(t=0;t<i.length;t++)r=i[t],n=r._getVersion,n=n(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,n]:e.mutableSourceEagerHydrationData.push(r,n);return new Xu(e)};It.render=function(t,e,r){if(!Yu(e))throw Error(F(200));return Ku(null,t,e,!1,r)};It.unmountComponentAtNode=function(t){if(!Yu(t))throw Error(F(40));return t._reactRootContainer?(dn(function(){Ku(null,null,t,!1,function(){t._reactRootContainer=null,t[Wr]=null})}),!0):!1};It.unstable_batchedUpdates=jp;It.unstable_renderSubtreeIntoContainer=function(t,e,r,i){if(!Yu(r))throw Error(F(200));if(t==null||t._reactInternals===void 0)throw Error(F(38));return Ku(t,e,r,!1,i)};It.version="18.3.1-next-f1338f8080-20240426";function E1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(E1)}catch(t){console.error(t)}}E1(),Ex.exports=It;var bb=Ex.exports,S1,ay=bb;S1=ay.createRoot,ay.hydrateRoot;var xn=(t=>(t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2",t))(xn||{}),A1=(t=>(t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS",t))(A1||{}),zd=(t=>(t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL",t))(zd||{}),J=(t=>(t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR",t))(J||{}),_r=(t=>(t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN",t))(_r||{}),L=(t=>(t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL",t))(L||{}),ls=(t=>(t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",t))(ls||{}),K=(t=>(t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT",t))(K||{}),V=(t=>(t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT",t))(V||{}),Nr=(t=>(t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR",t))(Nr||{}),Si=(t=>(t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",t))(Si||{}),Cr=(t=>(t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL",t))(Cr||{}),yt=(t=>(t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",t))(yt||{}),yr=(t=>(t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT",t))(yr||{}),qp=(t=>(t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL",t))(qp||{}),Ot=(t=>(t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp",t))(Ot||{}),je=(t=>(t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE",t[t.COLOR=4]="COLOR",t))(je||{}),Ne=(t=>(t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH",t))(Ne||{}),Er=(t=>(t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",t))(Er||{});const Cb={createCanvas:(t,e)=>{const r=document.createElement("canvas");return r.width=t,r.height=e,r},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(t,e)=>fetch(t,e),parseXML:t=>new DOMParser().parseFromString(t,"text/xml")},j={ADAPTER:Cb,RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var jh=/iPhone/i,ly=/iPod/i,uy=/iPad/i,hy=/\biOS-universal(?:.+)Mac\b/i,zh=/\bAndroid(?:.+)Mobile\b/i,cy=/Android/i,An=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,Oa=/Silk/i,Rr=/Windows Phone/i,dy=/\bWindows(?:.+)ARM\b/i,fy=/BlackBerry/i,py=/BB10/i,my=/Opera Mini/i,gy=/\b(CriOS|Chrome)(?:.+)Mobile/i,yy=/Mobile(?:.+)Firefox\b/i,vy=function(t){return typeof t<"u"&&t.platform==="MacIntel"&&typeof t.maxTouchPoints=="number"&&t.maxTouchPoints>1&&typeof MSStream>"u"};function Pb(t){return function(e){return e.test(t)}}function xy(t){var e={userAgent:"",platform:"",maxTouchPoints:0};!t&&typeof navigator<"u"?e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof t=="string"?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0});var r=e.userAgent,i=r.split("[FBAN");typeof i[1]<"u"&&(r=i[0]),i=r.split("Twitter"),typeof i[1]<"u"&&(r=i[0]);var n=Pb(r),s={apple:{phone:n(jh)&&!n(Rr),ipod:n(ly),tablet:!n(jh)&&(n(uy)||vy(e))&&!n(Rr),universal:n(hy),device:(n(jh)||n(ly)||n(uy)||n(hy)||vy(e))&&!n(Rr)},amazon:{phone:n(An),tablet:!n(An)&&n(Oa),device:n(An)||n(Oa)},android:{phone:!n(Rr)&&n(An)||!n(Rr)&&n(zh),tablet:!n(Rr)&&!n(An)&&!n(zh)&&(n(Oa)||n(cy)),device:!n(Rr)&&(n(An)||n(Oa)||n(zh)||n(cy))||n(/\bokhttp\b/i)},windows:{phone:n(Rr),tablet:n(dy),device:n(Rr)||n(dy)},other:{blackberry:n(fy),blackberry10:n(py),opera:n(my),firefox:n(yy),chrome:n(gy),device:n(fy)||n(py)||n(my)||n(yy)||n(gy)},any:!1,phone:!1,tablet:!1};return s.any=s.apple.device||s.android.device||s.windows.device||s.other.device,s.phone=s.apple.phone||s.android.phone||s.windows.phone,s.tablet=s.apple.tablet||s.android.tablet||s.windows.tablet,s}const Rb=xy.default??xy,Or=Rb(globalThis.navigator);j.RETINA_PREFIX=/@([0-9\.]+)x/;j.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var b1={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,r="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(r=!1));function n(l,u,h){this.fn=l,this.context=u,this.once=h||!1}function s(l,u,h,c,d){if(typeof h!="function")throw new TypeError("The listener must be a function");var f=new n(h,c||l,d),p=r?r+u:u;return l._events[p]?l._events[p].fn?l._events[p]=[l._events[p],f]:l._events[p].push(f):(l._events[p]=f,l._eventsCount++),l}function o(l,u){--l._eventsCount===0?l._events=new i:delete l._events[u]}function a(){this._events=new i,this._eventsCount=0}a.prototype.eventNames=function(){var u=[],h,c;if(this._eventsCount===0)return u;for(c in h=this._events)e.call(h,c)&&u.push(r?c.slice(1):c);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(h)):u},a.prototype.listeners=function(u){var h=r?r+u:u,c=this._events[h];if(!c)return[];if(c.fn)return[c.fn];for(var d=0,f=c.length,p=new Array(f);d<f;d++)p[d]=c[d].fn;return p},a.prototype.listenerCount=function(u){var h=r?r+u:u,c=this._events[h];return c?c.fn?1:c.length:0},a.prototype.emit=function(u,h,c,d,f,p){var g=r?r+u:u;if(!this._events[g])return!1;var x=this._events[g],y=arguments.length,v,m;if(x.fn){switch(x.once&&this.removeListener(u,x.fn,void 0,!0),y){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,h),!0;case 3:return x.fn.call(x.context,h,c),!0;case 4:return x.fn.call(x.context,h,c,d),!0;case 5:return x.fn.call(x.context,h,c,d,f),!0;case 6:return x.fn.call(x.context,h,c,d,f,p),!0}for(m=1,v=new Array(y-1);m<y;m++)v[m-1]=arguments[m];x.fn.apply(x.context,v)}else{var _=x.length,w;for(m=0;m<_;m++)switch(x[m].once&&this.removeListener(u,x[m].fn,void 0,!0),y){case 1:x[m].fn.call(x[m].context);break;case 2:x[m].fn.call(x[m].context,h);break;case 3:x[m].fn.call(x[m].context,h,c);break;case 4:x[m].fn.call(x[m].context,h,c,d);break;default:if(!v)for(w=1,v=new Array(y-1);w<y;w++)v[w-1]=arguments[w];x[m].fn.apply(x[m].context,v)}}return!0},a.prototype.on=function(u,h,c){return s(this,u,h,c,!1)},a.prototype.once=function(u,h,c){return s(this,u,h,c,!0)},a.prototype.removeListener=function(u,h,c,d){var f=r?r+u:u;if(!this._events[f])return this;if(!h)return o(this,f),this;var p=this._events[f];if(p.fn)p.fn===h&&(!d||p.once)&&(!c||p.context===c)&&o(this,f);else{for(var g=0,x=[],y=p.length;g<y;g++)(p[g].fn!==h||d&&!p[g].once||c&&p[g].context!==c)&&x.push(p[g]);x.length?this._events[f]=x.length===1?x[0]:x:o(this,f)}return this},a.prototype.removeAllListeners=function(u){var h;return u?(h=r?r+u:u,this._events[h]&&o(this,h)):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,t.exports=a})(b1);var Ib=b1.exports;const ha=tp(Ib);var Zp={exports:{}};Zp.exports=qu;Zp.exports.default=qu;function qu(t,e,r){r=r||2;var i=e&&e.length,n=i?e[0]*r:t.length,s=C1(t,0,n,r,!0),o=[];if(!s||s.next===s.prev)return o;var a,l,u,h,c,d,f;if(i&&(s=Bb(t,e,s,r)),t.length>80*r){a=u=t[0],l=h=t[1];for(var p=r;p<n;p+=r)c=t[p],d=t[p+1],c<a&&(a=c),d<l&&(l=d),c>u&&(u=c),d>h&&(h=d);f=Math.max(u-a,h-l),f=f!==0?32767/f:0}return Ko(s,o,r,a,l,f,0),o}function C1(t,e,r,i,n){var s,o;if(n===Wd(t,e,r,i)>0)for(s=e;s<r;s+=i)o=_y(s,t[s],t[s+1],o);else for(s=r-i;s>=e;s-=i)o=_y(s,t[s],t[s+1],o);return o&&Zu(o,o.next)&&(Zo(o),o=o.next),o}function fn(t,e){if(!t)return t;e||(e=t);var r=t,i;do if(i=!1,!r.steiner&&(Zu(r,r.next)||Se(r.prev,r,r.next)===0)){if(Zo(r),r=e=r.prev,r===r.next)break;i=!0}else r=r.next;while(i||r!==e);return e}function Ko(t,e,r,i,n,s,o){if(t){!o&&s&&Gb(t,i,n,s);for(var a=t,l,u;t.prev!==t.next;){if(l=t.prev,u=t.next,s?kb(t,i,n,s):Mb(t)){e.push(l.i/r|0),e.push(t.i/r|0),e.push(u.i/r|0),Zo(t),t=u.next,a=u.next;continue}if(t=u,t===a){o?o===1?(t=Db(fn(t),e,r),Ko(t,e,r,i,n,s,2)):o===2&&Fb(t,e,r,i,n,s):Ko(fn(t),e,r,i,n,s,1);break}}}}function Mb(t){var e=t.prev,r=t,i=t.next;if(Se(e,r,i)>=0)return!1;for(var n=e.x,s=r.x,o=i.x,a=e.y,l=r.y,u=i.y,h=n<s?n<o?n:o:s<o?s:o,c=a<l?a<u?a:u:l<u?l:u,d=n>s?n>o?n:o:s>o?s:o,f=a>l?a>u?a:u:l>u?l:u,p=i.next;p!==e;){if(p.x>=h&&p.x<=d&&p.y>=c&&p.y<=f&&Kn(n,a,s,l,o,u,p.x,p.y)&&Se(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function kb(t,e,r,i){var n=t.prev,s=t,o=t.next;if(Se(n,s,o)>=0)return!1;for(var a=n.x,l=s.x,u=o.x,h=n.y,c=s.y,d=o.y,f=a<l?a<u?a:u:l<u?l:u,p=h<c?h<d?h:d:c<d?c:d,g=a>l?a>u?a:u:l>u?l:u,x=h>c?h>d?h:d:c>d?c:d,y=Hd(f,p,e,r,i),v=Hd(g,x,e,r,i),m=t.prevZ,_=t.nextZ;m&&m.z>=y&&_&&_.z<=v;){if(m.x>=f&&m.x<=g&&m.y>=p&&m.y<=x&&m!==n&&m!==o&&Kn(a,h,l,c,u,d,m.x,m.y)&&Se(m.prev,m,m.next)>=0||(m=m.prevZ,_.x>=f&&_.x<=g&&_.y>=p&&_.y<=x&&_!==n&&_!==o&&Kn(a,h,l,c,u,d,_.x,_.y)&&Se(_.prev,_,_.next)>=0))return!1;_=_.nextZ}for(;m&&m.z>=y;){if(m.x>=f&&m.x<=g&&m.y>=p&&m.y<=x&&m!==n&&m!==o&&Kn(a,h,l,c,u,d,m.x,m.y)&&Se(m.prev,m,m.next)>=0)return!1;m=m.prevZ}for(;_&&_.z<=v;){if(_.x>=f&&_.x<=g&&_.y>=p&&_.y<=x&&_!==n&&_!==o&&Kn(a,h,l,c,u,d,_.x,_.y)&&Se(_.prev,_,_.next)>=0)return!1;_=_.nextZ}return!0}function Db(t,e,r){var i=t;do{var n=i.prev,s=i.next.next;!Zu(n,s)&&P1(n,i,i.next,s)&&qo(n,s)&&qo(s,n)&&(e.push(n.i/r|0),e.push(i.i/r|0),e.push(s.i/r|0),Zo(i),Zo(i.next),i=t=s),i=i.next}while(i!==t);return fn(i)}function Fb(t,e,r,i,n,s){var o=t;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&zb(o,a)){var l=R1(o,a);o=fn(o,o.next),l=fn(l,l.next),Ko(o,e,r,i,n,s,0),Ko(l,e,r,i,n,s,0);return}a=a.next}o=o.next}while(o!==t)}function Bb(t,e,r,i){var n=[],s,o,a,l,u;for(s=0,o=e.length;s<o;s++)a=e[s]*i,l=s<o-1?e[s+1]*i:t.length,u=C1(t,a,l,i,!1),u===u.next&&(u.steiner=!0),n.push(jb(u));for(n.sort(Lb),s=0;s<n.length;s++)r=Nb(n[s],r);return r}function Lb(t,e){return t.x-e.x}function Nb(t,e){var r=Ob(t,e);if(!r)return e;var i=R1(r,t);return fn(i,i.next),fn(r,r.next)}function Ob(t,e){var r=e,i=t.x,n=t.y,s=-1/0,o;do{if(n<=r.y&&n>=r.next.y&&r.next.y!==r.y){var a=r.x+(n-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=i&&a>s&&(s=a,o=r.x<r.next.x?r:r.next,a===i))return o}r=r.next}while(r!==e);if(!o)return null;var l=o,u=o.x,h=o.y,c=1/0,d;r=o;do i>=r.x&&r.x>=u&&i!==r.x&&Kn(n<h?i:s,n,u,h,n<h?s:i,n,r.x,r.y)&&(d=Math.abs(n-r.y)/(i-r.x),qo(r,t)&&(d<c||d===c&&(r.x>o.x||r.x===o.x&&Ub(o,r)))&&(o=r,c=d)),r=r.next;while(r!==l);return o}function Ub(t,e){return Se(t.prev,t,e.prev)<0&&Se(e.next,t,t.next)<0}function Gb(t,e,r,i){var n=t;do n.z===0&&(n.z=Hd(n.x,n.y,e,r,i)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next;while(n!==t);n.prevZ.nextZ=null,n.prevZ=null,Vb(n)}function Vb(t){var e,r,i,n,s,o,a,l,u=1;do{for(r=t,t=null,s=null,o=0;r;){for(o++,i=r,a=0,e=0;e<u&&(a++,i=i.nextZ,!!i);e++);for(l=u;a>0||l>0&&i;)a!==0&&(l===0||!i||r.z<=i.z)?(n=r,r=r.nextZ,a--):(n=i,i=i.nextZ,l--),s?s.nextZ=n:t=n,n.prevZ=s,s=n;r=i}s.nextZ=null,u*=2}while(o>1);return t}function Hd(t,e,r,i,n){return t=(t-r)*n|0,e=(e-i)*n|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function jb(t){var e=t,r=t;do(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next;while(e!==t);return r}function Kn(t,e,r,i,n,s,o,a){return(n-o)*(e-a)>=(t-o)*(s-a)&&(t-o)*(i-a)>=(r-o)*(e-a)&&(r-o)*(s-a)>=(n-o)*(i-a)}function zb(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!Hb(t,e)&&(qo(t,e)&&qo(e,t)&&$b(t,e)&&(Se(t.prev,t,e.prev)||Se(t,e.prev,e))||Zu(t,e)&&Se(t.prev,t,t.next)>0&&Se(e.prev,e,e.next)>0)}function Se(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function Zu(t,e){return t.x===e.x&&t.y===e.y}function P1(t,e,r,i){var n=Ga(Se(t,e,r)),s=Ga(Se(t,e,i)),o=Ga(Se(r,i,t)),a=Ga(Se(r,i,e));return!!(n!==s&&o!==a||n===0&&Ua(t,r,e)||s===0&&Ua(t,i,e)||o===0&&Ua(r,t,i)||a===0&&Ua(r,e,i))}function Ua(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function Ga(t){return t>0?1:t<0?-1:0}function Hb(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&P1(r,r.next,t,e))return!0;r=r.next}while(r!==t);return!1}function qo(t,e){return Se(t.prev,t,t.next)<0?Se(t,e,t.next)>=0&&Se(t,t.prev,e)>=0:Se(t,e,t.prev)<0||Se(t,t.next,e)<0}function $b(t,e){var r=t,i=!1,n=(t.x+e.x)/2,s=(t.y+e.y)/2;do r.y>s!=r.next.y>s&&r.next.y!==r.y&&n<(r.next.x-r.x)*(s-r.y)/(r.next.y-r.y)+r.x&&(i=!i),r=r.next;while(r!==t);return i}function R1(t,e){var r=new $d(t.i,t.x,t.y),i=new $d(e.i,e.x,e.y),n=t.next,s=e.prev;return t.next=e,e.prev=t,r.next=n,n.prev=r,i.next=r,r.prev=i,s.next=i,i.prev=s,i}function _y(t,e,r,i){var n=new $d(t,e,r);return i?(n.next=i.next,n.prev=i,i.next.prev=n,i.next=n):(n.prev=n,n.next=n),n}function Zo(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function $d(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}qu.deviation=function(t,e,r,i){var n=e&&e.length,s=n?e[0]*r:t.length,o=Math.abs(Wd(t,0,s,r));if(n)for(var a=0,l=e.length;a<l;a++){var u=e[a]*r,h=a<l-1?e[a+1]*r:t.length;o-=Math.abs(Wd(t,u,h,r))}var c=0;for(a=0;a<i.length;a+=3){var d=i[a]*r,f=i[a+1]*r,p=i[a+2]*r;c+=Math.abs((t[d]-t[p])*(t[f+1]-t[d+1])-(t[d]-t[f])*(t[p+1]-t[d+1]))}return o===0&&c===0?0:Math.abs((c-o)/o)};function Wd(t,e,r,i){for(var n=0,s=e,o=r-i;s<r;s+=i)n+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return n}qu.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},i=0,n=0;n<t.length;n++){for(var s=0;s<t[n].length;s++)for(var o=0;o<e;o++)r.vertices.push(t[n][s][o]);n>0&&(i+=t[n-1].length,r.holes.push(i))}return r};var Wb=Zp.exports;const Xb=tp(Wb);var lu={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */lu.exports;(function(t,e){(function(r){var i=e&&!e.nodeType&&e,n=t&&!t.nodeType&&t,s=typeof Gt=="object"&&Gt;(s.global===s||s.window===s||s.self===s)&&(r=s);var o,a=2147483647,l=36,u=1,h=26,c=38,d=700,f=72,p=128,g="-",x=/^xn--/,y=/[^\x20-\x7E]/,v=/[\x2E\u3002\uFF0E\uFF61]/g,m={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},_=l-u,w=Math.floor,S=String.fromCharCode,E;function T(P){throw new RangeError(m[P])}function C(P,k){for(var Z=P.length,le=[];Z--;)le[Z]=k(P[Z]);return le}function A(P,k){var Z=P.split("@"),le="";Z.length>1&&(le=Z[0]+"@",P=Z[1]),P=P.replace(v,".");var oe=P.split("."),Re=C(oe,k).join(".");return le+Re}function B(P){for(var k=[],Z=0,le=P.length,oe,Re;Z<le;)oe=P.charCodeAt(Z++),oe>=55296&&oe<=56319&&Z<le?(Re=P.charCodeAt(Z++),(Re&64512)==56320?k.push(((oe&1023)<<10)+(Re&1023)+65536):(k.push(oe),Z--)):k.push(oe);return k}function D(P){return C(P,function(k){var Z="";return k>65535&&(k-=65536,Z+=S(k>>>10&1023|55296),k=56320|k&1023),Z+=S(k),Z}).join("")}function b(P){return P-48<10?P-22:P-65<26?P-65:P-97<26?P-97:l}function M(P,k){return P+22+75*(P<26)-((k!=0)<<5)}function z(P,k,Z){var le=0;for(P=Z?w(P/d):P>>1,P+=w(P/k);P>_*h>>1;le+=l)P=w(P/_);return w(le+(_+1)*P/(P+c))}function q(P){var k=[],Z=P.length,le,oe=0,Re=p,ce=f,we,it,wt,qe,xe,Le,Ge,or,ar;for(we=P.lastIndexOf(g),we<0&&(we=0),it=0;it<we;++it)P.charCodeAt(it)>=128&&T("not-basic"),k.push(P.charCodeAt(it));for(wt=we>0?we+1:0;wt<Z;){for(qe=oe,xe=1,Le=l;wt>=Z&&T("invalid-input"),Ge=b(P.charCodeAt(wt++)),(Ge>=l||Ge>w((a-oe)/xe))&&T("overflow"),oe+=Ge*xe,or=Le<=ce?u:Le>=ce+h?h:Le-ce,!(Ge<or);Le+=l)ar=l-or,xe>w(a/ar)&&T("overflow"),xe*=ar;le=k.length+1,ce=z(oe-qe,le,qe==0),w(oe/le)>a-Re&&T("overflow"),Re+=w(oe/le),oe%=le,k.splice(oe++,0,Re)}return D(k)}function O(P){var k,Z,le,oe,Re,ce,we,it,wt,qe,xe,Le=[],Ge,or,ar,Ns;for(P=B(P),Ge=P.length,k=p,Z=0,Re=f,ce=0;ce<Ge;++ce)xe=P[ce],xe<128&&Le.push(S(xe));for(le=oe=Le.length,oe&&Le.push(g);le<Ge;){for(we=a,ce=0;ce<Ge;++ce)xe=P[ce],xe>=k&&xe<we&&(we=xe);for(or=le+1,we-k>w((a-Z)/or)&&T("overflow"),Z+=(we-k)*or,k=we,ce=0;ce<Ge;++ce)if(xe=P[ce],xe<k&&++Z>a&&T("overflow"),xe==k){for(it=Z,wt=l;qe=wt<=Re?u:wt>=Re+h?h:wt-Re,!(it<qe);wt+=l)Ns=it-qe,ar=l-qe,Le.push(S(M(qe+Ns%ar,0))),it=w(Ns/ar);Le.push(S(M(it,0))),Re=z(Z,or,le==oe),Z=0,++le}++Z,++k}return Le.join("")}function I(P){return A(P,function(k){return x.test(k)?q(k.slice(4).toLowerCase()):k})}function G(P){return A(P,function(k){return y.test(k)?"xn--"+O(k):k})}if(o={version:"1.4.1",ucs2:{decode:B,encode:D},decode:q,encode:O,toASCII:G,toUnicode:I},i&&n)if(t.exports==i)n.exports=o;else for(E in o)o.hasOwnProperty(E)&&(i[E]=o[E]);else r.punycode=o})(Gt)})(lu,lu.exports);var Yb=lu.exports,ks=TypeError;const Kb={},qb=Object.freeze(Object.defineProperty({__proto__:null,default:Kb},Symbol.toStringTag,{value:"Module"})),I1=eS(qb);var Qp=typeof Map=="function"&&Map.prototype,Hh=Object.getOwnPropertyDescriptor&&Qp?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,uu=Qp&&Hh&&typeof Hh.get=="function"?Hh.get:null,wy=Qp&&Map.prototype.forEach,Jp=typeof Set=="function"&&Set.prototype,$h=Object.getOwnPropertyDescriptor&&Jp?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,hu=Jp&&$h&&typeof $h.get=="function"?$h.get:null,Ty=Jp&&Set.prototype.forEach,Zb=typeof WeakMap=="function"&&WeakMap.prototype,Eo=Zb?WeakMap.prototype.has:null,Qb=typeof WeakSet=="function"&&WeakSet.prototype,So=Qb?WeakSet.prototype.has:null,Jb=typeof WeakRef=="function"&&WeakRef.prototype,Ey=Jb?WeakRef.prototype.deref:null,eC=Boolean.prototype.valueOf,tC=Object.prototype.toString,rC=Function.prototype.toString,iC=String.prototype.match,em=String.prototype.slice,fi=String.prototype.replace,nC=String.prototype.toUpperCase,Sy=String.prototype.toLowerCase,M1=RegExp.prototype.test,Ay=Array.prototype.concat,vr=Array.prototype.join,sC=Array.prototype.slice,by=Math.floor,Xd=typeof BigInt=="function"?BigInt.prototype.valueOf:null,Wh=Object.getOwnPropertySymbols,Yd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Es=typeof Symbol=="function"&&typeof Symbol.iterator=="object",Ao=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Es||!0)?Symbol.toStringTag:null,k1=Object.prototype.propertyIsEnumerable,Cy=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function Py(t,e){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||M1.call(/e/,e))return e;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t=="number"){var i=t<0?-by(-t):by(t);if(i!==t){var n=String(i),s=em.call(e,n.length+1);return fi.call(n,r,"$&_")+"."+fi.call(fi.call(s,/([0-9]{3})/g,"$&_"),/_$/,"")}}return fi.call(e,r,"$&_")}var Kd=I1,Ry=Kd.custom,Iy=B1(Ry)?Ry:null,D1={__proto__:null,double:'"',single:"'"},oC={__proto__:null,double:/(["\\])/g,single:/(['\\])/g},Qu=function t(e,r,i,n){var s=r||{};if(Dr(s,"quoteStyle")&&!Dr(D1,s.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Dr(s,"maxStringLength")&&(typeof s.maxStringLength=="number"?s.maxStringLength<0&&s.maxStringLength!==1/0:s.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var o=Dr(s,"customInspect")?s.customInspect:!0;if(typeof o!="boolean"&&o!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Dr(s,"indent")&&s.indent!==null&&s.indent!=="	"&&!(parseInt(s.indent,10)===s.indent&&s.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Dr(s,"numericSeparator")&&typeof s.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var a=s.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return N1(e,s);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var l=String(e);return a?Py(e,l):l}if(typeof e=="bigint"){var u=String(e)+"n";return a?Py(e,u):u}var h=typeof s.depth>"u"?5:s.depth;if(typeof i>"u"&&(i=0),i>=h&&h>0&&typeof e=="object")return qd(e)?"[Array]":"[Object]";var c=SC(s,i);if(typeof n>"u")n=[];else if(L1(n,e)>=0)return"[Circular]";function d(b,M,z){if(M&&(n=sC.call(n),n.push(M)),z){var q={depth:s.depth};return Dr(s,"quoteStyle")&&(q.quoteStyle=s.quoteStyle),t(b,q,i+1,n)}return t(b,s,i+1,n)}if(typeof e=="function"&&!My(e)){var f=mC(e),p=Va(e,d);return"[Function"+(f?": "+f:" (anonymous)")+"]"+(p.length>0?" { "+vr.call(p,", ")+" }":"")}if(B1(e)){var g=Es?fi.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):Yd.call(e);return typeof e=="object"&&!Es?Ws(g):g}if(wC(e)){for(var x="<"+Sy.call(String(e.nodeName)),y=e.attributes||[],v=0;v<y.length;v++)x+=" "+y[v].name+"="+F1(aC(y[v].value),"double",s);return x+=">",e.childNodes&&e.childNodes.length&&(x+="..."),x+="</"+Sy.call(String(e.nodeName))+">",x}if(qd(e)){if(e.length===0)return"[]";var m=Va(e,d);return c&&!EC(m)?"["+Zd(m,c)+"]":"[ "+vr.call(m,", ")+" ]"}if(uC(e)){var _=Va(e,d);return!("cause"in Error.prototype)&&"cause"in e&&!k1.call(e,"cause")?"{ ["+String(e)+"] "+vr.call(Ay.call("[cause]: "+d(e.cause),_),", ")+" }":_.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+vr.call(_,", ")+" }"}if(typeof e=="object"&&o){if(Iy&&typeof e[Iy]=="function"&&Kd)return Kd(e,{depth:h-i});if(o!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(gC(e)){var w=[];return wy&&wy.call(e,function(b,M){w.push(d(M,e,!0)+" => "+d(b,e))}),ky("Map",uu.call(e),w,c)}if(xC(e)){var S=[];return Ty&&Ty.call(e,function(b){S.push(d(b,e))}),ky("Set",hu.call(e),S,c)}if(yC(e))return Xh("WeakMap");if(_C(e))return Xh("WeakSet");if(vC(e))return Xh("WeakRef");if(cC(e))return Ws(d(Number(e)));if(fC(e))return Ws(d(Xd.call(e)));if(dC(e))return Ws(eC.call(e));if(hC(e))return Ws(d(String(e)));if(typeof window<"u"&&e===window)return"{ [object Window] }";if(typeof globalThis<"u"&&e===globalThis||typeof Gt<"u"&&e===Gt)return"{ [object globalThis] }";if(!lC(e)&&!My(e)){var E=Va(e,d),T=Cy?Cy(e)===Object.prototype:e instanceof Object||e.constructor===Object,C=e instanceof Object?"":"null prototype",A=!T&&Ao&&Object(e)===e&&Ao in e?em.call(Di(e),8,-1):C?"Object":"",B=T||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",D=B+(A||C?"["+vr.call(Ay.call([],A||[],C||[]),": ")+"] ":"");return E.length===0?D+"{}":c?D+"{"+Zd(E,c)+"}":D+"{ "+vr.call(E,", ")+" }"}return String(e)};function F1(t,e,r){var i=r.quoteStyle||e,n=D1[i];return n+t+n}function aC(t){return fi.call(String(t),/"/g,"&quot;")}function _n(t){return!Ao||!(typeof t=="object"&&(Ao in t||typeof t[Ao]<"u"))}function qd(t){return Di(t)==="[object Array]"&&_n(t)}function lC(t){return Di(t)==="[object Date]"&&_n(t)}function My(t){return Di(t)==="[object RegExp]"&&_n(t)}function uC(t){return Di(t)==="[object Error]"&&_n(t)}function hC(t){return Di(t)==="[object String]"&&_n(t)}function cC(t){return Di(t)==="[object Number]"&&_n(t)}function dC(t){return Di(t)==="[object Boolean]"&&_n(t)}function B1(t){if(Es)return t&&typeof t=="object"&&t instanceof Symbol;if(typeof t=="symbol")return!0;if(!t||typeof t!="object"||!Yd)return!1;try{return Yd.call(t),!0}catch{}return!1}function fC(t){if(!t||typeof t!="object"||!Xd)return!1;try{return Xd.call(t),!0}catch{}return!1}var pC=Object.prototype.hasOwnProperty||function(t){return t in this};function Dr(t,e){return pC.call(t,e)}function Di(t){return tC.call(t)}function mC(t){if(t.name)return t.name;var e=iC.call(rC.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}function L1(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0,i=t.length;r<i;r++)if(t[r]===e)return r;return-1}function gC(t){if(!uu||!t||typeof t!="object")return!1;try{uu.call(t);try{hu.call(t)}catch{return!0}return t instanceof Map}catch{}return!1}function yC(t){if(!Eo||!t||typeof t!="object")return!1;try{Eo.call(t,Eo);try{So.call(t,So)}catch{return!0}return t instanceof WeakMap}catch{}return!1}function vC(t){if(!Ey||!t||typeof t!="object")return!1;try{return Ey.call(t),!0}catch{}return!1}function xC(t){if(!hu||!t||typeof t!="object")return!1;try{hu.call(t);try{uu.call(t)}catch{return!0}return t instanceof Set}catch{}return!1}function _C(t){if(!So||!t||typeof t!="object")return!1;try{So.call(t,So);try{Eo.call(t,Eo)}catch{return!0}return t instanceof WeakSet}catch{}return!1}function wC(t){return!t||typeof t!="object"?!1:typeof HTMLElement<"u"&&t instanceof HTMLElement?!0:typeof t.nodeName=="string"&&typeof t.getAttribute=="function"}function N1(t,e){if(t.length>e.maxStringLength){var r=t.length-e.maxStringLength,i="... "+r+" more character"+(r>1?"s":"");return N1(em.call(t,0,e.maxStringLength),e)+i}var n=oC[e.quoteStyle||"single"];n.lastIndex=0;var s=fi.call(fi.call(t,n,"\\$1"),/[\x00-\x1f]/g,TC);return F1(s,"single",e)}function TC(t){var e=t.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return r?"\\"+r:"\\x"+(e<16?"0":"")+nC.call(e.toString(16))}function Ws(t){return"Object("+t+")"}function Xh(t){return t+" { ? }"}function ky(t,e,r,i){var n=i?Zd(r,i):vr.call(r,", ");return t+" ("+e+") {"+n+"}"}function EC(t){for(var e=0;e<t.length;e++)if(L1(t[e],`
`)>=0)return!1;return!0}function SC(t,e){var r;if(t.indent==="	")r="	";else if(typeof t.indent=="number"&&t.indent>0)r=vr.call(Array(t.indent+1)," ");else return null;return{base:r,prev:vr.call(Array(e+1),r)}}function Zd(t,e){if(t.length===0)return"";var r=`
`+e.prev+e.base;return r+vr.call(t,","+r)+`
`+e.prev}function Va(t,e){var r=qd(t),i=[];if(r){i.length=t.length;for(var n=0;n<t.length;n++)i[n]=Dr(t,n)?e(t[n],t):""}var s=typeof Wh=="function"?Wh(t):[],o;if(Es){o={};for(var a=0;a<s.length;a++)o["$"+s[a]]=s[a]}for(var l in t)Dr(t,l)&&(r&&String(Number(l))===l&&l<t.length||Es&&o["$"+l]instanceof Symbol||(M1.call(/[^\w$]/,l)?i.push(e(l,t)+": "+e(t[l],t)):i.push(l+": "+e(t[l],t))));if(typeof Wh=="function")for(var u=0;u<s.length;u++)k1.call(t,s[u])&&i.push("["+e(s[u])+"]: "+e(t[s[u]],t));return i}var AC=Qu,bC=ks,Ju=function(t,e,r){for(var i=t,n;(n=i.next)!=null;i=n)if(n.key===e)return i.next=n.next,r||(n.next=t.next,t.next=n),n},CC=function(t,e){if(t){var r=Ju(t,e);return r&&r.value}},PC=function(t,e,r){var i=Ju(t,e);i?i.value=r:t.next={key:e,next:t.next,value:r}},RC=function(t,e){return t?!!Ju(t,e):!1},IC=function(t,e){if(t)return Ju(t,e,!0)},MC=function(){var e,r={assert:function(i){if(!r.has(i))throw new bC("Side channel does not contain "+AC(i))},delete:function(i){var n=e&&e.next,s=IC(e,i);return s&&n&&n===s&&(e=void 0),!!s},get:function(i){return CC(e,i)},has:function(i){return RC(e,i)},set:function(i,n){e||(e={next:void 0}),PC(e,i,n)}};return r},O1=Object,kC=Error,DC=EvalError,FC=RangeError,BC=ReferenceError,LC=SyntaxError,NC=URIError,OC=Math.abs,UC=Math.floor,GC=Math.max,VC=Math.min,jC=Math.pow,zC=Math.round,HC=Number.isNaN||function(e){return e!==e},$C=HC,WC=function(e){return $C(e)||e===0?e:e<0?-1:1},XC=Object.getOwnPropertyDescriptor,Sl=XC;if(Sl)try{Sl([],"length")}catch{Sl=null}var U1=Sl,Al=Object.defineProperty||!1;if(Al)try{Al({},"a",{value:1})}catch{Al=!1}var YC=Al,Yh,Dy;function KC(){return Dy||(Dy=1,Yh=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},r=Symbol("test"),i=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(i)!=="[object Symbol]")return!1;var n=42;e[r]=n;for(var s in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var o=Object.getOwnPropertySymbols(e);if(o.length!==1||o[0]!==r||!Object.prototype.propertyIsEnumerable.call(e,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(e,r);if(a.value!==n||a.enumerable!==!0)return!1}return!0}),Yh}var Kh,Fy;function qC(){if(Fy)return Kh;Fy=1;var t=typeof Symbol<"u"&&Symbol,e=KC();return Kh=function(){return typeof t!="function"||typeof Symbol!="function"||typeof t("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},Kh}var qh,By;function G1(){return By||(By=1,qh=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),qh}var Zh,Ly;function V1(){if(Ly)return Zh;Ly=1;var t=O1;return Zh=t.getPrototypeOf||null,Zh}var ZC="Function.prototype.bind called on incompatible ",QC=Object.prototype.toString,JC=Math.max,eP="[object Function]",Ny=function(e,r){for(var i=[],n=0;n<e.length;n+=1)i[n]=e[n];for(var s=0;s<r.length;s+=1)i[s+e.length]=r[s];return i},tP=function(e,r){for(var i=[],n=r,s=0;n<e.length;n+=1,s+=1)i[s]=e[n];return i},rP=function(t,e){for(var r="",i=0;i<t.length;i+=1)r+=t[i],i+1<t.length&&(r+=e);return r},iP=function(e){var r=this;if(typeof r!="function"||QC.apply(r)!==eP)throw new TypeError(ZC+r);for(var i=tP(arguments,1),n,s=function(){if(this instanceof n){var h=r.apply(this,Ny(i,arguments));return Object(h)===h?h:this}return r.apply(e,Ny(i,arguments))},o=JC(0,r.length-i.length),a=[],l=0;l<o;l++)a[l]="$"+l;if(n=Function("binder","return function ("+rP(a,",")+"){ return binder.apply(this,arguments); }")(s),r.prototype){var u=function(){};u.prototype=r.prototype,n.prototype=new u,u.prototype=null}return n},nP=iP,eh=Function.prototype.bind||nP,tm=Function.prototype.call,Qh,Oy;function j1(){return Oy||(Oy=1,Qh=Function.prototype.apply),Qh}var sP=typeof Reflect<"u"&&Reflect&&Reflect.apply,oP=eh,aP=j1(),lP=tm,uP=sP,hP=uP||oP.call(lP,aP),cP=eh,dP=ks,fP=tm,pP=hP,z1=function(e){if(e.length<1||typeof e[0]!="function")throw new dP("a function is required");return pP(cP,fP,e)},Jh,Uy;function mP(){if(Uy)return Jh;Uy=1;var t=z1,e=U1,r;try{r=[].__proto__===Array.prototype}catch(o){if(!o||typeof o!="object"||!("code"in o)||o.code!=="ERR_PROTO_ACCESS")throw o}var i=!!r&&e&&e(Object.prototype,"__proto__"),n=Object,s=n.getPrototypeOf;return Jh=i&&typeof i.get=="function"?t([i.get]):typeof s=="function"?function(a){return s(a==null?a:n(a))}:!1,Jh}var ec,Gy;function gP(){if(Gy)return ec;Gy=1;var t=G1(),e=V1(),r=mP();return ec=t?function(n){return t(n)}:e?function(n){if(!n||typeof n!="object"&&typeof n!="function")throw new TypeError("getProto: not an object");return e(n)}:r?function(n){return r(n)}:null,ec}var tc,Vy;function yP(){if(Vy)return tc;Vy=1;var t=Function.prototype.call,e=Object.prototype.hasOwnProperty,r=eh;return tc=r.call(t,e),tc}var re,vP=O1,xP=kC,_P=DC,wP=FC,TP=BC,Ss=LC,us=ks,EP=NC,SP=OC,AP=UC,bP=GC,CP=VC,PP=jC,RP=zC,IP=WC,H1=Function,rc=function(t){try{return H1('"use strict"; return ('+t+").constructor;")()}catch{}},Qo=U1,MP=YC,ic=function(){throw new us},kP=Qo?function(){try{return arguments.callee,ic}catch{try{return Qo(arguments,"callee").get}catch{return ic}}}():ic,bn=qC()(),$e=gP(),DP=V1(),FP=G1(),$1=j1(),ca=tm,In={},BP=typeof Uint8Array>"u"||!$e?re:$e(Uint8Array),nn={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?re:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?re:ArrayBuffer,"%ArrayIteratorPrototype%":bn&&$e?$e([][Symbol.iterator]()):re,"%AsyncFromSyncIteratorPrototype%":re,"%AsyncFunction%":In,"%AsyncGenerator%":In,"%AsyncGeneratorFunction%":In,"%AsyncIteratorPrototype%":In,"%Atomics%":typeof Atomics>"u"?re:Atomics,"%BigInt%":typeof BigInt>"u"?re:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?re:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?re:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?re:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":xP,"%eval%":eval,"%EvalError%":_P,"%Float16Array%":typeof Float16Array>"u"?re:Float16Array,"%Float32Array%":typeof Float32Array>"u"?re:Float32Array,"%Float64Array%":typeof Float64Array>"u"?re:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?re:FinalizationRegistry,"%Function%":H1,"%GeneratorFunction%":In,"%Int8Array%":typeof Int8Array>"u"?re:Int8Array,"%Int16Array%":typeof Int16Array>"u"?re:Int16Array,"%Int32Array%":typeof Int32Array>"u"?re:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":bn&&$e?$e($e([][Symbol.iterator]())):re,"%JSON%":typeof JSON=="object"?JSON:re,"%Map%":typeof Map>"u"?re:Map,"%MapIteratorPrototype%":typeof Map>"u"||!bn||!$e?re:$e(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":vP,"%Object.getOwnPropertyDescriptor%":Qo,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?re:Promise,"%Proxy%":typeof Proxy>"u"?re:Proxy,"%RangeError%":wP,"%ReferenceError%":TP,"%Reflect%":typeof Reflect>"u"?re:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?re:Set,"%SetIteratorPrototype%":typeof Set>"u"||!bn||!$e?re:$e(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?re:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":bn&&$e?$e(""[Symbol.iterator]()):re,"%Symbol%":bn?Symbol:re,"%SyntaxError%":Ss,"%ThrowTypeError%":kP,"%TypedArray%":BP,"%TypeError%":us,"%Uint8Array%":typeof Uint8Array>"u"?re:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?re:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?re:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?re:Uint32Array,"%URIError%":EP,"%WeakMap%":typeof WeakMap>"u"?re:WeakMap,"%WeakRef%":typeof WeakRef>"u"?re:WeakRef,"%WeakSet%":typeof WeakSet>"u"?re:WeakSet,"%Function.prototype.call%":ca,"%Function.prototype.apply%":$1,"%Object.defineProperty%":MP,"%Object.getPrototypeOf%":DP,"%Math.abs%":SP,"%Math.floor%":AP,"%Math.max%":bP,"%Math.min%":CP,"%Math.pow%":PP,"%Math.round%":RP,"%Math.sign%":IP,"%Reflect.getPrototypeOf%":FP};if($e)try{null.error}catch(t){var LP=$e($e(t));nn["%Error.prototype%"]=LP}var NP=function t(e){var r;if(e==="%AsyncFunction%")r=rc("async function () {}");else if(e==="%GeneratorFunction%")r=rc("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=rc("async function* () {}");else if(e==="%AsyncGenerator%"){var i=t("%AsyncGeneratorFunction%");i&&(r=i.prototype)}else if(e==="%AsyncIteratorPrototype%"){var n=t("%AsyncGenerator%");n&&$e&&(r=$e(n.prototype))}return nn[e]=r,r},jy={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},da=eh,cu=yP(),OP=da.call(ca,Array.prototype.concat),UP=da.call($1,Array.prototype.splice),zy=da.call(ca,String.prototype.replace),du=da.call(ca,String.prototype.slice),GP=da.call(ca,RegExp.prototype.exec),VP=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,jP=/\\(\\)?/g,zP=function(e){var r=du(e,0,1),i=du(e,-1);if(r==="%"&&i!=="%")throw new Ss("invalid intrinsic syntax, expected closing `%`");if(i==="%"&&r!=="%")throw new Ss("invalid intrinsic syntax, expected opening `%`");var n=[];return zy(e,VP,function(s,o,a,l){n[n.length]=a?zy(l,jP,"$1"):o||s}),n},HP=function(e,r){var i=e,n;if(cu(jy,i)&&(n=jy[i],i="%"+n[0]+"%"),cu(nn,i)){var s=nn[i];if(s===In&&(s=NP(i)),typeof s>"u"&&!r)throw new us("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:n,name:i,value:s}}throw new Ss("intrinsic "+e+" does not exist!")},rm=function(e,r){if(typeof e!="string"||e.length===0)throw new us("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new us('"allowMissing" argument must be a boolean');if(GP(/^%?[^%]*%?$/,e)===null)throw new Ss("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var i=zP(e),n=i.length>0?i[0]:"",s=HP("%"+n+"%",r),o=s.name,a=s.value,l=!1,u=s.alias;u&&(n=u[0],UP(i,OP([0,1],u)));for(var h=1,c=!0;h<i.length;h+=1){var d=i[h],f=du(d,0,1),p=du(d,-1);if((f==='"'||f==="'"||f==="`"||p==='"'||p==="'"||p==="`")&&f!==p)throw new Ss("property names with quotes must have matching quotes");if((d==="constructor"||!c)&&(l=!0),n+="."+d,o="%"+n+"%",cu(nn,o))a=nn[o];else if(a!=null){if(!(d in a)){if(!r)throw new us("base intrinsic for "+e+" exists, but the property is not available.");return}if(Qo&&h+1>=i.length){var g=Qo(a,d);c=!!g,c&&"get"in g&&!("originalValue"in g.get)?a=g.get:a=a[d]}else c=cu(a,d),a=a[d];c&&!l&&(nn[o]=a)}}return a},W1=rm,X1=z1,$P=X1([W1("%String.prototype.indexOf%")]),Y1=function(e,r){var i=W1(e,!!r);return typeof i=="function"&&$P(e,".prototype.")>-1?X1([i]):i},WP=rm,fa=Y1,XP=Qu,YP=ks,Hy=WP("%Map%",!0),KP=fa("Map.prototype.get",!0),qP=fa("Map.prototype.set",!0),ZP=fa("Map.prototype.has",!0),QP=fa("Map.prototype.delete",!0),JP=fa("Map.prototype.size",!0),K1=!!Hy&&function(){var e,r={assert:function(i){if(!r.has(i))throw new YP("Side channel does not contain "+XP(i))},delete:function(i){if(e){var n=QP(e,i);return JP(e)===0&&(e=void 0),n}return!1},get:function(i){if(e)return KP(e,i)},has:function(i){return e?ZP(e,i):!1},set:function(i,n){e||(e=new Hy),qP(e,i,n)}};return r},eR=rm,th=Y1,tR=Qu,ja=K1,rR=ks,Cn=eR("%WeakMap%",!0),iR=th("WeakMap.prototype.get",!0),nR=th("WeakMap.prototype.set",!0),sR=th("WeakMap.prototype.has",!0),oR=th("WeakMap.prototype.delete",!0),aR=Cn?function(){var e,r,i={assert:function(n){if(!i.has(n))throw new rR("Side channel does not contain "+tR(n))},delete:function(n){if(Cn&&n&&(typeof n=="object"||typeof n=="function")){if(e)return oR(e,n)}else if(ja&&r)return r.delete(n);return!1},get:function(n){return Cn&&n&&(typeof n=="object"||typeof n=="function")&&e?iR(e,n):r&&r.get(n)},has:function(n){return Cn&&n&&(typeof n=="object"||typeof n=="function")&&e?sR(e,n):!!r&&r.has(n)},set:function(n,s){Cn&&n&&(typeof n=="object"||typeof n=="function")?(e||(e=new Cn),nR(e,n,s)):ja&&(r||(r=ja()),r.set(n,s))}};return i}:ja,lR=ks,uR=Qu,hR=MC,cR=K1,dR=aR,fR=dR||cR||hR,pR=function(){var e,r={assert:function(i){if(!r.has(i))throw new lR("Side channel does not contain "+uR(i))},delete:function(i){return!!e&&e.delete(i)},get:function(i){return e&&e.get(i)},has:function(i){return!!e&&e.has(i)},set:function(i,n){e||(e=fR()),e.set(i,n)}};return r},mR=String.prototype.replace,gR=/%20/g,nc={RFC1738:"RFC1738",RFC3986:"RFC3986"},im={default:nc.RFC3986,formatters:{RFC1738:function(t){return mR.call(t,gR,"+")},RFC3986:function(t){return String(t)}},RFC1738:nc.RFC1738,RFC3986:nc.RFC3986},yR=im,sc=Object.prototype.hasOwnProperty,Ki=Array.isArray,ur=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),vR=function(e){for(;e.length>1;){var r=e.pop(),i=r.obj[r.prop];if(Ki(i)){for(var n=[],s=0;s<i.length;++s)typeof i[s]<"u"&&n.push(i[s]);r.obj[r.prop]=n}}},q1=function(e,r){for(var i=r&&r.plainObjects?{__proto__:null}:{},n=0;n<e.length;++n)typeof e[n]<"u"&&(i[n]=e[n]);return i},xR=function t(e,r,i){if(!r)return e;if(typeof r!="object"&&typeof r!="function"){if(Ki(e))e.push(r);else if(e&&typeof e=="object")(i&&(i.plainObjects||i.allowPrototypes)||!sc.call(Object.prototype,r))&&(e[r]=!0);else return[e,r];return e}if(!e||typeof e!="object")return[e].concat(r);var n=e;return Ki(e)&&!Ki(r)&&(n=q1(e,i)),Ki(e)&&Ki(r)?(r.forEach(function(s,o){if(sc.call(e,o)){var a=e[o];a&&typeof a=="object"&&s&&typeof s=="object"?e[o]=t(a,s,i):e.push(s)}else e[o]=s}),e):Object.keys(r).reduce(function(s,o){var a=r[o];return sc.call(s,o)?s[o]=t(s[o],a,i):s[o]=a,s},n)},_R=function(e,r){return Object.keys(r).reduce(function(i,n){return i[n]=r[n],i},e)},wR=function(t,e,r){var i=t.replace(/\+/g," ");if(r==="iso-8859-1")return i.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(i)}catch{return i}},oc=1024,TR=function(e,r,i,n,s){if(e.length===0)return e;var o=e;if(typeof e=="symbol"?o=Symbol.prototype.toString.call(e):typeof e!="string"&&(o=String(e)),i==="iso-8859-1")return escape(o).replace(/%u[0-9a-f]{4}/gi,function(f){return"%26%23"+parseInt(f.slice(2),16)+"%3B"});for(var a="",l=0;l<o.length;l+=oc){for(var u=o.length>=oc?o.slice(l,l+oc):o,h=[],c=0;c<u.length;++c){var d=u.charCodeAt(c);if(d===45||d===46||d===95||d===126||d>=48&&d<=57||d>=65&&d<=90||d>=97&&d<=122||s===yR.RFC1738&&(d===40||d===41)){h[h.length]=u.charAt(c);continue}if(d<128){h[h.length]=ur[d];continue}if(d<2048){h[h.length]=ur[192|d>>6]+ur[128|d&63];continue}if(d<55296||d>=57344){h[h.length]=ur[224|d>>12]+ur[128|d>>6&63]+ur[128|d&63];continue}c+=1,d=65536+((d&1023)<<10|u.charCodeAt(c)&1023),h[h.length]=ur[240|d>>18]+ur[128|d>>12&63]+ur[128|d>>6&63]+ur[128|d&63]}a+=h.join("")}return a},ER=function(e){for(var r=[{obj:{o:e},prop:"o"}],i=[],n=0;n<r.length;++n)for(var s=r[n],o=s.obj[s.prop],a=Object.keys(o),l=0;l<a.length;++l){var u=a[l],h=o[u];typeof h=="object"&&h!==null&&i.indexOf(h)===-1&&(r.push({obj:o,prop:u}),i.push(h))}return vR(r),e},SR=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},AR=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},bR=function(e,r){return[].concat(e,r)},CR=function(e,r){if(Ki(e)){for(var i=[],n=0;n<e.length;n+=1)i.push(r(e[n]));return i}return r(e)},Z1={arrayToObject:q1,assign:_R,combine:bR,compact:ER,decode:wR,encode:TR,isBuffer:AR,isRegExp:SR,maybeMap:CR,merge:xR},Q1=pR,bl=Z1,bo=im,PR=Object.prototype.hasOwnProperty,J1={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,r){return e+"["+r+"]"},repeat:function(e){return e}},gr=Array.isArray,RR=Array.prototype.push,ew=function(t,e){RR.apply(t,gr(e)?e:[e])},IR=Date.prototype.toISOString,$y=bo.default,Ve={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:bl.encode,encodeValuesOnly:!1,filter:void 0,format:$y,formatter:bo.formatters[$y],indices:!1,serializeDate:function(e){return IR.call(e)},skipNulls:!1,strictNullHandling:!1},MR=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},ac={},kR=function t(e,r,i,n,s,o,a,l,u,h,c,d,f,p,g,x,y,v){for(var m=e,_=v,w=0,S=!1;(_=_.get(ac))!==void 0&&!S;){var E=_.get(e);if(w+=1,typeof E<"u"){if(E===w)throw new RangeError("Cyclic object value");S=!0}typeof _.get(ac)>"u"&&(w=0)}if(typeof h=="function"?m=h(r,m):m instanceof Date?m=f(m):i==="comma"&&gr(m)&&(m=bl.maybeMap(m,function(P){return P instanceof Date?f(P):P})),m===null){if(o)return u&&!x?u(r,Ve.encoder,y,"key",p):r;m=""}if(MR(m)||bl.isBuffer(m)){if(u){var T=x?r:u(r,Ve.encoder,y,"key",p);return[g(T)+"="+g(u(m,Ve.encoder,y,"value",p))]}return[g(r)+"="+g(String(m))]}var C=[];if(typeof m>"u")return C;var A;if(i==="comma"&&gr(m))x&&u&&(m=bl.maybeMap(m,u)),A=[{value:m.length>0?m.join(",")||null:void 0}];else if(gr(h))A=h;else{var B=Object.keys(m);A=c?B.sort(c):B}var D=l?String(r).replace(/\./g,"%2E"):String(r),b=n&&gr(m)&&m.length===1?D+"[]":D;if(s&&gr(m)&&m.length===0)return b+"[]";for(var M=0;M<A.length;++M){var z=A[M],q=typeof z=="object"&&z&&typeof z.value<"u"?z.value:m[z];if(!(a&&q===null)){var O=d&&l?String(z).replace(/\./g,"%2E"):String(z),I=gr(m)?typeof i=="function"?i(b,O):b:b+(d?"."+O:"["+O+"]");v.set(e,w);var G=Q1();G.set(ac,v),ew(C,t(q,I,i,n,s,o,a,l,i==="comma"&&x&&gr(m)?null:u,h,c,d,f,p,g,x,y,G))}}return C},DR=function(e){if(!e)return Ve;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.encodeDotInKeys<"u"&&typeof e.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var r=e.charset||Ve.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var i=bo.default;if(typeof e.format<"u"){if(!PR.call(bo.formatters,e.format))throw new TypeError("Unknown format option provided.");i=e.format}var n=bo.formatters[i],s=Ve.filter;(typeof e.filter=="function"||gr(e.filter))&&(s=e.filter);var o;if(e.arrayFormat in J1?o=e.arrayFormat:"indices"in e?o=e.indices?"indices":"repeat":o=Ve.arrayFormat,"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var a=typeof e.allowDots>"u"?e.encodeDotInKeys===!0?!0:Ve.allowDots:!!e.allowDots;return{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:Ve.addQueryPrefix,allowDots:a,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:Ve.allowEmptyArrays,arrayFormat:o,charset:r,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:Ve.charsetSentinel,commaRoundTrip:!!e.commaRoundTrip,delimiter:typeof e.delimiter>"u"?Ve.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:Ve.encode,encodeDotInKeys:typeof e.encodeDotInKeys=="boolean"?e.encodeDotInKeys:Ve.encodeDotInKeys,encoder:typeof e.encoder=="function"?e.encoder:Ve.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:Ve.encodeValuesOnly,filter:s,format:i,formatter:n,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:Ve.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:Ve.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:Ve.strictNullHandling}},FR=function(t,e){var r=t,i=DR(e),n,s;typeof i.filter=="function"?(s=i.filter,r=s("",r)):gr(i.filter)&&(s=i.filter,n=s);var o=[];if(typeof r!="object"||r===null)return"";var a=J1[i.arrayFormat],l=a==="comma"&&i.commaRoundTrip;n||(n=Object.keys(r)),i.sort&&n.sort(i.sort);for(var u=Q1(),h=0;h<n.length;++h){var c=n[h],d=r[c];i.skipNulls&&d===null||ew(o,kR(d,c,a,l,i.allowEmptyArrays,i.strictNullHandling,i.skipNulls,i.encodeDotInKeys,i.encode?i.encoder:null,i.filter,i.sort,i.allowDots,i.serializeDate,i.format,i.formatter,i.encodeValuesOnly,i.charset,u))}var f=o.join(i.delimiter),p=i.addQueryPrefix===!0?"?":"";return i.charsetSentinel&&(i.charset==="iso-8859-1"?p+="utf8=%26%2310003%3B&":p+="utf8=%E2%9C%93&"),f.length>0?p+f:""},pn=Z1,Qd=Object.prototype.hasOwnProperty,Wy=Array.isArray,Ie={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:pn.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1,throwOnLimitExceeded:!1},BR=function(t){return t.replace(/&#(\d+);/g,function(e,r){return String.fromCharCode(parseInt(r,10))})},tw=function(t,e,r){if(t&&typeof t=="string"&&e.comma&&t.indexOf(",")>-1)return t.split(",");if(e.throwOnLimitExceeded&&r>=e.arrayLimit)throw new RangeError("Array limit exceeded. Only "+e.arrayLimit+" element"+(e.arrayLimit===1?"":"s")+" allowed in an array.");return t},LR="utf8=%26%2310003%3B",NR="utf8=%E2%9C%93",OR=function(e,r){var i={__proto__:null},n=r.ignoreQueryPrefix?e.replace(/^\?/,""):e;n=n.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var s=r.parameterLimit===1/0?void 0:r.parameterLimit,o=n.split(r.delimiter,r.throwOnLimitExceeded?s+1:s);if(r.throwOnLimitExceeded&&o.length>s)throw new RangeError("Parameter limit exceeded. Only "+s+" parameter"+(s===1?"":"s")+" allowed.");var a=-1,l,u=r.charset;if(r.charsetSentinel)for(l=0;l<o.length;++l)o[l].indexOf("utf8=")===0&&(o[l]===NR?u="utf-8":o[l]===LR&&(u="iso-8859-1"),a=l,l=o.length);for(l=0;l<o.length;++l)if(l!==a){var h=o[l],c=h.indexOf("]="),d=c===-1?h.indexOf("="):c+1,f,p;d===-1?(f=r.decoder(h,Ie.decoder,u,"key"),p=r.strictNullHandling?null:""):(f=r.decoder(h.slice(0,d),Ie.decoder,u,"key"),p=pn.maybeMap(tw(h.slice(d+1),r,Wy(i[f])?i[f].length:0),function(x){return r.decoder(x,Ie.decoder,u,"value")})),p&&r.interpretNumericEntities&&u==="iso-8859-1"&&(p=BR(String(p))),h.indexOf("[]=")>-1&&(p=Wy(p)?[p]:p);var g=Qd.call(i,f);g&&r.duplicates==="combine"?i[f]=pn.combine(i[f],p):(!g||r.duplicates==="last")&&(i[f]=p)}return i},UR=function(t,e,r,i){var n=0;if(t.length>0&&t[t.length-1]==="[]"){var s=t.slice(0,-1).join("");n=Array.isArray(e)&&e[s]?e[s].length:0}for(var o=i?e:tw(e,r,n),a=t.length-1;a>=0;--a){var l,u=t[a];if(u==="[]"&&r.parseArrays)l=r.allowEmptyArrays&&(o===""||r.strictNullHandling&&o===null)?[]:pn.combine([],o);else{l=r.plainObjects?{__proto__:null}:{};var h=u.charAt(0)==="["&&u.charAt(u.length-1)==="]"?u.slice(1,-1):u,c=r.decodeDotInKeys?h.replace(/%2E/g,"."):h,d=parseInt(c,10);!r.parseArrays&&c===""?l={0:o}:!isNaN(d)&&u!==c&&String(d)===c&&d>=0&&r.parseArrays&&d<=r.arrayLimit?(l=[],l[d]=o):c!=="__proto__"&&(l[c]=o)}o=l}return o},GR=function(e,r,i,n){if(e){var s=i.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,o=/(\[[^[\]]*])/,a=/(\[[^[\]]*])/g,l=i.depth>0&&o.exec(s),u=l?s.slice(0,l.index):s,h=[];if(u){if(!i.plainObjects&&Qd.call(Object.prototype,u)&&!i.allowPrototypes)return;h.push(u)}for(var c=0;i.depth>0&&(l=a.exec(s))!==null&&c<i.depth;){if(c+=1,!i.plainObjects&&Qd.call(Object.prototype,l[1].slice(1,-1))&&!i.allowPrototypes)return;h.push(l[1])}if(l){if(i.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+i.depth+" and strictDepth is true");h.push("["+s.slice(l.index)+"]")}return UR(h,r,i,n)}},VR=function(e){if(!e)return Ie;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.decodeDotInKeys<"u"&&typeof e.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(e.decoder!==null&&typeof e.decoder<"u"&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if(typeof e.throwOnLimitExceeded<"u"&&typeof e.throwOnLimitExceeded!="boolean")throw new TypeError("`throwOnLimitExceeded` option must be a boolean");var r=typeof e.charset>"u"?Ie.charset:e.charset,i=typeof e.duplicates>"u"?Ie.duplicates:e.duplicates;if(i!=="combine"&&i!=="first"&&i!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var n=typeof e.allowDots>"u"?e.decodeDotInKeys===!0?!0:Ie.allowDots:!!e.allowDots;return{allowDots:n,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:Ie.allowEmptyArrays,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:Ie.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:Ie.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:Ie.arrayLimit,charset:r,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:Ie.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:Ie.comma,decodeDotInKeys:typeof e.decodeDotInKeys=="boolean"?e.decodeDotInKeys:Ie.decodeDotInKeys,decoder:typeof e.decoder=="function"?e.decoder:Ie.decoder,delimiter:typeof e.delimiter=="string"||pn.isRegExp(e.delimiter)?e.delimiter:Ie.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:Ie.depth,duplicates:i,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:Ie.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:Ie.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:Ie.plainObjects,strictDepth:typeof e.strictDepth=="boolean"?!!e.strictDepth:Ie.strictDepth,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:Ie.strictNullHandling,throwOnLimitExceeded:typeof e.throwOnLimitExceeded=="boolean"?e.throwOnLimitExceeded:!1}},jR=function(t,e){var r=VR(e);if(t===""||t===null||typeof t>"u")return r.plainObjects?{__proto__:null}:{};for(var i=typeof t=="string"?OR(t,r):t,n=r.plainObjects?{__proto__:null}:{},s=Object.keys(i),o=0;o<s.length;++o){var a=s[o],l=GR(a,i[a],r,typeof t=="string");n=pn.merge(n,l,r)}return r.allowSparse===!0?n:pn.compact(n)},zR=FR,HR=jR,$R=im,WR={formats:$R,parse:HR,stringify:zR},XR=Yb;function jr(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var YR=/^([a-z0-9.+-]+:)/i,KR=/:[0-9]*$/,qR=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,ZR=["<",">",'"',"`"," ","\r",`
`,"	"],QR=["{","}","|","\\","^","`"].concat(ZR),Jd=["'"].concat(QR),Xy=["%","/","?",";","#"].concat(Jd),Yy=["/","?","#"],JR=255,Ky=/^[+a-z0-9A-Z_-]{0,63}$/,eI=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,tI={javascript:!0,"javascript:":!0},ef={javascript:!0,"javascript:":!0},hs={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},tf=WR;function rI(t,e,r){if(t&&typeof t=="object"&&t instanceof jr)return t;var i=new jr;return i.parse(t,e,r),i}jr.prototype.parse=function(t,e,r){if(typeof t!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var i=t.indexOf("?"),n=i!==-1&&i<t.indexOf("#")?"?":"#",s=t.split(n),o=/\\/g;s[0]=s[0].replace(o,"/"),t=s.join(n);var a=t;if(a=a.trim(),!r&&t.split("#").length===1){var l=qR.exec(a);if(l)return this.path=a,this.href=a,this.pathname=l[1],l[2]?(this.search=l[2],e?this.query=tf.parse(this.search.substr(1)):this.query=this.search.substr(1)):e&&(this.search="",this.query={}),this}var u=YR.exec(a);if(u){u=u[0];var h=u.toLowerCase();this.protocol=h,a=a.substr(u.length)}if(r||u||a.match(/^\/\/[^@/]+@[^@/]+/)){var c=a.substr(0,2)==="//";c&&!(u&&ef[u])&&(a=a.substr(2),this.slashes=!0)}if(!ef[u]&&(c||u&&!hs[u])){for(var d=-1,f=0;f<Yy.length;f++){var p=a.indexOf(Yy[f]);p!==-1&&(d===-1||p<d)&&(d=p)}var g,x;d===-1?x=a.lastIndexOf("@"):x=a.lastIndexOf("@",d),x!==-1&&(g=a.slice(0,x),a=a.slice(x+1),this.auth=decodeURIComponent(g)),d=-1;for(var f=0;f<Xy.length;f++){var p=a.indexOf(Xy[f]);p!==-1&&(d===-1||p<d)&&(d=p)}d===-1&&(d=a.length),this.host=a.slice(0,d),a=a.slice(d),this.parseHost(),this.hostname=this.hostname||"";var y=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!y)for(var v=this.hostname.split(/\./),f=0,m=v.length;f<m;f++){var _=v[f];if(_&&!_.match(Ky)){for(var w="",S=0,E=_.length;S<E;S++)_.charCodeAt(S)>127?w+="x":w+=_[S];if(!w.match(Ky)){var T=v.slice(0,f),C=v.slice(f+1),A=_.match(eI);A&&(T.push(A[1]),C.unshift(A[2])),C.length&&(a="/"+C.join(".")+a),this.hostname=T.join(".");break}}}this.hostname.length>JR?this.hostname="":this.hostname=this.hostname.toLowerCase(),y||(this.hostname=XR.toASCII(this.hostname));var B=this.port?":"+this.port:"",D=this.hostname||"";this.host=D+B,this.href+=this.host,y&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),a[0]!=="/"&&(a="/"+a))}if(!tI[h])for(var f=0,m=Jd.length;f<m;f++){var b=Jd[f];if(a.indexOf(b)!==-1){var M=encodeURIComponent(b);M===b&&(M=escape(b)),a=a.split(b).join(M)}}var z=a.indexOf("#");z!==-1&&(this.hash=a.substr(z),a=a.slice(0,z));var q=a.indexOf("?");if(q!==-1?(this.search=a.substr(q),this.query=a.substr(q+1),e&&(this.query=tf.parse(this.query)),a=a.slice(0,q)):e&&(this.search="",this.query={}),a&&(this.pathname=a),hs[h]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var B=this.pathname||"",O=this.search||"";this.path=B+O}return this.href=this.format(),this};jr.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",r=this.pathname||"",i=this.hash||"",n=!1,s="";this.host?n=t+this.host:this.hostname&&(n=t+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(n+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(s=tf.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var o=this.search||s&&"?"+s||"";return e&&e.substr(-1)!==":"&&(e+=":"),this.slashes||(!e||hs[e])&&n!==!1?(n="//"+(n||""),r&&r.charAt(0)!=="/"&&(r="/"+r)):n||(n=""),i&&i.charAt(0)!=="#"&&(i="#"+i),o&&o.charAt(0)!=="?"&&(o="?"+o),r=r.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),o=o.replace("#","%23"),e+n+r+o+i};jr.prototype.resolve=function(t){return this.resolveObject(rI(t,!1,!0)).format()};jr.prototype.resolveObject=function(t){if(typeof t=="string"){var e=new jr;e.parse(t,!1,!0),t=e}for(var r=new jr,i=Object.keys(this),n=0;n<i.length;n++){var s=i[n];r[s]=this[s]}if(r.hash=t.hash,t.href==="")return r.href=r.format(),r;if(t.slashes&&!t.protocol){for(var o=Object.keys(t),a=0;a<o.length;a++){var l=o[a];l!=="protocol"&&(r[l]=t[l])}return hs[r.protocol]&&r.hostname&&!r.pathname&&(r.pathname="/",r.path=r.pathname),r.href=r.format(),r}if(t.protocol&&t.protocol!==r.protocol){if(!hs[t.protocol]){for(var u=Object.keys(t),h=0;h<u.length;h++){var c=u[h];r[c]=t[c]}return r.href=r.format(),r}if(r.protocol=t.protocol,!t.host&&!ef[t.protocol]){for(var m=(t.pathname||"").split("/");m.length&&!(t.host=m.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),m[0]!==""&&m.unshift(""),m.length<2&&m.unshift(""),r.pathname=m.join("/")}else r.pathname=t.pathname;if(r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var d=r.pathname||"",f=r.search||"";r.path=d+f}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var p=r.pathname&&r.pathname.charAt(0)==="/",g=t.host||t.pathname&&t.pathname.charAt(0)==="/",x=g||p||r.host&&t.pathname,y=x,v=r.pathname&&r.pathname.split("/")||[],m=t.pathname&&t.pathname.split("/")||[],_=r.protocol&&!hs[r.protocol];if(_&&(r.hostname="",r.port=null,r.host&&(v[0]===""?v[0]=r.host:v.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(m[0]===""?m[0]=t.host:m.unshift(t.host)),t.host=null),x=x&&(m[0]===""||v[0]==="")),g)r.host=t.host||t.host===""?t.host:r.host,r.hostname=t.hostname||t.hostname===""?t.hostname:r.hostname,r.search=t.search,r.query=t.query,v=m;else if(m.length)v||(v=[]),v.pop(),v=v.concat(m),r.search=t.search,r.query=t.query;else if(t.search!=null){if(_){r.host=v.shift(),r.hostname=r.host;var w=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;w&&(r.auth=w.shift(),r.hostname=w.shift(),r.host=r.hostname)}return r.search=t.search,r.query=t.query,(r.pathname!==null||r.search!==null)&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!v.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var S=v.slice(-1)[0],E=(r.host||t.host||v.length>1)&&(S==="."||S==="..")||S==="",T=0,C=v.length;C>=0;C--)S=v[C],S==="."?v.splice(C,1):S===".."?(v.splice(C,1),T++):T&&(v.splice(C,1),T--);if(!x&&!y)for(;T--;T)v.unshift("..");x&&v[0]!==""&&(!v[0]||v[0].charAt(0)!=="/")&&v.unshift(""),E&&v.join("/").substr(-1)!=="/"&&v.push("");var A=v[0]===""||v[0]&&v[0].charAt(0)==="/";if(_){r.hostname=A?"":v.length?v.shift():"",r.host=r.hostname;var w=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;w&&(r.auth=w.shift(),r.hostname=w.shift(),r.host=r.hostname)}return x=x||r.host&&v.length,x&&!A&&v.unshift(""),v.length>0?r.pathname=v.join("/"):(r.pathname=null,r.path=null),(r.pathname!==null||r.search!==null)&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r};jr.prototype.parseHost=function(){var t=this.host,e=KR.exec(t);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};const qy={};function ne(t,e,r=3){if(qy[e])return;let i=new Error().stack;typeof i>"u"?console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${t}`):(i=i.split(`
`).splice(r).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${e}
Deprecated since v${t}`),console.warn(i),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${t}`),console.warn(i))),qy[e]=!0}function $t(t){if(typeof t!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(t)}`)}function Xs(t){return t.split("?")[0].split("#")[0]}function iI(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function nI(t,e,r){return t.replace(new RegExp(iI(e),"g"),r)}function sI(t,e){let r="",i=0,n=-1,s=0,o=-1;for(let a=0;a<=t.length;++a){if(a<t.length)o=t.charCodeAt(a);else{if(o===47)break;o=47}if(o===47){if(!(n===a-1||s===1))if(n!==a-1&&s===2){if(r.length<2||i!==2||r.charCodeAt(r.length-1)!==46||r.charCodeAt(r.length-2)!==46){if(r.length>2){const l=r.lastIndexOf("/");if(l!==r.length-1){l===-1?(r="",i=0):(r=r.slice(0,l),i=r.length-1-r.lastIndexOf("/")),n=a,s=0;continue}}else if(r.length===2||r.length===1){r="",i=0,n=a,s=0;continue}}}else r.length>0?r+=`/${t.slice(n+1,a)}`:r=t.slice(n+1,a),i=a-n-1;n=a,s=0}else o===46&&s!==-1?++s:s=-1}return r}const Ke={toPosix(t){return nI(t,"\\","/")},isUrl(t){return/^https?:/.test(this.toPosix(t))},isDataUrl(t){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(t)},isBlobUrl(t){return t.startsWith("blob:")},hasProtocol(t){return/^[^/:]+:/.test(this.toPosix(t))},getProtocol(t){$t(t),t=this.toPosix(t);const e=/^file:\/\/\//.exec(t);if(e)return e[0];const r=/^[^/:]+:\/{0,2}/.exec(t);return r?r[0]:""},toAbsolute(t,e,r){if($t(t),this.isDataUrl(t)||this.isBlobUrl(t))return t;const i=Xs(this.toPosix(e??j.ADAPTER.getBaseUrl())),n=Xs(this.toPosix(r??this.rootname(i)));return t=this.toPosix(t),t.startsWith("/")?Ke.join(n,t.slice(1)):this.isAbsolute(t)?t:this.join(i,t)},normalize(t){if($t(t),t.length===0)return".";if(this.isDataUrl(t)||this.isBlobUrl(t))return t;t=this.toPosix(t);let e="";const r=t.startsWith("/");this.hasProtocol(t)&&(e=this.rootname(t),t=t.slice(e.length));const i=t.endsWith("/");return t=sI(t),t.length>0&&i&&(t+="/"),r?`/${t}`:e+t},isAbsolute(t){return $t(t),t=this.toPosix(t),this.hasProtocol(t)?!0:t.startsWith("/")},join(...t){if(t.length===0)return".";let e;for(let r=0;r<t.length;++r){const i=t[r];if($t(i),i.length>0)if(e===void 0)e=i;else{const n=t[r-1]??"";this.joinExtensions.includes(this.extname(n).toLowerCase())?e+=`/../${i}`:e+=`/${i}`}}return e===void 0?".":this.normalize(e)},dirname(t){if($t(t),t.length===0)return".";t=this.toPosix(t);let e=t.charCodeAt(0);const r=e===47;let i=-1,n=!0;const s=this.getProtocol(t),o=t;t=t.slice(s.length);for(let a=t.length-1;a>=1;--a)if(e=t.charCodeAt(a),e===47){if(!n){i=a;break}}else n=!1;return i===-1?r?"/":this.isUrl(o)?s+t:s:r&&i===1?"//":s+t.slice(0,i)},rootname(t){$t(t),t=this.toPosix(t);let e="";if(t.startsWith("/")?e="/":e=this.getProtocol(t),this.isUrl(t)){const r=t.indexOf("/",e.length);r!==-1?e=t.slice(0,r):e=t,e.endsWith("/")||(e+="/")}return e},basename(t,e){$t(t),e&&$t(e),t=Xs(this.toPosix(t));let r=0,i=-1,n=!0,s;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e.length===t.length&&e===t)return"";let o=e.length-1,a=-1;for(s=t.length-1;s>=0;--s){const l=t.charCodeAt(s);if(l===47){if(!n){r=s+1;break}}else a===-1&&(n=!1,a=s+1),o>=0&&(l===e.charCodeAt(o)?--o===-1&&(i=s):(o=-1,i=a))}return r===i?i=a:i===-1&&(i=t.length),t.slice(r,i)}for(s=t.length-1;s>=0;--s)if(t.charCodeAt(s)===47){if(!n){r=s+1;break}}else i===-1&&(n=!1,i=s+1);return i===-1?"":t.slice(r,i)},extname(t){$t(t),t=Xs(this.toPosix(t));let e=-1,r=0,i=-1,n=!0,s=0;for(let o=t.length-1;o>=0;--o){const a=t.charCodeAt(o);if(a===47){if(!n){r=o+1;break}continue}i===-1&&(n=!1,i=o+1),a===46?e===-1?e=o:s!==1&&(s=1):e!==-1&&(s=-1)}return e===-1||i===-1||s===0||s===1&&e===i-1&&e===r+1?"":t.slice(e,i)},parse(t){$t(t);const e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;t=Xs(this.toPosix(t));let r=t.charCodeAt(0);const i=this.isAbsolute(t);let n;e.root=this.rootname(t),i||this.hasProtocol(t)?n=1:n=0;let s=-1,o=0,a=-1,l=!0,u=t.length-1,h=0;for(;u>=n;--u){if(r=t.charCodeAt(u),r===47){if(!l){o=u+1;break}continue}a===-1&&(l=!1,a=u+1),r===46?s===-1?s=u:h!==1&&(h=1):s!==-1&&(h=-1)}return s===-1||a===-1||h===0||h===1&&s===a-1&&s===o+1?a!==-1&&(o===0&&i?e.base=e.name=t.slice(1,a):e.base=e.name=t.slice(o,a)):(o===0&&i?(e.name=t.slice(1,s),e.base=t.slice(1,a)):(e.name=t.slice(o,s),e.base=t.slice(o,a)),e.ext=t.slice(s,a)),e.dir=this.dirname(t),e},sep:"/",delimiter:":",joinExtensions:[".html"]};let lc;async function oI(){return lc??(lc=(async()=>{var s;const t=document.createElement("canvas").getContext("webgl");if(!t)return yt.UNPACK;const e=await new Promise(o=>{const a=document.createElement("video");a.onloadeddata=()=>o(a),a.onerror=()=>o(null),a.autoplay=!1,a.crossOrigin="anonymous",a.preload="auto",a.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",a.load()});if(!e)return yt.UNPACK;const r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r);const i=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,i),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.NONE),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e);const n=new Uint8Array(4);return t.readPixels(0,0,1,1,t.RGBA,t.UNSIGNED_BYTE,n),t.deleteFramebuffer(i),t.deleteTexture(r),(s=t.getExtension("WEBGL_lose_context"))==null||s.loseContext(),n[0]<=n[3]?yt.PMA:yt.UNPACK})()),lc}let uc;function aI(){return typeof uc>"u"&&(uc=function(){var e;const t={stencil:!0,failIfMajorPerformanceCaveat:j.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!j.ADAPTER.getWebGLRenderingContext())return!1;const r=j.ADAPTER.createCanvas();let i=r.getContext("webgl",t)||r.getContext("experimental-webgl",t);const n=!!((e=i==null?void 0:i.getContextAttributes())!=null&&e.stencil);if(i){const s=i.getExtension("WEBGL_lose_context");s&&s.loseContext()}return i=null,n}catch{return!1}}()),uc}var lI={grad:.9,turn:360,rad:360/(2*Math.PI)},Ir=function(t){return typeof t=="string"?t.length>0:typeof t=="number"},Xe=function(t,e,r){return e===void 0&&(e=0),r===void 0&&(r=Math.pow(10,e)),Math.round(r*t)/r+0},Ut=function(t,e,r){return e===void 0&&(e=0),r===void 0&&(r=1),t>r?r:t>e?t:e},rw=function(t){return(t=isFinite(t)?t%360:0)>0?t:t+360},Zy=function(t){return{r:Ut(t.r,0,255),g:Ut(t.g,0,255),b:Ut(t.b,0,255),a:Ut(t.a)}},hc=function(t){return{r:Xe(t.r),g:Xe(t.g),b:Xe(t.b),a:Xe(t.a,3)}},uI=/^#([0-9a-f]{3,8})$/i,za=function(t){var e=t.toString(16);return e.length<2?"0"+e:e},iw=function(t){var e=t.r,r=t.g,i=t.b,n=t.a,s=Math.max(e,r,i),o=s-Math.min(e,r,i),a=o?s===e?(r-i)/o:s===r?2+(i-e)/o:4+(e-r)/o:0;return{h:60*(a<0?a+6:a),s:s?o/s*100:0,v:s/255*100,a:n}},nw=function(t){var e=t.h,r=t.s,i=t.v,n=t.a;e=e/360*6,r/=100,i/=100;var s=Math.floor(e),o=i*(1-r),a=i*(1-(e-s)*r),l=i*(1-(1-e+s)*r),u=s%6;return{r:255*[i,a,o,o,l,i][u],g:255*[l,i,i,a,o,o][u],b:255*[o,o,l,i,i,a][u],a:n}},Qy=function(t){return{h:rw(t.h),s:Ut(t.s,0,100),l:Ut(t.l,0,100),a:Ut(t.a)}},Jy=function(t){return{h:Xe(t.h),s:Xe(t.s),l:Xe(t.l),a:Xe(t.a,3)}},e0=function(t){return nw((r=(e=t).s,{h:e.h,s:(r*=((i=e.l)<50?i:100-i)/100)>0?2*r/(i+r)*100:0,v:i+r,a:e.a}));var e,r,i},Co=function(t){return{h:(e=iw(t)).h,s:(n=(200-(r=e.s))*(i=e.v)/100)>0&&n<200?r*i/100/(n<=100?n:200-n)*100:0,l:n/2,a:e.a};var e,r,i,n},hI=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,cI=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,dI=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,fI=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,rf={string:[[function(t){var e=uI.exec(t);return e?(t=e[1]).length<=4?{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:t.length===4?Xe(parseInt(t[3]+t[3],16)/255,2):1}:t.length===6||t.length===8?{r:parseInt(t.substr(0,2),16),g:parseInt(t.substr(2,2),16),b:parseInt(t.substr(4,2),16),a:t.length===8?Xe(parseInt(t.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(t){var e=dI.exec(t)||fI.exec(t);return e?e[2]!==e[4]||e[4]!==e[6]?null:Zy({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(t){var e=hI.exec(t)||cI.exec(t);if(!e)return null;var r,i,n=Qy({h:(r=e[1],i=e[2],i===void 0&&(i="deg"),Number(r)*(lI[i]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return e0(n)},"hsl"]],object:[[function(t){var e=t.r,r=t.g,i=t.b,n=t.a,s=n===void 0?1:n;return Ir(e)&&Ir(r)&&Ir(i)?Zy({r:Number(e),g:Number(r),b:Number(i),a:Number(s)}):null},"rgb"],[function(t){var e=t.h,r=t.s,i=t.l,n=t.a,s=n===void 0?1:n;if(!Ir(e)||!Ir(r)||!Ir(i))return null;var o=Qy({h:Number(e),s:Number(r),l:Number(i),a:Number(s)});return e0(o)},"hsl"],[function(t){var e=t.h,r=t.s,i=t.v,n=t.a,s=n===void 0?1:n;if(!Ir(e)||!Ir(r)||!Ir(i))return null;var o=function(a){return{h:rw(a.h),s:Ut(a.s,0,100),v:Ut(a.v,0,100),a:Ut(a.a)}}({h:Number(e),s:Number(r),v:Number(i),a:Number(s)});return nw(o)},"hsv"]]},t0=function(t,e){for(var r=0;r<e.length;r++){var i=e[r][0](t);if(i)return[i,e[r][1]]}return[null,void 0]},pI=function(t){return typeof t=="string"?t0(t.trim(),rf.string):typeof t=="object"&&t!==null?t0(t,rf.object):[null,void 0]},cc=function(t,e){var r=Co(t);return{h:r.h,s:Ut(r.s+100*e,0,100),l:r.l,a:r.a}},dc=function(t){return(299*t.r+587*t.g+114*t.b)/1e3/255},r0=function(t,e){var r=Co(t);return{h:r.h,s:r.s,l:Ut(r.l+100*e,0,100),a:r.a}},nf=function(){function t(e){this.parsed=pI(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return t.prototype.isValid=function(){return this.parsed!==null},t.prototype.brightness=function(){return Xe(dc(this.rgba),2)},t.prototype.isDark=function(){return dc(this.rgba)<.5},t.prototype.isLight=function(){return dc(this.rgba)>=.5},t.prototype.toHex=function(){return e=hc(this.rgba),r=e.r,i=e.g,n=e.b,o=(s=e.a)<1?za(Xe(255*s)):"","#"+za(r)+za(i)+za(n)+o;var e,r,i,n,s,o},t.prototype.toRgb=function(){return hc(this.rgba)},t.prototype.toRgbString=function(){return e=hc(this.rgba),r=e.r,i=e.g,n=e.b,(s=e.a)<1?"rgba("+r+", "+i+", "+n+", "+s+")":"rgb("+r+", "+i+", "+n+")";var e,r,i,n,s},t.prototype.toHsl=function(){return Jy(Co(this.rgba))},t.prototype.toHslString=function(){return e=Jy(Co(this.rgba)),r=e.h,i=e.s,n=e.l,(s=e.a)<1?"hsla("+r+", "+i+"%, "+n+"%, "+s+")":"hsl("+r+", "+i+"%, "+n+"%)";var e,r,i,n,s},t.prototype.toHsv=function(){return e=iw(this.rgba),{h:Xe(e.h),s:Xe(e.s),v:Xe(e.v),a:Xe(e.a,3)};var e},t.prototype.invert=function(){return hr({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},t.prototype.saturate=function(e){return e===void 0&&(e=.1),hr(cc(this.rgba,e))},t.prototype.desaturate=function(e){return e===void 0&&(e=.1),hr(cc(this.rgba,-e))},t.prototype.grayscale=function(){return hr(cc(this.rgba,-1))},t.prototype.lighten=function(e){return e===void 0&&(e=.1),hr(r0(this.rgba,e))},t.prototype.darken=function(e){return e===void 0&&(e=.1),hr(r0(this.rgba,-e))},t.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},t.prototype.alpha=function(e){return typeof e=="number"?hr({r:(r=this.rgba).r,g:r.g,b:r.b,a:e}):Xe(this.rgba.a,3);var r},t.prototype.hue=function(e){var r=Co(this.rgba);return typeof e=="number"?hr({h:e,s:r.s,l:r.l,a:r.a}):Xe(r.h)},t.prototype.isEqual=function(e){return this.toHex()===hr(e).toHex()},t}(),hr=function(t){return t instanceof nf?t:new nf(t)},i0=[],mI=function(t){t.forEach(function(e){i0.indexOf(e)<0&&(e(nf,rf),i0.push(e))})};function gI(t,e){var r={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},i={};for(var n in r)i[r[n]]=n;var s={};t.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var a,l,u=i[this.toHex()];if(u)return u;if(o!=null&&o.closest){var h=this.toRgb(),c=1/0,d="black";if(!s.length)for(var f in r)s[f]=new t(r[f]).toRgb();for(var p in r){var g=(a=h,l=s[p],Math.pow(a.r-l.r,2)+Math.pow(a.g-l.g,2)+Math.pow(a.b-l.b,2));g<c&&(c=g,d=p)}return d}},e.string.push([function(o){var a=o.toLowerCase(),l=a==="transparent"?"#0000":r[a];return l?new t(l).toRgb():null},"name"])}mI([gI]);const Mn=class Cl{constructor(e=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=e}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(e){return this.value=e,this}set value(e){if(e instanceof Cl)this._value=this.cloneSource(e._value),this._int=e._int,this._components.set(e._components);else{if(e===null)throw new Error("Cannot set PIXI.Color#value to null");(this._value===null||!this.isSourceEqual(this._value,e))&&(this.normalize(e),this._value=this.cloneSource(e))}}get value(){return this._value}cloneSource(e){return typeof e=="string"||typeof e=="number"||e instanceof Number||e===null?e:Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):typeof e=="object"&&e!==null?{...e}:e}isSourceEqual(e,r){const i=typeof e;if(i!==typeof r)return!1;if(i==="number"||i==="string"||e instanceof Number)return e===r;if(Array.isArray(e)&&Array.isArray(r)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(r))return e.length!==r.length?!1:e.every((n,s)=>n===r[s]);if(e!==null&&r!==null){const n=Object.keys(e),s=Object.keys(r);return n.length!==s.length?!1:n.every(o=>e[o]===r[o])}return e===r}toRgba(){const[e,r,i,n]=this._components;return{r:e,g:r,b:i,a:n}}toRgb(){const[e,r,i]=this._components;return{r:e,g:r,b:i}}toRgbaString(){const[e,r,i]=this.toUint8RgbArray();return`rgba(${e},${r},${i},${this.alpha})`}toUint8RgbArray(e){const[r,i,n]=this._components;return e=e??[],e[0]=Math.round(r*255),e[1]=Math.round(i*255),e[2]=Math.round(n*255),e}toRgbArray(e){e=e??[];const[r,i,n]=this._components;return e[0]=r,e[1]=i,e[2]=n,e}toNumber(){return this._int}toLittleEndianNumber(){const e=this._int;return(e>>16)+(e&65280)+((e&255)<<16)}multiply(e){const[r,i,n,s]=Cl.temp.setValue(e)._components;return this._components[0]*=r,this._components[1]*=i,this._components[2]*=n,this._components[3]*=s,this.refreshInt(),this._value=null,this}premultiply(e,r=!0){return r&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this.refreshInt(),this._value=null,this}toPremultiplied(e,r=!0){if(e===1)return(255<<24)+this._int;if(e===0)return r?0:this._int;let i=this._int>>16&255,n=this._int>>8&255,s=this._int&255;return r&&(i=i*e+.5|0,n=n*e+.5|0,s=s*e+.5|0),(e*255<<24)+(i<<16)+(n<<8)+s}toHex(){const e=this._int.toString(16);return`#${"000000".substring(0,6-e.length)+e}`}toHexa(){const e=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-e.length)+e}setAlpha(e){return this._components[3]=this._clamp(e),this}round(e){const[r,i,n]=this._components;return this._components[0]=Math.round(r*e)/e,this._components[1]=Math.round(i*e)/e,this._components[2]=Math.round(n*e)/e,this.refreshInt(),this._value=null,this}toArray(e){e=e??[];const[r,i,n,s]=this._components;return e[0]=r,e[1]=i,e[2]=n,e[3]=s,e}normalize(e){let r,i,n,s;if((typeof e=="number"||e instanceof Number)&&e>=0&&e<=16777215){const o=e;r=(o>>16&255)/255,i=(o>>8&255)/255,n=(o&255)/255,s=1}else if((Array.isArray(e)||e instanceof Float32Array)&&e.length>=3&&e.length<=4)e=this._clamp(e),[r,i,n,s=1]=e;else if((e instanceof Uint8Array||e instanceof Uint8ClampedArray)&&e.length>=3&&e.length<=4)e=this._clamp(e,0,255),[r,i,n,s=255]=e,r/=255,i/=255,n/=255,s/=255;else if(typeof e=="string"||typeof e=="object"){if(typeof e=="string"){const a=Cl.HEX_PATTERN.exec(e);a&&(e=`#${a[2]}`)}const o=hr(e);o.isValid()&&({r,g:i,b:n,a:s}=o.rgba,r/=255,i/=255,n/=255)}if(r!==void 0)this._components[0]=r,this._components[1]=i,this._components[2]=n,this._components[3]=s,this.refreshInt();else throw new Error(`Unable to convert color ${e}`)}refreshInt(){this._clamp(this._components);const[e,r,i]=this._components;this._int=(e*255<<16)+(r*255<<8)+(i*255|0)}_clamp(e,r=0,i=1){return typeof e=="number"?Math.min(Math.max(e,r),i):(e.forEach((n,s)=>{e[s]=Math.min(Math.max(n,r),i)}),e)}};Mn.shared=new Mn,Mn.temp=new Mn,Mn.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let me=Mn;function yI(t){return ne("7.2.0","utils.hex2string is deprecated, use Color#toHex instead"),me.shared.setValue(t).toHex()}function vI(t){return ne("7.2.0","utils.rgb2hex is deprecated, use Color#toNumber instead"),me.shared.setValue(t).toNumber()}function xI(){const t=[],e=[];for(let i=0;i<32;i++)t[i]=i,e[i]=i;t[J.NORMAL_NPM]=J.NORMAL,t[J.ADD_NPM]=J.ADD,t[J.SCREEN_NPM]=J.SCREEN,e[J.NORMAL]=J.NORMAL_NPM,e[J.ADD]=J.ADD_NPM,e[J.SCREEN]=J.SCREEN_NPM;const r=[];return r.push(e),r.push(t),r}const sw=xI();function ow(t,e){return sw[e?1:0][t]}function _I(t,e=null){const r=t*6;if(e=e||new Uint16Array(r),e.length!==r)throw new Error(`Out buffer length is incorrect, got ${e.length} and expected ${r}`);for(let i=0,n=0;i<r;i+=6,n+=4)e[i+0]=n+0,e[i+1]=n+1,e[i+2]=n+2,e[i+3]=n+0,e[i+4]=n+2,e[i+5]=n+3;return e}function aw(t){if(t.BYTES_PER_ELEMENT===4)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(t.BYTES_PER_ELEMENT===2){if(t instanceof Uint16Array)return"Uint16Array"}else if(t.BYTES_PER_ELEMENT===1&&t instanceof Uint8Array)return"Uint8Array";return null}function fu(t){return t+=t===0?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t+1}function n0(t){return!(t&t-1)&&!!t}function s0(t){let e=(t>65535?1:0)<<4;t>>>=e;let r=(t>255?1:0)<<3;return t>>>=r,e|=r,r=(t>15?1:0)<<2,t>>>=r,e|=r,r=(t>3?1:0)<<1,t>>>=r,e|=r,e|t>>1}function cs(t,e,r){const i=t.length;let n;if(e>=i||r===0)return;r=e+r>i?i-e:r;const s=i-r;for(n=e;n<s;++n)t[n]=t[n+r];t.length=s}function pi(t){return t===0?0:t<0?-1:1}let wI=0;function mn(){return++wI}const sf=class{constructor(t,e,r,i){this.left=t,this.top=e,this.right=r,this.bottom=i}get width(){return this.right-this.left}get height(){return this.bottom-this.top}isEmpty(){return this.left===this.right||this.top===this.bottom}};sf.EMPTY=new sf(0,0,0,0);let o0=sf;const a0={},cr=Object.create(null),ti=Object.create(null);class TI{constructor(e,r,i){this._canvas=j.ADAPTER.createCanvas(),this._context=this._canvas.getContext("2d"),this.resolution=i||j.RESOLUTION,this.resize(e,r)}clear(){this._checkDestroyed(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}resize(e,r){this._checkDestroyed(),this._canvas.width=Math.round(e*this.resolution),this._canvas.height=Math.round(r*this.resolution)}destroy(){this._context=null,this._canvas=null}get width(){return this._checkDestroyed(),this._canvas.width}set width(e){this._checkDestroyed(),this._canvas.width=Math.round(e)}get height(){return this._checkDestroyed(),this._canvas.height}set height(e){this._checkDestroyed(),this._canvas.height=Math.round(e)}get canvas(){return this._checkDestroyed(),this._canvas}get context(){return this._checkDestroyed(),this._context}_checkDestroyed(){if(this._canvas===null)throw new TypeError("The CanvasRenderTarget has already been destroyed")}}function l0(t,e,r){for(let i=0,n=4*r*e;i<e;++i,n+=4)if(t[n+3]!==0)return!1;return!0}function u0(t,e,r,i,n){const s=4*e;for(let o=i,a=i*s+4*r;o<=n;++o,a+=s)if(t[a+3]!==0)return!1;return!0}function EI(t){const{width:e,height:r}=t,i=t.getContext("2d",{willReadFrequently:!0});if(i===null)throw new TypeError("Failed to get canvas 2D context");const n=i.getImageData(0,0,e,r).data;let s=0,o=0,a=e-1,l=r-1;for(;o<r&&l0(n,e,o);)++o;if(o===r)return o0.EMPTY;for(;l0(n,e,l);)--l;for(;u0(n,e,s,o,l);)++s;for(;u0(n,e,a,o,l);)--a;return++a,++l,new o0(s,o,a,l)}function SI(t){const e=EI(t),{width:r,height:i}=e;let n=null;if(!e.isEmpty()){const s=t.getContext("2d");if(s===null)throw new TypeError("Failed to get canvas 2D context");n=s.getImageData(e.left,e.top,r,i)}return{width:r,height:i,data:n}}function AI(t,e=globalThis.location){if(t.startsWith("data:"))return"";e=e||globalThis.location;const r=new URL(t,document.baseURI);return r.hostname!==e.hostname||r.port!==e.port||r.protocol!==e.protocol?"anonymous":""}function Kr(t,e=1){var i;const r=(i=j.RETINA_PREFIX)==null?void 0:i.exec(t);return r?parseFloat(r[1]):e}var U=(t=>(t.Renderer="renderer",t.Application="application",t.RendererSystem="renderer-webgl-system",t.RendererPlugin="renderer-webgl-plugin",t.CanvasRendererSystem="renderer-canvas-system",t.CanvasRendererPlugin="renderer-canvas-plugin",t.Asset="asset",t.LoadParser="load-parser",t.ResolveParser="resolve-parser",t.CacheParser="cache-parser",t.DetectionParser="detection-parser",t))(U||{});const of=t=>{if(typeof t=="function"||typeof t=="object"&&t.extension){if(!t.extension)throw new Error("Extension class must have an extension object");t={...typeof t.extension!="object"?{type:t.extension}:t.extension,ref:t}}if(typeof t=="object")t={...t};else throw new Error("Invalid extension type");return typeof t.type=="string"&&(t.type=[t.type]),t},h0=(t,e)=>of(t).priority??e,X={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...t){return t.map(of).forEach(e=>{e.type.forEach(r=>{var i,n;return(n=(i=this._removeHandlers)[r])==null?void 0:n.call(i,e)})}),this},add(...t){return t.map(of).forEach(e=>{e.type.forEach(r=>{var s,o;const i=this._addHandlers,n=this._queue;i[r]?(s=i[r])==null||s.call(i,e):(n[r]=n[r]||[],(o=n[r])==null||o.push(e))})}),this},handle(t,e,r){var o;const i=this._addHandlers,n=this._removeHandlers;if(i[t]||n[t])throw new Error(`Extension type ${t} already has a handler`);i[t]=e,n[t]=r;const s=this._queue;return s[t]&&((o=s[t])==null||o.forEach(a=>e(a)),delete s[t]),this},handleByMap(t,e){return this.handle(t,r=>{r.name&&(e[r.name]=r.ref)},r=>{r.name&&delete e[r.name]})},handleByList(t,e,r=-1){return this.handle(t,i=>{e.includes(i.ref)||(e.push(i.ref),e.sort((n,s)=>h0(s,r)-h0(n,r)))},i=>{const n=e.indexOf(i.ref);n!==-1&&e.splice(n,1)})}};class af{constructor(e){typeof e=="number"?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(e){return this[`${e}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${e} isn't a valid view type`)}}}const bI=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function CI(t){let e="";for(let r=0;r<t;++r)r>0&&(e+=`
else `),r<t-1&&(e+=`if(test == ${r}.0){}`);return e}function PI(t,e){if(t===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const r=e.createShader(e.FRAGMENT_SHADER);for(;;){const i=bI.replace(/%forloop%/gi,CI(t));if(e.shaderSource(r,i),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS))t=t/2|0;else break}return t}const fc=0,pc=1,mc=2,gc=3,yc=4,vc=5;class Pr{constructor(){this.data=0,this.blendMode=J.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<fc)}set blend(e){!!(this.data&1<<fc)!==e&&(this.data^=1<<fc)}get offsets(){return!!(this.data&1<<pc)}set offsets(e){!!(this.data&1<<pc)!==e&&(this.data^=1<<pc)}get culling(){return!!(this.data&1<<mc)}set culling(e){!!(this.data&1<<mc)!==e&&(this.data^=1<<mc)}get depthTest(){return!!(this.data&1<<gc)}set depthTest(e){!!(this.data&1<<gc)!==e&&(this.data^=1<<gc)}get depthMask(){return!!(this.data&1<<vc)}set depthMask(e){!!(this.data&1<<vc)!==e&&(this.data^=1<<vc)}get clockwiseFrontFace(){return!!(this.data&1<<yc)}set clockwiseFrontFace(e){!!(this.data&1<<yc)!==e&&(this.data^=1<<yc)}get blendMode(){return this._blendMode}set blendMode(e){this.blend=e!==J.NONE,this._blendMode=e}get polygonOffset(){return this._polygonOffset}set polygonOffset(e){this.offsets=!!e,this._polygonOffset=e}static for2d(){const e=new Pr;return e.depthTest=!1,e.blend=!0,e}}Pr.prototype.toString=function(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`};const lf=[];function lw(t,e){if(!t)return null;let r="";if(typeof t=="string"){const i=/\.(\w{3,4})(?:$|\?|#)/i.exec(t);i&&(r=i[1].toLowerCase())}for(let i=lf.length-1;i>=0;--i){const n=lf[i];if(n.test&&n.test(t,r))return new n(t,e)}throw new Error("Unrecognized source type to auto-detect Resource")}class rr{constructor(e){this.items=[],this._name=e,this._aliasCount=0}emit(e,r,i,n,s,o,a,l){if(arguments.length>8)throw new Error("max arguments reached");const{name:u,items:h}=this;this._aliasCount++;for(let c=0,d=h.length;c<d;c++)h[c][u](e,r,i,n,s,o,a,l);return h===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(e){return e[this._name]&&(this.ensureNonAliasedItems(),this.remove(e),this.items.push(e)),this}remove(e){const r=this.items.indexOf(e);return r!==-1&&(this.ensureNonAliasedItems(),this.items.splice(r,1)),this}contains(e){return this.items.includes(e)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items.length=0,this._name=""}get empty(){return this.items.length===0}get name(){return this._name}}Object.defineProperties(rr.prototype,{dispatch:{value:rr.prototype.emit},run:{value:rr.prototype.emit}});class Jo{constructor(e=0,r=0){this._width=e,this._height=r,this.destroyed=!1,this.internal=!1,this.onResize=new rr("setRealSize"),this.onUpdate=new rr("update"),this.onError=new rr("onError")}bind(e){this.onResize.add(e),this.onUpdate.add(e),this.onError.add(e),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(e){this.onResize.remove(e),this.onUpdate.remove(e),this.onError.remove(e)}resize(e,r){(e!==this._width||r!==this._height)&&(this._width=e,this._height=r,this.onResize.emit(e,r))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(e,r,i){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(e,r){return!1}}class rh extends Jo{constructor(e,r){const{width:i,height:n}=r||{};if(!i||!n)throw new Error("BufferResource width or height invalid");super(i,n),this.data=e,this.unpackAlignment=r.unpackAlignment??4}upload(e,r,i){const n=e.gl;n.pixelStorei(n.UNPACK_ALIGNMENT,this.unpackAlignment),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.alphaMode===yt.UNPACK);const s=r.realWidth,o=r.realHeight;return i.width===s&&i.height===o?n.texSubImage2D(r.target,0,0,0,s,o,r.format,i.type,this.data):(i.width=s,i.height=o,n.texImage2D(r.target,0,i.internalFormat,s,o,0,r.format,i.type,this.data)),!0}dispose(){this.data=null}static test(e){return e===null||e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array}}const RI={scaleMode:Nr.NEAREST,alphaMode:yt.NPM},uf=class kn extends ha{constructor(e=null,r=null){super(),r=Object.assign({},kn.defaultOptions,r);const{alphaMode:i,mipmap:n,anisotropicLevel:s,scaleMode:o,width:a,height:l,wrapMode:u,format:h,type:c,target:d,resolution:f,resourceOptions:p}=r;e&&!(e instanceof Jo)&&(e=lw(e,p),e.internal=!0),this.resolution=f||j.RESOLUTION,this.width=Math.round((a||0)*this.resolution)/this.resolution,this.height=Math.round((l||0)*this.resolution)/this.resolution,this._mipmap=n,this.anisotropicLevel=s,this._wrapMode=u,this._scaleMode=o,this.format=h,this.type=c,this.target=d,this.alphaMode=i,this.uid=mn(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=a>0&&l>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(e)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(e){this._mipmap!==e&&(this._mipmap=e,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(e){this._scaleMode!==e&&(this._scaleMode=e,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(e){this._wrapMode!==e&&(this._wrapMode=e,this.dirtyStyleId++)}setStyle(e,r){let i;return e!==void 0&&e!==this.scaleMode&&(this.scaleMode=e,i=!0),r!==void 0&&r!==this.mipmap&&(this.mipmap=r,i=!0),i&&this.dirtyStyleId++,this}setSize(e,r,i){return i=i||this.resolution,this.setRealSize(e*i,r*i,i)}setRealSize(e,r,i){return this.resolution=i||this.resolution,this.width=Math.round(e)/this.resolution,this.height=Math.round(r)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=n0(this.realWidth)&&n0(this.realHeight)}setResolution(e){const r=this.resolution;return r===e?this:(this.resolution=e,this.valid&&(this.width=Math.round(this.width*r)/e,this.height=Math.round(this.height*r)/e,this.emit("update",this)),this._refreshPOT(),this)}setResource(e){if(this.resource===e)return this;if(this.resource)throw new Error("Resource can be set only once");return e.bind(this),this.resource=e,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(e){this.emit("error",this,e)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete ti[this.cacheId],delete cr[this.cacheId],this.cacheId=null),this.valid=!1,this.dispose(),kn.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(e,r,i=j.STRICT_TEXTURE_CACHE){const n=typeof e=="string";let s=null;if(n)s=e;else{if(!e._pixiId){const a=(r==null?void 0:r.pixiIdPrefix)||"pixiid";e._pixiId=`${a}_${mn()}`}s=e._pixiId}let o=ti[s];if(n&&i&&!o)throw new Error(`The cacheId "${s}" does not exist in BaseTextureCache.`);return o||(o=new kn(e,r),o.cacheId=s,kn.addToCache(o,s)),o}static fromBuffer(e,r,i,n){e=e||new Float32Array(r*i*4);const s=new rh(e,{width:r,height:i,...n==null?void 0:n.resourceOptions});let o,a;return e instanceof Float32Array?(o=L.RGBA,a=K.FLOAT):e instanceof Int32Array?(o=L.RGBA_INTEGER,a=K.INT):e instanceof Uint32Array?(o=L.RGBA_INTEGER,a=K.UNSIGNED_INT):e instanceof Int16Array?(o=L.RGBA_INTEGER,a=K.SHORT):e instanceof Uint16Array?(o=L.RGBA_INTEGER,a=K.UNSIGNED_SHORT):e instanceof Int8Array?(o=L.RGBA,a=K.BYTE):(o=L.RGBA,a=K.UNSIGNED_BYTE),s.internal=!0,new kn(s,Object.assign({},RI,{type:a,format:o},n))}static addToCache(e,r){r&&(e.textureCacheIds.includes(r)||e.textureCacheIds.push(r),ti[r]&&ti[r]!==e&&console.warn(`BaseTexture added to the cache with an id [${r}] that already had an entry`),ti[r]=e)}static removeFromCache(e){if(typeof e=="string"){const r=ti[e];if(r){const i=r.textureCacheIds.indexOf(e);return i>-1&&r.textureCacheIds.splice(i,1),delete ti[e],r}}else if(e!=null&&e.textureCacheIds){for(let r=0;r<e.textureCacheIds.length;++r)delete ti[e.textureCacheIds[r]];return e.textureCacheIds.length=0,e}return null}};uf.defaultOptions={mipmap:Cr.POW2,anisotropicLevel:0,scaleMode:Nr.LINEAR,wrapMode:Si.CLAMP,alphaMode:yt.UNPACK,target:ls.TEXTURE_2D,format:L.RGBA,type:K.UNSIGNED_BYTE},uf._globalBatch=0;let ee=uf;class hf{constructor(){this.texArray=null,this.blend=0,this.type=_r.TRIANGLES,this.start=0,this.size=0,this.data=null}}let II=0;class Fe{constructor(e,r=!0,i=!1){this.data=e||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=i,this.static=r,this.id=II++,this.disposeRunner=new rr("disposeBuffer")}update(e){e instanceof Array&&(e=new Float32Array(e)),this.data=e||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(e){this.type=e?Er.ELEMENT_ARRAY_BUFFER:Er.ARRAY_BUFFER}get index(){return this.type===Er.ELEMENT_ARRAY_BUFFER}static from(e){return e instanceof Array&&(e=new Float32Array(e)),new Fe(e)}}class pu{constructor(e,r=0,i=!1,n=K.FLOAT,s,o,a,l=1){this.buffer=e,this.size=r,this.normalized=i,this.type=n,this.stride=s,this.start=o,this.instance=a,this.divisor=l}destroy(){this.buffer=null}static from(e,r,i,n,s){return new pu(e,r,i,n,s)}}const MI={Float32Array,Uint32Array,Int32Array,Uint8Array};function kI(t,e){let r=0,i=0;const n={};for(let l=0;l<t.length;l++)i+=e[l],r+=t[l].length;const s=new ArrayBuffer(r*4);let o=null,a=0;for(let l=0;l<t.length;l++){const u=e[l],h=t[l],c=aw(h);n[c]||(n[c]=new MI[c](s)),o=n[c];for(let d=0;d<h.length;d++){const f=(d/u|0)*i+a,p=d%u;o[f+p]=h[d]}a+=u}return new Float32Array(s)}const c0={5126:4,5123:2,5121:1};let DI=0;const FI={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};class Ci{constructor(e=[],r={}){this.buffers=e,this.indexBuffer=null,this.attributes=r,this.glVertexArrayObjects={},this.id=DI++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new rr("disposeGeometry"),this.refCount=0}addAttribute(e,r,i=0,n=!1,s,o,a,l=!1){if(!r)throw new Error("You must pass a buffer when creating an attribute");r instanceof Fe||(r instanceof Array&&(r=new Float32Array(r)),r=new Fe(r));const u=e.split("|");if(u.length>1){for(let c=0;c<u.length;c++)this.addAttribute(u[c],r,i,n,s);return this}let h=this.buffers.indexOf(r);return h===-1&&(this.buffers.push(r),h=this.buffers.length-1),this.attributes[e]=new pu(h,i,n,s,o,a,l),this.instanced=this.instanced||l,this}getAttribute(e){return this.attributes[e]}getBuffer(e){return this.buffers[this.getAttribute(e).buffer]}addIndex(e){return e instanceof Fe||(e instanceof Array&&(e=new Uint16Array(e)),e=new Fe(e)),e.type=Er.ELEMENT_ARRAY_BUFFER,this.indexBuffer=e,this.buffers.includes(e)||this.buffers.push(e),this}getIndex(){return this.indexBuffer}interleave(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;const e=[],r=[],i=new Fe;let n;for(n in this.attributes){const s=this.attributes[n],o=this.buffers[s.buffer];e.push(o.data),r.push(s.size*c0[s.type]/4),s.buffer=0}for(i.data=kI(e,r),n=0;n<this.buffers.length;n++)this.buffers[n]!==this.indexBuffer&&this.buffers[n].destroy();return this.buffers=[i],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const e in this.attributes){const r=this.attributes[e];return this.buffers[r.buffer].data.length/(r.stride/4||r.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const e=new Ci;for(let r=0;r<this.buffers.length;r++)e.buffers[r]=new Fe(this.buffers[r].data.slice(0));for(const r in this.attributes){const i=this.attributes[r];e.attributes[r]=new pu(i.buffer,i.size,i.normalized,i.type,i.stride,i.start,i.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.type=Er.ELEMENT_ARRAY_BUFFER),e}static merge(e){const r=new Ci,i=[],n=[],s=[];let o;for(let a=0;a<e.length;a++){o=e[a];for(let l=0;l<o.buffers.length;l++)n[l]=n[l]||0,n[l]+=o.buffers[l].data.length,s[l]=0}for(let a=0;a<o.buffers.length;a++)i[a]=new FI[aw(o.buffers[a].data)](n[a]),r.buffers[a]=new Fe(i[a]);for(let a=0;a<e.length;a++){o=e[a];for(let l=0;l<o.buffers.length;l++)i[l].set(o.buffers[l].data,s[l]),s[l]+=o.buffers[l].data.length}if(r.attributes=o.attributes,o.indexBuffer){r.indexBuffer=r.buffers[o.buffers.indexOf(o.indexBuffer)],r.indexBuffer.type=Er.ELEMENT_ARRAY_BUFFER;let a=0,l=0,u=0,h=0;for(let c=0;c<o.buffers.length;c++)if(o.buffers[c]!==o.indexBuffer){h=c;break}for(const c in o.attributes){const d=o.attributes[c];(d.buffer|0)===h&&(l+=d.size*c0[d.type]/4)}for(let c=0;c<e.length;c++){const d=e[c].indexBuffer.data;for(let f=0;f<d.length;f++)r.indexBuffer.data[f+u]+=a;a+=e[c].buffers[h].data.length/l,u+=d.length}}return r}}class uw extends Ci{constructor(e=!1){super(),this._buffer=new Fe(null,e,!1),this._indexBuffer=new Fe(null,e,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,K.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,K.FLOAT).addAttribute("aColor",this._buffer,4,!0,K.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,K.FLOAT).addIndex(this._indexBuffer)}}const mu=Math.PI*2,BI=180/Math.PI,LI=Math.PI/180;var et=(t=>(t[t.POLY=0]="POLY",t[t.RECT=1]="RECT",t[t.CIRC=2]="CIRC",t[t.ELIP=3]="ELIP",t[t.RREC=4]="RREC",t))(et||{});class ae{constructor(e=0,r=0){this.x=0,this.y=0,this.x=e,this.y=r}clone(){return new ae(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,r=e){return this.x=e,this.y=r,this}}ae.prototype.toString=function(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`};const Ha=[new ae,new ae,new ae,new ae];class te{constructor(e=0,r=0,i=0,n=0){this.x=Number(e),this.y=Number(r),this.width=Number(i),this.height=Number(n),this.type=et.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new te(0,0,0,0)}clone(){return new te(this.x,this.y,this.width,this.height)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}contains(e,r){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&r>=this.y&&r<this.y+this.height}intersects(e,r){if(!r){const T=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=T)return!1;const C=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>C}const i=this.left,n=this.right,s=this.top,o=this.bottom;if(n<=i||o<=s)return!1;const a=Ha[0].set(e.left,e.top),l=Ha[1].set(e.left,e.bottom),u=Ha[2].set(e.right,e.top),h=Ha[3].set(e.right,e.bottom);if(u.x<=a.x||l.y<=a.y)return!1;const c=Math.sign(r.a*r.d-r.b*r.c);if(c===0||(r.apply(a,a),r.apply(l,l),r.apply(u,u),r.apply(h,h),Math.max(a.x,l.x,u.x,h.x)<=i||Math.min(a.x,l.x,u.x,h.x)>=n||Math.max(a.y,l.y,u.y,h.y)<=s||Math.min(a.y,l.y,u.y,h.y)>=o))return!1;const d=c*(l.y-a.y),f=c*(a.x-l.x),p=d*i+f*s,g=d*n+f*s,x=d*i+f*o,y=d*n+f*o;if(Math.max(p,g,x,y)<=d*a.x+f*a.y||Math.min(p,g,x,y)>=d*h.x+f*h.y)return!1;const v=c*(a.y-u.y),m=c*(u.x-a.x),_=v*i+m*s,w=v*n+m*s,S=v*i+m*o,E=v*n+m*o;return!(Math.max(_,w,S,E)<=v*a.x+m*a.y||Math.min(_,w,S,E)>=v*h.x+m*h.y)}pad(e=0,r=e){return this.x-=e,this.y-=r,this.width+=e*2,this.height+=r*2,this}fit(e){const r=Math.max(this.x,e.x),i=Math.min(this.x+this.width,e.x+e.width),n=Math.max(this.y,e.y),s=Math.min(this.y+this.height,e.y+e.height);return this.x=r,this.width=Math.max(i-r,0),this.y=n,this.height=Math.max(s-n,0),this}ceil(e=1,r=.001){const i=Math.ceil((this.x+this.width-r)*e)/e,n=Math.ceil((this.y+this.height-r)*e)/e;return this.x=Math.floor((this.x+r)*e)/e,this.y=Math.floor((this.y+r)*e)/e,this.width=i-this.x,this.height=n-this.y,this}enlarge(e){const r=Math.min(this.x,e.x),i=Math.max(this.x+this.width,e.x+e.width),n=Math.min(this.y,e.y),s=Math.max(this.y+this.height,e.y+e.height);return this.x=r,this.width=i-r,this.y=n,this.height=s-n,this}}te.prototype.toString=function(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class ih{constructor(e=0,r=0,i=0){this.x=e,this.y=r,this.radius=i,this.type=et.CIRC}clone(){return new ih(this.x,this.y,this.radius)}contains(e,r){if(this.radius<=0)return!1;const i=this.radius*this.radius;let n=this.x-e,s=this.y-r;return n*=n,s*=s,n+s<=i}getBounds(){return new te(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)}}ih.prototype.toString=function(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`};class nh{constructor(e=0,r=0,i=0,n=0){this.x=e,this.y=r,this.width=i,this.height=n,this.type=et.ELIP}clone(){return new nh(this.x,this.y,this.width,this.height)}contains(e,r){if(this.width<=0||this.height<=0)return!1;let i=(e-this.x)/this.width,n=(r-this.y)/this.height;return i*=i,n*=n,i+n<=1}getBounds(){return new te(this.x-this.width,this.y-this.height,this.width,this.height)}}nh.prototype.toString=function(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class sn{constructor(...e){let r=Array.isArray(e[0])?e[0]:e;if(typeof r[0]!="number"){const i=[];for(let n=0,s=r.length;n<s;n++)i.push(r[n].x,r[n].y);r=i}this.points=r,this.type=et.POLY,this.closeStroke=!0}clone(){const e=this.points.slice(),r=new sn(e);return r.closeStroke=this.closeStroke,r}contains(e,r){let i=!1;const n=this.points.length/2;for(let s=0,o=n-1;s<n;o=s++){const a=this.points[s*2],l=this.points[s*2+1],u=this.points[o*2],h=this.points[o*2+1];l>r!=h>r&&e<(u-a)*((r-l)/(h-l))+a&&(i=!i)}return i}}sn.prototype.toString=function(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((t,e)=>`${t}, ${e}`,"")}]`};class sh{constructor(e=0,r=0,i=0,n=0,s=20){this.x=e,this.y=r,this.width=i,this.height=n,this.radius=s,this.type=et.RREC}clone(){return new sh(this.x,this.y,this.width,this.height,this.radius)}contains(e,r){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&r>=this.y&&r<=this.y+this.height){const i=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(r>=this.y+i&&r<=this.y+this.height-i||e>=this.x+i&&e<=this.x+this.width-i)return!0;let n=e-(this.x+i),s=r-(this.y+i);const o=i*i;if(n*n+s*s<=o||(n=e-(this.x+this.width-i),n*n+s*s<=o)||(s=r-(this.y+this.height-i),n*n+s*s<=o)||(n=e-(this.x+i),n*n+s*s<=o))return!0}return!1}}sh.prototype.toString=function(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`};class ye{constructor(e=1,r=0,i=0,n=1,s=0,o=0){this.array=null,this.a=e,this.b=r,this.c=i,this.d=n,this.tx=s,this.ty=o}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,r,i,n,s,o){return this.a=e,this.b=r,this.c=i,this.d=n,this.tx=s,this.ty=o,this}toArray(e,r){this.array||(this.array=new Float32Array(9));const i=r||this.array;return e?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i}apply(e,r){r=r||new ae;const i=e.x,n=e.y;return r.x=this.a*i+this.c*n+this.tx,r.y=this.b*i+this.d*n+this.ty,r}applyInverse(e,r){r=r||new ae;const i=1/(this.a*this.d+this.c*-this.b),n=e.x,s=e.y;return r.x=this.d*i*n+-this.c*i*s+(this.ty*this.c-this.tx*this.d)*i,r.y=this.a*i*s+-this.b*i*n+(-this.ty*this.a+this.tx*this.b)*i,r}translate(e,r){return this.tx+=e,this.ty+=r,this}scale(e,r){return this.a*=e,this.d*=r,this.c*=e,this.b*=r,this.tx*=e,this.ty*=r,this}rotate(e){const r=Math.cos(e),i=Math.sin(e),n=this.a,s=this.c,o=this.tx;return this.a=n*r-this.b*i,this.b=n*i+this.b*r,this.c=s*r-this.d*i,this.d=s*i+this.d*r,this.tx=o*r-this.ty*i,this.ty=o*i+this.ty*r,this}append(e){const r=this.a,i=this.b,n=this.c,s=this.d;return this.a=e.a*r+e.b*n,this.b=e.a*i+e.b*s,this.c=e.c*r+e.d*n,this.d=e.c*i+e.d*s,this.tx=e.tx*r+e.ty*n+this.tx,this.ty=e.tx*i+e.ty*s+this.ty,this}setTransform(e,r,i,n,s,o,a,l,u){return this.a=Math.cos(a+u)*s,this.b=Math.sin(a+u)*s,this.c=-Math.sin(a-l)*o,this.d=Math.cos(a-l)*o,this.tx=e-(i*this.a+n*this.c),this.ty=r-(i*this.b+n*this.d),this}prepend(e){const r=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){const i=this.a,n=this.c;this.a=i*e.a+this.b*e.c,this.b=i*e.b+this.b*e.d,this.c=n*e.a+this.d*e.c,this.d=n*e.b+this.d*e.d}return this.tx=r*e.a+this.ty*e.c+e.tx,this.ty=r*e.b+this.ty*e.d+e.ty,this}decompose(e){const r=this.a,i=this.b,n=this.c,s=this.d,o=e.pivot,a=-Math.atan2(-n,s),l=Math.atan2(i,r),u=Math.abs(a+l);return u<1e-5||Math.abs(mu-u)<1e-5?(e.rotation=l,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=a,e.skew.y=l),e.scale.x=Math.sqrt(r*r+i*i),e.scale.y=Math.sqrt(n*n+s*s),e.position.x=this.tx+(o.x*r+o.y*n),e.position.y=this.ty+(o.x*i+o.y*s),e}invert(){const e=this.a,r=this.b,i=this.c,n=this.d,s=this.tx,o=e*n-r*i;return this.a=n/o,this.b=-r/o,this.c=-i/o,this.d=e/o,this.tx=(i*this.ty-n*s)/o,this.ty=-(e*this.ty-r*s)/o,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const e=new ye;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}static get IDENTITY(){return new ye}static get TEMP_MATRIX(){return new ye}}ye.prototype.toString=function(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`};const Vi=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],ji=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],zi=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Hi=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],cf=[],hw=[],$a=Math.sign;function NI(){for(let t=0;t<16;t++){const e=[];cf.push(e);for(let r=0;r<16;r++){const i=$a(Vi[t]*Vi[r]+zi[t]*ji[r]),n=$a(ji[t]*Vi[r]+Hi[t]*ji[r]),s=$a(Vi[t]*zi[r]+zi[t]*Hi[r]),o=$a(ji[t]*zi[r]+Hi[t]*Hi[r]);for(let a=0;a<16;a++)if(Vi[a]===i&&ji[a]===n&&zi[a]===s&&Hi[a]===o){e.push(a);break}}}for(let t=0;t<16;t++){const e=new ye;e.set(Vi[t],ji[t],zi[t],Hi[t],0,0),hw.push(e)}}NI();const Te={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:t=>Vi[t],uY:t=>ji[t],vX:t=>zi[t],vY:t=>Hi[t],inv:t=>t&8?t&15:-t&7,add:(t,e)=>cf[t][e],sub:(t,e)=>cf[t][Te.inv(e)],rotate180:t=>t^4,isVertical:t=>(t&3)===2,byDirection:(t,e)=>Math.abs(t)*2<=Math.abs(e)?e>=0?Te.S:Te.N:Math.abs(e)*2<=Math.abs(t)?t>0?Te.E:Te.W:e>0?t>0?Te.SE:Te.SW:t>0?Te.NE:Te.NW,matrixAppendRotationInv:(t,e,r=0,i=0)=>{const n=hw[Te.inv(e)];n.tx=r,n.ty=i,t.append(n)}};class Ur{constructor(e,r,i=0,n=0){this._x=i,this._y=n,this.cb=e,this.scope=r}clone(e=this.cb,r=this.scope){return new Ur(e,r,this._x,this._y)}set(e=0,r=e){return(this._x!==e||this._y!==r)&&(this._x=e,this._y=r,this.cb.call(this.scope)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this.cb.call(this.scope)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))}}Ur.prototype.toString=function(){return`[@pixi/math:ObservablePoint x=${this.x} y=${this.y} scope=${this.scope}]`};const df=class{constructor(){this.worldTransform=new ye,this.localTransform=new ye,this.position=new Ur(this.onChange,this,0,0),this.scale=new Ur(this.onChange,this,1,1),this.pivot=new Ur(this.onChange,this,0,0),this.skew=new Ur(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}updateLocalTransform(){const t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(t){const e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){const r=t.worldTransform,i=this.worldTransform;i.a=e.a*r.a+e.b*r.c,i.b=e.a*r.b+e.b*r.d,i.c=e.c*r.a+e.d*r.c,i.d=e.c*r.b+e.d*r.d,i.tx=e.tx*r.a+e.ty*r.c+r.tx,i.ty=e.tx*r.b+e.ty*r.d+r.ty,this._parentID=t._worldID,this._worldID++}}setFromMatrix(t){t.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())}};df.IDENTITY=new df;let nm=df;nm.prototype.toString=function(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`};var OI=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,UI=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`;function d0(t,e,r){const i=t.createShader(e);return t.shaderSource(i,r),t.compileShader(i),i}function xc(t){const e=new Array(t);for(let r=0;r<e.length;r++)e[r]=!1;return e}function cw(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return xc(2*e);case"bvec3":return xc(3*e);case"bvec4":return xc(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const ds=[{test:t=>t.type==="float"&&t.size===1&&!t.isArray,code:t=>`
            if(uv["${t}"] !== ud["${t}"].value)
            {
                ud["${t}"].value = uv["${t}"]
                gl.uniform1f(ud["${t}"].location, uv["${t}"])
            }
            `},{test:(t,e)=>(t.type==="sampler2D"||t.type==="samplerCube"||t.type==="sampler2DArray")&&t.size===1&&!t.isArray&&(e==null||e.castToBaseTexture!==void 0),code:t=>`t = syncData.textureCount++;

            renderer.texture.bind(uv["${t}"], t);

            if(ud["${t}"].value !== t)
            {
                ud["${t}"].value = t;
                gl.uniform1i(ud["${t}"].location, t);
; // eslint-disable-line max-len
            }`},{test:(t,e)=>t.type==="mat3"&&t.size===1&&!t.isArray&&e.a!==void 0,code:t=>`
            gl.uniformMatrix3fv(ud["${t}"].location, false, uv["${t}"].toArray(true));
            `,codeUbo:t=>`
                var ${t}_matrix = uv.${t}.toArray(true);

                data[offset] = ${t}_matrix[0];
                data[offset+1] = ${t}_matrix[1];
                data[offset+2] = ${t}_matrix[2];
        
                data[offset + 4] = ${t}_matrix[3];
                data[offset + 5] = ${t}_matrix[4];
                data[offset + 6] = ${t}_matrix[5];
        
                data[offset + 8] = ${t}_matrix[6];
                data[offset + 9] = ${t}_matrix[7];
                data[offset + 10] = ${t}_matrix[8];
            `},{test:(t,e)=>t.type==="vec2"&&t.size===1&&!t.isArray&&e.x!==void 0,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["${t}"].location, v.x, v.y);
                }`,codeUbo:t=>`
                v = uv.${t};

                data[offset] = v.x;
                data[offset+1] = v.y;
            `},{test:t=>t.type==="vec2"&&t.size===1&&!t.isArray,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["${t}"].location, v[0], v[1]);
                }
            `},{test:(t,e)=>t.type==="vec4"&&t.size===1&&!t.isArray&&e.width!==void 0,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["${t}"].location, v.x, v.y, v.width, v.height)
                }`,codeUbo:t=>`
                    v = uv.${t};

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `},{test:(t,e)=>t.type==="vec4"&&t.size===1&&!t.isArray&&e.red!==void 0,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
                    cv[3] = v.alpha;
                    gl.uniform4f(ud["${t}"].location, v.red, v.green, v.blue, v.alpha)
                }`,codeUbo:t=>`
                    v = uv.${t};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                    data[offset+3] = v.alpha;
                `},{test:(t,e)=>t.type==="vec3"&&t.size===1&&!t.isArray&&e.red!==void 0,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
    
                    gl.uniform3f(ud["${t}"].location, v.red, v.green, v.blue)
                }`,codeUbo:t=>`
                    v = uv.${t};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                `},{test:t=>t.type==="vec4"&&t.size===1&&!t.isArray,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["${t}"].location, v[0], v[1], v[2], v[3])
                }`}],GI={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},VI={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function jI(t,e){var i;const r=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(const n in t.uniforms){const s=e[n];if(!s){((i=t.uniforms[n])==null?void 0:i.group)===!0&&(t.uniforms[n].ubo?r.push(`
                        renderer.shader.syncUniformBufferGroup(uv.${n}, '${n}');
                    `):r.push(`
                        renderer.shader.syncUniformGroup(uv.${n}, syncData);
                    `));continue}const o=t.uniforms[n];let a=!1;for(let l=0;l<ds.length;l++)if(ds[l].test(s,o)){r.push(ds[l].code(n,o)),a=!0;break}if(!a){const l=(s.size===1&&!s.isArray?GI:VI)[s.type].replace("location",`ud["${n}"].location`);r.push(`
            cu = ud["${n}"];
            cv = cu.value;
            v = uv["${n}"];
            ${l};`)}}return new Function("ud","uv","renderer","syncData",r.join(`
`))}const dw={};let Pn=dw;function zI(){if(Pn===dw||Pn!=null&&Pn.isContextLost()){const t=j.ADAPTER.createCanvas();let e;j.PREFER_ENV>=xn.WEBGL2&&(e=t.getContext("webgl2",{})),e||(e=t.getContext("webgl",{})||t.getContext("experimental-webgl",{}),e?e.getExtension("WEBGL_draw_buffers"):e=null),Pn=e}return Pn}let Wa;function HI(){if(!Wa){Wa=Ot.MEDIUM;const t=zI();if(t&&t.getShaderPrecisionFormat){const e=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT);e&&(Wa=e.precision?Ot.HIGH:Ot.MEDIUM)}}return Wa}function f0(t,e){const r=t.getShaderSource(e).split(`
`).map((u,h)=>`${h}: ${u}`),i=t.getShaderInfoLog(e),n=i.split(`
`),s={},o=n.map(u=>parseFloat(u.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(u=>u&&!s[u]?(s[u]=!0,!0):!1),a=[""];o.forEach(u=>{r[u-1]=`%c${r[u-1]}%c`,a.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const l=r.join(`
`);a[0]=l,console.error(i),console.groupCollapsed("click to view full shader code"),console.warn(...a),console.groupEnd()}function $I(t,e,r,i){t.getProgramParameter(e,t.LINK_STATUS)||(t.getShaderParameter(r,t.COMPILE_STATUS)||f0(t,r),t.getShaderParameter(i,t.COMPILE_STATUS)||f0(t,i),console.error("PixiJS Error: Could not initialize shader."),t.getProgramInfoLog(e)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(e)))}const WI={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function fw(t){return WI[t]}let Xa=null;const p0={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function pw(t,e){if(!Xa){const r=Object.keys(p0);Xa={};for(let i=0;i<r.length;++i){const n=r[i];Xa[t[n]]=p0[n]}}return Xa[e]}function m0(t,e,r){if(t.substring(0,9)!=="precision"){let i=e;return e===Ot.HIGH&&r!==Ot.HIGH&&(i=Ot.MEDIUM),`precision ${i} float;
${t}`}else if(r!==Ot.HIGH&&t.substring(0,15)==="precision highp")return t.replace("precision highp","precision mediump");return t}let Ys;function XI(){if(typeof Ys=="boolean")return Ys;try{Ys=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{Ys=!1}return Ys}let YI=0;const Ya={},ff=class Dn{constructor(e,r,i="pixi-shader",n={}){this.extra={},this.id=YI++,this.vertexSrc=e||Dn.defaultVertexSrc,this.fragmentSrc=r||Dn.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=n,this.vertexSrc.substring(0,8)!=="#version"&&(i=i.replace(/\s+/g,"-"),Ya[i]?(Ya[i]++,i+=`-${Ya[i]}`):Ya[i]=1,this.vertexSrc=`#define SHADER_NAME ${i}
${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${i}
${this.fragmentSrc}`,this.vertexSrc=m0(this.vertexSrc,Dn.defaultVertexPrecision,Ot.HIGH),this.fragmentSrc=m0(this.fragmentSrc,Dn.defaultFragmentPrecision,HI())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return UI}static get defaultFragmentSrc(){return OI}static from(e,r,i){const n=e+r;let s=a0[n];return s||(a0[n]=s=new Dn(e,r,i)),s}};ff.defaultVertexPrecision=Ot.HIGH,ff.defaultFragmentPrecision=Or.apple.device?Ot.HIGH:Ot.MEDIUM;let Gr=ff,KI=0;class ir{constructor(e,r,i){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=KI++,this.static=!!r,this.ubo=!!i,e instanceof Fe?(this.buffer=e,this.buffer.type=Er.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=e,this.ubo&&(this.buffer=new Fe(new Float32Array(1)),this.buffer.type=Er.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(e,r,i){if(!this.ubo)this.uniforms[e]=new ir(r,i);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")}static from(e,r,i){return new ir(e,r,i)}static uboFrom(e,r){return new ir(e,r??!0,!0)}}class Sr{constructor(e,r){this.uniformBindCount=0,this.program=e,r?r instanceof ir?this.uniformGroup=r:this.uniformGroup=new ir(r):this.uniformGroup=new ir({}),this.disposeRunner=new rr("disposeShader")}checkUniformExists(e,r){if(r.uniforms[e])return!0;for(const i in r.uniforms){const n=r.uniforms[i];if(n.group===!0&&this.checkUniformExists(e,n))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(e,r,i){const n=Gr.from(e,r);return new Sr(n,i)}}class qI{constructor(e,r){if(this.vertexSrc=e,this.fragTemplate=r,this.programCache={},this.defaultGroupCache={},!r.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!r.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(e){if(!this.programCache[e]){const i=new Int32Array(e);for(let s=0;s<e;s++)i[s]=s;this.defaultGroupCache[e]=ir.from({uSamplers:i},!0);let n=this.fragTemplate;n=n.replace(/%count%/gi,`${e}`),n=n.replace(/%forloop%/gi,this.generateSampleSrc(e)),this.programCache[e]=new Gr(this.vertexSrc,n)}const r={tint:new Float32Array([1,1,1,1]),translationMatrix:new ye,default:this.defaultGroupCache[e]};return new Sr(this.programCache[e],r)}generateSampleSrc(e){let r="";r+=`
`,r+=`
`;for(let i=0;i<e;i++)i>0&&(r+=`
else `),i<e-1&&(r+=`if(vTextureId < ${i}.5)`),r+=`
{`,r+=`
	color = texture2D(uSamplers[${i}], vTextureCoord);`,r+=`
}`;return r+=`
`,r+=`
`,r}}class pf{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let e=0;e<this.count;e++)this.elements[e]=null;this.count=0}}function ZI(){return!Or.apple.device}function QI(t){let e=!0;const r=j.ADAPTER.getNavigator();if(Or.tablet||Or.phone){if(Or.apple.device){const i=r.userAgent.match(/OS (\d+)_(\d+)?/);i&&parseInt(i[1],10)<11&&(e=!1)}if(Or.android.device){const i=r.userAgent.match(/Android\s([0-9.]*)/);i&&parseInt(i[1],10)<7&&(e=!1)}}return e?t:4}class oh{constructor(e){this.renderer=e}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(e){}}var JI=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,e2=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`;const ro=class Xt extends oh{constructor(e){super(e),this.setShaderGenerator(),this.geometryClass=uw,this.vertexSize=6,this.state=Pr.for2d(),this.size=Xt.defaultBatchSize*4,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),e.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??QI(32),this._defaultMaxTextures}static set defaultMaxTextures(e){this._defaultMaxTextures=e}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??ZI(),this._canUploadSameBuffer}static set canUploadSameBuffer(e){this._canUploadSameBuffer=e}get MAX_TEXTURES(){return ne("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return e2}static get defaultFragmentTemplate(){return JI}setShaderGenerator({vertex:e=Xt.defaultVertexSrc,fragment:r=Xt.defaultFragmentTemplate}={}){this.shaderGenerator=new qI(e,r)}contextChange(){const e=this.renderer.gl;j.PREFER_ENV===xn.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),Xt.defaultMaxTextures),this.maxTextures=PI(this.maxTextures,e)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let r=0;r<this._packedGeometryPoolSize;r++)this._packedGeometries[r]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:e,_textureArrayPool:r}=Xt,i=this.size/4,n=Math.floor(i/this.maxTextures)+1;for(;e.length<i;)e.push(new hf);for(;r.length<n;)r.push(new pf);for(let s=0;s<this.maxTextures;s++)this._tempBoundTextures[s]=null}onPrerender(){this._flushId=0}render(e){e._texture.valid&&(this._vertexCount+e.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=e.vertexData.length/2,this._indexCount+=e.indices.length,this._bufferedTextures[this._bufferSize]=e._texture.baseTexture,this._bufferedElements[this._bufferSize++]=e)}buildTexturesAndDrawCalls(){const{_bufferedTextures:e,maxTextures:r}=this,i=Xt._textureArrayPool,n=this.renderer.batch,s=this._tempBoundTextures,o=this.renderer.textureGC.count;let a=++ee._globalBatch,l=0,u=i[0],h=0;n.copyBoundTextures(s,r);for(let c=0;c<this._bufferSize;++c){const d=e[c];e[c]=null,d._batchEnabled!==a&&(u.count>=r&&(n.boundArray(u,s,a,r),this.buildDrawCalls(u,h,c),h=c,u=i[++l],++a),d._batchEnabled=a,d.touched=o,u.elements[u.count++]=d)}u.count>0&&(n.boundArray(u,s,a,r),this.buildDrawCalls(u,h,this._bufferSize),++l,++a);for(let c=0;c<s.length;c++)s[c]=null;ee._globalBatch=a}buildDrawCalls(e,r,i){const{_bufferedElements:n,_attributeBuffer:s,_indexBuffer:o,vertexSize:a}=this,l=Xt._drawCallPool;let u=this._dcIndex,h=this._aIndex,c=this._iIndex,d=l[u];d.start=this._iIndex,d.texArray=e;for(let f=r;f<i;++f){const p=n[f],g=p._texture.baseTexture,x=sw[g.alphaMode?1:0][p.blendMode];n[f]=null,r<f&&d.blend!==x&&(d.size=c-d.start,r=f,d=l[++u],d.texArray=e,d.start=c),this.packInterleavedGeometry(p,s,o,h,c),h+=p.vertexData.length/2*a,c+=p.indices.length,d.blend=x}r<i&&(d.size=c-d.start,++u),this._dcIndex=u,this._aIndex=h,this._iIndex=c}bindAndClearTexArray(e){const r=this.renderer.texture;for(let i=0;i<e.count;i++)r.bind(e.elements[i],e.ids[i]),e.elements[i]=null;e.count=0}updateGeometry(){const{_packedGeometries:e,_attributeBuffer:r,_indexBuffer:i}=this;Xt.canUploadSameBuffer?(e[this._flushId]._buffer.update(r.rawBinaryData),e[this._flushId]._indexBuffer.update(i),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,e[this._flushId]=new this.geometryClass),e[this._flushId]._buffer.update(r.rawBinaryData),e[this._flushId]._indexBuffer.update(i),this.renderer.geometry.bind(e[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const e=this._dcIndex,{gl:r,state:i}=this.renderer,n=Xt._drawCallPool;let s=null;for(let o=0;o<e;o++){const{texArray:a,type:l,size:u,start:h,blend:c}=n[o];s!==a&&(s=a,this.bindAndClearTexArray(a)),this.state.blendMode=c,i.set(this.state),r.drawElements(l,u,r.UNSIGNED_SHORT,h*2)}}flush(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),Xt.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(e){const r=fu(Math.ceil(e/8)),i=s0(r),n=r*8;this._aBuffers.length<=i&&(this._iBuffers.length=i+1);let s=this._aBuffers[n];return s||(this._aBuffers[n]=s=new af(n*this.vertexSize*4)),s}getIndexBuffer(e){const r=fu(Math.ceil(e/12)),i=s0(r),n=r*12;this._iBuffers.length<=i&&(this._iBuffers.length=i+1);let s=this._iBuffers[i];return s||(this._iBuffers[i]=s=new Uint16Array(n)),s}packInterleavedGeometry(e,r,i,n,s){const{uint32View:o,float32View:a}=r,l=n/this.vertexSize,u=e.uvs,h=e.indices,c=e.vertexData,d=e._texture.baseTexture._batchLocation,f=Math.min(e.worldAlpha,1),p=me.shared.setValue(e._tintRGB).toPremultiplied(f,e._texture.baseTexture.alphaMode>0);for(let g=0;g<c.length;g+=2)a[n++]=c[g],a[n++]=c[g+1],a[n++]=u[g],a[n++]=u[g+1],o[n++]=p,a[n++]=d;for(let g=0;g<h.length;g++)i[s++]=l+h[g]}};ro.defaultBatchSize=4096,ro.extension={name:"batch",type:U.RendererPlugin},ro._drawCallPool=[],ro._textureArrayPool=[];let $i=ro;X.add($i);var t2=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,r2=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const mf=class io extends Sr{constructor(e,r,i){const n=Gr.from(e||io.defaultVertexSrc,r||io.defaultFragmentSrc);super(n,i),this.padding=0,this.resolution=io.defaultResolution,this.multisample=io.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new Pr}apply(e,r,i,n,s){e.applyFilter(this,r,i,n)}get blendMode(){return this.state.blendMode}set blendMode(e){this.state.blendMode=e}get resolution(){return this._resolution}set resolution(e){this._resolution=e}static get defaultVertexSrc(){return r2}static get defaultFragmentSrc(){return t2}};mf.defaultResolution=1,mf.defaultMultisample=Ne.NONE;let ct=mf;class gu{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new me(0),this.alpha=1}init(e){this.clearBeforeRender=e.clearBeforeRender;const{backgroundColor:r,background:i,backgroundAlpha:n}=e,s=i??r;s!==void 0&&(this.color=s),this.alpha=n}get color(){return this._backgroundColor.value}set color(e){this._backgroundColor.setValue(e)}get alpha(){return this._backgroundColor.alpha}set alpha(e){this._backgroundColor.setAlpha(e)}get backgroundColor(){return this._backgroundColor}destroy(){}}gu.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0},gu.extension={type:[U.RendererSystem,U.CanvasRendererSystem],name:"background"};X.add(gu);class mw{constructor(e){this.renderer=e,this.emptyRenderer=new oh(e),this.currentRenderer=this.emptyRenderer}setObjectRenderer(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(e,r){const{boundTextures:i}=this.renderer.texture;for(let n=r-1;n>=0;--n)e[n]=i[n]||null,e[n]&&(e[n]._batchLocation=n)}boundArray(e,r,i,n){const{elements:s,ids:o,count:a}=e;let l=0;for(let u=0;u<a;u++){const h=s[u],c=h._batchLocation;if(c>=0&&c<n&&r[c]===h){o[u]=c;continue}for(;l<n;){const d=r[l];if(d&&d._batchEnabled===i&&d._batchLocation===l){l++;continue}o[u]=l,h._batchLocation=l,r[l]=h;break}}}destroy(){this.renderer=null}}mw.extension={type:U.RendererSystem,name:"batch"};X.add(mw);let g0=0;class yu{constructor(e){this.renderer=e,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(e){this.gl=e,this.renderer.gl=e,this.renderer.CONTEXT_UID=g0++}init(e){if(e.context)this.initFromContext(e.context);else{const r=this.renderer.background.alpha<1,i=e.premultipliedAlpha;this.preserveDrawingBuffer=e.preserveDrawingBuffer,this.useContextAlpha=e.useContextAlpha,this.powerPreference=e.powerPreference,this.initFromOptions({alpha:r,premultipliedAlpha:i,antialias:e.antialias,stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:e.powerPreference})}}initFromContext(e){this.gl=e,this.validateContext(e),this.renderer.gl=e,this.renderer.CONTEXT_UID=g0++,this.renderer.runners.contextChange.emit(e);const r=this.renderer.view;r.addEventListener!==void 0&&(r.addEventListener("webglcontextlost",this.handleContextLost,!1),r.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(e){const r=this.createContext(this.renderer.view,e);this.initFromContext(r)}createContext(e,r){let i;if(j.PREFER_ENV>=xn.WEBGL2&&(i=e.getContext("webgl2",r)),i)this.webGLVersion=2;else if(this.webGLVersion=1,i=e.getContext("webgl",r)||e.getContext("experimental-webgl",r),!i)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=i,this.getExtensions(),this.gl}getExtensions(){const{gl:e}=this,r={loseContext:e.getExtension("WEBGL_lose_context"),anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc"),bptc:e.getExtension("EXT_texture_compression_bptc")};this.webGLVersion===1?Object.assign(this.extensions,r,{drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,r,{colorBufferFloat:e.getExtension("EXT_color_buffer_float")})}handleContextLost(e){e.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const e=this.renderer.view;this.renderer=null,e.removeEventListener!==void 0&&(e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(e){const r=e.getContextAttributes(),i="WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext;i&&(this.webGLVersion=2),r&&!r.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const n=i||!!e.getExtension("OES_element_index_uint");this.supports.uint32Indices=n,n||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}yu.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"},yu.extension={type:U.RendererSystem,name:"context"};X.add(yu);class gf{constructor(e,r){if(this.width=Math.round(e),this.height=Math.round(r),!this.width||!this.height)throw new Error("Framebuffer width or height is zero");this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new rr("disposeFramebuffer"),this.multisample=Ne.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(e=0,r){return this.colorTextures[e]=r||new ee(null,{scaleMode:Nr.NEAREST,resolution:1,mipmap:Cr.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(e){return this.depthTexture=e||new ee(null,{scaleMode:Nr.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:Cr.OFF,format:L.DEPTH_COMPONENT,type:K.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(e,r){if(e=Math.round(e),r=Math.round(r),!e||!r)throw new Error("Framebuffer width and height must not be zero");if(!(e===this.width&&r===this.height)){this.width=e,this.height=r,this.dirtyId++,this.dirtySize++;for(let i=0;i<this.colorTextures.length;i++){const n=this.colorTextures[i],s=n.resolution;n.setSize(e/s,r/s)}if(this.depthTexture){const i=this.depthTexture.resolution;this.depthTexture.setSize(e/i,r/i)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}class gw extends ee{constructor(e={}){if(typeof e=="number"){const r=arguments[0],i=arguments[1],n=arguments[2],s=arguments[3];e={width:r,height:i,scaleMode:n,resolution:s}}e.width=e.width??100,e.height=e.height??100,e.multisample??(e.multisample=Ne.NONE),super(null,e),this.mipmap=Cr.OFF,this.valid=!0,this._clear=new me([0,0,0,0]),this.framebuffer=new gf(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=e.multisample,this.maskStack=[],this.filterStack=[{}]}set clearColor(e){this._clear.setValue(e)}get clearColor(){return this._clear.value}get clear(){return this._clear}get multisample(){return this.framebuffer.multisample}set multisample(e){this.framebuffer.multisample=e}resize(e,r){this.framebuffer.resize(e*this.resolution,r*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class qr extends Jo{constructor(e){const r=e,i=r.naturalWidth||r.videoWidth||r.displayWidth||r.width,n=r.naturalHeight||r.videoHeight||r.displayHeight||r.height;super(i,n),this.source=e,this.noSubImage=!1}static crossOrigin(e,r,i){i===void 0&&!r.startsWith("data:")?e.crossOrigin=AI(r):i!==!1&&(e.crossOrigin=typeof i=="string"?i:"anonymous")}upload(e,r,i,n){const s=e.gl,o=r.realWidth,a=r.realHeight;if(n=n||this.source,typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement){if(!n.complete||n.naturalWidth===0)return!1}else if(typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement&&n.readyState<=1)return!1;return s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.alphaMode===yt.UNPACK),!this.noSubImage&&r.target===s.TEXTURE_2D&&i.width===o&&i.height===a?s.texSubImage2D(s.TEXTURE_2D,0,0,0,r.format,i.type,n):(i.width=o,i.height=a,s.texImage2D(r.target,0,i.internalFormat,r.format,i.type,n)),!0}update(){if(this.destroyed)return;const e=this.source,r=e.naturalWidth||e.videoWidth||e.width,i=e.naturalHeight||e.videoHeight||e.height;this.resize(r,i),super.update()}dispose(){this.source=null}}class yw extends qr{constructor(e,r){if(r=r||{},typeof e=="string"){const i=new Image;qr.crossOrigin(i,e,r.crossorigin),i.src=e,e=i}super(e),!e.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=e.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(r.createBitmap??j.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode=typeof r.alphaMode=="number"?r.alphaMode:null,this.bitmap=null,this._load=null,r.autoLoad!==!1&&this.load()}load(e){return this._load?this._load:(e!==void 0&&(this.createBitmap=e),this._load=new Promise((r,i)=>{const n=this.source;this.url=n.src;const s=()=>{this.destroyed||(n.onload=null,n.onerror=null,this.update(),this._load=null,this.createBitmap?r(this.process()):r(this))};n.complete&&n.src?s():(n.onload=s,n.onerror=o=>{i(o),this.onError.emit(o)})}),this._load)}process(){const e=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);const r=globalThis.createImageBitmap,i=!e.crossOrigin||e.crossOrigin==="anonymous";return this._process=fetch(e.src,{mode:i?"cors":"no-cors"}).then(n=>n.blob()).then(n=>r(n,0,0,e.width,e.height,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===yt.UNPACK?"premultiply":"none"})).then(n=>this.destroyed?Promise.reject():(this.bitmap=n,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(e,r,i){if(typeof this.alphaMode=="number"&&(r.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(e,r,i);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(e,r,i,this.bitmap),!this.preserveBitmap){let n=!0;const s=r._glTextures;for(const o in s){const a=s[o];if(a!==i&&a.dirtyId!==r.dirtyId){n=!1;break}}n&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(e){return typeof HTMLImageElement<"u"&&(typeof e=="string"||e instanceof HTMLImageElement)}}class sm{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(e,r,i){const n=r.width,s=r.height;if(i){const o=e.width/2/n,a=e.height/2/s,l=e.x/n+o,u=e.y/s+a;i=Te.add(i,Te.NW),this.x0=l+o*Te.uX(i),this.y0=u+a*Te.uY(i),i=Te.add(i,2),this.x1=l+o*Te.uX(i),this.y1=u+a*Te.uY(i),i=Te.add(i,2),this.x2=l+o*Te.uX(i),this.y2=u+a*Te.uY(i),i=Te.add(i,2),this.x3=l+o*Te.uX(i),this.y3=u+a*Te.uY(i)}else this.x0=e.x/n,this.y0=e.y/s,this.x1=(e.x+e.width)/n,this.y1=e.y/s,this.x2=(e.x+e.width)/n,this.y2=(e.y+e.height)/s,this.x3=e.x/n,this.y3=(e.y+e.height)/s;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}}sm.prototype.toString=function(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`};const y0=new sm;function Ka(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}class W extends ha{constructor(e,r,i,n,s,o,a){if(super(),this.noFrame=!1,r||(this.noFrame=!0,r=new te(0,0,1,1)),e instanceof W&&(e=e.baseTexture),this.baseTexture=e,this._frame=r,this.trim=n,this.valid=!1,this.destroyed=!1,this._uvs=y0,this.uvMatrix=null,this.orig=i||r,this._rotate=Number(s||0),s===!0)this._rotate=2;else if(this._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=o?new ae(o.x,o.y):new ae(0,0),this.defaultBorders=a,this._updateID=0,this.textureCacheIds=[],e.valid?this.noFrame?e.valid&&this.onBaseTextureUpdated(e):this.frame=r:e.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&e.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(e){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=e.width,this._frame.height=e.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(e){if(this.baseTexture){if(e){const{resource:r}=this.baseTexture;r!=null&&r.url&&cr[r.url]&&W.removeFromCache(r.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,W.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}clone(){var n;const e=this._frame.clone(),r=this._frame===this.orig?e:this.orig.clone(),i=new W(this.baseTexture,!this.noFrame&&e,r,(n=this.trim)==null?void 0:n.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(i._frame=e),i}updateUvs(){this._uvs===y0&&(this._uvs=new sm),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(e,r={},i=j.STRICT_TEXTURE_CACHE){const n=typeof e=="string";let s=null;if(n)s=e;else if(e instanceof ee){if(!e.cacheId){const a=(r==null?void 0:r.pixiIdPrefix)||"pixiid";e.cacheId=`${a}-${mn()}`,ee.addToCache(e,e.cacheId)}s=e.cacheId}else{if(!e._pixiId){const a=(r==null?void 0:r.pixiIdPrefix)||"pixiid";e._pixiId=`${a}_${mn()}`}s=e._pixiId}let o=cr[s];if(n&&i&&!o)throw new Error(`The cacheId "${s}" does not exist in TextureCache.`);return!o&&!(e instanceof ee)?(r.resolution||(r.resolution=Kr(e)),o=new W(new ee(e,r)),o.baseTexture.cacheId=s,ee.addToCache(o.baseTexture,s),W.addToCache(o,s)):!o&&e instanceof ee&&(o=new W(e),W.addToCache(o,s)),o}static fromURL(e,r){const i=Object.assign({autoLoad:!1},r==null?void 0:r.resourceOptions),n=W.from(e,Object.assign({resourceOptions:i},r),!1),s=n.baseTexture.resource;return n.baseTexture.valid?Promise.resolve(n):s.load().then(()=>Promise.resolve(n))}static fromBuffer(e,r,i,n){return new W(ee.fromBuffer(e,r,i,n))}static fromLoader(e,r,i,n){const s=new ee(e,Object.assign({scaleMode:ee.defaultOptions.scaleMode,resolution:Kr(r)},n)),{resource:o}=s;o instanceof yw&&(o.url=r);const a=new W(s);return i||(i=r),ee.addToCache(a.baseTexture,i),W.addToCache(a,i),i!==r&&(ee.addToCache(a.baseTexture,r),W.addToCache(a,r)),a.baseTexture.valid?Promise.resolve(a):new Promise(l=>{a.baseTexture.once("loaded",()=>l(a))})}static addToCache(e,r){r&&(e.textureCacheIds.includes(r)||e.textureCacheIds.push(r),cr[r]&&cr[r]!==e&&console.warn(`Texture added to the cache with an id [${r}] that already had an entry`),cr[r]=e)}static removeFromCache(e){if(typeof e=="string"){const r=cr[e];if(r){const i=r.textureCacheIds.indexOf(e);return i>-1&&r.textureCacheIds.splice(i,1),delete cr[e],r}}else if(e!=null&&e.textureCacheIds){for(let r=0;r<e.textureCacheIds.length;++r)cr[e.textureCacheIds[r]]===e&&delete cr[e.textureCacheIds[r]];return e.textureCacheIds.length=0,e}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(e){this._frame=e,this.noFrame=!1;const{x:r,y:i,width:n,height:s}=e,o=r+n>this.baseTexture.width,a=i+s>this.baseTexture.height;if(o||a){const l=o&&a?"and":"or",u=`X: ${r} + ${n} = ${r+n} > ${this.baseTexture.width}`,h=`Y: ${i} + ${s} = ${i+s} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${u} ${l} ${h}`)}this.valid=n&&s&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=e),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(e){this._rotate=e,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return W._EMPTY||(W._EMPTY=new W(new ee),Ka(W._EMPTY),Ka(W._EMPTY.baseTexture)),W._EMPTY}static get WHITE(){if(!W._WHITE){const e=j.ADAPTER.createCanvas(16,16),r=e.getContext("2d");e.width=16,e.height=16,r.fillStyle="white",r.fillRect(0,0,16,16),W._WHITE=new W(ee.from(e)),Ka(W._WHITE),Ka(W._WHITE.baseTexture)}return W._WHITE}}class wn extends W{constructor(e,r){super(e,r),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(e){this.framebuffer.multisample=e}resize(e,r,i=!0){const n=this.baseTexture.resolution,s=Math.round(e*n)/n,o=Math.round(r*n)/n;this.valid=s>0&&o>0,this._frame.width=this.orig.width=s,this._frame.height=this.orig.height=o,i&&this.baseTexture.resize(s,o),this.updateUvs()}setResolution(e){const{baseTexture:r}=this;r.resolution!==e&&(r.setResolution(e),this.resize(r.width,r.height,!1))}static create(e){return new wn(new gw(e))}}class vw{constructor(e){this.texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(e,r,i=Ne.NONE){const n=new gw(Object.assign({width:e,height:r,resolution:1,multisample:i},this.textureOptions));return new wn(n)}getOptimalTexture(e,r,i=1,n=Ne.NONE){let s;e=Math.max(Math.ceil(e*i-1e-6),1),r=Math.max(Math.ceil(r*i-1e-6),1),!this.enableFullScreen||e!==this._pixelsWidth||r!==this._pixelsHeight?(e=fu(e),r=fu(r),s=((e&65535)<<16|r&65535)>>>0,n>1&&(s+=n*4294967296)):s=n>1?-n:-1,this.texturePool[s]||(this.texturePool[s]=[]);let o=this.texturePool[s].pop();return o||(o=this.createTexture(e,r,n)),o.filterPoolKey=s,o.setResolution(i),o}getFilterTexture(e,r,i){const n=this.getOptimalTexture(e.width,e.height,r||e.resolution,i||Ne.NONE);return n.filterFrame=e.filterFrame,n}returnTexture(e){const r=e.filterPoolKey;e.filterFrame=null,this.texturePool[r].push(e)}returnFilterTexture(e){this.returnTexture(e)}clear(e){if(e=e!==!1,e)for(const r in this.texturePool){const i=this.texturePool[r];if(i)for(let n=0;n<i.length;n++)i[n].destroy(!0)}this.texturePool={}}setScreenSize(e){if(!(e.width===this._pixelsWidth&&e.height===this._pixelsHeight)){this.enableFullScreen=e.width>0&&e.height>0;for(const r in this.texturePool){if(!(Number(r)<0))continue;const i=this.texturePool[r];if(i)for(let n=0;n<i.length;n++)i[n].destroy(!0);this.texturePool[r]=[]}this._pixelsWidth=e.width,this._pixelsHeight=e.height}}}vw.SCREEN_KEY=-1;class i2 extends Ci{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class xw extends Ci{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new Fe(this.vertices),this.uvBuffer=new Fe(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(e,r){let i=0,n=0;return this.uvs[0]=i,this.uvs[1]=n,this.uvs[2]=i+r.width/e.width,this.uvs[3]=n,this.uvs[4]=i+r.width/e.width,this.uvs[5]=n+r.height/e.height,this.uvs[6]=i,this.uvs[7]=n+r.height/e.height,i=r.x,n=r.y,this.vertices[0]=i,this.vertices[1]=n,this.vertices[2]=i+r.width,this.vertices[3]=n,this.vertices[4]=i+r.width,this.vertices[5]=n+r.height,this.vertices[6]=i,this.vertices[7]=n+r.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}class n2{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=Ne.NONE,this.sourceFrame=new te,this.destinationFrame=new te,this.bindingSourceFrame=new te,this.bindingDestinationFrame=new te,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const qa=[new ae,new ae,new ae,new ae],_c=new ye;class _w{constructor(e){this.renderer=e,this.defaultFilterStack=[{}],this.texturePool=new vw,this.statePool=[],this.quad=new i2,this.quadUv=new xw,this.tempRect=new te,this.activeState={},this.globalUniforms=new ir({outputFrame:new te,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(e,r){const i=this.renderer,n=this.defaultFilterStack,s=this.statePool.pop()||new n2,o=i.renderTexture;let a,l;if(o.current){const x=o.current;a=x.resolution,l=x.multisample}else a=i.resolution,l=i.multisample;let u=r[0].resolution||a,h=r[0].multisample??l,c=r[0].padding,d=r[0].autoFit,f=r[0].legacy??!0;for(let x=1;x<r.length;x++){const y=r[x];u=Math.min(u,y.resolution||a),h=Math.min(h,y.multisample??l),c=this.useMaxPadding?Math.max(c,y.padding):c+y.padding,d=d&&y.autoFit,f=f||(y.legacy??!0)}n.length===1&&(this.defaultFilterStack[0].renderTexture=o.current),n.push(s),s.resolution=u,s.multisample=h,s.legacy=f,s.target=e,s.sourceFrame.copyFrom(e.filterArea||e.getBounds(!0)),s.sourceFrame.pad(c);const p=this.tempRect.copyFrom(o.sourceFrame);i.projection.transform&&this.transformAABB(_c.copyFrom(i.projection.transform).invert(),p),d?(s.sourceFrame.fit(p),(s.sourceFrame.width<=0||s.sourceFrame.height<=0)&&(s.sourceFrame.width=0,s.sourceFrame.height=0)):s.sourceFrame.intersects(p)||(s.sourceFrame.width=0,s.sourceFrame.height=0),this.roundFrame(s.sourceFrame,o.current?o.current.resolution:i.resolution,o.sourceFrame,o.destinationFrame,i.projection.transform),s.renderTexture=this.getOptimalFilterTexture(s.sourceFrame.width,s.sourceFrame.height,u,h),s.filters=r,s.destinationFrame.width=s.renderTexture.width,s.destinationFrame.height=s.renderTexture.height;const g=this.tempRect;g.x=0,g.y=0,g.width=s.sourceFrame.width,g.height=s.sourceFrame.height,s.renderTexture.filterFrame=s.sourceFrame,s.bindingSourceFrame.copyFrom(o.sourceFrame),s.bindingDestinationFrame.copyFrom(o.destinationFrame),s.transform=i.projection.transform,i.projection.transform=null,o.bind(s.renderTexture,s.sourceFrame,g),i.framebuffer.clear(0,0,0,0)}pop(){const e=this.defaultFilterStack,r=e.pop(),i=r.filters;this.activeState=r;const n=this.globalUniforms.uniforms;n.outputFrame=r.sourceFrame,n.resolution=r.resolution;const s=n.inputSize,o=n.inputPixel,a=n.inputClamp;if(s[0]=r.destinationFrame.width,s[1]=r.destinationFrame.height,s[2]=1/s[0],s[3]=1/s[1],o[0]=Math.round(s[0]*r.resolution),o[1]=Math.round(s[1]*r.resolution),o[2]=1/o[0],o[3]=1/o[1],a[0]=.5*o[2],a[1]=.5*o[3],a[2]=r.sourceFrame.width*s[2]-.5*o[2],a[3]=r.sourceFrame.height*s[3]-.5*o[3],r.legacy){const u=n.filterArea;u[0]=r.destinationFrame.width,u[1]=r.destinationFrame.height,u[2]=r.sourceFrame.x,u[3]=r.sourceFrame.y,n.filterClamp=n.inputClamp}this.globalUniforms.update();const l=e[e.length-1];if(this.renderer.framebuffer.blit(),i.length===1)i[0].apply(this,r.renderTexture,l.renderTexture,yr.BLEND,r),this.returnFilterTexture(r.renderTexture);else{let u=r.renderTexture,h=this.getOptimalFilterTexture(u.width,u.height,r.resolution);h.filterFrame=u.filterFrame;let c=0;for(c=0;c<i.length-1;++c){c===1&&r.multisample>1&&(h=this.getOptimalFilterTexture(u.width,u.height,r.resolution),h.filterFrame=u.filterFrame),i[c].apply(this,u,h,yr.CLEAR,r);const d=u;u=h,h=d}i[c].apply(this,u,l.renderTexture,yr.BLEND,r),c>1&&r.multisample>1&&this.returnFilterTexture(r.renderTexture),this.returnFilterTexture(u),this.returnFilterTexture(h)}r.clear(),this.statePool.push(r)}bindAndClear(e,r=yr.CLEAR){const{renderTexture:i,state:n}=this.renderer;if(e===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,e==null?void 0:e.filterFrame){const o=this.tempRect;o.x=0,o.y=0,o.width=e.filterFrame.width,o.height=e.filterFrame.height,i.bind(e,e.filterFrame,o)}else e!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?i.bind(e):this.renderer.renderTexture.bind(e,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const s=n.stateId&1||this.forceClear;(r===yr.CLEAR||r===yr.BLIT&&s)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(e,r,i,n){const s=this.renderer;s.state.set(e.state),this.bindAndClear(i,n),e.uniforms.uSampler=r,e.uniforms.filterGlobals=this.globalUniforms,s.shader.bind(e),e.legacy=!!e.program.attributeData.aTextureCoord,e.legacy?(this.quadUv.map(r._frame,r.filterFrame),s.geometry.bind(this.quadUv),s.geometry.draw(_r.TRIANGLES)):(s.geometry.bind(this.quad),s.geometry.draw(_r.TRIANGLE_STRIP))}calculateSpriteMatrix(e,r){const{sourceFrame:i,destinationFrame:n}=this.activeState,{orig:s}=r._texture,o=e.set(n.width,0,0,n.height,i.x,i.y),a=r.worldTransform.copyTo(ye.TEMP_MATRIX);return a.invert(),o.prepend(a),o.scale(1/s.width,1/s.height),o.translate(r.anchor.x,r.anchor.y),o}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(e,r,i=1,n=Ne.NONE){return this.texturePool.getOptimalTexture(e,r,i,n)}getFilterTexture(e,r,i){if(typeof e=="number"){const s=e;e=r,r=s}e=e||this.activeState.renderTexture;const n=this.texturePool.getOptimalTexture(e.width,e.height,r||e.resolution,i||Ne.NONE);return n.filterFrame=e.filterFrame,n}returnFilterTexture(e){this.texturePool.returnTexture(e)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(e,r){const i=qa[0],n=qa[1],s=qa[2],o=qa[3];i.set(r.left,r.top),n.set(r.left,r.bottom),s.set(r.right,r.top),o.set(r.right,r.bottom),e.apply(i,i),e.apply(n,n),e.apply(s,s),e.apply(o,o);const a=Math.min(i.x,n.x,s.x,o.x),l=Math.min(i.y,n.y,s.y,o.y),u=Math.max(i.x,n.x,s.x,o.x),h=Math.max(i.y,n.y,s.y,o.y);r.x=a,r.y=l,r.width=u-a,r.height=h-l}roundFrame(e,r,i,n,s){if(!(e.width<=0||e.height<=0||i.width<=0||i.height<=0)){if(s){const{a:o,b:a,c:l,d:u}=s;if((Math.abs(a)>1e-4||Math.abs(l)>1e-4)&&(Math.abs(o)>1e-4||Math.abs(u)>1e-4))return}s=s?_c.copyFrom(s):_c.identity(),s.translate(-i.x,-i.y).scale(n.width/i.width,n.height/i.height).translate(n.x,n.y),this.transformAABB(s,e),e.ceil(r),this.transformAABB(s.invert(),e)}}}_w.extension={type:U.RendererSystem,name:"filter"};X.add(_w);class s2{constructor(e){this.framebuffer=e,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=Ne.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const o2=new te;class ww{constructor(e){this.renderer=e,this.managedFramebuffers=[],this.unknownFramebuffer=new gf(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new te,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){let r=this.renderer.context.extensions.drawBuffers,i=this.renderer.context.extensions.depthTexture;j.PREFER_ENV===xn.WEBGL_LEGACY&&(r=null,i=null),r?e.drawBuffers=n=>r.drawBuffersWEBGL(n):(this.hasMRT=!1,e.drawBuffers=()=>{}),i||(this.writeDepthTexture=!1)}else this.msaaSamples=e.getInternalformatParameter(e.RENDERBUFFER,e.RGBA8,e.SAMPLES)}bind(e,r,i=0){const{gl:n}=this;if(e){const s=e.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(e);this.current!==e&&(this.current=e,n.bindFramebuffer(n.FRAMEBUFFER,s.framebuffer)),s.mipLevel!==i&&(e.dirtyId++,e.dirtyFormat++,s.mipLevel=i),s.dirtyId!==e.dirtyId&&(s.dirtyId=e.dirtyId,s.dirtyFormat!==e.dirtyFormat?(s.dirtyFormat=e.dirtyFormat,s.dirtySize=e.dirtySize,this.updateFramebuffer(e,i)):s.dirtySize!==e.dirtySize&&(s.dirtySize=e.dirtySize,this.resizeFramebuffer(e)));for(let o=0;o<e.colorTextures.length;o++){const a=e.colorTextures[o];this.renderer.texture.unbind(a.parentTextureArray||a)}if(e.depthTexture&&this.renderer.texture.unbind(e.depthTexture),r){const o=r.width>>i,a=r.height>>i,l=o/r.width;this.setViewport(r.x*l,r.y*l,o,a)}else{const o=e.width>>i,a=e.height>>i;this.setViewport(0,0,o,a)}}else this.current&&(this.current=null,n.bindFramebuffer(n.FRAMEBUFFER,null)),r?this.setViewport(r.x,r.y,r.width,r.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(e,r,i,n){const s=this.viewport;e=Math.round(e),r=Math.round(r),i=Math.round(i),n=Math.round(n),(s.width!==i||s.height!==n||s.x!==e||s.y!==r)&&(s.x=e,s.y=r,s.width=i,s.height=n,this.gl.viewport(e,r,i,n))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(e,r,i,n,s=zd.COLOR|zd.DEPTH){const{gl:o}=this;o.clearColor(e,r,i,n),o.clear(s)}initFramebuffer(e){const{gl:r}=this,i=new s2(r.createFramebuffer());return i.multisample=this.detectSamples(e.multisample),e.glFramebuffers[this.CONTEXT_UID]=i,this.managedFramebuffers.push(e),e.disposeRunner.add(this),i}resizeFramebuffer(e){const{gl:r}=this,i=e.glFramebuffers[this.CONTEXT_UID];if(i.stencil){r.bindRenderbuffer(r.RENDERBUFFER,i.stencil);let o;this.renderer.context.webGLVersion===1?o=r.DEPTH_STENCIL:e.depth&&e.stencil?o=r.DEPTH24_STENCIL8:e.depth?o=r.DEPTH_COMPONENT24:o=r.STENCIL_INDEX8,i.msaaBuffer?r.renderbufferStorageMultisample(r.RENDERBUFFER,i.multisample,o,e.width,e.height):r.renderbufferStorage(r.RENDERBUFFER,o,e.width,e.height)}const n=e.colorTextures;let s=n.length;r.drawBuffers||(s=Math.min(s,1));for(let o=0;o<s;o++){const a=n[o],l=a.parentTextureArray||a;this.renderer.texture.bind(l,0),o===0&&i.msaaBuffer&&(r.bindRenderbuffer(r.RENDERBUFFER,i.msaaBuffer),r.renderbufferStorageMultisample(r.RENDERBUFFER,i.multisample,l._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height))}e.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(e.depthTexture,0)}updateFramebuffer(e,r){const{gl:i}=this,n=e.glFramebuffers[this.CONTEXT_UID],s=e.colorTextures;let o=s.length;i.drawBuffers||(o=Math.min(o,1)),n.multisample>1&&this.canMultisampleFramebuffer(e)?n.msaaBuffer=n.msaaBuffer||i.createRenderbuffer():n.msaaBuffer&&(i.deleteRenderbuffer(n.msaaBuffer),n.msaaBuffer=null,n.blitFramebuffer&&(n.blitFramebuffer.dispose(),n.blitFramebuffer=null));const a=[];for(let l=0;l<o;l++){const u=s[l],h=u.parentTextureArray||u;this.renderer.texture.bind(h,0),l===0&&n.msaaBuffer?(i.bindRenderbuffer(i.RENDERBUFFER,n.msaaBuffer),i.renderbufferStorageMultisample(i.RENDERBUFFER,n.multisample,h._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,n.msaaBuffer)):(i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+l,u.target,h._glTextures[this.CONTEXT_UID].texture,r),a.push(i.COLOR_ATTACHMENT0+l))}if(a.length>1&&i.drawBuffers(a),e.depthTexture&&this.writeDepthTexture){const l=e.depthTexture;this.renderer.texture.bind(l,0),i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,l._glTextures[this.CONTEXT_UID].texture,r)}if((e.stencil||e.depth)&&!(e.depthTexture&&this.writeDepthTexture)){n.stencil=n.stencil||i.createRenderbuffer();let l,u;this.renderer.context.webGLVersion===1?(l=i.DEPTH_STENCIL_ATTACHMENT,u=i.DEPTH_STENCIL):e.depth&&e.stencil?(l=i.DEPTH_STENCIL_ATTACHMENT,u=i.DEPTH24_STENCIL8):e.depth?(l=i.DEPTH_ATTACHMENT,u=i.DEPTH_COMPONENT24):(l=i.STENCIL_ATTACHMENT,u=i.STENCIL_INDEX8),i.bindRenderbuffer(i.RENDERBUFFER,n.stencil),n.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,n.multisample,u,e.width,e.height):i.renderbufferStorage(i.RENDERBUFFER,u,e.width,e.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,l,i.RENDERBUFFER,n.stencil)}else n.stencil&&(i.deleteRenderbuffer(n.stencil),n.stencil=null)}canMultisampleFramebuffer(e){return this.renderer.context.webGLVersion!==1&&e.colorTextures.length<=1&&!e.depthTexture}detectSamples(e){const{msaaSamples:r}=this;let i=Ne.NONE;if(e<=1||r===null)return i;for(let n=0;n<r.length;n++)if(r[n]<=e){i=r[n];break}return i===1&&(i=Ne.NONE),i}blit(e,r,i){const{current:n,renderer:s,gl:o,CONTEXT_UID:a}=this;if(s.context.webGLVersion!==2||!n)return;const l=n.glFramebuffers[a];if(!l)return;if(!e){if(!l.msaaBuffer)return;const h=n.colorTextures[0];if(!h)return;l.blitFramebuffer||(l.blitFramebuffer=new gf(n.width,n.height),l.blitFramebuffer.addColorTexture(0,h)),e=l.blitFramebuffer,e.colorTextures[0]!==h&&(e.colorTextures[0]=h,e.dirtyId++,e.dirtyFormat++),(e.width!==n.width||e.height!==n.height)&&(e.width=n.width,e.height=n.height,e.dirtyId++,e.dirtySize++)}r||(r=o2,r.width=n.width,r.height=n.height),i||(i=r);const u=r.width===i.width&&r.height===i.height;this.bind(e),o.bindFramebuffer(o.READ_FRAMEBUFFER,l.framebuffer),o.blitFramebuffer(r.left,r.top,r.right,r.bottom,i.left,i.top,i.right,i.bottom,o.COLOR_BUFFER_BIT,u?o.NEAREST:o.LINEAR),o.bindFramebuffer(o.READ_FRAMEBUFFER,e.glFramebuffers[this.CONTEXT_UID].framebuffer)}disposeFramebuffer(e,r){const i=e.glFramebuffers[this.CONTEXT_UID],n=this.gl;if(!i)return;delete e.glFramebuffers[this.CONTEXT_UID];const s=this.managedFramebuffers.indexOf(e);s>=0&&this.managedFramebuffers.splice(s,1),e.disposeRunner.remove(this),r||(n.deleteFramebuffer(i.framebuffer),i.msaaBuffer&&n.deleteRenderbuffer(i.msaaBuffer),i.stencil&&n.deleteRenderbuffer(i.stencil)),i.blitFramebuffer&&this.disposeFramebuffer(i.blitFramebuffer,r)}disposeAll(e){const r=this.managedFramebuffers;this.managedFramebuffers=[];for(let i=0;i<r.length;i++)this.disposeFramebuffer(r[i],e)}forceStencil(){const e=this.current;if(!e)return;const r=e.glFramebuffers[this.CONTEXT_UID];if(!r||r.stencil&&e.stencil)return;e.stencil=!0;const i=e.width,n=e.height,s=this.gl,o=r.stencil=s.createRenderbuffer();s.bindRenderbuffer(s.RENDERBUFFER,o);let a,l;this.renderer.context.webGLVersion===1?(a=s.DEPTH_STENCIL_ATTACHMENT,l=s.DEPTH_STENCIL):e.depth?(a=s.DEPTH_STENCIL_ATTACHMENT,l=s.DEPTH24_STENCIL8):(a=s.STENCIL_ATTACHMENT,l=s.STENCIL_INDEX8),r.msaaBuffer?s.renderbufferStorageMultisample(s.RENDERBUFFER,r.multisample,l,i,n):s.renderbufferStorage(s.RENDERBUFFER,l,i,n),s.framebufferRenderbuffer(s.FRAMEBUFFER,a,s.RENDERBUFFER,o)}reset(){this.current=this.unknownFramebuffer,this.viewport=new te}destroy(){this.renderer=null}}ww.extension={type:U.RendererSystem,name:"framebuffer"};X.add(ww);const wc={5126:4,5123:2,5121:1};class Tw{constructor(e){this.renderer=e,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl,r=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,r.webGLVersion!==2){let i=this.renderer.context.extensions.vertexArrayObject;j.PREFER_ENV===xn.WEBGL_LEGACY&&(i=null),i?(e.createVertexArray=()=>i.createVertexArrayOES(),e.bindVertexArray=n=>i.bindVertexArrayOES(n),e.deleteVertexArray=n=>i.deleteVertexArrayOES(n)):(this.hasVao=!1,e.createVertexArray=()=>null,e.bindVertexArray=()=>null,e.deleteVertexArray=()=>null)}if(r.webGLVersion!==2){const i=e.getExtension("ANGLE_instanced_arrays");i?(e.vertexAttribDivisor=(n,s)=>i.vertexAttribDivisorANGLE(n,s),e.drawElementsInstanced=(n,s,o,a,l)=>i.drawElementsInstancedANGLE(n,s,o,a,l),e.drawArraysInstanced=(n,s,o,a)=>i.drawArraysInstancedANGLE(n,s,o,a)):this.hasInstance=!1}this.canUseUInt32ElementIndex=r.webGLVersion===2||!!r.extensions.uint32ElementIndex}bind(e,r){r=r||this.renderer.shader.shader;const{gl:i}=this;let n=e.glVertexArrayObjects[this.CONTEXT_UID],s=!1;n||(this.managedGeometries[e.id]=e,e.disposeRunner.add(this),e.glVertexArrayObjects[this.CONTEXT_UID]=n={},s=!0);const o=n[r.program.id]||this.initGeometryVao(e,r,s);this._activeGeometry=e,this._activeVao!==o&&(this._activeVao=o,this.hasVao?i.bindVertexArray(o):this.activateVao(e,r.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const e=this._activeGeometry,r=this.renderer.buffer;for(let i=0;i<e.buffers.length;i++){const n=e.buffers[i];r.update(n)}}checkCompatibility(e,r){const i=e.attributes,n=r.attributeData;for(const s in n)if(!i[s])throw new Error(`shader and geometry incompatible, geometry missing the "${s}" attribute`)}getSignature(e,r){const i=e.attributes,n=r.attributeData,s=["g",e.id];for(const o in i)n[o]&&s.push(o,n[o].location);return s.join("-")}initGeometryVao(e,r,i=!0){const n=this.gl,s=this.CONTEXT_UID,o=this.renderer.buffer,a=r.program;a.glPrograms[s]||this.renderer.shader.generateProgram(r),this.checkCompatibility(e,a);const l=this.getSignature(e,a),u=e.glVertexArrayObjects[this.CONTEXT_UID];let h=u[l];if(h)return u[a.id]=h,h;const c=e.buffers,d=e.attributes,f={},p={};for(const g in c)f[g]=0,p[g]=0;for(const g in d)!d[g].size&&a.attributeData[g]?d[g].size=a.attributeData[g].size:d[g].size||console.warn(`PIXI Geometry attribute '${g}' size cannot be determined (likely the bound shader does not have the attribute)`),f[d[g].buffer]+=d[g].size*wc[d[g].type];for(const g in d){const x=d[g],y=x.size;x.stride===void 0&&(f[x.buffer]===y*wc[x.type]?x.stride=0:x.stride=f[x.buffer]),x.start===void 0&&(x.start=p[x.buffer],p[x.buffer]+=y*wc[x.type])}h=n.createVertexArray(),n.bindVertexArray(h);for(let g=0;g<c.length;g++){const x=c[g];o.bind(x),i&&x._glBuffers[s].refCount++}return this.activateVao(e,a),u[a.id]=h,u[l]=h,n.bindVertexArray(null),o.unbind(Er.ARRAY_BUFFER),h}disposeGeometry(e,r){var a;if(!this.managedGeometries[e.id])return;delete this.managedGeometries[e.id];const i=e.glVertexArrayObjects[this.CONTEXT_UID],n=this.gl,s=e.buffers,o=(a=this.renderer)==null?void 0:a.buffer;if(e.disposeRunner.remove(this),!!i){if(o)for(let l=0;l<s.length;l++){const u=s[l]._glBuffers[this.CONTEXT_UID];u&&(u.refCount--,u.refCount===0&&!r&&o.dispose(s[l],r))}if(!r){for(const l in i)if(l[0]==="g"){const u=i[l];this._activeVao===u&&this.unbind(),n.deleteVertexArray(u)}}delete e.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(e){const r=Object.keys(this.managedGeometries);for(let i=0;i<r.length;i++)this.disposeGeometry(this.managedGeometries[r[i]],e)}activateVao(e,r){const i=this.gl,n=this.CONTEXT_UID,s=this.renderer.buffer,o=e.buffers,a=e.attributes;e.indexBuffer&&s.bind(e.indexBuffer);let l=null;for(const u in a){const h=a[u],c=o[h.buffer],d=c._glBuffers[n];if(r.attributeData[u]){l!==d&&(s.bind(c),l=d);const f=r.attributeData[u].location;if(i.enableVertexAttribArray(f),i.vertexAttribPointer(f,h.size,h.type||i.FLOAT,h.normalized,h.stride,h.start),h.instance)if(this.hasInstance)i.vertexAttribDivisor(f,h.divisor);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(e,r,i,n){const{gl:s}=this,o=this._activeGeometry;if(o.indexBuffer){const a=o.indexBuffer.data.BYTES_PER_ELEMENT,l=a===2?s.UNSIGNED_SHORT:s.UNSIGNED_INT;a===2||a===4&&this.canUseUInt32ElementIndex?o.instanced?s.drawElementsInstanced(e,r||o.indexBuffer.data.length,l,(i||0)*a,n||1):s.drawElements(e,r||o.indexBuffer.data.length,l,(i||0)*a):console.warn("unsupported index buffer type: uint32")}else o.instanced?s.drawArraysInstanced(e,i,r||o.getSize(),n||1):s.drawArrays(e,i,r||o.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}Tw.extension={type:U.RendererSystem,name:"geometry"};X.add(Tw);const v0=new ye;class Ew{constructor(e,r){this._texture=e,this.mapCoord=new ye,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof r>"u"?.5:r,this.isSimple=!1}get texture(){return this._texture}set texture(e){this._texture=e,this._textureID=-1}multiplyUvs(e,r){r===void 0&&(r=e);const i=this.mapCoord;for(let n=0;n<e.length;n+=2){const s=e[n],o=e[n+1];r[n]=s*i.a+o*i.c+i.tx,r[n+1]=s*i.b+o*i.d+i.ty}return r}update(e){const r=this._texture;if(!r||!r.valid||!e&&this._textureID===r._updateID)return!1;this._textureID=r._updateID,this._updateID++;const i=r._uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);const n=r.orig,s=r.trim;s&&(v0.set(n.width/s.width,0,0,n.height/s.height,-s.x/s.width,-s.y/s.height),this.mapCoord.append(v0));const o=r.baseTexture,a=this.uClampFrame,l=this.clampMargin/o.resolution,u=this.clampOffset;return a[0]=(r._frame.x+l+u)/o.width,a[1]=(r._frame.y+l+u)/o.height,a[2]=(r._frame.x+r._frame.width-l+u)/o.width,a[3]=(r._frame.y+r._frame.height-l+u)/o.height,this.uClampOffset[0]=u/o.realWidth,this.uClampOffset[1]=u/o.realHeight,this.isSimple=r._frame.width===o.width&&r._frame.height===o.height&&r.rotate===0,!0}}var a2=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,l2=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`;class u2 extends ct{constructor(e,r,i){let n=null;typeof e!="string"&&r===void 0&&i===void 0&&(n=e,e=void 0,r=void 0,i=void 0),super(e||l2,r||a2,i),this.maskSprite=n,this.maskMatrix=new ye}get maskSprite(){return this._maskSprite}set maskSprite(e){this._maskSprite=e,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(e,r,i,n){const s=this._maskSprite,o=s._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new Ew(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,s).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=s.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,e.applyFilter(this,r,i,n))}}class h2{constructor(e=null){this.type=je.NONE,this.autoDetect=!0,this.maskObject=e||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=ct.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(e){e?this._filters?this._filters[0]=e:this._filters=[e]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=je.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(e){e?(this._stencilCounter=e._stencilCounter,this._scissorCounter=e._scissorCounter,this._scissorRect=e._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}class Sw{constructor(e){this.renderer=e,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(e){this.maskStack=e,this.renderer.scissor.setMaskStack(e),this.renderer.stencil.setMaskStack(e)}push(e,r){let i=r;if(!i.isMaskData){const s=this.maskDataPool.pop()||new h2;s.pooled=!0,s.maskObject=r,i=s}const n=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(i.copyCountersOrReset(n),i._colorMask=n?n._colorMask:15,i.autoDetect&&this.detect(i),i._target=e,i.type!==je.SPRITE&&this.maskStack.push(i),i.enabled)switch(i.type){case je.SCISSOR:this.renderer.scissor.push(i);break;case je.STENCIL:this.renderer.stencil.push(i);break;case je.SPRITE:i.copyCountersOrReset(null),this.pushSpriteMask(i);break;case je.COLOR:this.pushColorMask(i);break}i.type===je.SPRITE&&this.maskStack.push(i)}pop(e){const r=this.maskStack.pop();if(!(!r||r._target!==e)){if(r.enabled)switch(r.type){case je.SCISSOR:this.renderer.scissor.pop(r);break;case je.STENCIL:this.renderer.stencil.pop(r.maskObject);break;case je.SPRITE:this.popSpriteMask(r);break;case je.COLOR:this.popColorMask(r);break}if(r.reset(),r.pooled&&this.maskDataPool.push(r),this.maskStack.length!==0){const i=this.maskStack[this.maskStack.length-1];i.type===je.SPRITE&&i._filters&&(i._filters[0].maskSprite=i.maskObject)}}}detect(e){const r=e.maskObject;r?r.isSprite?e.type=je.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(e)?e.type=je.SCISSOR:e.type=je.STENCIL:e.type=je.COLOR}pushSpriteMask(e){const{maskObject:r}=e,i=e._target;let n=e._filters;n||(n=this.alphaMaskPool[this.alphaMaskIndex],n||(n=this.alphaMaskPool[this.alphaMaskIndex]=[new u2])),n[0].resolution=e.resolution,n[0].multisample=e.multisample,n[0].maskSprite=r;const s=i.filterArea;i.filterArea=r.getBounds(!0),this.renderer.filter.push(i,n),i.filterArea=s,e._filters||this.alphaMaskIndex++}popSpriteMask(e){this.renderer.filter.pop(),e._filters?e._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(e){const r=e._colorMask,i=e._colorMask=r&e.colorMask;i!==r&&this.renderer.gl.colorMask((i&1)!==0,(i&2)!==0,(i&4)!==0,(i&8)!==0)}popColorMask(e){const r=e._colorMask,i=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;i!==r&&this.renderer.gl.colorMask((i&1)!==0,(i&2)!==0,(i&4)!==0,(i&8)!==0)}destroy(){this.renderer=null}}Sw.extension={type:U.RendererSystem,name:"mask"};X.add(Sw);class Aw{constructor(e){this.renderer=e,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(e){const{gl:r}=this.renderer,i=this.getStackLength();this.maskStack=e;const n=this.getStackLength();n!==i&&(n===0?r.disable(this.glConst):(r.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const x0=new ye,_0=[],bw=class Pl extends Aw{constructor(e){super(e),this.glConst=j.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._scissorCounter:0}calcScissorRect(e){if(e._scissorRectLocal)return;const r=e._scissorRect,{maskObject:i}=e,{renderer:n}=this,s=n.renderTexture,o=i.getBounds(!0,_0.pop()??new te);this.roundFrameToPixels(o,s.current?s.current.resolution:n.resolution,s.sourceFrame,s.destinationFrame,n.projection.transform),r&&o.fit(r),e._scissorRectLocal=o}static isMatrixRotated(e){if(!e)return!1;const{a:r,b:i,c:n,d:s}=e;return(Math.abs(i)>1e-4||Math.abs(n)>1e-4)&&(Math.abs(r)>1e-4||Math.abs(s)>1e-4)}testScissor(e){const{maskObject:r}=e;if(!r.isFastRect||!r.isFastRect()||Pl.isMatrixRotated(r.worldTransform)||Pl.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(e);const i=e._scissorRectLocal;return i.width>0&&i.height>0}roundFrameToPixels(e,r,i,n,s){Pl.isMatrixRotated(s)||(s=s?x0.copyFrom(s):x0.identity(),s.translate(-i.x,-i.y).scale(n.width/i.width,n.height/i.height).translate(n.x,n.y),this.renderer.filter.transformAABB(s,e),e.fit(n),e.x=Math.round(e.x*r),e.y=Math.round(e.y*r),e.width=Math.round(e.width*r),e.height=Math.round(e.height*r))}push(e){e._scissorRectLocal||this.calcScissorRect(e);const{gl:r}=this.renderer;e._scissorRect||r.enable(r.SCISSOR_TEST),e._scissorCounter++,e._scissorRect=e._scissorRectLocal,this._useCurrent()}pop(e){const{gl:r}=this.renderer;e&&_0.push(e._scissorRectLocal),this.getStackLength()>0?this._useCurrent():r.disable(r.SCISSOR_TEST)}_useCurrent(){const e=this.maskStack[this.maskStack.length-1]._scissorRect;let r;this.renderer.renderTexture.current?r=e.y:r=this.renderer.height-e.height-e.y,this.renderer.gl.scissor(e.x,r,e.width,e.height)}};bw.extension={type:U.RendererSystem,name:"scissor"};let c2=bw;X.add(c2);class Cw extends Aw{constructor(e){super(e),this.glConst=j.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._stencilCounter:0}push(e){const r=e.maskObject,{gl:i}=this.renderer,n=e._stencilCounter;n===0&&(this.renderer.framebuffer.forceStencil(),i.clearStencil(0),i.clear(i.STENCIL_BUFFER_BIT),i.enable(i.STENCIL_TEST)),e._stencilCounter++;const s=e._colorMask;s!==0&&(e._colorMask=0,i.colorMask(!1,!1,!1,!1)),i.stencilFunc(i.EQUAL,n,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.INCR),r.renderable=!0,r.render(this.renderer),this.renderer.batch.flush(),r.renderable=!1,s!==0&&(e._colorMask=s,i.colorMask((s&1)!==0,(s&2)!==0,(s&4)!==0,(s&8)!==0)),this._useCurrent()}pop(e){const r=this.renderer.gl;if(this.getStackLength()===0)r.disable(r.STENCIL_TEST);else{const i=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,n=i?i._colorMask:15;n!==0&&(i._colorMask=0,r.colorMask(!1,!1,!1,!1)),r.stencilOp(r.KEEP,r.KEEP,r.DECR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,n!==0&&(i._colorMask=n,r.colorMask((n&1)!==0,(n&2)!==0,(n&4)!==0,(n&8)!==0)),this._useCurrent()}}_useCurrent(){const e=this.renderer.gl;e.stencilFunc(e.EQUAL,this.getStackLength(),4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)}}Cw.extension={type:U.RendererSystem,name:"stencil"};X.add(Cw);class Pw{constructor(e){this.renderer=e,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get(){return ne("7.0.0","renderer.plugins.extract has moved to renderer.extract"),e.extract}},prepare:{enumerable:!1,get(){return ne("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),e.prepare}},interaction:{enumerable:!1,get(){return ne("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),e.events}}})}init(){const e=this.rendererPlugins;for(const r in e)this.plugins[r]=new e[r](this.renderer)}destroy(){for(const e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null}}Pw.extension={type:[U.RendererSystem,U.CanvasRendererSystem],name:"_plugin"};X.add(Pw);class Rw{constructor(e){this.renderer=e,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new ye,this.transform=null}update(e,r,i,n){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=r||this.sourceFrame||e,this.calculateProjection(this.destinationFrame,this.sourceFrame,i,n),this.transform&&this.projectionMatrix.append(this.transform);const s=this.renderer;s.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,s.globalUniforms.update(),s.shader.shader&&s.shader.syncUniformGroup(s.shader.shader.uniforms.globals)}calculateProjection(e,r,i,n){const s=this.projectionMatrix,o=n?-1:1;s.identity(),s.a=1/r.width*2,s.d=o*(1/r.height*2),s.tx=-1-r.x*s.a,s.ty=-o-r.y*s.d}setTransform(e){}destroy(){this.renderer=null}}Rw.extension={type:U.RendererSystem,name:"projection"};X.add(Rw);const d2=new nm,w0=new te;class Iw{constructor(e){this.renderer=e,this._tempMatrix=new ye}generateTexture(e,r){const{region:i,...n}=r||{},s=(i==null?void 0:i.copyTo(w0))||e.getLocalBounds(w0,!0),o=n.resolution||this.renderer.resolution;s.width=Math.max(s.width,1/o),s.height=Math.max(s.height,1/o),n.width=s.width,n.height=s.height,n.resolution=o,n.multisample??(n.multisample=this.renderer.multisample);const a=wn.create(n);this._tempMatrix.tx=-s.x,this._tempMatrix.ty=-s.y;const l=e.transform;return e.transform=d2,this.renderer.render(e,{renderTexture:a,transform:this._tempMatrix,skipUpdateTransform:!!e.parent,blit:!0}),e.transform=l,a}destroy(){}}Iw.extension={type:[U.RendererSystem,U.CanvasRendererSystem],name:"textureGenerator"};X.add(Iw);const Li=new te,Ks=new te;class Mw{constructor(e){this.renderer=e,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new te,this.destinationFrame=new te,this.viewportFrame=new te}contextChange(){var r;const e=(r=this.renderer)==null?void 0:r.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(e&&e.alpha&&e.premultipliedAlpha)}bind(e=null,r,i){const n=this.renderer;this.current=e;let s,o,a;e?(s=e.baseTexture,a=s.resolution,r||(Li.width=e.frame.width,Li.height=e.frame.height,r=Li),i||(Ks.x=e.frame.x,Ks.y=e.frame.y,Ks.width=r.width,Ks.height=r.height,i=Ks),o=s.framebuffer):(a=n.resolution,r||(Li.width=n._view.screen.width,Li.height=n._view.screen.height,r=Li),i||(i=Li,i.width=r.width,i.height=r.height));const l=this.viewportFrame;l.x=i.x*a,l.y=i.y*a,l.width=i.width*a,l.height=i.height*a,e||(l.y=n.view.height-(l.y+l.height)),l.ceil(),this.renderer.framebuffer.bind(o,l),this.renderer.projection.update(i,r,a,!o),e?this.renderer.mask.setMaskStack(s.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(r),this.destinationFrame.copyFrom(i)}clear(e,r){const i=this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor,n=me.shared.setValue(e||i);(this.current&&this.current.baseTexture.alphaMode>0||!this.current&&this._rendererPremultipliedAlpha)&&n.premultiply(n.alpha);const s=this.destinationFrame,o=this.current?this.current.baseTexture:this.renderer._view.screen,a=s.width!==o.width||s.height!==o.height;if(a){let{x:l,y:u,width:h,height:c}=this.viewportFrame;l=Math.round(l),u=Math.round(u),h=Math.round(h),c=Math.round(c),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(l,u,h,c)}this.renderer.framebuffer.clear(n.red,n.green,n.blue,n.alpha,r),a&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}Mw.extension={type:U.RendererSystem,name:"renderTexture"};X.add(Mw);class f2{constructor(e,r){this.program=e,this.uniformData=r,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function p2(t,e){const r={},i=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let n=0;n<i;n++){const s=e.getActiveAttrib(t,n);if(s.name.startsWith("gl_"))continue;const o=pw(e,s.type),a={type:o,name:s.name,size:fw(o),location:e.getAttribLocation(t,s.name)};r[s.name]=a}return r}function m2(t,e){const r={},i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let n=0;n<i;n++){const s=e.getActiveUniform(t,n),o=s.name.replace(/\[.*?\]$/,""),a=!!s.name.match(/\[.*?\]$/),l=pw(e,s.type);r[o]={name:o,index:n,type:l,size:s.size,isArray:a,value:cw(l,s.size)}}return r}function g2(t,e){var a;const r=d0(t,t.VERTEX_SHADER,e.vertexSrc),i=d0(t,t.FRAGMENT_SHADER,e.fragmentSrc),n=t.createProgram();t.attachShader(n,r),t.attachShader(n,i);const s=(a=e.extra)==null?void 0:a.transformFeedbackVaryings;if(s&&(typeof t.transformFeedbackVaryings!="function"?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):t.transformFeedbackVaryings(n,s.names,s.bufferMode==="separate"?t.SEPARATE_ATTRIBS:t.INTERLEAVED_ATTRIBS)),t.linkProgram(n),t.getProgramParameter(n,t.LINK_STATUS)||$I(t,n,r,i),e.attributeData=p2(n,t),e.uniformData=m2(n,t),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertexSrc)){const l=Object.keys(e.attributeData);l.sort((u,h)=>u>h?1:-1);for(let u=0;u<l.length;u++)e.attributeData[l[u]].location=u,t.bindAttribLocation(n,u,l[u]);t.linkProgram(n)}t.deleteShader(r),t.deleteShader(i);const o={};for(const l in e.uniformData){const u=e.uniformData[l];o[l]={location:t.getUniformLocation(n,l),value:cw(u.type,u.size)}}return new f2(n,o)}function y2(t,e,r,i,n){r.buffer.update(n)}const v2={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},kw={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function x2(t){const e=t.map(s=>({data:s,offset:0,dataLen:0,dirty:0}));let r=0,i=0,n=0;for(let s=0;s<e.length;s++){const o=e[s];if(r=kw[o.data.type],o.data.size>1&&(r=Math.max(r,16)*o.data.size),o.dataLen=r,i%r!==0&&i<16){const a=i%r%16;i+=a,n+=a}i+r>16?(n=Math.ceil(n/16)*16,o.offset=n,n+=r,i=r):(o.offset=n,i+=r,n+=r)}return n=Math.ceil(n/16)*16,{uboElements:e,size:n}}function _2(t,e){const r=[];for(const i in t)e[i]&&r.push(e[i]);return r.sort((i,n)=>i.index-n.index),r}function w2(t,e){if(!t.autoManage)return{size:0,syncFunc:y2};const r=_2(t.uniforms,e),{uboElements:i,size:n}=x2(r),s=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `];for(let o=0;o<i.length;o++){const a=i[o],l=t.uniforms[a.data.name],u=a.data.name;let h=!1;for(let c=0;c<ds.length;c++){const d=ds[c];if(d.codeUbo&&d.test(a.data,l)){s.push(`offset = ${a.offset/4};`,ds[c].codeUbo(a.data.name,l)),h=!0;break}}if(!h)if(a.data.size>1){const c=fw(a.data.type),d=Math.max(kw[a.data.type]/16,1),f=c/d,p=(4-f%4)%4;s.push(`
                cv = ud.${u}.value;
                v = uv.${u};
                offset = ${a.offset/4};

                t = 0;

                for(var i=0; i < ${a.data.size*d}; i++)
                {
                    for(var j = 0; j < ${f}; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += ${p};
                }

                `)}else{const c=v2[a.data.type];s.push(`
                cv = ud.${u}.value;
                v = uv.${u};
                offset = ${a.offset/4};
                ${c};
                `)}}return s.push(`
       renderer.buffer.update(buffer);
    `),{size:n,syncFunc:new Function("ud","uv","renderer","syncData","buffer",s.join(`
`))}}let T2=0;const Za={textureCount:0,uboCount:0};class Dw{constructor(e){this.destroyed=!1,this.renderer=e,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=T2++}systemCheck(){if(!XI())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(e){this.gl=e,this.reset()}bind(e,r){e.disposeRunner.add(this),e.uniforms.globals=this.renderer.globalUniforms;const i=e.program,n=i.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(e);return this.shader=e,this.program!==i&&(this.program=i,this.gl.useProgram(n.program)),r||(Za.textureCount=0,Za.uboCount=0,this.syncUniformGroup(e.uniformGroup,Za)),n}setUniforms(e){const r=this.shader.program,i=r.glPrograms[this.renderer.CONTEXT_UID];r.syncUniforms(i.uniformData,e,this.renderer)}syncUniformGroup(e,r){const i=this.getGlProgram();(!e.static||e.dirtyId!==i.uniformDirtyGroups[e.id])&&(i.uniformDirtyGroups[e.id]=e.dirtyId,this.syncUniforms(e,i,r))}syncUniforms(e,r,i){(e.syncUniforms[this.shader.program.id]||this.createSyncGroups(e))(r.uniformData,e.uniforms,this.renderer,i)}createSyncGroups(e){const r=this.getSignature(e,this.shader.program.uniformData,"u");return this.cache[r]||(this.cache[r]=jI(e,this.shader.program.uniformData)),e.syncUniforms[this.shader.program.id]=this.cache[r],e.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(e,r){const i=this.getGlProgram();if(!e.static||e.dirtyId!==0||!i.uniformGroups[e.id]){e.dirtyId=0;const n=i.uniformGroups[e.id]||this.createSyncBufferGroup(e,i,r);e.buffer.update(),n(i.uniformData,e.uniforms,this.renderer,Za,e.buffer)}this.renderer.buffer.bindBufferBase(e.buffer,i.uniformBufferBindings[r])}createSyncBufferGroup(e,r,i){const{gl:n}=this.renderer;this.renderer.buffer.bind(e.buffer);const s=this.gl.getUniformBlockIndex(r.program,i);r.uniformBufferBindings[i]=this.shader.uniformBindCount,n.uniformBlockBinding(r.program,s,this.shader.uniformBindCount),this.shader.uniformBindCount++;const o=this.getSignature(e,this.shader.program.uniformData,"ubo");let a=this._uboCache[o];if(a||(a=this._uboCache[o]=w2(e,this.shader.program.uniformData)),e.autoManage){const l=new Float32Array(a.size/4);e.buffer.update(l)}return r.uniformGroups[e.id]=a.syncFunc,r.uniformGroups[e.id]}getSignature(e,r,i){const n=e.uniforms,s=[`${i}-`];for(const o in n)s.push(o),r[o]&&s.push(r[o].type);return s.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(e){const r=this.gl,i=e.program,n=g2(r,i);return i.glPrograms[this.renderer.CONTEXT_UID]=n,n}reset(){this.program=null,this.shader=null}disposeShader(e){this.shader===e&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}Dw.extension={type:U.RendererSystem,name:"shader"};X.add(Dw);class vu{constructor(e){this.renderer=e}run(e){const{renderer:r}=this;r.runners.init.emit(r.options),e.hello&&console.log(`PixiJS 7.4.3 - ${r.rendererLogId} - https://pixijs.com`),r.resize(r.screen.width,r.screen.height)}destroy(){}}vu.defaultOptions={hello:!1},vu.extension={type:[U.RendererSystem,U.CanvasRendererSystem],name:"startup"};X.add(vu);function E2(t,e=[]){return e[J.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[J.ADD]=[t.ONE,t.ONE],e[J.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[J.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[J.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[J.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[J.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[J.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[J.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[J.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[J.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[J.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[J.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[J.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[J.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[J.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[J.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[J.NONE]=[0,0],e[J.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[J.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[J.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[J.SRC_IN]=[t.DST_ALPHA,t.ZERO],e[J.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],e[J.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[J.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],e[J.DST_IN]=[t.ZERO,t.SRC_ALPHA],e[J.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],e[J.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],e[J.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[J.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],e}const S2=0,A2=1,b2=2,C2=3,P2=4,R2=5,Fw=class yf{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=J.NONE,this._blendEq=!1,this.map=[],this.map[S2]=this.setBlend,this.map[A2]=this.setOffset,this.map[b2]=this.setCullFace,this.map[C2]=this.setDepthTest,this.map[P2]=this.setFrontFace,this.map[R2]=this.setDepthMask,this.checks=[],this.defaultState=new Pr,this.defaultState.blend=!0}contextChange(e){this.gl=e,this.blendModes=E2(e),this.set(this.defaultState),this.reset()}set(e){if(e=e||this.defaultState,this.stateId!==e.data){let r=this.stateId^e.data,i=0;for(;r;)r&1&&this.map[i].call(this,!!(e.data&1<<i)),r=r>>1,i++;this.stateId=e.data}for(let r=0;r<this.checks.length;r++)this.checks[r](this,e)}forceState(e){e=e||this.defaultState;for(let r=0;r<this.map.length;r++)this.map[r].call(this,!!(e.data&1<<r));for(let r=0;r<this.checks.length;r++)this.checks[r](this,e);this.stateId=e.data}setBlend(e){this.updateCheck(yf.checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)}setOffset(e){this.updateCheck(yf.checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(e){this.gl.depthMask(e)}setCullFace(e){this.gl[e?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(e){this.gl.frontFace(this.gl[e?"CW":"CCW"])}setBlendMode(e){if(e===this.blendMode)return;this.blendMode=e;const r=this.blendModes[e],i=this.gl;r.length===2?i.blendFunc(r[0],r[1]):i.blendFuncSeparate(r[0],r[1],r[2],r[3]),r.length===6?(this._blendEq=!0,i.blendEquationSeparate(r[4],r[5])):this._blendEq&&(this._blendEq=!1,i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD))}setPolygonOffset(e,r){this.gl.polygonOffset(e,r)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(e,r){const i=this.checks.indexOf(e);r&&i===-1?this.checks.push(e):!r&&i!==-1&&this.checks.splice(i,1)}static checkBlendMode(e,r){e.setBlendMode(r.blendMode)}static checkPolygonOffset(e,r){e.setPolygonOffset(1,r.polygonOffset)}destroy(){this.gl=null}};Fw.extension={type:U.RendererSystem,name:"state"};let I2=Fw;X.add(I2);class M2 extends ha{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(e){this.addRunners(...e.runners);const r=(e.priority??[]).filter(n=>e.systems[n]),i=[...r,...Object.keys(e.systems).filter(n=>!r.includes(n))];for(const n of i)this.addSystem(e.systems[n],n)}addRunners(...e){e.forEach(r=>{this.runners[r]=new rr(r)})}addSystem(e,r){const i=new e(this);if(this[r])throw new Error(`Whoops! The name "${r}" is already in use`);this[r]=i,this._systemsHash[r]=i;for(const n in this.runners)this.runners[n].add(i);return this}emitWithCustomOptions(e,r){const i=Object.keys(this._systemsHash);e.items.forEach(n=>{const s=i.find(o=>this._systemsHash[o]===n);n[e.name](r[s])})}destroy(){Object.values(this.runners).forEach(e=>{e.destroy()}),this._systemsHash={}}}const no=class Rl{constructor(e){this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=Rl.defaultMaxIdle,this.checkCountMax=Rl.defaultCheckCountMax,this.mode=Rl.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==qp.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const e=this.renderer.texture,r=e.managedTextures;let i=!1;for(let n=0;n<r.length;n++){const s=r[n];s.resource&&this.count-s.touched>this.maxIdle&&(e.destroyTexture(s,!0),r[n]=null,i=!0)}if(i){let n=0;for(let s=0;s<r.length;s++)r[s]!==null&&(r[n++]=r[s]);r.length=n}}unload(e){const r=this.renderer.texture,i=e._texture;i&&!i.framebuffer&&r.destroyTexture(i);for(let n=e.children.length-1;n>=0;n--)this.unload(e.children[n])}destroy(){this.renderer=null}};no.defaultMode=qp.AUTO,no.defaultMaxIdle=60*60,no.defaultCheckCountMax=60*10,no.extension={type:U.RendererSystem,name:"textureGC"};let Wi=no;X.add(Wi);class Tc{constructor(e){this.texture=e,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=K.UNSIGNED_BYTE,this.internalFormat=L.RGBA,this.samplerType=0}}function k2(t){let e;return"WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext?e={[t.RGB]:V.FLOAT,[t.RGBA]:V.FLOAT,[t.ALPHA]:V.FLOAT,[t.LUMINANCE]:V.FLOAT,[t.LUMINANCE_ALPHA]:V.FLOAT,[t.R8]:V.FLOAT,[t.R8_SNORM]:V.FLOAT,[t.RG8]:V.FLOAT,[t.RG8_SNORM]:V.FLOAT,[t.RGB8]:V.FLOAT,[t.RGB8_SNORM]:V.FLOAT,[t.RGB565]:V.FLOAT,[t.RGBA4]:V.FLOAT,[t.RGB5_A1]:V.FLOAT,[t.RGBA8]:V.FLOAT,[t.RGBA8_SNORM]:V.FLOAT,[t.RGB10_A2]:V.FLOAT,[t.RGB10_A2UI]:V.FLOAT,[t.SRGB8]:V.FLOAT,[t.SRGB8_ALPHA8]:V.FLOAT,[t.R16F]:V.FLOAT,[t.RG16F]:V.FLOAT,[t.RGB16F]:V.FLOAT,[t.RGBA16F]:V.FLOAT,[t.R32F]:V.FLOAT,[t.RG32F]:V.FLOAT,[t.RGB32F]:V.FLOAT,[t.RGBA32F]:V.FLOAT,[t.R11F_G11F_B10F]:V.FLOAT,[t.RGB9_E5]:V.FLOAT,[t.R8I]:V.INT,[t.R8UI]:V.UINT,[t.R16I]:V.INT,[t.R16UI]:V.UINT,[t.R32I]:V.INT,[t.R32UI]:V.UINT,[t.RG8I]:V.INT,[t.RG8UI]:V.UINT,[t.RG16I]:V.INT,[t.RG16UI]:V.UINT,[t.RG32I]:V.INT,[t.RG32UI]:V.UINT,[t.RGB8I]:V.INT,[t.RGB8UI]:V.UINT,[t.RGB16I]:V.INT,[t.RGB16UI]:V.UINT,[t.RGB32I]:V.INT,[t.RGB32UI]:V.UINT,[t.RGBA8I]:V.INT,[t.RGBA8UI]:V.UINT,[t.RGBA16I]:V.INT,[t.RGBA16UI]:V.UINT,[t.RGBA32I]:V.INT,[t.RGBA32UI]:V.UINT,[t.DEPTH_COMPONENT16]:V.FLOAT,[t.DEPTH_COMPONENT24]:V.FLOAT,[t.DEPTH_COMPONENT32F]:V.FLOAT,[t.DEPTH_STENCIL]:V.FLOAT,[t.DEPTH24_STENCIL8]:V.FLOAT,[t.DEPTH32F_STENCIL8]:V.FLOAT}:e={[t.RGB]:V.FLOAT,[t.RGBA]:V.FLOAT,[t.ALPHA]:V.FLOAT,[t.LUMINANCE]:V.FLOAT,[t.LUMINANCE_ALPHA]:V.FLOAT,[t.DEPTH_STENCIL]:V.FLOAT},e}function D2(t){let e;return"WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext?e={[K.UNSIGNED_BYTE]:{[L.RGBA]:t.RGBA8,[L.RGB]:t.RGB8,[L.RG]:t.RG8,[L.RED]:t.R8,[L.RGBA_INTEGER]:t.RGBA8UI,[L.RGB_INTEGER]:t.RGB8UI,[L.RG_INTEGER]:t.RG8UI,[L.RED_INTEGER]:t.R8UI,[L.ALPHA]:t.ALPHA,[L.LUMINANCE]:t.LUMINANCE,[L.LUMINANCE_ALPHA]:t.LUMINANCE_ALPHA},[K.BYTE]:{[L.RGBA]:t.RGBA8_SNORM,[L.RGB]:t.RGB8_SNORM,[L.RG]:t.RG8_SNORM,[L.RED]:t.R8_SNORM,[L.RGBA_INTEGER]:t.RGBA8I,[L.RGB_INTEGER]:t.RGB8I,[L.RG_INTEGER]:t.RG8I,[L.RED_INTEGER]:t.R8I},[K.UNSIGNED_SHORT]:{[L.RGBA_INTEGER]:t.RGBA16UI,[L.RGB_INTEGER]:t.RGB16UI,[L.RG_INTEGER]:t.RG16UI,[L.RED_INTEGER]:t.R16UI,[L.DEPTH_COMPONENT]:t.DEPTH_COMPONENT16},[K.SHORT]:{[L.RGBA_INTEGER]:t.RGBA16I,[L.RGB_INTEGER]:t.RGB16I,[L.RG_INTEGER]:t.RG16I,[L.RED_INTEGER]:t.R16I},[K.UNSIGNED_INT]:{[L.RGBA_INTEGER]:t.RGBA32UI,[L.RGB_INTEGER]:t.RGB32UI,[L.RG_INTEGER]:t.RG32UI,[L.RED_INTEGER]:t.R32UI,[L.DEPTH_COMPONENT]:t.DEPTH_COMPONENT24},[K.INT]:{[L.RGBA_INTEGER]:t.RGBA32I,[L.RGB_INTEGER]:t.RGB32I,[L.RG_INTEGER]:t.RG32I,[L.RED_INTEGER]:t.R32I},[K.FLOAT]:{[L.RGBA]:t.RGBA32F,[L.RGB]:t.RGB32F,[L.RG]:t.RG32F,[L.RED]:t.R32F,[L.DEPTH_COMPONENT]:t.DEPTH_COMPONENT32F},[K.HALF_FLOAT]:{[L.RGBA]:t.RGBA16F,[L.RGB]:t.RGB16F,[L.RG]:t.RG16F,[L.RED]:t.R16F},[K.UNSIGNED_SHORT_5_6_5]:{[L.RGB]:t.RGB565},[K.UNSIGNED_SHORT_4_4_4_4]:{[L.RGBA]:t.RGBA4},[K.UNSIGNED_SHORT_5_5_5_1]:{[L.RGBA]:t.RGB5_A1},[K.UNSIGNED_INT_2_10_10_10_REV]:{[L.RGBA]:t.RGB10_A2,[L.RGBA_INTEGER]:t.RGB10_A2UI},[K.UNSIGNED_INT_10F_11F_11F_REV]:{[L.RGB]:t.R11F_G11F_B10F},[K.UNSIGNED_INT_5_9_9_9_REV]:{[L.RGB]:t.RGB9_E5},[K.UNSIGNED_INT_24_8]:{[L.DEPTH_STENCIL]:t.DEPTH24_STENCIL8},[K.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[L.DEPTH_STENCIL]:t.DEPTH32F_STENCIL8}}:e={[K.UNSIGNED_BYTE]:{[L.RGBA]:t.RGBA,[L.RGB]:t.RGB,[L.ALPHA]:t.ALPHA,[L.LUMINANCE]:t.LUMINANCE,[L.LUMINANCE_ALPHA]:t.LUMINANCE_ALPHA},[K.UNSIGNED_SHORT_5_6_5]:{[L.RGB]:t.RGB},[K.UNSIGNED_SHORT_4_4_4_4]:{[L.RGBA]:t.RGBA},[K.UNSIGNED_SHORT_5_5_5_1]:{[L.RGBA]:t.RGBA}},e}class Bw{constructor(e){this.renderer=e,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new ee,this.hasIntegerTextures=!1}contextChange(){const e=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=D2(e),this.samplerTypes=k2(e);const r=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=r;for(let n=0;n<r;n++)this.boundTextures[n]=null;this.emptyTextures={};const i=new Tc(e.createTexture());e.bindTexture(e.TEXTURE_2D,i.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[e.TEXTURE_2D]=i,this.emptyTextures[e.TEXTURE_CUBE_MAP]=new Tc(e.createTexture()),e.bindTexture(e.TEXTURE_CUBE_MAP,this.emptyTextures[e.TEXTURE_CUBE_MAP].texture);for(let n=0;n<6;n++)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null);e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR);for(let n=0;n<this.boundTextures.length;n++)this.bind(null,n)}bind(e,r=0){const{gl:i}=this;if(e=e==null?void 0:e.castToBaseTexture(),(e==null?void 0:e.valid)&&!e.parentTextureArray){e.touched=this.renderer.textureGC.count;const n=e._glTextures[this.CONTEXT_UID]||this.initTexture(e);this.boundTextures[r]!==e&&(this.currentLocation!==r&&(this.currentLocation=r,i.activeTexture(i.TEXTURE0+r)),i.bindTexture(e.target,n.texture)),n.dirtyId!==e.dirtyId?(this.currentLocation!==r&&(this.currentLocation=r,i.activeTexture(i.TEXTURE0+r)),this.updateTexture(e)):n.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(e),this.boundTextures[r]=e}else this.currentLocation!==r&&(this.currentLocation=r,i.activeTexture(i.TEXTURE0+r)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[r]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.unknownTexture}unbind(e){const{gl:r,boundTextures:i}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let n=0;n<i.length;n++)i[n]===this.unknownTexture&&this.bind(null,n)}for(let n=0;n<i.length;n++)i[n]===e&&(this.currentLocation!==n&&(r.activeTexture(r.TEXTURE0+n),this.currentLocation=n),r.bindTexture(e.target,this.emptyTextures[e.target].texture),i[n]=null)}ensureSamplerType(e){const{boundTextures:r,hasIntegerTextures:i,CONTEXT_UID:n}=this;if(i)for(let s=e-1;s>=0;--s){const o=r[s];o&&o._glTextures[n].samplerType!==V.FLOAT&&this.renderer.texture.unbind(o)}}initTexture(e){const r=new Tc(this.gl.createTexture());return r.dirtyId=-1,e._glTextures[this.CONTEXT_UID]=r,this.managedTextures.push(e),e.on("dispose",this.destroyTexture,this),r}initTextureType(e,r){var i;r.internalFormat=((i=this.internalFormats[e.type])==null?void 0:i[e.format])??e.format,r.samplerType=this.samplerTypes[r.internalFormat]??V.FLOAT,this.webGLVersion===2&&e.type===K.HALF_FLOAT?r.type=this.gl.HALF_FLOAT:r.type=e.type}updateTexture(e){var n;const r=e._glTextures[this.CONTEXT_UID];if(!r)return;const i=this.renderer;if(this.initTextureType(e,r),(n=e.resource)==null?void 0:n.upload(i,e,r))r.samplerType!==V.FLOAT&&(this.hasIntegerTextures=!0);else{const s=e.realWidth,o=e.realHeight,a=i.gl;(r.width!==s||r.height!==o||r.dirtyId<0)&&(r.width=s,r.height=o,a.texImage2D(e.target,0,r.internalFormat,s,o,0,e.format,r.type,null))}e.dirtyStyleId!==r.dirtyStyleId&&this.updateTextureStyle(e),r.dirtyId=e.dirtyId}destroyTexture(e,r){const{gl:i}=this;if(e=e.castToBaseTexture(),e._glTextures[this.CONTEXT_UID]&&(this.unbind(e),i.deleteTexture(e._glTextures[this.CONTEXT_UID].texture),e.off("dispose",this.destroyTexture,this),delete e._glTextures[this.CONTEXT_UID],!r)){const n=this.managedTextures.indexOf(e);n!==-1&&cs(this.managedTextures,n,1)}}updateTextureStyle(e){var i;const r=e._glTextures[this.CONTEXT_UID];r&&((e.mipmap===Cr.POW2||this.webGLVersion!==2)&&!e.isPowerOfTwo?r.mipmap=!1:r.mipmap=e.mipmap>=1,this.webGLVersion!==2&&!e.isPowerOfTwo?r.wrapMode=Si.CLAMP:r.wrapMode=e.wrapMode,(i=e.resource)!=null&&i.style(this.renderer,e,r)||this.setStyle(e,r),r.dirtyStyleId=e.dirtyStyleId)}setStyle(e,r){const i=this.gl;if(r.mipmap&&e.mipmap!==Cr.ON_MANUAL&&i.generateMipmap(e.target),i.texParameteri(e.target,i.TEXTURE_WRAP_S,r.wrapMode),i.texParameteri(e.target,i.TEXTURE_WRAP_T,r.wrapMode),r.mipmap){i.texParameteri(e.target,i.TEXTURE_MIN_FILTER,e.scaleMode===Nr.LINEAR?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST);const n=this.renderer.context.extensions.anisotropicFiltering;if(n&&e.anisotropicLevel>0&&e.scaleMode===Nr.LINEAR){const s=Math.min(e.anisotropicLevel,i.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT));i.texParameterf(e.target,n.TEXTURE_MAX_ANISOTROPY_EXT,s)}}else i.texParameteri(e.target,i.TEXTURE_MIN_FILTER,e.scaleMode===Nr.LINEAR?i.LINEAR:i.NEAREST);i.texParameteri(e.target,i.TEXTURE_MAG_FILTER,e.scaleMode===Nr.LINEAR?i.LINEAR:i.NEAREST)}destroy(){this.renderer=null}}Bw.extension={type:U.RendererSystem,name:"texture"};X.add(Bw);class Lw{constructor(e){this.renderer=e}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:r,CONTEXT_UID:i}=this,n=e._glTransformFeedbacks[i]||this.createGLTransformFeedback(e);r.bindTransformFeedback(r.TRANSFORM_FEEDBACK,n)}unbind(){const{gl:e}=this;e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(e,r){const{gl:i,renderer:n}=this;r&&n.shader.bind(r),i.beginTransformFeedback(e)}endTransformFeedback(){const{gl:e}=this;e.endTransformFeedback()}createGLTransformFeedback(e){const{gl:r,renderer:i,CONTEXT_UID:n}=this,s=r.createTransformFeedback();e._glTransformFeedbacks[n]=s,r.bindTransformFeedback(r.TRANSFORM_FEEDBACK,s);for(let o=0;o<e.buffers.length;o++){const a=e.buffers[o];a&&(i.buffer.update(a),a._glBuffers[n].refCount++,r.bindBufferBase(r.TRANSFORM_FEEDBACK_BUFFER,o,a._glBuffers[n].buffer||null))}return r.bindTransformFeedback(r.TRANSFORM_FEEDBACK,null),e.disposeRunner.add(this),s}disposeTransformFeedback(e,r){const i=e._glTransformFeedbacks[this.CONTEXT_UID],n=this.gl;e.disposeRunner.remove(this);const s=this.renderer.buffer;if(s)for(let o=0;o<e.buffers.length;o++){const a=e.buffers[o];if(!a)continue;const l=a._glBuffers[this.CONTEXT_UID];l&&(l.refCount--,l.refCount===0&&!r&&s.dispose(a,r))}i&&(r||n.deleteTransformFeedback(i),delete e._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}Lw.extension={type:U.RendererSystem,name:"transformFeedback"};X.add(Lw);class xu{constructor(e){this.renderer=e}init(e){this.screen=new te(0,0,e.width,e.height),this.element=e.view||j.ADAPTER.createCanvas(),this.resolution=e.resolution||j.RESOLUTION,this.autoDensity=!!e.autoDensity}resizeView(e,r){this.element.width=Math.round(e*this.resolution),this.element.height=Math.round(r*this.resolution);const i=this.element.width/this.resolution,n=this.element.height/this.resolution;this.screen.width=i,this.screen.height=n,this.autoDensity&&(this.element.style.width=`${i}px`,this.element.style.height=`${n}px`),this.renderer.emit("resize",i,n),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(e){var r;e&&((r=this.element.parentNode)==null||r.removeChild(this.element)),this.renderer=null,this.element=null,this.screen=null}}xu.defaultOptions={width:800,height:600,resolution:void 0,autoDensity:!1},xu.extension={type:[U.RendererSystem,U.CanvasRendererSystem],name:"_view"};X.add(xu);j.PREFER_ENV=xn.WEBGL2;j.STRICT_TEXTURE_CACHE=!1;j.RENDER_OPTIONS={...yu.defaultOptions,...gu.defaultOptions,...xu.defaultOptions,...vu.defaultOptions};Object.defineProperties(j,{WRAP_MODE:{get(){return ee.defaultOptions.wrapMode},set(t){ne("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),ee.defaultOptions.wrapMode=t}},SCALE_MODE:{get(){return ee.defaultOptions.scaleMode},set(t){ne("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),ee.defaultOptions.scaleMode=t}},MIPMAP_TEXTURES:{get(){return ee.defaultOptions.mipmap},set(t){ne("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),ee.defaultOptions.mipmap=t}},ANISOTROPIC_LEVEL:{get(){return ee.defaultOptions.anisotropicLevel},set(t){ne("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),ee.defaultOptions.anisotropicLevel=t}},FILTER_RESOLUTION:{get(){return ne("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),ct.defaultResolution},set(t){ct.defaultResolution=t}},FILTER_MULTISAMPLE:{get(){return ne("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),ct.defaultMultisample},set(t){ct.defaultMultisample=t}},SPRITE_MAX_TEXTURES:{get(){return $i.defaultMaxTextures},set(t){ne("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),$i.defaultMaxTextures=t}},SPRITE_BATCH_SIZE:{get(){return $i.defaultBatchSize},set(t){ne("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),$i.defaultBatchSize=t}},CAN_UPLOAD_SAME_BUFFER:{get(){return $i.canUploadSameBuffer},set(t){ne("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),$i.canUploadSameBuffer=t}},GC_MODE:{get(){return Wi.defaultMode},set(t){ne("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),Wi.defaultMode=t}},GC_MAX_IDLE:{get(){return Wi.defaultMaxIdle},set(t){ne("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),Wi.defaultMaxIdle=t}},GC_MAX_CHECK_COUNT:{get(){return Wi.defaultCheckCountMax},set(t){ne("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),Wi.defaultCheckCountMax=t}},PRECISION_VERTEX:{get(){return Gr.defaultVertexPrecision},set(t){ne("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),Gr.defaultVertexPrecision=t}},PRECISION_FRAGMENT:{get(){return Gr.defaultFragmentPrecision},set(t){ne("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),Gr.defaultFragmentPrecision=t}}});var gn=(t=>(t[t.INTERACTION=50]="INTERACTION",t[t.HIGH=25]="HIGH",t[t.NORMAL=0]="NORMAL",t[t.LOW=-25]="LOW",t[t.UTILITY=-50]="UTILITY",t))(gn||{});class Ec{constructor(e,r=null,i=0,n=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=e,this.context=r,this.priority=i,this.once=n}match(e,r=null){return this.fn===e&&this.context===r}emit(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));const r=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),r}connect(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}destroy(e=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const r=this.next;return this.next=e?null:r,this.previous=null,r}}const Nw=class Tt{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new Ec(null,null,1/0),this.deltaMS=1/Tt.targetFPMS,this.elapsedMS=1/Tt.targetFPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,r,i=gn.NORMAL){return this._addListener(new Ec(e,r,i))}addOnce(e,r,i=gn.NORMAL){return this._addListener(new Ec(e,r,i,!0))}_addListener(e){let r=this._head.next,i=this._head;if(!r)e.connect(i);else{for(;r;){if(e.priority>r.priority){e.connect(i);break}i=r,r=r.next}e.previous||e.connect(i)}return this._startIfPossible(),this}remove(e,r){let i=this._head.next;for(;i;)i.match(e,r)?i=i.destroy():i=i.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,r=this._head;for(;r=r.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(e=performance.now()){let r;if(e>this.lastTime){if(r=this.elapsedMS=e-this.lastTime,r>this._maxElapsedMS&&(r=this._maxElapsedMS),r*=this.speed,this._minElapsedMS){const s=e-this._lastFrame|0;if(s<this._minElapsedMS)return;this._lastFrame=e-s%this._minElapsedMS}this.deltaMS=r,this.deltaTime=this.deltaMS*Tt.targetFPMS;const i=this._head;let n=i.next;for(;n;)n=n.emit(this.deltaTime);i.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){const r=Math.min(this.maxFPS,e),i=Math.min(Math.max(0,r)/1e3,Tt.targetFPMS);this._maxElapsedMS=1/i}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(e===0)this._minElapsedMS=0;else{const r=Math.max(this.minFPS,e);this._minElapsedMS=1/(r/1e3)}}static get shared(){if(!Tt._shared){const e=Tt._shared=new Tt;e.autoStart=!0,e._protected=!0}return Tt._shared}static get system(){if(!Tt._system){const e=Tt._system=new Tt;e.autoStart=!0,e._protected=!0}return Tt._system}};Nw.targetFPMS=.06;let ie=Nw;Object.defineProperties(j,{TARGET_FPMS:{get(){return ie.targetFPMS},set(t){ne("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),ie.targetFPMS=t}}});class Ow{static init(e){e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{set(r){this._ticker&&this._ticker.remove(this.render,this),this._ticker=r,r&&r.add(this.render,this,gn.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?ie.shared:new ie,e.autoStart&&this.start()}static destroy(){if(this._ticker){const e=this._ticker;this.ticker=null,e.destroy()}}}Ow.extension=U.Application;X.add(Ow);const Uw=[];X.handleByList(U.Renderer,Uw);function F2(t){for(const e of Uw)if(e.test(t))return new e(t);throw new Error("Unable to auto-detect a suitable renderer.")}var B2=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,L2=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const N2=B2,Gw=L2;class Vw{constructor(e){this.renderer=e}contextChange(e){let r;if(this.renderer.context.webGLVersion===1){const i=e.getParameter(e.FRAMEBUFFER_BINDING);e.bindFramebuffer(e.FRAMEBUFFER,null),r=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.FRAMEBUFFER,i)}else{const i=e.getParameter(e.DRAW_FRAMEBUFFER_BINDING);e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),r=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,i)}r>=Ne.HIGH?this.multisample=Ne.HIGH:r>=Ne.MEDIUM?this.multisample=Ne.MEDIUM:r>=Ne.LOW?this.multisample=Ne.LOW:this.multisample=Ne.NONE}destroy(){}}Vw.extension={type:U.RendererSystem,name:"_multisample"};X.add(Vw);class O2{constructor(e){this.buffer=e||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class jw{constructor(e){this.renderer=e,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:r,CONTEXT_UID:i}=this,n=e._glBuffers[i]||this.createGLBuffer(e);r.bindBuffer(e.type,n.buffer)}unbind(e){const{gl:r}=this;r.bindBuffer(e,null)}bindBufferBase(e,r){const{gl:i,CONTEXT_UID:n}=this;if(this.boundBufferBases[r]!==e){const s=e._glBuffers[n]||this.createGLBuffer(e);this.boundBufferBases[r]=e,i.bindBufferBase(i.UNIFORM_BUFFER,r,s.buffer)}}bindBufferRange(e,r,i){const{gl:n,CONTEXT_UID:s}=this;i=i||0;const o=e._glBuffers[s]||this.createGLBuffer(e);n.bindBufferRange(n.UNIFORM_BUFFER,r||0,o.buffer,i*256,256)}update(e){const{gl:r,CONTEXT_UID:i}=this,n=e._glBuffers[i]||this.createGLBuffer(e);if(e._updateID!==n.updateID)if(n.updateID=e._updateID,r.bindBuffer(e.type,n.buffer),n.byteLength>=e.data.byteLength)r.bufferSubData(e.type,0,e.data);else{const s=e.static?r.STATIC_DRAW:r.DYNAMIC_DRAW;n.byteLength=e.data.byteLength,r.bufferData(e.type,e.data,s)}}dispose(e,r){if(!this.managedBuffers[e.id])return;delete this.managedBuffers[e.id];const i=e._glBuffers[this.CONTEXT_UID],n=this.gl;e.disposeRunner.remove(this),i&&(r||n.deleteBuffer(i.buffer),delete e._glBuffers[this.CONTEXT_UID])}disposeAll(e){const r=Object.keys(this.managedBuffers);for(let i=0;i<r.length;i++)this.dispose(this.managedBuffers[r[i]],e)}createGLBuffer(e){const{CONTEXT_UID:r,gl:i}=this;return e._glBuffers[r]=new O2(i.createBuffer()),this.managedBuffers[e.id]=e,e.disposeRunner.add(this),e._glBuffers[r]}}jw.extension={type:U.RendererSystem,name:"buffer"};X.add(jw);class zw{constructor(e){this.renderer=e}render(e,r){const i=this.renderer;let n,s,o,a;if(r&&(n=r.renderTexture,s=r.clear,o=r.transform,a=r.skipUpdateTransform),this.renderingToScreen=!n,i.runners.prerender.emit(),i.emit("prerender"),i.projection.transform=o,!i.context.isLost){if(n||(this.lastObjectRendered=e),!a){const l=e.enableTempParent();e.updateTransform(),e.disableTempParent(l)}i.renderTexture.bind(n),i.batch.currentRenderer.start(),(s??i.background.clearBeforeRender)&&i.renderTexture.clear(),e.render(i),i.batch.currentRenderer.flush(),n&&(r.blit&&i.framebuffer.blit(),n.baseTexture.update()),i.runners.postrender.emit(),i.projection.transform=null,i.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}zw.extension={type:U.RendererSystem,name:"objectRenderer"};X.add(zw);const Il=class vf extends M2{constructor(e){super(),this.type=A1.WEBGL,e=Object.assign({},j.RENDER_OPTIONS,e),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new ir({projectionMatrix:new ye},!0);const r={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:vf.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(r),"useContextAlpha"in e&&(ne("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),e.premultipliedAlpha=e.useContextAlpha&&e.useContextAlpha!=="notMultiplied",e.backgroundAlpha=e.useContextAlpha===!1?1:e.backgroundAlpha),this._plugin.rendererPlugins=vf.__plugins,this.options=e,this.startup.run(this.options)}static test(e){return e!=null&&e.forceCanvas?!1:aI()}render(e,r){this.objectRenderer.render(e,r)}resize(e,r){this._view.resizeView(e,r)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(e=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:e}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(e){this._view.resolution=e,this.runners.resolutionChange.emit(e)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return ne("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return ne("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return ne("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return ne("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(e){ne("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=e}get backgroundAlpha(){return ne("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha}set backgroundAlpha(e){ne("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=e}get powerPreference(){return ne("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(e,r){return this.textureGenerator.generateTexture(e,r)}};Il.extension={type:U.Renderer,priority:1},Il.__plugins={},Il.__systems={};let om=Il;X.handleByMap(U.RendererPlugin,om.__plugins);X.handleByMap(U.RendererSystem,om.__systems);X.add(om);class Hw extends Jo{constructor(e,r){const{width:i,height:n}=r||{};super(i,n),this.items=[],this.itemDirtyIds=[];for(let s=0;s<e;s++){const o=new ee;this.items.push(o),this.itemDirtyIds.push(-2)}this.length=e,this._load=null,this.baseTexture=null}initFromArray(e,r){for(let i=0;i<this.length;i++)e[i]&&(e[i].castToBaseTexture?this.addBaseTextureAt(e[i].castToBaseTexture(),i):e[i]instanceof Jo?this.addResourceAt(e[i],i):this.addResourceAt(lw(e[i],r),i))}dispose(){for(let e=0,r=this.length;e<r;e++)this.items[e].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(e,r){if(!this.items[r])throw new Error(`Index ${r} is out of bounds`);return e.valid&&!this.valid&&this.resize(e.width,e.height),this.items[r].setResource(e),this}bind(e){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");super.bind(e);for(let r=0;r<this.length;r++)this.items[r].parentTextureArray=e,this.items[r].on("update",e.update,e)}unbind(e){super.unbind(e);for(let r=0;r<this.length;r++)this.items[r].parentTextureArray=null,this.items[r].off("update",e.update,e)}load(){if(this._load)return this._load;const e=this.items.map(r=>r.resource).filter(r=>r).map(r=>r.load());return this._load=Promise.all(e).then(()=>{const{realWidth:r,realHeight:i}=this.items[0];return this.resize(r,i),this.update(),Promise.resolve(this)}),this._load}}class U2 extends Hw{constructor(e,r){const{width:i,height:n}=r||{};let s,o;Array.isArray(e)?(s=e,o=e.length):o=e,super(o,{width:i,height:n}),s&&this.initFromArray(s,r)}addBaseTextureAt(e,r){if(e.resource)this.addResourceAt(e.resource,r);else throw new Error("ArrayResource does not support RenderTexture");return this}bind(e){super.bind(e),e.target=ls.TEXTURE_2D_ARRAY}upload(e,r,i){const{length:n,itemDirtyIds:s,items:o}=this,{gl:a}=e;i.dirtyId<0&&a.texImage3D(a.TEXTURE_2D_ARRAY,0,i.internalFormat,this._width,this._height,n,0,r.format,i.type,null);for(let l=0;l<n;l++){const u=o[l];s[l]<u.dirtyId&&(s[l]=u.dirtyId,u.valid&&a.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,l,u.resource.width,u.resource.height,1,r.format,i.type,u.resource.source))}return!0}}class G2 extends qr{constructor(e){super(e)}static test(e){const{OffscreenCanvas:r}=globalThis;return r&&e instanceof r?!0:globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement}}const $w=class so extends Hw{constructor(e,r){const{width:i,height:n,autoLoad:s,linkBaseTexture:o}=r||{};if(e&&e.length!==so.SIDES)throw new Error(`Invalid length. Got ${e.length}, expected 6`);super(6,{width:i,height:n});for(let a=0;a<so.SIDES;a++)this.items[a].target=ls.TEXTURE_CUBE_MAP_POSITIVE_X+a;this.linkBaseTexture=o!==!1,e&&this.initFromArray(e,r),s!==!1&&this.load()}bind(e){super.bind(e),e.target=ls.TEXTURE_CUBE_MAP}addBaseTextureAt(e,r,i){if(i===void 0&&(i=this.linkBaseTexture),!this.items[r])throw new Error(`Index ${r} is out of bounds`);if(!this.linkBaseTexture||e.parentTextureArray||Object.keys(e._glTextures).length>0)if(e.resource)this.addResourceAt(e.resource,r);else throw new Error("CubeResource does not support copying of renderTexture.");else e.target=ls.TEXTURE_CUBE_MAP_POSITIVE_X+r,e.parentTextureArray=this.baseTexture,this.items[r]=e;return e.valid&&!this.valid&&this.resize(e.realWidth,e.realHeight),this.items[r]=e,this}upload(e,r,i){const n=this.itemDirtyIds;for(let s=0;s<so.SIDES;s++){const o=this.items[s];(n[s]<o.dirtyId||i.dirtyId<r.dirtyId)&&(o.valid&&o.resource?(o.resource.upload(e,o,i),n[s]=o.dirtyId):n[s]<-1&&(e.gl.texImage2D(o.target,0,i.internalFormat,r.realWidth,r.realHeight,0,r.format,i.type,null),n[s]=-1))}return!0}static test(e){return Array.isArray(e)&&e.length===so.SIDES}};$w.SIDES=6;let V2=$w;class qn extends qr{constructor(e,r){r=r||{};let i,n,s;typeof e=="string"?(i=qn.EMPTY,n=e,s=!0):(i=e,n=null,s=!1),super(i),this.url=n,this.crossOrigin=r.crossOrigin??!0,this.alphaMode=typeof r.alphaMode=="number"?r.alphaMode:null,this.ownsImageBitmap=r.ownsImageBitmap??s,this._load=null,r.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(async(e,r)=>{if(this.url===null){e(this);return}try{const i=await j.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const n=await i.blob();if(this.destroyed)return;const s=await createImageBitmap(n,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===yt.UNPACK?"premultiply":"none"});if(this.destroyed){s.close();return}this.source=s,this.update(),e(this)}catch(i){if(this.destroyed)return;r(i),this.onError.emit(i)}}),this._load)}upload(e,r,i){return this.source instanceof ImageBitmap?(typeof this.alphaMode=="number"&&(r.alphaMode=this.alphaMode),super.upload(e,r,i)):(this.load(),!1)}dispose(){this.ownsImageBitmap&&this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(e){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&(typeof e=="string"||e instanceof ImageBitmap)}static get EMPTY(){return qn._EMPTY=qn._EMPTY??j.ADAPTER.createCanvas(0,0),qn._EMPTY}}const xf=class Ml extends qr{constructor(e,r){r=r||{},super(j.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=e,this.scale=r.scale||1,this._overrideWidth=r.width,this._overrideHeight=r.height,this._resolve=null,this._crossorigin=r.crossorigin,this._load=null,r.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(e=>{if(this._resolve=()=>{this.update(),e(this)},Ml.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}),this._load)}_loadSvg(){const e=new Image;qr.crossOrigin(e,this.svg,this._crossorigin),e.src=this.svg,e.onerror=r=>{this._resolve&&(e.onerror=null,this.onError.emit(r))},e.onload=()=>{if(!this._resolve)return;const r=e.width,i=e.height;if(!r||!i)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let n=r*this.scale,s=i*this.scale;(this._overrideWidth||this._overrideHeight)&&(n=this._overrideWidth||this._overrideHeight/i*r,s=this._overrideHeight||this._overrideWidth/r*i),n=Math.round(n),s=Math.round(s);const o=this.source;o.width=n,o.height=s,o._pixiId=`canvas_${mn()}`,o.getContext("2d").drawImage(e,0,0,r,i,0,0,n,s),this._resolve(),this._resolve=null}}static getSize(e){const r=Ml.SVG_SIZE.exec(e),i={};return r&&(i[r[1]]=Math.round(parseFloat(r[3])),i[r[5]]=Math.round(parseFloat(r[7]))),i}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(e,r){return r==="svg"||typeof e=="string"&&e.startsWith("data:image/svg+xml")||typeof e=="string"&&Ml.SVG_XML.test(e)}};xf.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,xf.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;let _f=xf;class j2 extends qr{constructor(e){super(e)}static test(e){return!!globalThis.VideoFrame&&e instanceof globalThis.VideoFrame}}const wf=class Tf extends qr{constructor(e,r){if(r=r||{},!(e instanceof HTMLVideoElement)){const i=document.createElement("video");r.autoLoad!==!1&&i.setAttribute("preload","auto"),r.playsinline!==!1&&(i.setAttribute("webkit-playsinline",""),i.setAttribute("playsinline","")),r.muted===!0&&(i.setAttribute("muted",""),i.muted=!0),r.loop===!0&&i.setAttribute("loop",""),r.autoPlay!==!1&&i.setAttribute("autoplay",""),typeof e=="string"&&(e=[e]);const n=e[0].src||e[0];qr.crossOrigin(i,n,r.crossorigin);for(let s=0;s<e.length;++s){const o=document.createElement("source");let{src:a,mime:l}=e[s];if(a=a||e[s],a.startsWith("data:"))l=a.slice(5,a.indexOf(";"));else if(!a.startsWith("blob:")){const u=a.split("?").shift().toLowerCase(),h=u.slice(u.lastIndexOf(".")+1);l=l||Tf.MIME_TYPES[h]||`video/${h}`}o.src=a,l&&(o.type=l),i.appendChild(o)}e=i}super(e),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=r.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=r.autoPlay!==!1,this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),r.autoLoad!==!1&&this.load()}update(e=0){if(!this.destroyed){if(this._updateFPS){const r=ie.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-r)}(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}_videoFrameRequestCallback(){this.update(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback)}load(){if(this._load)return this._load;const e=this.source;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart),e.addEventListener("pause",this._onPlayStop),e.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._onCanPlay():(e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("error",this._onError,!0)),this._load=new Promise((r,i)=>{this.valid?r(this):(this._resolve=r,this._reject=i,e.load())}),this._load}_onError(e){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(e),this._reject&&(this._reject(e),this._reject=null,this._resolve=null)}_isSourcePlaying(){const e=this.source;return!e.paused&&!e.ended}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0)}_onCanPlay(){const e=this.source;e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay);const r=this.valid;this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0,!r&&this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&e.play()}dispose(){this._configureAutoUpdate();const e=this.source;e&&(e.removeEventListener("play",this._onPlayStart),e.removeEventListener("pause",this._onPlayStop),e.removeEventListener("seeked",this._onSeeked),e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay),e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(e){e!==this._updateFPS&&(this._updateFPS=e,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.source.requestVideoFrameCallback?(this._isConnectedToTicker&&(ie.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(ie.shared.add(this.update,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(ie.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(e,r){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement||Tf.TYPES.includes(r)}};wf.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],wf.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let Ww=wf;lf.push(qn,yw,G2,Ww,j2,_f,rh,V2,U2);class _u{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(e){return this.minX>this.maxX||this.minY>this.maxY?te.EMPTY:(e=e||new te(0,0,1,1),e.x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)}addPoint(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)}addPointMatrix(e,r){const{a:i,b:n,c:s,d:o,tx:a,ty:l}=e,u=i*r.x+s*r.y+a,h=n*r.x+o*r.y+l;this.minX=Math.min(this.minX,u),this.maxX=Math.max(this.maxX,u),this.minY=Math.min(this.minY,h),this.maxY=Math.max(this.maxY,h)}addQuad(e){let r=this.minX,i=this.minY,n=this.maxX,s=this.maxY,o=e[0],a=e[1];r=o<r?o:r,i=a<i?a:i,n=o>n?o:n,s=a>s?a:s,o=e[2],a=e[3],r=o<r?o:r,i=a<i?a:i,n=o>n?o:n,s=a>s?a:s,o=e[4],a=e[5],r=o<r?o:r,i=a<i?a:i,n=o>n?o:n,s=a>s?a:s,o=e[6],a=e[7],r=o<r?o:r,i=a<i?a:i,n=o>n?o:n,s=a>s?a:s,this.minX=r,this.minY=i,this.maxX=n,this.maxY=s}addFrame(e,r,i,n,s){this.addFrameMatrix(e.worldTransform,r,i,n,s)}addFrameMatrix(e,r,i,n,s){const o=e.a,a=e.b,l=e.c,u=e.d,h=e.tx,c=e.ty;let d=this.minX,f=this.minY,p=this.maxX,g=this.maxY,x=o*r+l*i+h,y=a*r+u*i+c;d=x<d?x:d,f=y<f?y:f,p=x>p?x:p,g=y>g?y:g,x=o*n+l*i+h,y=a*n+u*i+c,d=x<d?x:d,f=y<f?y:f,p=x>p?x:p,g=y>g?y:g,x=o*r+l*s+h,y=a*r+u*s+c,d=x<d?x:d,f=y<f?y:f,p=x>p?x:p,g=y>g?y:g,x=o*n+l*s+h,y=a*n+u*s+c,d=x<d?x:d,f=y<f?y:f,p=x>p?x:p,g=y>g?y:g,this.minX=d,this.minY=f,this.maxX=p,this.maxY=g}addVertexData(e,r,i){let n=this.minX,s=this.minY,o=this.maxX,a=this.maxY;for(let l=r;l<i;l+=2){const u=e[l],h=e[l+1];n=u<n?u:n,s=h<s?h:s,o=u>o?u:o,a=h>a?h:a}this.minX=n,this.minY=s,this.maxX=o,this.maxY=a}addVertices(e,r,i,n){this.addVerticesMatrix(e.worldTransform,r,i,n)}addVerticesMatrix(e,r,i,n,s=0,o=s){const a=e.a,l=e.b,u=e.c,h=e.d,c=e.tx,d=e.ty;let f=this.minX,p=this.minY,g=this.maxX,x=this.maxY;for(let y=i;y<n;y+=2){const v=r[y],m=r[y+1],_=a*v+u*m+c,w=h*m+l*v+d;f=Math.min(f,_-s),g=Math.max(g,_+s),p=Math.min(p,w-o),x=Math.max(x,w+o)}this.minX=f,this.minY=p,this.maxX=g,this.maxY=x}addBounds(e){const r=this.minX,i=this.minY,n=this.maxX,s=this.maxY;this.minX=e.minX<r?e.minX:r,this.minY=e.minY<i?e.minY:i,this.maxX=e.maxX>n?e.maxX:n,this.maxY=e.maxY>s?e.maxY:s}addBoundsMask(e,r){const i=e.minX>r.minX?e.minX:r.minX,n=e.minY>r.minY?e.minY:r.minY,s=e.maxX<r.maxX?e.maxX:r.maxX,o=e.maxY<r.maxY?e.maxY:r.maxY;if(i<=s&&n<=o){const a=this.minX,l=this.minY,u=this.maxX,h=this.maxY;this.minX=i<a?i:a,this.minY=n<l?n:l,this.maxX=s>u?s:u,this.maxY=o>h?o:h}}addBoundsMatrix(e,r){this.addFrameMatrix(r,e.minX,e.minY,e.maxX,e.maxY)}addBoundsArea(e,r){const i=e.minX>r.x?e.minX:r.x,n=e.minY>r.y?e.minY:r.y,s=e.maxX<r.x+r.width?e.maxX:r.x+r.width,o=e.maxY<r.y+r.height?e.maxY:r.y+r.height;if(i<=s&&n<=o){const a=this.minX,l=this.minY,u=this.maxX,h=this.maxY;this.minX=i<a?i:a,this.minY=n<l?n:l,this.maxX=s>u?s:u,this.maxY=o>h?o:h}}pad(e=0,r=e){this.isEmpty()||(this.minX-=e,this.maxX+=e,this.minY-=r,this.maxY+=r)}addFramePad(e,r,i,n,s,o){e-=s,r-=o,i+=s,n+=o,this.minX=this.minX<e?this.minX:e,this.maxX=this.maxX>i?this.maxX:i,this.minY=this.minY<r?this.minY:r,this.maxY=this.maxY>n?this.maxY:n}}class Pe extends ha{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new nm,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new _u,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(e){const r=Object.keys(e);for(let i=0;i<r.length;++i){const n=r[i];Object.defineProperty(Pe.prototype,n,Object.getOwnPropertyDescriptor(e,n))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(e,r){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),r||(this._boundsRect||(this._boundsRect=new te),r=this._boundsRect),this._bounds.getRectangle(r)}getLocalBounds(e){e||(this._localBoundsRect||(this._localBoundsRect=new te),e=this._localBoundsRect),this._localBounds||(this._localBounds=new _u);const r=this.transform,i=this.parent;this.parent=null,this._tempDisplayObjectParent.worldAlpha=(i==null?void 0:i.worldAlpha)??1,this.transform=this._tempDisplayObjectParent.transform;const n=this._bounds,s=this._boundsID;this._bounds=this._localBounds;const o=this.getBounds(!1,e);return this.parent=i,this.transform=r,this._bounds=n,this._bounds.updateID+=this._boundsID-s,o}toGlobal(e,r,i=!1){return i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,r)}toLocal(e,r,i,n){return r&&(e=r.toGlobal(e,i,n)),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,i)}setParent(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e}removeFromParent(){var e;(e=this.parent)==null||e.removeChild(this)}setTransform(e=0,r=0,i=1,n=1,s=0,o=0,a=0,l=0,u=0){return this.position.x=e,this.position.y=r,this.scale.x=i||1,this.scale.y=n||1,this.rotation=s,this.skew.x=o,this.skew.y=a,this.pivot.x=l,this.pivot.y=u,this}destroy(e){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new z2),this.tempDisplayObjectParent}enableTempParent(){const e=this.parent;return this.parent=this._tempDisplayObjectParent,e}disableTempParent(e){this.parent=e}get x(){return this.position.x}set x(e){this.transform.position.x=e}get y(){return this.position.y}set y(e){this.transform.position.y=e}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(e){this.transform.position.copyFrom(e)}get scale(){return this.transform.scale}set scale(e){this.transform.scale.copyFrom(e)}get pivot(){return this.transform.pivot}set pivot(e){this.transform.pivot.copyFrom(e)}get skew(){return this.transform.skew}set skew(e){this.transform.skew.copyFrom(e)}get rotation(){return this.transform.rotation}set rotation(e){this.transform.rotation=e}get angle(){return this.transform.rotation*BI}set angle(e){this.transform.rotation=e*LI}get zIndex(){return this._zIndex}set zIndex(e){this._zIndex!==e&&(this._zIndex=e,this.parent&&(this.parent.sortDirty=!0))}get worldVisible(){let e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0}get mask(){return this._mask}set mask(e){if(this._mask!==e){if(this._mask){const r=this._mask.isMaskData?this._mask.maskObject:this._mask;r&&(r._maskRefCount--,r._maskRefCount===0&&(r.renderable=!0,r.isMask=!1))}if(this._mask=e,this._mask){const r=this._mask.isMaskData?this._mask.maskObject:this._mask;r&&(r._maskRefCount===0&&(r.renderable=!1,r.isMask=!0),r._maskRefCount++)}}}}class z2 extends Pe{constructor(){super(...arguments),this.sortDirty=null}}Pe.prototype.displayObjectUpdateTransform=Pe.prototype.updateTransform;const H2=new ye;function $2(t,e){return t.zIndex===e.zIndex?t._lastSortedIndex-e._lastSortedIndex:t.zIndex-e.zIndex}const Xw=class Ef extends Pe{constructor(){super(),this.children=[],this.sortableChildren=Ef.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(e){}addChild(...e){if(e.length>1)for(let r=0;r<e.length;r++)this.addChild(e[r]);else{const r=e[0];r.parent&&r.parent.removeChild(r),r.parent=this,this.sortDirty=!0,r.transform._parentID=-1,this.children.push(r),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",r,this,this.children.length-1),r.emit("added",this)}return e[0]}addChildAt(e,r){if(r<0||r>this.children.length)throw new Error(`${e}addChildAt: The index ${r} supplied is out of bounds ${this.children.length}`);return e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.splice(r,0,e),this._boundsID++,this.onChildrenChange(r),e.emit("added",this),this.emit("childAdded",e,this,r),e}swapChildren(e,r){if(e===r)return;const i=this.getChildIndex(e),n=this.getChildIndex(r);this.children[i]=r,this.children[n]=e,this.onChildrenChange(i<n?i:n)}getChildIndex(e){const r=this.children.indexOf(e);if(r===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return r}setChildIndex(e,r){if(r<0||r>=this.children.length)throw new Error(`The index ${r} supplied is out of bounds ${this.children.length}`);const i=this.getChildIndex(e);cs(this.children,i,1),this.children.splice(r,0,e),this.onChildrenChange(r)}getChildAt(e){if(e<0||e>=this.children.length)throw new Error(`getChildAt: Index (${e}) does not exist.`);return this.children[e]}removeChild(...e){if(e.length>1)for(let r=0;r<e.length;r++)this.removeChild(e[r]);else{const r=e[0],i=this.children.indexOf(r);if(i===-1)return null;r.parent=null,r.transform._parentID=-1,cs(this.children,i,1),this._boundsID++,this.onChildrenChange(i),r.emit("removed",this),this.emit("childRemoved",r,this,i)}return e[0]}removeChildAt(e){const r=this.getChildAt(e);return r.parent=null,r.transform._parentID=-1,cs(this.children,e,1),this._boundsID++,this.onChildrenChange(e),r.emit("removed",this),this.emit("childRemoved",r,this,e),r}removeChildren(e=0,r=this.children.length){const i=e,n=r,s=n-i;let o;if(s>0&&s<=n){o=this.children.splice(i,s);for(let a=0;a<o.length;++a)o[a].parent=null,o[a].transform&&(o[a].transform._parentID=-1);this._boundsID++,this.onChildrenChange(e);for(let a=0;a<o.length;++a)o[a].emit("removed",this),this.emit("childRemoved",o[a],this,a);return o}else if(s===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let e=!1;for(let r=0,i=this.children.length;r<i;++r){const n=this.children[r];n._lastSortedIndex=r,!e&&n.zIndex!==0&&(e=!0)}e&&this.children.length>1&&this.children.sort($2),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let e=0,r=this.children.length;e<r;++e){const i=this.children[e];i.visible&&i.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let e=0;e<this.children.length;e++){const r=this.children[e];if(!(!r.visible||!r.renderable))if(r.calculateBounds(),r._mask){const i=r._mask.isMaskData?r._mask.maskObject:r._mask;i?(i.calculateBounds(),this._bounds.addBoundsMask(r._bounds,i._bounds)):this._bounds.addBounds(r._bounds)}else r.filterArea?this._bounds.addBoundsArea(r._bounds,r.filterArea):this._bounds.addBounds(r._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(e,r=!1){const i=super.getLocalBounds(e);if(!r)for(let n=0,s=this.children.length;n<s;++n){const o=this.children[n];o.visible&&o.updateTransform()}return i}_calculateBounds(){}_renderWithCulling(e){const r=e.renderTexture.sourceFrame;if(!(r.width>0&&r.height>0))return;let i,n;this.cullArea?(i=this.cullArea,n=this.worldTransform):this._render!==Ef.prototype._render&&(i=this.getBounds(!0));const s=e.projection.transform;if(s&&(n?(n=H2.copyFrom(n),n.prepend(s)):n=s),i&&r.intersects(i,n))this._render(e);else if(this.cullArea)return;for(let o=0,a=this.children.length;o<a;++o){const l=this.children[o],u=l.cullable;l.cullable=u||!this.cullArea,l.render(e),l.cullable=u}}render(e){var r;if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||(r=this.filters)!=null&&r.length)this.renderAdvanced(e);else if(this.cullable)this._renderWithCulling(e);else{this._render(e);for(let i=0,n=this.children.length;i<n;++i)this.children[i].render(e)}}renderAdvanced(e){var s,o,a;const r=this.filters,i=this._mask;if(r){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let l=0;l<r.length;l++)r[l].enabled&&this._enabledFilters.push(r[l])}const n=r&&((s=this._enabledFilters)==null?void 0:s.length)||i&&(!i.isMaskData||i.enabled&&(i.autoDetect||i.type!==je.NONE));if(n&&e.batch.flush(),r&&((o=this._enabledFilters)!=null&&o.length)&&e.filter.push(this,this._enabledFilters),i&&e.mask.push(this,this._mask),this.cullable)this._renderWithCulling(e);else{this._render(e);for(let l=0,u=this.children.length;l<u;++l)this.children[l].render(e)}n&&e.batch.flush(),i&&e.mask.pop(this),r&&((a=this._enabledFilters)!=null&&a.length)&&e.filter.pop()}_render(e){}destroy(e){super.destroy(),this.sortDirty=!1;const r=typeof e=="boolean"?e:e==null?void 0:e.children,i=this.removeChildren(0,this.children.length);if(r)for(let n=0;n<i.length;++n)i[n].destroy(e)}get width(){return this.scale.x*this.getLocalBounds().width}set width(e){const r=this.getLocalBounds().width;r!==0?this.scale.x=e/r:this.scale.x=1,this._width=e}get height(){return this.scale.y*this.getLocalBounds().height}set height(e){const r=this.getLocalBounds().height;r!==0?this.scale.y=e/r:this.scale.y=1,this._height=e}};Xw.defaultSortableChildren=!1;let Ue=Xw;Ue.prototype.containerUpdateTransform=Ue.prototype.updateTransform;Object.defineProperties(j,{SORTABLE_CHILDREN:{get(){return Ue.defaultSortableChildren},set(t){ne("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),Ue.defaultSortableChildren=t}}});const qs=new ae,W2=new Uint16Array([0,1,2,0,2,3]);class Ds extends Ue{constructor(e){super(),this._anchor=new Ur(this._onAnchorUpdate,this,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tintColor=new me(16777215),this._tintRGB=null,this.tint=16777215,this.blendMode=J.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=e||W.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=W2,this.pluginName="batch",this.isSprite=!0,this._roundPixels=j.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=pi(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=pi(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const e=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===e._updateID)return;this._textureID!==e._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=e._updateID;const r=this.transform.worldTransform,i=r.a,n=r.b,s=r.c,o=r.d,a=r.tx,l=r.ty,u=this.vertexData,h=e.trim,c=e.orig,d=this._anchor;let f=0,p=0,g=0,x=0;if(h?(p=h.x-d._x*c.width,f=p+h.width,x=h.y-d._y*c.height,g=x+h.height):(p=-d._x*c.width,f=p+c.width,x=-d._y*c.height,g=x+c.height),u[0]=i*p+s*x+a,u[1]=o*x+n*p+l,u[2]=i*f+s*x+a,u[3]=o*x+n*f+l,u[4]=i*f+s*g+a,u[5]=o*g+n*f+l,u[6]=i*p+s*g+a,u[7]=o*g+n*p+l,this._roundPixels){const y=j.RESOLUTION;for(let v=0;v<u.length;++v)u[v]=Math.round(u[v]*y)/y}}calculateTrimmedVertices(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const e=this._texture,r=this.vertexTrimmedData,i=e.orig,n=this._anchor,s=this.transform.worldTransform,o=s.a,a=s.b,l=s.c,u=s.d,h=s.tx,c=s.ty,d=-n._x*i.width,f=d+i.width,p=-n._y*i.height,g=p+i.height;if(r[0]=o*d+l*p+h,r[1]=u*p+a*d+c,r[2]=o*f+l*p+h,r[3]=u*p+a*f+c,r[4]=o*f+l*g+h,r[5]=u*g+a*f+c,r[6]=o*d+l*g+h,r[7]=u*g+a*d+c,this._roundPixels){const x=j.RESOLUTION;for(let y=0;y<r.length;++y)r[y]=Math.round(r[y]*x)/x}}_render(e){this.calculateVertices(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)}_calculateBounds(){const e=this._texture.trim,r=this._texture.orig;!e||e.width===r.width&&e.height===r.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(e){return this.children.length===0?(this._localBounds||(this._localBounds=new _u),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new te),e=this._localBoundsRect),this._localBounds.getRectangle(e)):super.getLocalBounds.call(this,e)}containsPoint(e){this.worldTransform.applyInverse(e,qs);const r=this._texture.orig.width,i=this._texture.orig.height,n=-r*this.anchor.x;let s=0;return qs.x>=n&&qs.x<n+r&&(s=-i*this.anchor.y,qs.y>=s&&qs.y<s+i)}destroy(e){if(super.destroy(e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,typeof e=="boolean"?e:e==null?void 0:e.texture){const r=typeof e=="boolean"?e:e==null?void 0:e.baseTexture;this._texture.destroy(!!r)}this._texture=null}static from(e,r){const i=e instanceof W?e:W.from(e,r);return new Ds(i)}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1,this._transformTrimmedID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(e){const r=pi(this.scale.x)||1;this.scale.x=r*e/this._texture.orig.width,this._width=e}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(e){const r=pi(this.scale.y)||1;this.scale.y=r*e/this._texture.orig.height,this._height=e}get anchor(){return this._anchor}set anchor(e){this._anchor.copyFrom(e)}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e),this._tintRGB=this._tintColor.toLittleEndianNumber()}get tintValue(){return this._tintColor.toNumber()}get texture(){return this._texture}set texture(e){this._texture!==e&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=e||W.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,e&&(e.baseTexture.valid?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))}}const Yw=new ye;Pe.prototype._cacheAsBitmap=!1;Pe.prototype._cacheData=null;Pe.prototype._cacheAsBitmapResolution=null;Pe.prototype._cacheAsBitmapMultisample=null;class X2{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}}Object.defineProperties(Pe.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(t){t!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(t){t!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(t){if(this._cacheAsBitmap===t)return;this._cacheAsBitmap=t;let e;t?(this._cacheData||(this._cacheData=new X2),e=this._cacheData,e.originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(e=this._cacheData,e.sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea)}}});Pe.prototype._renderCached=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(t))};Pe.prototype._initCachedDisplayObject=function(t){var d,f;if((d=this._cacheData)!=null&&d.sprite)return;const e=this.alpha;this.alpha=1,t.batch.flush();const r=this.getLocalBounds(new te,!0);if((f=this.filters)!=null&&f.length){const p=this.filters[0].padding;r.pad(p)}const i=this.cacheAsBitmapResolution||t.resolution;r.ceil(i),r.width=Math.max(r.width,1/i),r.height=Math.max(r.height,1/i);const n=t.renderTexture.current,s=t.renderTexture.sourceFrame.clone(),o=t.renderTexture.destinationFrame.clone(),a=t.projection.transform,l=wn.create({width:r.width,height:r.height,resolution:i,multisample:this.cacheAsBitmapMultisample??t.multisample}),u=`cacheAsBitmap_${mn()}`;this._cacheData.textureCacheId=u,ee.addToCache(l.baseTexture,u),W.addToCache(l,u);const h=this.transform.localTransform.copyTo(Yw).invert().translate(-r.x,-r.y);this.render=this._cacheData.originalRender,t.render(this,{renderTexture:l,clear:!0,transform:h,skipUpdateTransform:!1}),t.framebuffer.blit(),t.projection.transform=a,t.renderTexture.bind(n,s,o),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=e;const c=new Ds(l);c.transform.worldTransform=this.transform.worldTransform,c.anchor.x=-(r.x/r.width),c.anchor.y=-(r.y/r.height),c.alpha=e,c._bounds=this._bounds,this._cacheData.sprite=c,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=c.containsPoint.bind(c)};Pe.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(t))};Pe.prototype._initCachedDisplayObjectCanvas=function(t){var h;if((h=this._cacheData)!=null&&h.sprite)return;const e=this.getLocalBounds(new te,!0),r=this.alpha;this.alpha=1;const i=t.canvasContext.activeContext,n=t._projTransform,s=this.cacheAsBitmapResolution||t.resolution;e.ceil(s),e.width=Math.max(e.width,1/s),e.height=Math.max(e.height,1/s);const o=wn.create({width:e.width,height:e.height,resolution:s}),a=`cacheAsBitmap_${mn()}`;this._cacheData.textureCacheId=a,ee.addToCache(o.baseTexture,a),W.addToCache(o,a);const l=Yw;this.transform.localTransform.copyTo(l),l.invert(),l.tx-=e.x,l.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,{renderTexture:o,clear:!0,transform:l,skipUpdateTransform:!1}),t.canvasContext.activeContext=i,t._projTransform=n,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=r;const u=new Ds(o);u.transform.worldTransform=this.transform.worldTransform,u.anchor.x=-(e.x/e.width),u.anchor.y=-(e.y/e.height),u.alpha=r,u._bounds=this._bounds,this._cacheData.sprite=u,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=u.containsPoint.bind(u)};Pe.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};Pe.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};Pe.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,ee.removeFromCache(this._cacheData.textureCacheId),W.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};Pe.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)};Pe.prototype.name=null;Ue.prototype.getChildByName=function(t,e){for(let r=0,i=this.children.length;r<i;r++)if(this.children[r].name===t)return this.children[r];if(e)for(let r=0,i=this.children.length;r<i;r++){const n=this.children[r];if(!n.getChildByName)continue;const s=n.getChildByName(t,!0);if(s)return s}return null};Pe.prototype.getGlobalPosition=function(t=new ae,e=!1){return this.parent?this.parent.toGlobal(this.position,t,e):(t.x=this.position.x,t.y=this.position.y),t};var Y2=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`;class K2 extends ct{constructor(e=1){super(N2,Y2,{uAlpha:1}),this.alpha=e}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}}const q2={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},Z2=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function Q2(t){const e=q2[t],r=e.length;let i=Z2,n="";const s="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;";let o;for(let a=0;a<t;a++){let l=s.replace("%index%",a.toString());o=a,a>=r&&(o=t-a-1),l=l.replace("%value%",e[o].toString()),n+=l,n+=`
`}return i=i.replace("%blur%",n),i=i.replace("%size%",t.toString()),i}const J2=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function eM(t,e){const r=Math.ceil(t/2);let i=J2,n="",s;e?s="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":s="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(let o=0;o<t;o++){let a=s.replace("%index%",o.toString());a=a.replace("%sampleIndex%",`${o-(r-1)}.0`),n+=a,n+=`
`}return i=i.replace("%blur%",n),i=i.replace("%size%",t.toString()),i}class Sf extends ct{constructor(e,r=8,i=4,n=ct.defaultResolution,s=5){const o=eM(s,e),a=Q2(s);super(o,a),this.horizontal=e,this.resolution=n,this._quality=0,this.quality=i,this.blur=r}apply(e,r,i,n){if(i?this.horizontal?this.uniforms.strength=1/i.width*(i.width/r.width):this.uniforms.strength=1/i.height*(i.height/r.height):this.horizontal?this.uniforms.strength=1/e.renderer.width*(e.renderer.width/r.width):this.uniforms.strength=1/e.renderer.height*(e.renderer.height/r.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)e.applyFilter(this,r,i,n);else{const s=e.getFilterTexture(),o=e.renderer;let a=r,l=s;this.state.blend=!1,e.applyFilter(this,a,l,yr.CLEAR);for(let u=1;u<this.passes-1;u++){e.bindAndClear(a,yr.BLIT),this.uniforms.uSampler=l;const h=l;l=a,a=h,o.shader.bind(this),o.geometry.draw(5)}this.state.blend=!0,e.applyFilter(this,l,i,n),e.returnFilterTexture(s)}}get blur(){return this.strength}set blur(e){this.padding=1+Math.abs(e)*2,this.strength=e}get quality(){return this._quality}set quality(e){this._quality=e,this.passes=e}}class tM extends ct{constructor(e=8,r=4,i=ct.defaultResolution,n=5){super(),this._repeatEdgePixels=!1,this.blurXFilter=new Sf(!0,e,r,i,n),this.blurYFilter=new Sf(!1,e,r,i,n),this.resolution=i,this.quality=r,this.blur=e,this.repeatEdgePixels=!1}apply(e,r,i,n){const s=Math.abs(this.blurXFilter.strength),o=Math.abs(this.blurYFilter.strength);if(s&&o){const a=e.getFilterTexture();this.blurXFilter.apply(e,r,a,yr.CLEAR),this.blurYFilter.apply(e,a,i,n),e.returnFilterTexture(a)}else o?this.blurYFilter.apply(e,r,i,n):this.blurXFilter.apply(e,r,i,n)}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2}get blur(){return this.blurXFilter.blur}set blur(e){this.blurXFilter.blur=this.blurYFilter.blur=e,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(e){this.blurXFilter.quality=this.blurYFilter.quality=e}get blurX(){return this.blurXFilter.blur}set blurX(e){this.blurXFilter.blur=e,this.updatePadding()}get blurY(){return this.blurYFilter.blur}set blurY(e){this.blurYFilter.blur=e,this.updatePadding()}get blendMode(){return this.blurYFilter.blendMode}set blendMode(e){this.blurYFilter.blendMode=e}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(e){this._repeatEdgePixels=e,this.updatePadding()}}var rM=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`;class Af extends ct{constructor(){const e={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};super(Gw,rM,e),this.alpha=1}_loadMatrix(e,r=!1){let i=e;r&&(this._multiply(i,this.uniforms.m,e),i=this._colorMatrix(i)),this.uniforms.m=i}_multiply(e,r,i){return e[0]=r[0]*i[0]+r[1]*i[5]+r[2]*i[10]+r[3]*i[15],e[1]=r[0]*i[1]+r[1]*i[6]+r[2]*i[11]+r[3]*i[16],e[2]=r[0]*i[2]+r[1]*i[7]+r[2]*i[12]+r[3]*i[17],e[3]=r[0]*i[3]+r[1]*i[8]+r[2]*i[13]+r[3]*i[18],e[4]=r[0]*i[4]+r[1]*i[9]+r[2]*i[14]+r[3]*i[19]+r[4],e[5]=r[5]*i[0]+r[6]*i[5]+r[7]*i[10]+r[8]*i[15],e[6]=r[5]*i[1]+r[6]*i[6]+r[7]*i[11]+r[8]*i[16],e[7]=r[5]*i[2]+r[6]*i[7]+r[7]*i[12]+r[8]*i[17],e[8]=r[5]*i[3]+r[6]*i[8]+r[7]*i[13]+r[8]*i[18],e[9]=r[5]*i[4]+r[6]*i[9]+r[7]*i[14]+r[8]*i[19]+r[9],e[10]=r[10]*i[0]+r[11]*i[5]+r[12]*i[10]+r[13]*i[15],e[11]=r[10]*i[1]+r[11]*i[6]+r[12]*i[11]+r[13]*i[16],e[12]=r[10]*i[2]+r[11]*i[7]+r[12]*i[12]+r[13]*i[17],e[13]=r[10]*i[3]+r[11]*i[8]+r[12]*i[13]+r[13]*i[18],e[14]=r[10]*i[4]+r[11]*i[9]+r[12]*i[14]+r[13]*i[19]+r[14],e[15]=r[15]*i[0]+r[16]*i[5]+r[17]*i[10]+r[18]*i[15],e[16]=r[15]*i[1]+r[16]*i[6]+r[17]*i[11]+r[18]*i[16],e[17]=r[15]*i[2]+r[16]*i[7]+r[17]*i[12]+r[18]*i[17],e[18]=r[15]*i[3]+r[16]*i[8]+r[17]*i[13]+r[18]*i[18],e[19]=r[15]*i[4]+r[16]*i[9]+r[17]*i[14]+r[18]*i[19]+r[19],e}_colorMatrix(e){const r=new Float32Array(e);return r[4]/=255,r[9]/=255,r[14]/=255,r[19]/=255,r}brightness(e,r){const i=[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0];this._loadMatrix(i,r)}tint(e,r){const[i,n,s]=me.shared.setValue(e).toArray(),o=[i,0,0,0,0,0,n,0,0,0,0,0,s,0,0,0,0,0,1,0];this._loadMatrix(o,r)}greyscale(e,r){const i=[e,e,e,0,0,e,e,e,0,0,e,e,e,0,0,0,0,0,1,0];this._loadMatrix(i,r)}blackAndWhite(e){const r=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(r,e)}hue(e,r){e=(e||0)/180*Math.PI;const i=Math.cos(e),n=Math.sin(e),s=Math.sqrt,o=1/3,a=s(o),l=i+(1-i)*o,u=o*(1-i)-a*n,h=o*(1-i)+a*n,c=o*(1-i)+a*n,d=i+o*(1-i),f=o*(1-i)-a*n,p=o*(1-i)-a*n,g=o*(1-i)+a*n,x=i+o*(1-i),y=[l,u,h,0,0,c,d,f,0,0,p,g,x,0,0,0,0,0,1,0];this._loadMatrix(y,r)}contrast(e,r){const i=(e||0)+1,n=-.5*(i-1),s=[i,0,0,0,n,0,i,0,0,n,0,0,i,0,n,0,0,0,1,0];this._loadMatrix(s,r)}saturate(e=0,r){const i=e*2/3+1,n=(i-1)*-.5,s=[i,n,n,0,0,n,i,n,0,0,n,n,i,0,0,0,0,0,1,0];this._loadMatrix(s,r)}desaturate(){this.saturate(-1)}negative(e){const r=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(r,e)}sepia(e){const r=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(r,e)}technicolor(e){const r=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(r,e)}polaroid(e){const r=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(r,e)}toBGR(e){const r=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(r,e)}kodachrome(e){const r=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(r,e)}browni(e){const r=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(r,e)}vintage(e){const r=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(r,e)}colorTone(e,r,i,n,s){e=e||.2,r=r||.15,i=i||16770432,n=n||3375104;const o=me.shared,[a,l,u]=o.setValue(i).toArray(),[h,c,d]=o.setValue(n).toArray(),f=[.3,.59,.11,0,0,a,l,u,e,0,h,c,d,r,0,a-h,l-c,u-d,0,0];this._loadMatrix(f,s)}night(e,r){e=e||.1;const i=[e*-2,-e,0,0,0,-e,0,e,0,0,0,e,e*2,0,0,0,0,0,1,0];this._loadMatrix(i,r)}predator(e,r){const i=[11.224130630493164*e,-4.794486999511719*e,-2.8746118545532227*e,0*e,.40342438220977783*e,-3.6330697536468506*e,9.193157196044922*e,-2.951810836791992*e,0*e,-1.316135048866272*e,-3.2184197902679443*e,-4.2375030517578125*e,7.476448059082031*e,0*e,.8044459223747253*e,0,0,0,1,0];this._loadMatrix(i,r)}lsd(e){const r=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(r,e)}reset(){const e=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(e,!1)}get matrix(){return this.uniforms.m}set matrix(e){this.uniforms.m=e}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}}Af.prototype.grayscale=Af.prototype.greyscale;var iM=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,nM=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`;class sM extends ct{constructor(e,r){const i=new ye;e.renderable=!1,super(nM,iM,{mapSampler:e._texture,filterMatrix:i,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=e,this.maskMatrix=i,r==null&&(r=20),this.scale=new ae(r,r)}apply(e,r,i,n){this.uniforms.filterMatrix=e.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;const s=this.maskSprite.worldTransform,o=Math.sqrt(s.a*s.a+s.b*s.b),a=Math.sqrt(s.c*s.c+s.d*s.d);o!==0&&a!==0&&(this.uniforms.rotation[0]=s.a/o,this.uniforms.rotation[1]=s.b/o,this.uniforms.rotation[2]=s.c/a,this.uniforms.rotation[3]=s.d/a),e.applyFilter(this,r,i,n)}get map(){return this.uniforms.mapSampler}set map(e){this.uniforms.mapSampler=e}}var oM=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,aM=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`;class lM extends ct{constructor(){super(aM,oM)}}var uM=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`;class hM extends ct{constructor(e=.5,r=Math.random()){super(Gw,uM,{uNoise:0,uSeed:0}),this.noise=e,this.seed=r}get noise(){return this.uniforms.uNoise}set noise(e){this.uniforms.uNoise=e}get seed(){return this.uniforms.uSeed}set seed(e){this.uniforms.uSeed=e}}const T0={AlphaFilter:K2,BlurFilter:tM,BlurFilterPass:Sf,ColorMatrixFilter:Af,DisplacementFilter:sM,FXAAFilter:lM,NoiseFilter:hM};Object.entries(T0).forEach(([t,e])=>{Object.defineProperty(T0,t,{get(){return ne("7.1.0",`filters.${t} has moved to ${t}`),e}})});class cM{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}init(e){this.removeTickerListener(),this.events=e,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(e){this._pauseUpdate=e}addTickerListener(){this.tickerAdded||!this.domElement||(ie.system.add(this.tickerUpdate,this,gn.INTERACTION),this.tickerAdded=!0)}removeTickerListener(){this.tickerAdded&&(ie.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)}pointerMoved(){this._didMove=!0}update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}const e=this.events.rootPointerEvent;this.events.supportsTouchEvents&&e.pointerType==="touch"||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:e.clientX,clientY:e.clientY}))}tickerUpdate(e){this._deltaTime+=e,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())}}const hi=new cM;class pa{constructor(e){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=pa.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new ae,this.page=new ae,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=e}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(e,r,i){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(e,r,i,n,s){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}class wu extends pa{constructor(){super(...arguments),this.client=new ae,this.movement=new ae,this.offset=new ae,this.global=new ae,this.screen=new ae}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(e,r,i){return e.worldTransform.applyInverse(i||this.global,r)}getModifierState(e){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(e)}initMouseEvent(e,r,i,n,s,o,a,l,u,h,c,d,f,p,g){throw new Error("Method not implemented.")}}class Yt extends wu{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class fs extends wu{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}fs.DOM_DELTA_PIXEL=0,fs.DOM_DELTA_LINE=1,fs.DOM_DELTA_PAGE=2;const dM=2048,fM=new ae,Sc=new ae;class pM{constructor(e){this.dispatch=new ha,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=e,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(e,r){this.mappingTable[e]||(this.mappingTable[e]=[]),this.mappingTable[e].push({fn:r,priority:0}),this.mappingTable[e].sort((i,n)=>i.priority-n.priority)}dispatchEvent(e,r){e.propagationStopped=!1,e.propagationImmediatelyStopped=!1,this.propagate(e,r),this.dispatch.emit(r||e.type,e)}mapEvent(e){if(!this.rootTarget)return;const r=this.mappingTable[e.type];if(r)for(let i=0,n=r.length;i<n;i++)r[i].fn(e);else console.warn(`[EventBoundary]: Event mapping not defined for ${e.type}`)}hitTest(e,r){hi.pauseUpdate=!0;const i=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",n=this[i](this.rootTarget,this.rootTarget.eventMode,fM.set(e,r),this.hitTestFn,this.hitPruneFn);return n&&n[0]}propagate(e,r){if(!e.target)return;const i=e.composedPath();e.eventPhase=e.CAPTURING_PHASE;for(let n=0,s=i.length-1;n<s;n++)if(e.currentTarget=i[n],this.notifyTarget(e,r),e.propagationStopped||e.propagationImmediatelyStopped)return;if(e.eventPhase=e.AT_TARGET,e.currentTarget=e.target,this.notifyTarget(e,r),!(e.propagationStopped||e.propagationImmediatelyStopped)){e.eventPhase=e.BUBBLING_PHASE;for(let n=i.length-2;n>=0;n--)if(e.currentTarget=i[n],this.notifyTarget(e,r),e.propagationStopped||e.propagationImmediatelyStopped)return}}all(e,r,i=this._allInteractiveElements){if(i.length===0)return;e.eventPhase=e.BUBBLING_PHASE;const n=Array.isArray(r)?r:[r];for(let s=i.length-1;s>=0;s--)n.forEach(o=>{e.currentTarget=i[s],this.notifyTarget(e,o)})}propagationPath(e){const r=[e];for(let i=0;i<dM&&e!==this.rootTarget;i++){if(!e.parent)throw new Error("Cannot find propagation path to disconnected target");r.push(e.parent),e=e.parent}return r.reverse(),r}hitTestMoveRecursive(e,r,i,n,s,o=!1){let a=!1;if(this._interactivePrune(e))return null;if((e.eventMode==="dynamic"||r==="dynamic")&&(hi.pauseUpdate=!1),e.interactiveChildren&&e.children){const h=e.children;for(let c=h.length-1;c>=0;c--){const d=h[c],f=this.hitTestMoveRecursive(d,this._isInteractive(r)?r:d.eventMode,i,n,s,o||s(e,i));if(f){if(f.length>0&&!f[f.length-1].parent)continue;const p=e.isInteractive();(f.length>0||p)&&(p&&this._allInteractiveElements.push(e),f.push(e)),this._hitElements.length===0&&(this._hitElements=f),a=!0}}}const l=this._isInteractive(r),u=e.isInteractive();return l&&u&&this._allInteractiveElements.push(e),o||this._hitElements.length>0?null:a?this._hitElements:l&&!s(e,i)&&n(e,i)?u?[e]:[]:null}hitTestRecursive(e,r,i,n,s){if(this._interactivePrune(e)||s(e,i))return null;if((e.eventMode==="dynamic"||r==="dynamic")&&(hi.pauseUpdate=!1),e.interactiveChildren&&e.children){const l=e.children;for(let u=l.length-1;u>=0;u--){const h=l[u],c=this.hitTestRecursive(h,this._isInteractive(r)?r:h.eventMode,i,n,s);if(c){if(c.length>0&&!c[c.length-1].parent)continue;const d=e.isInteractive();return(c.length>0||d)&&c.push(e),c}}}const o=this._isInteractive(r),a=e.isInteractive();return o&&n(e,i)?a?[e]:[]:null}_isInteractive(e){return e==="static"||e==="dynamic"}_interactivePrune(e){return!!(!e||e.isMask||!e.visible||!e.renderable||e.eventMode==="none"||e.eventMode==="passive"&&!e.interactiveChildren||e.isMask)}hitPruneFn(e,r){var i;if(e.hitArea&&(e.worldTransform.applyInverse(r,Sc),!e.hitArea.contains(Sc.x,Sc.y)))return!0;if(e._mask){const n=e._mask.isMaskData?e._mask.maskObject:e._mask;if(n&&!((i=n.containsPoint)!=null&&i.call(n,r)))return!0}return!1}hitTestFn(e,r){return e.eventMode==="passive"?!1:e.hitArea?!0:e.containsPoint?e.containsPoint(r):!1}notifyTarget(e,r){var s,o;r=r??e.type;const i=`on${r}`;(o=(s=e.currentTarget)[i])==null||o.call(s,e);const n=e.eventPhase===e.CAPTURING_PHASE||e.eventPhase===e.AT_TARGET?`${r}capture`:r;this.notifyListeners(e,n),e.eventPhase===e.AT_TARGET&&this.notifyListeners(e,r)}mapPointerDown(e){if(!(e instanceof Yt)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=this.createPointerEvent(e);if(this.dispatchEvent(r,"pointerdown"),r.pointerType==="touch")this.dispatchEvent(r,"touchstart");else if(r.pointerType==="mouse"||r.pointerType==="pen"){const n=r.button===2;this.dispatchEvent(r,n?"rightdown":"mousedown")}const i=this.trackingData(e.pointerId);i.pressTargetsByButton[e.button]=r.composedPath(),this.freeEvent(r)}mapPointerMove(e){var l,u;if(!(e instanceof Yt)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const r=this.createPointerEvent(e);this._isPointerMoveEvent=!1;const i=r.pointerType==="mouse"||r.pointerType==="pen",n=this.trackingData(e.pointerId),s=this.findMountedTarget(n.overTargets);if(((l=n.overTargets)==null?void 0:l.length)>0&&s!==r.target){const h=e.type==="mousemove"?"mouseout":"pointerout",c=this.createPointerEvent(e,h,s);if(this.dispatchEvent(c,"pointerout"),i&&this.dispatchEvent(c,"mouseout"),!r.composedPath().includes(s)){const d=this.createPointerEvent(e,"pointerleave",s);for(d.eventPhase=d.AT_TARGET;d.target&&!r.composedPath().includes(d.target);)d.currentTarget=d.target,this.notifyTarget(d),i&&this.notifyTarget(d,"mouseleave"),d.target=d.target.parent;this.freeEvent(d)}this.freeEvent(c)}if(s!==r.target){const h=e.type==="mousemove"?"mouseover":"pointerover",c=this.clonePointerEvent(r,h);this.dispatchEvent(c,"pointerover"),i&&this.dispatchEvent(c,"mouseover");let d=s==null?void 0:s.parent;for(;d&&d!==this.rootTarget.parent&&d!==r.target;)d=d.parent;if(!d||d===this.rootTarget.parent){const f=this.clonePointerEvent(r,"pointerenter");for(f.eventPhase=f.AT_TARGET;f.target&&f.target!==s&&f.target!==this.rootTarget.parent;)f.currentTarget=f.target,this.notifyTarget(f),i&&this.notifyTarget(f,"mouseenter"),f.target=f.target.parent;this.freeEvent(f)}this.freeEvent(c)}const o=[],a=this.enableGlobalMoveEvents??!0;this.moveOnAll?o.push("pointermove"):this.dispatchEvent(r,"pointermove"),a&&o.push("globalpointermove"),r.pointerType==="touch"&&(this.moveOnAll?o.splice(1,0,"touchmove"):this.dispatchEvent(r,"touchmove"),a&&o.push("globaltouchmove")),i&&(this.moveOnAll?o.splice(1,0,"mousemove"):this.dispatchEvent(r,"mousemove"),a&&o.push("globalmousemove"),this.cursor=(u=r.target)==null?void 0:u.cursor),o.length>0&&this.all(r,o),this._allInteractiveElements.length=0,this._hitElements.length=0,n.overTargets=r.composedPath(),this.freeEvent(r)}mapPointerOver(e){var o;if(!(e instanceof Yt)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=this.trackingData(e.pointerId),i=this.createPointerEvent(e),n=i.pointerType==="mouse"||i.pointerType==="pen";this.dispatchEvent(i,"pointerover"),n&&this.dispatchEvent(i,"mouseover"),i.pointerType==="mouse"&&(this.cursor=(o=i.target)==null?void 0:o.cursor);const s=this.clonePointerEvent(i,"pointerenter");for(s.eventPhase=s.AT_TARGET;s.target&&s.target!==this.rootTarget.parent;)s.currentTarget=s.target,this.notifyTarget(s),n&&this.notifyTarget(s,"mouseenter"),s.target=s.target.parent;r.overTargets=i.composedPath(),this.freeEvent(i),this.freeEvent(s)}mapPointerOut(e){if(!(e instanceof Yt)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=this.trackingData(e.pointerId);if(r.overTargets){const i=e.pointerType==="mouse"||e.pointerType==="pen",n=this.findMountedTarget(r.overTargets),s=this.createPointerEvent(e,"pointerout",n);this.dispatchEvent(s),i&&this.dispatchEvent(s,"mouseout");const o=this.createPointerEvent(e,"pointerleave",n);for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==this.rootTarget.parent;)o.currentTarget=o.target,this.notifyTarget(o),i&&this.notifyTarget(o,"mouseleave"),o.target=o.target.parent;r.overTargets=null,this.freeEvent(s),this.freeEvent(o)}this.cursor=null}mapPointerUp(e){if(!(e instanceof Yt)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=performance.now(),i=this.createPointerEvent(e);if(this.dispatchEvent(i,"pointerup"),i.pointerType==="touch")this.dispatchEvent(i,"touchend");else if(i.pointerType==="mouse"||i.pointerType==="pen"){const a=i.button===2;this.dispatchEvent(i,a?"rightup":"mouseup")}const n=this.trackingData(e.pointerId),s=this.findMountedTarget(n.pressTargetsByButton[e.button]);let o=s;if(s&&!i.composedPath().includes(s)){let a=s;for(;a&&!i.composedPath().includes(a);){if(i.currentTarget=a,this.notifyTarget(i,"pointerupoutside"),i.pointerType==="touch")this.notifyTarget(i,"touchendoutside");else if(i.pointerType==="mouse"||i.pointerType==="pen"){const l=i.button===2;this.notifyTarget(i,l?"rightupoutside":"mouseupoutside")}a=a.parent}delete n.pressTargetsByButton[e.button],o=a}if(o){const a=this.clonePointerEvent(i,"click");a.target=o,a.path=null,n.clicksByButton[e.button]||(n.clicksByButton[e.button]={clickCount:0,target:a.target,timeStamp:r});const l=n.clicksByButton[e.button];if(l.target===a.target&&r-l.timeStamp<200?++l.clickCount:l.clickCount=1,l.target=a.target,l.timeStamp=r,a.detail=l.clickCount,a.pointerType==="mouse"){const u=a.button===2;this.dispatchEvent(a,u?"rightclick":"click")}else a.pointerType==="touch"&&this.dispatchEvent(a,"tap");this.dispatchEvent(a,"pointertap"),this.freeEvent(a)}this.freeEvent(i)}mapPointerUpOutside(e){if(!(e instanceof Yt)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=this.trackingData(e.pointerId),i=this.findMountedTarget(r.pressTargetsByButton[e.button]),n=this.createPointerEvent(e);if(i){let s=i;for(;s;)n.currentTarget=s,this.notifyTarget(n,"pointerupoutside"),n.pointerType==="touch"?this.notifyTarget(n,"touchendoutside"):(n.pointerType==="mouse"||n.pointerType==="pen")&&this.notifyTarget(n,n.button===2?"rightupoutside":"mouseupoutside"),s=s.parent;delete r.pressTargetsByButton[e.button]}this.freeEvent(n)}mapWheel(e){if(!(e instanceof fs)){console.warn("EventBoundary cannot map a non-wheel event as a wheel event");return}const r=this.createWheelEvent(e);this.dispatchEvent(r),this.freeEvent(r)}findMountedTarget(e){if(!e)return null;let r=e[0];for(let i=1;i<e.length&&e[i].parent===r;i++)r=e[i];return r}createPointerEvent(e,r,i){const n=this.allocateEvent(Yt);return this.copyPointerData(e,n),this.copyMouseData(e,n),this.copyData(e,n),n.nativeEvent=e.nativeEvent,n.originalEvent=e,n.target=i??this.hitTest(n.global.x,n.global.y)??this._hitElements[0],typeof r=="string"&&(n.type=r),n}createWheelEvent(e){const r=this.allocateEvent(fs);return this.copyWheelData(e,r),this.copyMouseData(e,r),this.copyData(e,r),r.nativeEvent=e.nativeEvent,r.originalEvent=e,r.target=this.hitTest(r.global.x,r.global.y),r}clonePointerEvent(e,r){const i=this.allocateEvent(Yt);return i.nativeEvent=e.nativeEvent,i.originalEvent=e.originalEvent,this.copyPointerData(e,i),this.copyMouseData(e,i),this.copyData(e,i),i.target=e.target,i.path=e.composedPath().slice(),i.type=r??i.type,i}copyWheelData(e,r){r.deltaMode=e.deltaMode,r.deltaX=e.deltaX,r.deltaY=e.deltaY,r.deltaZ=e.deltaZ}copyPointerData(e,r){e instanceof Yt&&r instanceof Yt&&(r.pointerId=e.pointerId,r.width=e.width,r.height=e.height,r.isPrimary=e.isPrimary,r.pointerType=e.pointerType,r.pressure=e.pressure,r.tangentialPressure=e.tangentialPressure,r.tiltX=e.tiltX,r.tiltY=e.tiltY,r.twist=e.twist)}copyMouseData(e,r){e instanceof wu&&r instanceof wu&&(r.altKey=e.altKey,r.button=e.button,r.buttons=e.buttons,r.client.copyFrom(e.client),r.ctrlKey=e.ctrlKey,r.metaKey=e.metaKey,r.movement.copyFrom(e.movement),r.screen.copyFrom(e.screen),r.shiftKey=e.shiftKey,r.global.copyFrom(e.global))}copyData(e,r){r.isTrusted=e.isTrusted,r.srcElement=e.srcElement,r.timeStamp=performance.now(),r.type=e.type,r.detail=e.detail,r.view=e.view,r.which=e.which,r.layer.copyFrom(e.layer),r.page.copyFrom(e.page)}trackingData(e){return this.mappingState.trackingData[e]||(this.mappingState.trackingData[e]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[e]}allocateEvent(e){this.eventPool.has(e)||this.eventPool.set(e,[]);const r=this.eventPool.get(e).pop()||new e(this);return r.eventPhase=r.NONE,r.currentTarget=null,r.path=null,r.target=null,r}freeEvent(e){if(e.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const r=e.constructor;this.eventPool.has(r)||this.eventPool.set(r,[]),this.eventPool.get(r).push(e)}notifyListeners(e,r){const i=e.currentTarget._events[r];if(i&&e.currentTarget.isInteractive())if("fn"in i)i.once&&e.currentTarget.removeListener(r,i.fn,void 0,!0),i.fn.call(i.context,e);else for(let n=0,s=i.length;n<s&&!e.propagationImmediatelyStopped;n++)i[n].once&&e.currentTarget.removeListener(r,i[n].fn,void 0,!0),i[n].fn.call(i[n].context,e)}}const mM=1,gM={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},bf=class Cf{constructor(e){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=e,this.rootBoundary=new pM(null),hi.init(this),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new Yt(null),this.rootWheelEvent=new fs(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...Cf.defaultEventFeatures},{set:(r,i,n)=>(i==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=n),r[i]=n,!0)}),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(e){const{view:r,resolution:i}=this.renderer;this.setTargetElement(r),this.resolution=i,Cf._defaultEventMode=e.eventMode??"auto",Object.assign(this.features,e.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(e){this.resolution=e}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(e){e=e||"default";let r=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(r=!1),this.currentCursor===e)return;this.currentCursor=e;const i=this.cursorStyles[e];if(i)switch(typeof i){case"string":r&&(this.domElement.style.cursor=i);break;case"function":i(e);break;case"object":r&&Object.assign(this.domElement.style,i);break}else r&&typeof e=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,e)&&(this.domElement.style.cursor=e)}get pointer(){return this.rootPointerEvent}onPointerDown(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const r=this.normalizeToPointerData(e);this.autoPreventDefault&&r[0].isNormalized&&(e.cancelable||!("cancelable"in e))&&e.preventDefault();for(let i=0,n=r.length;i<n;i++){const s=r[i],o=this.bootstrapEvent(this.rootPointerEvent,s);this.rootBoundary.mapEvent(o)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(e){if(!this.features.move)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,hi.pointerMoved();const r=this.normalizeToPointerData(e);for(let i=0,n=r.length;i<n;i++){const s=this.bootstrapEvent(this.rootPointerEvent,r[i]);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let r=e.target;e.composedPath&&e.composedPath().length>0&&(r=e.composedPath()[0]);const i=r!==this.domElement?"outside":"",n=this.normalizeToPointerData(e);for(let s=0,o=n.length;s<o;s++){const a=this.bootstrapEvent(this.rootPointerEvent,n[s]);a.type+=i,this.rootBoundary.mapEvent(a)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const r=this.normalizeToPointerData(e);for(let i=0,n=r.length;i<n;i++){const s=this.bootstrapEvent(this.rootPointerEvent,r[i]);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}onWheel(e){if(!this.features.wheel)return;const r=this.normalizeWheelEvent(e);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(r)}setTargetElement(e){this.removeEvents(),this.domElement=e,hi.domElement=e,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;hi.addTickerListener();const e=this.domElement.style;e&&(globalThis.navigator.msPointerEnabled?(e.msContentZooming="none",e.msTouchAction="none"):this.supportsPointerEvents&&(e.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0))),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;hi.removeTickerListener();const e=this.domElement.style;globalThis.navigator.msPointerEnabled?(e.msContentZooming="",e.msTouchAction=""):this.supportsPointerEvents&&(e.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0))),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(e,r,i){const n=this.domElement.isConnected?this.domElement.getBoundingClientRect():{width:this.domElement.width,height:this.domElement.height,left:0,top:0},s=1/this.resolution;e.x=(r-n.left)*(this.domElement.width/n.width)*s,e.y=(i-n.top)*(this.domElement.height/n.height)*s}normalizeToPointerData(e){const r=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(let i=0,n=e.changedTouches.length;i<n;i++){const s=e.changedTouches[i];typeof s.button>"u"&&(s.button=0),typeof s.buttons>"u"&&(s.buttons=1),typeof s.isPrimary>"u"&&(s.isPrimary=e.touches.length===1&&e.type==="touchstart"),typeof s.width>"u"&&(s.width=s.radiusX||1),typeof s.height>"u"&&(s.height=s.radiusY||1),typeof s.tiltX>"u"&&(s.tiltX=0),typeof s.tiltY>"u"&&(s.tiltY=0),typeof s.pointerType>"u"&&(s.pointerType="touch"),typeof s.pointerId>"u"&&(s.pointerId=s.identifier||0),typeof s.pressure>"u"&&(s.pressure=s.force||.5),typeof s.twist>"u"&&(s.twist=0),typeof s.tangentialPressure>"u"&&(s.tangentialPressure=0),typeof s.layerX>"u"&&(s.layerX=s.offsetX=s.clientX),typeof s.layerY>"u"&&(s.layerY=s.offsetY=s.clientY),s.isNormalized=!0,s.type=e.type,r.push(s)}else if(!globalThis.MouseEvent||e instanceof MouseEvent&&(!this.supportsPointerEvents||!(e instanceof globalThis.PointerEvent))){const i=e;typeof i.isPrimary>"u"&&(i.isPrimary=!0),typeof i.width>"u"&&(i.width=1),typeof i.height>"u"&&(i.height=1),typeof i.tiltX>"u"&&(i.tiltX=0),typeof i.tiltY>"u"&&(i.tiltY=0),typeof i.pointerType>"u"&&(i.pointerType="mouse"),typeof i.pointerId>"u"&&(i.pointerId=mM),typeof i.pressure>"u"&&(i.pressure=.5),typeof i.twist>"u"&&(i.twist=0),typeof i.tangentialPressure>"u"&&(i.tangentialPressure=0),i.isNormalized=!0,r.push(i)}else r.push(e);return r}normalizeWheelEvent(e){const r=this.rootWheelEvent;return this.transferMouseData(r,e),r.deltaX=e.deltaX,r.deltaY=e.deltaY,r.deltaZ=e.deltaZ,r.deltaMode=e.deltaMode,this.mapPositionToPoint(r.screen,e.clientX,e.clientY),r.global.copyFrom(r.screen),r.offset.copyFrom(r.screen),r.nativeEvent=e,r.type=e.type,r}bootstrapEvent(e,r){return e.originalEvent=null,e.nativeEvent=r,e.pointerId=r.pointerId,e.width=r.width,e.height=r.height,e.isPrimary=r.isPrimary,e.pointerType=r.pointerType,e.pressure=r.pressure,e.tangentialPressure=r.tangentialPressure,e.tiltX=r.tiltX,e.tiltY=r.tiltY,e.twist=r.twist,this.transferMouseData(e,r),this.mapPositionToPoint(e.screen,r.clientX,r.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.isTrusted=r.isTrusted,e.type==="pointerleave"&&(e.type="pointerout"),e.type.startsWith("mouse")&&(e.type=e.type.replace("mouse","pointer")),e.type.startsWith("touch")&&(e.type=gM[e.type]||e.type),e}transferMouseData(e,r){e.isTrusted=r.isTrusted,e.srcElement=r.srcElement,e.timeStamp=performance.now(),e.type=r.type,e.altKey=r.altKey,e.button=r.button,e.buttons=r.buttons,e.client.x=r.clientX,e.client.y=r.clientY,e.ctrlKey=r.ctrlKey,e.metaKey=r.metaKey,e.movement.x=r.movementX,e.movement.y=r.movementY,e.page.x=r.pageX,e.page.y=r.pageY,e.relatedTarget=null,e.shiftKey=r.shiftKey}};bf.extension={name:"events",type:[U.RendererSystem,U.CanvasRendererSystem]},bf.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};let Pf=bf;X.add(Pf);function E0(t){return t==="dynamic"||t==="static"}const yM={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,_internalInteractive:void 0,get interactive(){return this._internalInteractive??E0(Pf.defaultEventMode)},set interactive(t){ne("7.2.0","Setting interactive is deprecated, use eventMode = 'none'/'passive'/'auto'/'static'/'dynamic' instead."),this._internalInteractive=t,this.eventMode=t?"static":"auto"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??Pf.defaultEventMode},set eventMode(t){this._internalInteractive=E0(t),this._internalEventMode=t},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(t,e,r){const i=typeof r=="boolean"&&r||typeof r=="object"&&r.capture,n=typeof r=="object"?r.signal:void 0,s=typeof r=="object"?r.once===!0:!1,o=typeof e=="function"?void 0:e;t=i?`${t}capture`:t;const a=typeof e=="function"?e:e.handleEvent,l=this;n&&n.addEventListener("abort",()=>{l.off(t,a,o)}),s?l.once(t,a,o):l.on(t,a,o)},removeEventListener(t,e,r){const i=typeof r=="boolean"&&r||typeof r=="object"&&r.capture,n=typeof e=="function"?void 0:e;t=i?`${t}capture`:t,e=typeof e=="function"?e:e.handleEvent,this.off(t,e,n)},dispatchEvent(t){if(!(t instanceof pa))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return t.defaultPrevented=!1,t.path=null,t.target=this,t.manager.dispatchEvent(t),!t.defaultPrevented}};Pe.mixin(yM);const vM={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};Pe.mixin(vM);const xM=9,Qa=100,_M=0,wM=0,S0=2,A0=1,TM=-1e3,EM=-1e3,SM=2;class Kw{constructor(e){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(Or.tablet||Or.phone)&&this.createTouchHook();const r=document.createElement("div");r.style.width=`${Qa}px`,r.style.height=`${Qa}px`,r.style.position="absolute",r.style.top=`${_M}px`,r.style.left=`${wM}px`,r.style.zIndex=S0.toString(),this.div=r,this.renderer=e,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){const e=document.createElement("button");e.style.width=`${A0}px`,e.style.height=`${A0}px`,e.style.position="absolute",e.style.top=`${TM}px`,e.style.left=`${EM}px`,e.style.zIndex=SM.toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessibility for this content",e.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()}),document.body.appendChild(e),this._hookDiv=e}destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){var e;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),(e=this.renderer.view.parentNode)==null||e.appendChild(this.div))}deactivate(){var e;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),(e=this.div.parentNode)==null||e.removeChild(this.div))}updateAccessibleObjects(e){if(!e.visible||!e.accessibleChildren)return;e.accessible&&e.isInteractive()&&(e._accessibleActive||this.addChild(e),e.renderId=this.renderId);const r=e.children;if(r)for(let i=0;i<r.length;i++)this.updateAccessibleObjects(r[i])}update(){const e=performance.now();if(Or.android.device&&e<this.androidUpdateCount||(this.androidUpdateCount=e+this.androidUpdateFrequency,!this.renderer.renderingToScreen))return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);const{x:r,y:i,width:n,height:s}=this.renderer.view.getBoundingClientRect(),{width:o,height:a,resolution:l}=this.renderer,u=n/o*l,h=s/a*l;let c=this.div;c.style.left=`${r}px`,c.style.top=`${i}px`,c.style.width=`${o}px`,c.style.height=`${a}px`;for(let d=0;d<this.children.length;d++){const f=this.children[d];if(f.renderId!==this.renderId)f._accessibleActive=!1,cs(this.children,d,1),this.div.removeChild(f._accessibleDiv),this.pool.push(f._accessibleDiv),f._accessibleDiv=null,d--;else{c=f._accessibleDiv;let p=f.hitArea;const g=f.worldTransform;f.hitArea?(c.style.left=`${(g.tx+p.x*g.a)*u}px`,c.style.top=`${(g.ty+p.y*g.d)*h}px`,c.style.width=`${p.width*g.a*u}px`,c.style.height=`${p.height*g.d*h}px`):(p=f.getBounds(),this.capHitArea(p),c.style.left=`${p.x*u}px`,c.style.top=`${p.y*h}px`,c.style.width=`${p.width*u}px`,c.style.height=`${p.height*h}px`,c.title!==f.accessibleTitle&&f.accessibleTitle!==null&&(c.title=f.accessibleTitle),c.getAttribute("aria-label")!==f.accessibleHint&&f.accessibleHint!==null&&c.setAttribute("aria-label",f.accessibleHint)),(f.accessibleTitle!==c.title||f.tabIndex!==c.tabIndex)&&(c.title=f.accessibleTitle,c.tabIndex=f.tabIndex,this.debug&&this.updateDebugHTML(c))}}this.renderId++}updateDebugHTML(e){e.innerHTML=`type: ${e.type}</br> title : ${e.title}</br> tabIndex: ${e.tabIndex}`}capHitArea(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0);const{width:r,height:i}=this.renderer;e.x+e.width>r&&(e.width=r-e.x),e.y+e.height>i&&(e.height=i-e.y)}addChild(e){let r=this.pool.pop();r||(r=document.createElement("button"),r.style.width=`${Qa}px`,r.style.height=`${Qa}px`,r.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",r.style.position="absolute",r.style.zIndex=S0.toString(),r.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?r.setAttribute("aria-live","off"):r.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?r.setAttribute("aria-relevant","additions"):r.setAttribute("aria-relevant","text"),r.addEventListener("click",this._onClick.bind(this)),r.addEventListener("focus",this._onFocus.bind(this)),r.addEventListener("focusout",this._onFocusOut.bind(this))),r.style.pointerEvents=e.accessiblePointerEvents,r.type=e.accessibleType,e.accessibleTitle&&e.accessibleTitle!==null?r.title=e.accessibleTitle:(!e.accessibleHint||e.accessibleHint===null)&&(r.title=`displayObject ${e.tabIndex}`),e.accessibleHint&&e.accessibleHint!==null&&r.setAttribute("aria-label",e.accessibleHint),this.debug&&this.updateDebugHTML(r),e._accessibleActive=!0,e._accessibleDiv=r,r.displayObject=e,this.children.push(e),this.div.appendChild(e._accessibleDiv),e._accessibleDiv.tabIndex=e.tabIndex}_dispatchEvent(e,r){const{displayObject:i}=e.target,n=this.renderer.events.rootBoundary,s=Object.assign(new pa(n),{target:i});n.rootTarget=this.renderer.lastObjectRendered,r.forEach(o=>n.dispatchEvent(s,o))}_onClick(e){this._dispatchEvent(e,["click","pointertap","tap"])}_onFocus(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","assertive"),this._dispatchEvent(e,["mouseover"])}_onFocusOut(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","polite"),this._dispatchEvent(e,["mouseout"])}_onKeyDown(e){e.keyCode===xM&&this.activate()}_onMouseMove(e){e.movementX===0&&e.movementY===0||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}}Kw.extension={name:"accessibility",type:[U.RendererPlugin,U.CanvasRendererPlugin]};X.add(Kw);const qw=class Rf{constructor(e){this.stage=new Ue,e=Object.assign({forceCanvas:!1},e),this.renderer=F2(e),Rf._plugins.forEach(r=>{r.init.call(this,e)})}render(){this.renderer.render(this.stage)}get view(){var e;return(e=this.renderer)==null?void 0:e.view}get screen(){var e;return(e=this.renderer)==null?void 0:e.screen}destroy(e,r){const i=Rf._plugins.slice(0);i.reverse(),i.forEach(n=>{n.destroy.call(this)}),this.stage.destroy(r),this.stage=null,this.renderer.destroy(e),this.renderer=null}};qw._plugins=[];let Zw=qw;X.handleByList(U.Application,Zw._plugins);class Qw{static init(e){Object.defineProperty(this,"resizeTo",{set(r){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=r,r&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this.cancelResize();let r,i;if(this._resizeTo===globalThis.window)r=globalThis.innerWidth,i=globalThis.innerHeight;else{const{clientWidth:n,clientHeight:s}=this._resizeTo;r=n,i=s}this.renderer.resize(r,i),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=e.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}Qw.extension=U.Application;X.add(Qw);const b0={loader:U.LoadParser,resolver:U.ResolveParser,cache:U.CacheParser,detection:U.DetectionParser};X.handle(U.Asset,t=>{const e=t.ref;Object.entries(b0).filter(([r])=>!!e[r]).forEach(([r,i])=>X.add(Object.assign(e[r],{extension:e[r].extension??i})))},t=>{const e=t.ref;Object.keys(b0).filter(r=>!!e[r]).forEach(r=>X.remove(e[r]))});class AM{constructor(e,r=!1){this._loader=e,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=r}add(e){e.forEach(r=>{this._assetList.push(r)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const e=[],r=Math.min(this._assetList.length,this._maxConcurrent);for(let i=0;i<r;i++)e.push(this._assetList.pop());await this._loader.load(e),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(e){this._isActive!==e&&(this._isActive=e,e&&!this._isLoading&&this._next())}}function Fs(t,e){if(Array.isArray(e)){for(const r of e)if(t.startsWith(`data:${r}`))return!0;return!1}return t.startsWith(`data:${e}`)}function Fi(t,e){const r=t.split("?")[0],i=Ke.extname(r).toLowerCase();return Array.isArray(e)?e.includes(i):i===e}const Jt=(t,e,r=!1)=>(Array.isArray(t)||(t=[t]),e?t.map(i=>typeof i=="string"||r?e(i):i):t),If=(t,e)=>{const r=e.split("?")[1];return r&&(t+=`?${r}`),t};function Jw(t,e,r,i,n){const s=e[r];for(let o=0;o<s.length;o++){const a=s[o];r<e.length-1?Jw(t.replace(i[r],a),e,r+1,i,n):n.push(t.replace(i[r],a))}}function bM(t){const e=/\{(.*?)\}/g,r=t.match(e),i=[];if(r){const n=[];r.forEach(s=>{const o=s.substring(1,s.length-1).split(",");n.push(o)}),Jw(t,n,0,r,i)}else i.push(t);return i}const Tu=t=>!Array.isArray(t);class CM{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(e){return this._cache.has(e)}get(e){const r=this._cache.get(e);return r||console.warn(`[Assets] Asset id ${e} was not found in the Cache`),r}set(e,r){const i=Jt(e);let n;for(let a=0;a<this.parsers.length;a++){const l=this.parsers[a];if(l.test(r)){n=l.getCacheableAssets(i,r);break}}n||(n={},i.forEach(a=>{n[a]=r}));const s=Object.keys(n),o={cacheKeys:s,keys:i};if(i.forEach(a=>{this._cacheMap.set(a,o)}),s.forEach(a=>{const l=n?n[a]:r;this._cache.has(a)&&this._cache.get(a)!==l&&console.warn("[Cache] already has key:",a),this._cache.set(a,n[a])}),r instanceof W){const a=r;i.forEach(l=>{a.baseTexture!==W.EMPTY.baseTexture&&ee.addToCache(a.baseTexture,l),W.addToCache(a,l)})}}remove(e){if(!this._cacheMap.has(e)){console.warn(`[Assets] Asset id ${e} was not found in the Cache`);return}const r=this._cacheMap.get(e);r.cacheKeys.forEach(i=>{this._cache.delete(i)}),r.keys.forEach(i=>{this._cacheMap.delete(i)})}get parsers(){return this._parsers}}const qi=new CM;class PM{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(e,r,i)=>(this._parsersValidated=!1,e[r]=i,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(e,r){const i={promise:null,parser:null};return i.promise=(async()=>{var o,a;let n=null,s=null;if(r.loadParser&&(s=this._parserHash[r.loadParser],s||console.warn(`[Assets] specified load parser "${r.loadParser}" not found while loading ${e}`)),!s){for(let l=0;l<this.parsers.length;l++){const u=this.parsers[l];if(u.load&&((o=u.test)!=null&&o.call(u,e,r,this))){s=u;break}}if(!s)return console.warn(`[Assets] ${e} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}n=await s.load(e,r,this),i.parser=s;for(let l=0;l<this.parsers.length;l++){const u=this.parsers[l];u.parse&&u.parse&&await((a=u.testParse)==null?void 0:a.call(u,n,r,this))&&(n=await u.parse(n,r,this)||n,i.parser=u)}return n})(),i}async load(e,r){this._parsersValidated||this._validateParsers();let i=0;const n={},s=Tu(e),o=Jt(e,u=>({alias:[u],src:u})),a=o.length,l=o.map(async u=>{const h=Ke.toAbsolute(u.src);if(!n[u.src])try{this.promiseCache[h]||(this.promiseCache[h]=this._getLoadPromiseAndParser(h,u)),n[u.src]=await this.promiseCache[h].promise,r&&r(++i/a)}catch(c){throw delete this.promiseCache[h],delete n[u.src],new Error(`[Loader.load] Failed to load ${h}.
${c}`)}});return await Promise.all(l),s?n[o[0].src]:n}async unload(e){const r=Jt(e,i=>({alias:[i],src:i})).map(async i=>{var o,a;const n=Ke.toAbsolute(i.src),s=this.promiseCache[n];if(s){const l=await s.promise;delete this.promiseCache[n],(a=(o=s.parser)==null?void 0:o.unload)==null||a.call(o,l,i,this)}});await Promise.all(r)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(e=>e.name).reduce((e,r)=>(e[r.name]&&console.warn(`[Assets] loadParser name conflict "${r.name}"`),{...e,[r.name]:r}),{})}}var sr=(t=>(t[t.Low=0]="Low",t[t.Normal=1]="Normal",t[t.High=2]="High",t))(sr||{});const RM=".json",IM="application/json",MM={extension:{type:U.LoadParser,priority:sr.Low},name:"loadJson",test(t){return Fs(t,IM)||Fi(t,RM)},async load(t){return await(await j.ADAPTER.fetch(t)).json()}};X.add(MM);const kM=".txt",DM="text/plain",FM={name:"loadTxt",extension:{type:U.LoadParser,priority:sr.Low},test(t){return Fs(t,DM)||Fi(t,kM)},async load(t){return await(await j.ADAPTER.fetch(t)).text()}};X.add(FM);const BM=["normal","bold","100","200","300","400","500","600","700","800","900"],LM=[".ttf",".otf",".woff",".woff2"],NM=["font/ttf","font/otf","font/woff","font/woff2"],OM=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function UM(t){const e=Ke.extname(t),r=Ke.basename(t,e).replace(/(-|_)/g," ").toLowerCase().split(" ").map(s=>s.charAt(0).toUpperCase()+s.slice(1));let i=r.length>0;for(const s of r)if(!s.match(OM)){i=!1;break}let n=r.join(" ");return i||(n=`"${n.replace(/[\\"]/g,"\\$&")}"`),n}const GM=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function VM(t){return GM.test(t)?t:encodeURI(t)}const jM={extension:{type:U.LoadParser,priority:sr.Low},name:"loadWebFont",test(t){return Fs(t,NM)||Fi(t,LM)},async load(t,e){var i,n,s;const r=j.ADAPTER.getFontFaceSet();if(r){const o=[],a=((i=e.data)==null?void 0:i.family)??UM(t),l=((s=(n=e.data)==null?void 0:n.weights)==null?void 0:s.filter(h=>BM.includes(h)))??["normal"],u=e.data??{};for(let h=0;h<l.length;h++){const c=l[h],d=new FontFace(a,`url(${VM(t)})`,{...u,weight:c});await d.load(),r.add(d),o.push(d)}return o.length===1?o[0]:o}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(t){(Array.isArray(t)?t:[t]).forEach(e=>j.ADAPTER.getFontFaceSet().delete(e))}};X.add(jM);const zM=`(function() {
  "use strict";
  const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
  async function checkImageBitmap() {
    try {
      if (typeof createImageBitmap != "function")
        return !1;
      const imageBlob = await (await fetch(WHITE_PNG)).blob(), imageBitmap = await createImageBitmap(imageBlob);
      return imageBitmap.width === 1 && imageBitmap.height === 1;
    } catch {
      return !1;
    }
  }
  checkImageBitmap().then((result) => {
    self.postMessage(result);
  });
})();
`;let ps=null,Mf=class{constructor(){ps||(ps=URL.createObjectURL(new Blob([zM],{type:"application/javascript"}))),this.worker=new Worker(ps)}};Mf.revokeObjectURL=function(){ps&&(URL.revokeObjectURL(ps),ps=null)};const HM=`(function() {
  "use strict";
  async function loadImageBitmap(url) {
    const response = await fetch(url);
    if (!response.ok)
      throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
    const imageBlob = await response.blob();
    return await createImageBitmap(imageBlob);
  }
  self.onmessage = async (event) => {
    try {
      const imageBitmap = await loadImageBitmap(event.data.data[0]);
      self.postMessage({
        data: imageBitmap,
        uuid: event.data.uuid,
        id: event.data.id
      }, [imageBitmap]);
    } catch (e) {
      self.postMessage({
        error: e,
        uuid: event.data.uuid,
        id: event.data.id
      });
    }
  };
})();
`;let ms=null;class eT{constructor(){ms||(ms=URL.createObjectURL(new Blob([HM],{type:"application/javascript"}))),this.worker=new Worker(ms)}}eT.revokeObjectURL=function(){ms&&(URL.revokeObjectURL(ms),ms=null)};let C0=0,Ac;class $M{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(e=>{const{worker:r}=new Mf;r.addEventListener("message",i=>{r.terminate(),Mf.revokeObjectURL(),e(i.data)})}),this._isImageBitmapSupported)}loadImageBitmap(e){return this._run("loadImageBitmap",[e])}async _initWorkers(){this._initialized||(this._initialized=!0)}getWorker(){Ac===void 0&&(Ac=navigator.hardwareConcurrency||4);let e=this.workerPool.pop();return!e&&this._createdWorkers<Ac&&(this._createdWorkers++,e=new eT().worker,e.addEventListener("message",r=>{this.complete(r.data),this.returnWorker(r.target),this.next()})),e}returnWorker(e){this.workerPool.push(e)}complete(e){e.error!==void 0?this.resolveHash[e.uuid].reject(e.error):this.resolveHash[e.uuid].resolve(e.data),this.resolveHash[e.uuid]=null}async _run(e,r){await this._initWorkers();const i=new Promise((n,s)=>{this.queue.push({id:e,arguments:r,resolve:n,reject:s})});return this.next(),i}next(){if(!this.queue.length)return;const e=this.getWorker();if(!e)return;const r=this.queue.pop(),i=r.id;this.resolveHash[C0]={resolve:r.resolve,reject:r.reject},e.postMessage({data:r.arguments,uuid:C0++,id:i})}}const P0=new $M;function ma(t,e,r){t.resource.internal=!0;const i=new W(t),n=()=>{delete e.promiseCache[r],qi.has(r)&&qi.remove(r)};return i.baseTexture.once("destroyed",()=>{r in e.promiseCache&&(console.warn("[Assets] A BaseTexture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the BaseTexture."),n())}),i.once("destroyed",()=>{t.destroyed||(console.warn("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),n())}),i}const WM=[".jpeg",".jpg",".png",".webp",".avif"],XM=["image/jpeg","image/png","image/webp","image/avif"];async function YM(t){const e=await j.ADAPTER.fetch(t);if(!e.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${t}: ${e.status} ${e.statusText}`);const r=await e.blob();return await createImageBitmap(r)}const ah={name:"loadTextures",extension:{type:U.LoadParser,priority:sr.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(t){return Fs(t,XM)||Fi(t,WM)},async load(t,e,r){var a;const i=globalThis.createImageBitmap&&this.config.preferCreateImageBitmap;let n;i?this.config.preferWorkers&&await P0.isImageBitmapSupported()?n=await P0.loadImageBitmap(t):n=await YM(t):n=await new Promise((l,u)=>{const h=new Image;h.crossOrigin=this.config.crossOrigin,h.src=t,h.complete?l(h):(h.onload=()=>l(h),h.onerror=c=>u(c))});const s={...e.data};s.resolution??(s.resolution=Kr(t)),i&&((a=s.resourceOptions)==null?void 0:a.ownsImageBitmap)===void 0&&(s.resourceOptions={...s.resourceOptions},s.resourceOptions.ownsImageBitmap=!0);const o=new ee(n,s);return o.resource.src=t,ma(o,r,t)},unload(t){t.destroy(!0)}};X.add(ah);const KM=".svg",qM="image/svg+xml",ZM={extension:{type:U.LoadParser,priority:sr.High},name:"loadSVG",test(t){return Fs(t,qM)||Fi(t,KM)},async testParse(t){return _f.test(t)},async parse(t,e,r){var s;const i=new _f(t,(s=e==null?void 0:e.data)==null?void 0:s.resourceOptions);await i.load();const n=new ee(i,{resolution:Kr(t),...e==null?void 0:e.data});return n.resource.src=e.src,ma(n,r,e.src)},async load(t,e){return(await j.ADAPTER.fetch(t)).text()},unload:ah.unload};X.add(ZM);const QM=[".mp4",".m4v",".webm",".ogv"],JM=["video/mp4","video/webm","video/ogg"],ek={name:"loadVideo",extension:{type:U.LoadParser,priority:sr.High},config:{defaultAutoPlay:!0,defaultUpdateFPS:0,defaultLoop:!1,defaultMuted:!1,defaultPlaysinline:!0},test(t){return Fs(t,JM)||Fi(t,QM)},async load(t,e,r){var o;let i;const n=await(await j.ADAPTER.fetch(t)).blob(),s=URL.createObjectURL(n);try{const a={autoPlay:this.config.defaultAutoPlay,updateFPS:this.config.defaultUpdateFPS,loop:this.config.defaultLoop,muted:this.config.defaultMuted,playsinline:this.config.defaultPlaysinline,...(o=e==null?void 0:e.data)==null?void 0:o.resourceOptions,autoLoad:!0},l=new Ww(s,a);await l.load();const u=new ee(l,{alphaMode:await oI(),resolution:Kr(t),...e==null?void 0:e.data});u.resource.src=t,i=ma(u,r,t),i.baseTexture.once("destroyed",()=>{URL.revokeObjectURL(s)})}catch(a){throw URL.revokeObjectURL(s),a}return i},unload(t){t.destroy(!0)}};X.add(ek);class tk{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(e,r)=>`${e}${this._bundleIdConnector}${r}`,extractAssetIdFromBundle:(e,r)=>r.replace(`${e}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(e){if(this._bundleIdConnector=e.connector??this._bundleIdConnector,this._createBundleAssetId=e.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=e.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...e){e.forEach(r=>{this._preferredOrder.push(r),r.priority||(r.priority=Object.keys(r.params))}),this._resolverHash={}}set basePath(e){this._basePath=e}get basePath(){return this._basePath}set rootPath(e){this._rootPath=e}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(e){if(typeof e=="string")this._defaultSearchParams=e;else{const r=e;this._defaultSearchParams=Object.keys(r).map(i=>`${encodeURIComponent(i)}=${encodeURIComponent(r[i])}`).join("&")}}getAlias(e){const{alias:r,name:i,src:n,srcs:s}=e;return Jt(r||i||n||s,o=>typeof o=="string"?o:Array.isArray(o)?o.map(a=>(a==null?void 0:a.src)??(a==null?void 0:a.srcs)??a):o!=null&&o.src||o!=null&&o.srcs?o.src??o.srcs:o,!0)}addManifest(e){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=e,e.bundles.forEach(r=>{this.addBundle(r.name,r.assets)})}addBundle(e,r){const i=[];Array.isArray(r)?r.forEach(n=>{const s=n.src??n.srcs,o=n.alias??n.name;let a;if(typeof o=="string"){const l=this._createBundleAssetId(e,o);i.push(l),a=[o,l]}else{const l=o.map(u=>this._createBundleAssetId(e,u));i.push(...l),a=[...o,...l]}this.add({...n,alias:a,src:s})}):Object.keys(r).forEach(n=>{const s=[n,this._createBundleAssetId(e,n)];if(typeof r[n]=="string")this.add({alias:s,src:r[n]});else if(Array.isArray(r[n]))this.add({alias:s,src:r[n]});else{const o=r[n],a=o.src??o.srcs;this.add({...o,alias:s,src:Array.isArray(a)?a:[a]})}i.push(...s)}),this._bundles[e]=i}add(e,r,i,n,s){const o=[];typeof e=="string"||Array.isArray(e)&&typeof e[0]=="string"?(ne("7.2.0",`Assets.add now uses an object instead of individual parameters.
Please use Assets.add({ alias, src, data, format, loadParser }) instead.`),o.push({alias:e,src:r,data:i,format:n,loadParser:s})):Array.isArray(e)?o.push(...e):o.push(e);let a;a=l=>{this.hasKey(l)&&console.warn(`[Resolver] already has key: ${l} overwriting`)},Jt(o).forEach(l=>{const{src:u,srcs:h}=l;let{data:c,format:d,loadParser:f}=l;const p=Jt(u||h).map(y=>typeof y=="string"?bM(y):Array.isArray(y)?y:[y]),g=this.getAlias(l);Array.isArray(g)?g.forEach(a):a(g);const x=[];p.forEach(y=>{y.forEach(v=>{let m={};if(typeof v!="object"){m.src=v;for(let _=0;_<this._parsers.length;_++){const w=this._parsers[_];if(w.test(v)){m=w.parse(v);break}}}else c=v.data??c,d=v.format??d,f=v.loadParser??f,m={...m,...v};if(!g)throw new Error(`[Resolver] alias is undefined for this asset: ${m.src}`);m=this.buildResolvedAsset(m,{aliases:g,data:c,format:d,loadParser:f}),x.push(m)})}),g.forEach(y=>{this._assetMap[y]=x})})}resolveBundle(e){const r=Tu(e);e=Jt(e);const i={};return e.forEach(n=>{const s=this._bundles[n];if(s){const o=this.resolve(s),a={};for(const l in o){const u=o[l];a[this._extractAssetIdFromBundle(n,l)]=u}i[n]=a}}),r?i[e[0]]:i}resolveUrl(e){const r=this.resolve(e);if(typeof e!="string"){const i={};for(const n in r)i[n]=r[n].src;return i}return r.src}resolve(e){const r=Tu(e);e=Jt(e);const i={};return e.forEach(n=>{if(!this._resolverHash[n])if(this._assetMap[n]){let s=this._assetMap[n];const o=s[0],a=this._getPreferredOrder(s);a==null||a.priority.forEach(l=>{a.params[l].forEach(u=>{const h=s.filter(c=>c[l]?c[l]===u:!1);h.length&&(s=h)})}),this._resolverHash[n]=s[0]??o}else this._resolverHash[n]=this.buildResolvedAsset({alias:[n],src:n},{});i[n]=this._resolverHash[n]}),r?i[e[0]]:i}hasKey(e){return!!this._assetMap[e]}hasBundle(e){return!!this._bundles[e]}_getPreferredOrder(e){for(let r=0;r<e.length;r++){const i=e[0],n=this._preferredOrder.find(s=>s.params.format.includes(i.format));if(n)return n}return this._preferredOrder[0]}_appendDefaultSearchParams(e){if(!this._defaultSearchParams)return e;const r=/\?/.test(e)?"&":"?";return`${e}${r}${this._defaultSearchParams}`}buildResolvedAsset(e,r){const{aliases:i,data:n,loadParser:s,format:o}=r;return(this._basePath||this._rootPath)&&(e.src=Ke.toAbsolute(e.src,this._basePath,this._rootPath)),e.alias=i??e.alias??[e.src],e.src=this._appendDefaultSearchParams(e.src),e.data={...n||{},...e.data},e.loadParser=s??e.loadParser,e.format=o??e.format??Ke.extname(e.src).slice(1),e.srcs=e.src,e.name=e.alias,e}}class rk{constructor(){this._detections=[],this._initialized=!1,this.resolver=new tk,this.loader=new PM,this.cache=qi,this._backgroundLoader=new AM(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(e={}){var s,o;if(this._initialized){console.warn("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,e.defaultSearchParams&&this.resolver.setDefaultSearchParams(e.defaultSearchParams),e.basePath&&(this.resolver.basePath=e.basePath),e.bundleIdentifier&&this.resolver.setBundleIdentifier(e.bundleIdentifier),e.manifest){let a=e.manifest;typeof a=="string"&&(a=await this.load(a)),this.resolver.addManifest(a)}const r=((s=e.texturePreference)==null?void 0:s.resolution)??1,i=typeof r=="number"?[r]:r,n=await this._detectFormats({preferredFormats:(o=e.texturePreference)==null?void 0:o.format,skipDetections:e.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:n,resolution:i}}),e.preferences&&this.setPreferences(e.preferences)}add(e,r,i,n,s){this.resolver.add(e,r,i,n,s)}async load(e,r){this._initialized||await this.init();const i=Tu(e),n=Jt(e).map(a=>{if(typeof a!="string"){const l=this.resolver.getAlias(a);return l.some(u=>!this.resolver.hasKey(u))&&this.add(a),Array.isArray(l)?l[0]:l}return this.resolver.hasKey(a)||this.add({alias:a,src:a}),a}),s=this.resolver.resolve(n),o=await this._mapLoadToResolve(s,r);return i?o[n[0]]:o}addBundle(e,r){this.resolver.addBundle(e,r)}async loadBundle(e,r){this._initialized||await this.init();let i=!1;typeof e=="string"&&(i=!0,e=[e]);const n=this.resolver.resolveBundle(e),s={},o=Object.keys(n);let a=0,l=0;const u=()=>{r==null||r(++a/l)},h=o.map(c=>{const d=n[c];return l+=Object.keys(d).length,this._mapLoadToResolve(d,u).then(f=>{s[c]=f})});return await Promise.all(h),i?s[e[0]]:s}async backgroundLoad(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const r=this.resolver.resolve(e);this._backgroundLoader.add(Object.values(r))}async backgroundLoadBundle(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const r=this.resolver.resolveBundle(e);Object.values(r).forEach(i=>{this._backgroundLoader.add(Object.values(i))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(e){if(typeof e=="string")return qi.get(e);const r={};for(let i=0;i<e.length;i++)r[i]=qi.get(e[i]);return r}async _mapLoadToResolve(e,r){const i=Object.values(e),n=Object.keys(e);this._backgroundLoader.active=!1;const s=await this.loader.load(i,r);this._backgroundLoader.active=!0;const o={};return i.forEach((a,l)=>{const u=s[a.src],h=[a.src];a.alias&&h.push(...a.alias),o[n[l]]=u,qi.set(h,u)}),o}async unload(e){this._initialized||await this.init();const r=Jt(e).map(n=>typeof n!="string"?n.src:n),i=this.resolver.resolve(r);await this._unloadFromResolved(i)}async unloadBundle(e){this._initialized||await this.init(),e=Jt(e);const r=this.resolver.resolveBundle(e),i=Object.keys(r).map(n=>this._unloadFromResolved(r[n]));await Promise.all(i)}async _unloadFromResolved(e){const r=Object.values(e);r.forEach(i=>{qi.remove(i.src)}),await this.loader.unload(r)}async _detectFormats(e){let r=[];e.preferredFormats&&(r=Array.isArray(e.preferredFormats)?e.preferredFormats:[e.preferredFormats]);for(const i of e.detections)e.skipDetections||await i.test()?r=await i.add(r):e.skipDetections||(r=await i.remove(r));return r=r.filter((i,n)=>r.indexOf(i)===n),r}get detections(){return this._detections}get preferWorkers(){return ah.config.preferWorkers}set preferWorkers(e){ne("7.2.0","Assets.prefersWorkers is deprecated, use Assets.setPreferences({ preferWorkers: true }) instead."),this.setPreferences({preferWorkers:e})}setPreferences(e){this.loader.parsers.forEach(r=>{r.config&&Object.keys(r.config).filter(i=>i in e).forEach(i=>{r.config[i]=e[i]})})}}const Ja=new rk;X.handleByList(U.LoadParser,Ja.loader.parsers).handleByList(U.ResolveParser,Ja.resolver.parsers).handleByList(U.CacheParser,Ja.cache.parsers).handleByList(U.DetectionParser,Ja.detections);const ik={extension:U.CacheParser,test:t=>Array.isArray(t)&&t.every(e=>e instanceof W),getCacheableAssets:(t,e)=>{const r={};return t.forEach(i=>{e.forEach((n,s)=>{r[i+(s===0?"":s+1)]=n})}),r}};X.add(ik);async function tT(t){if("Image"in globalThis)return new Promise(e=>{const r=new Image;r.onload=()=>{e(!0)},r.onerror=()=>{e(!1)},r.src=t});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const e=await(await fetch(t)).blob();await createImageBitmap(e)}catch{return!1}return!0}return!1}const nk={extension:{type:U.DetectionParser,priority:1},test:async()=>tT("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async t=>[...t,"avif"],remove:async t=>t.filter(e=>e!=="avif")};X.add(nk);const sk={extension:{type:U.DetectionParser,priority:0},test:async()=>tT("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async t=>[...t,"webp"],remove:async t=>t.filter(e=>e!=="webp")};X.add(sk);const R0=["png","jpg","jpeg"],ok={extension:{type:U.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async t=>[...t,...R0],remove:async t=>t.filter(e=>!R0.includes(e))};X.add(ok);const ak="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function am(t){return ak?!1:document.createElement("video").canPlayType(t)!==""}const lk={extension:{type:U.DetectionParser,priority:0},test:async()=>am("video/webm"),add:async t=>[...t,"webm"],remove:async t=>t.filter(e=>e!=="webm")};X.add(lk);const uk={extension:{type:U.DetectionParser,priority:0},test:async()=>am("video/mp4"),add:async t=>[...t,"mp4","m4v"],remove:async t=>t.filter(e=>e!=="mp4"&&e!=="m4v")};X.add(uk);const hk={extension:{type:U.DetectionParser,priority:0},test:async()=>am("video/ogg"),add:async t=>[...t,"ogv"],remove:async t=>t.filter(e=>e!=="ogv")};X.add(hk);const ck={extension:U.ResolveParser,test:ah.test,parse:t=>{var e;return{resolution:parseFloat(((e=j.RETINA_PREFIX.exec(t))==null?void 0:e[1])??"1"),format:Ke.extname(t).slice(1),src:t}}};X.add(ck);var Ze=(t=>(t[t.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",t[t.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",t[t.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",t[t.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",t[t.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",t[t.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",t[t.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",t[t.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",t[t.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",t[t.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",t[t.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",t[t.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35987]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",t[t.COMPRESSED_RGBA_BPTC_UNORM_EXT=36492]="COMPRESSED_RGBA_BPTC_UNORM_EXT",t[t.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT=36493]="COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT",t[t.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT=36494]="COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT",t[t.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT=36495]="COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT",t))(Ze||{});const Eu={33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,35840:.5,35842:.5,35841:.25,35843:.25,36196:.5,35986:.5,35987:1,34798:1,37808:1,36492:1,36493:1,36494:1,36495:1};let dr,Fn;function I0(){Fn={bptc:dr.getExtension("EXT_texture_compression_bptc"),astc:dr.getExtension("WEBGL_compressed_texture_astc"),etc:dr.getExtension("WEBGL_compressed_texture_etc"),s3tc:dr.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:dr.getExtension("WEBGL_compressed_texture_s3tc_srgb"),pvrtc:dr.getExtension("WEBGL_compressed_texture_pvrtc")||dr.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),etc1:dr.getExtension("WEBGL_compressed_texture_etc1"),atc:dr.getExtension("WEBGL_compressed_texture_atc")}}const dk={extension:{type:U.DetectionParser,priority:2},test:async()=>{const t=j.ADAPTER.createCanvas().getContext("webgl");return t?(dr=t,!0):(console.warn("WebGL not available for compressed textures."),!1)},add:async t=>{Fn||I0();const e=[];for(const r in Fn)Fn[r]&&e.push(r);return[...e,...t]},remove:async t=>(Fn||I0(),t.filter(e=>!(e in Fn)))};X.add(dk);class fk extends rh{constructor(e,r={width:1,height:1,autoLoad:!0}){let i,n;typeof e=="string"?(i=e,n=new Uint8Array):(i=null,n=e),super(n,r),this.origin=i,this.buffer=n?new af(n):null,this._load=null,this.loaded=!1,this.origin!==null&&r.autoLoad!==!1&&this.load(),this.origin===null&&this.buffer&&(this._load=Promise.resolve(this),this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(e){}load(){return this._load?this._load:(this._load=fetch(this.origin).then(e=>e.blob()).then(e=>e.arrayBuffer()).then(e=>(this.data=new Uint32Array(e),this.buffer=new af(e),this.loaded=!0,this.onBlobLoaded(e),this.update(),this)),this._load)}}class on extends fk{constructor(e,r){super(e,r),this.format=r.format,this.levels=r.levels||1,this._width=r.width,this._height=r.height,this._extension=on._formatToExtension(this.format),(r.levelBuffers||this.buffer)&&(this._levelBuffers=r.levelBuffers||on._createLevelBuffers(e instanceof Uint8Array?e:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(e,r,i){const n=e.gl;if(!e.context.extensions[this._extension])throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;n.pixelStorei(n.UNPACK_ALIGNMENT,4);for(let s=0,o=this.levels;s<o;s++){const{levelID:a,levelWidth:l,levelHeight:u,levelBuffer:h}=this._levelBuffers[s];n.compressedTexImage2D(n.TEXTURE_2D,a,this.format,l,u,0,h)}return!0}onBlobLoaded(){this._levelBuffers=on._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(e){if(e>=33776&&e<=33779)return"s3tc";if(e>=35916&&e<=35919)return"s3tc_sRGB";if(e>=37488&&e<=37497)return"etc";if(e>=35840&&e<=35843)return"pvrtc";if(e===36196)return"etc1";if(e===35986||e===35987||e===34798)return"atc";if(e>=36492&&e<=36495)return"bptc";if(e===37808)return"astc";throw new Error(`Invalid (compressed) texture format given: ${e}`)}static _createLevelBuffers(e,r,i,n,s,o,a){const l=new Array(i);let u=e.byteOffset,h=o,c=a,d=h+n-1&~(n-1),f=c+s-1&~(s-1),p=d*f*Eu[r];for(let g=0;g<i;g++)l[g]={levelID:g,levelWidth:i>1?h:d,levelHeight:i>1?c:f,levelBuffer:new Uint8Array(e.buffer,u,p)},u+=p,h=h>>1||1,c=c>>1||1,d=h+n-1&~(n-1),f=c+s-1&~(s-1),p=d*f*Eu[r];return l}}const bc=4,el=124,pk=32,M0=20,mk=542327876,tl={HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},gk={FOURCC:2},rl={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3},yk=1,vk=2,xk=4,_k=64,wk=512,Tk=131072,Ek=827611204,Sk=861165636,Ak=894720068,bk=808540228,Ck=4,Pk={[Ek]:Ze.COMPRESSED_RGBA_S3TC_DXT1_EXT,[Sk]:Ze.COMPRESSED_RGBA_S3TC_DXT3_EXT,[Ak]:Ze.COMPRESSED_RGBA_S3TC_DXT5_EXT},Rk={70:Ze.COMPRESSED_RGBA_S3TC_DXT1_EXT,71:Ze.COMPRESSED_RGBA_S3TC_DXT1_EXT,73:Ze.COMPRESSED_RGBA_S3TC_DXT3_EXT,74:Ze.COMPRESSED_RGBA_S3TC_DXT3_EXT,76:Ze.COMPRESSED_RGBA_S3TC_DXT5_EXT,77:Ze.COMPRESSED_RGBA_S3TC_DXT5_EXT,72:Ze.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,75:Ze.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,78:Ze.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,96:Ze.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT,95:Ze.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT,98:Ze.COMPRESSED_RGBA_BPTC_UNORM_EXT,99:Ze.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT};function Ik(t){const e=new Uint32Array(t);if(e[0]!==mk)throw new Error("Invalid DDS file magic word");const r=new Uint32Array(t,0,el/Uint32Array.BYTES_PER_ELEMENT),i=r[tl.HEIGHT],n=r[tl.WIDTH],s=r[tl.MIPMAP_COUNT],o=new Uint32Array(t,tl.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,pk/Uint32Array.BYTES_PER_ELEMENT),a=o[yk];if(a&xk){const l=o[gk.FOURCC];if(l!==bk){const v=Pk[l],m=bc+el,_=new Uint8Array(t,m);return[new on(_,{format:v,width:n,height:i,levels:s})]}const u=bc+el,h=new Uint32Array(e.buffer,u,M0/Uint32Array.BYTES_PER_ELEMENT),c=h[rl.DXGI_FORMAT],d=h[rl.RESOURCE_DIMENSION],f=h[rl.MISC_FLAG],p=h[rl.ARRAY_SIZE],g=Rk[c];if(g===void 0)throw new Error(`DDSParser cannot parse texture data with DXGI format ${c}`);if(f===Ck)throw new Error("DDSParser does not support cubemap textures");if(d===6)throw new Error("DDSParser does not supported 3D texture data");const x=new Array,y=bc+el+M0;if(p===1)x.push(new Uint8Array(t,y));else{const v=Eu[g];let m=0,_=n,w=i;for(let E=0;E<s;E++){const T=Math.max(1,_+3&-4),C=Math.max(1,w+3&-4),A=T*C*v;m+=A,_=_>>>1,w=w>>>1}let S=y;for(let E=0;E<p;E++)x.push(new Uint8Array(t,S,m)),S+=m}return x.map(v=>new on(v,{format:g,width:n,height:i,levels:s}))}throw a&_k?new Error("DDSParser does not support uncompressed texture data."):a&wk?new Error("DDSParser does not supported YUV uncompressed texture data."):a&Tk?new Error("DDSParser does not support single-channel (lumninance) texture data!"):a&vk?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}const k0=[171,75,84,88,32,49,49,187,13,10,26,10],Mk=67305985,Wt={ENDIANNESS:12,GL_TYPE:16,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},kf=64,D0={[K.UNSIGNED_BYTE]:1,[K.UNSIGNED_SHORT]:2,[K.INT]:4,[K.UNSIGNED_INT]:4,[K.FLOAT]:4,[K.HALF_FLOAT]:8},kk={[L.RGBA]:4,[L.RGB]:3,[L.RG]:2,[L.RED]:1,[L.LUMINANCE]:1,[L.LUMINANCE_ALPHA]:2,[L.ALPHA]:1},Dk={[K.UNSIGNED_SHORT_4_4_4_4]:2,[K.UNSIGNED_SHORT_5_5_5_1]:2,[K.UNSIGNED_SHORT_5_6_5]:2};function Fk(t,e,r=!1){const i=new DataView(e);if(!Bk(t,i))return null;const n=i.getUint32(Wt.ENDIANNESS,!0)===Mk,s=i.getUint32(Wt.GL_TYPE,n),o=i.getUint32(Wt.GL_FORMAT,n),a=i.getUint32(Wt.GL_INTERNAL_FORMAT,n),l=i.getUint32(Wt.PIXEL_WIDTH,n),u=i.getUint32(Wt.PIXEL_HEIGHT,n)||1,h=i.getUint32(Wt.PIXEL_DEPTH,n)||1,c=i.getUint32(Wt.NUMBER_OF_ARRAY_ELEMENTS,n)||1,d=i.getUint32(Wt.NUMBER_OF_FACES,n),f=i.getUint32(Wt.NUMBER_OF_MIPMAP_LEVELS,n),p=i.getUint32(Wt.BYTES_OF_KEY_VALUE_DATA,n);if(u===0||h!==1)throw new Error("Only 2D textures are supported");if(d!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(c!==1)throw new Error("WebGL does not support array textures");const g=4,x=4,y=l+3&-4,v=u+3&-4,m=new Array(c);let _=l*u;s===0&&(_=y*v);let w;if(s!==0?D0[s]?w=D0[s]*kk[o]:w=Dk[s]:w=Eu[a],w===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");const S=r?Nk(i,p,n):null;let E=_*w,T=l,C=u,A=y,B=v,D=kf+p;for(let b=0;b<f;b++){const M=i.getUint32(D,n);let z=D+4;for(let q=0;q<c;q++){let O=m[q];O||(O=m[q]=new Array(f)),O[b]={levelID:b,levelWidth:f>1||s!==0?T:A,levelHeight:f>1||s!==0?C:B,levelBuffer:new Uint8Array(e,z,E)},z+=E}D+=M+4,D=D%4!==0?D+4-D%4:D,T=T>>1||1,C=C>>1||1,A=T+g-1&-4,B=C+x-1&-4,E=A*B*w}return s!==0?{uncompressed:m.map(b=>{let M=b[0].levelBuffer,z=!1;return s===K.FLOAT?M=new Float32Array(b[0].levelBuffer.buffer,b[0].levelBuffer.byteOffset,b[0].levelBuffer.byteLength/4):s===K.UNSIGNED_INT?(z=!0,M=new Uint32Array(b[0].levelBuffer.buffer,b[0].levelBuffer.byteOffset,b[0].levelBuffer.byteLength/4)):s===K.INT&&(z=!0,M=new Int32Array(b[0].levelBuffer.buffer,b[0].levelBuffer.byteOffset,b[0].levelBuffer.byteLength/4)),{resource:new rh(M,{width:b[0].levelWidth,height:b[0].levelHeight}),type:s,format:z?Lk(o):o}}),kvData:S}:{compressed:m.map(b=>new on(null,{format:a,width:l,height:u,levels:f,levelBuffers:b})),kvData:S}}function Bk(t,e){for(let r=0;r<k0.length;r++)if(e.getUint8(r)!==k0[r])return console.error(`${t} is not a valid *.ktx file!`),!1;return!0}function Lk(t){switch(t){case L.RGBA:return L.RGBA_INTEGER;case L.RGB:return L.RGB_INTEGER;case L.RG:return L.RG_INTEGER;case L.RED:return L.RED_INTEGER;default:return t}}function Nk(t,e,r){const i=new Map;let n=0;for(;n<e;){const s=t.getUint32(kf+n,r),o=kf+n+4,a=3-(s+3)%4;if(s===0||s>e-n){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let l=0;for(;l<s&&t.getUint8(o+l)!==0;l++);if(l===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}const u=new TextDecoder().decode(new Uint8Array(t.buffer,o,l)),h=new DataView(t.buffer,o+l+1,s-l-1);i.set(u,h),n+=4+s+a}return i}const Ok={extension:{type:U.LoadParser,priority:sr.High},name:"loadDDS",test(t){return Fi(t,".dds")},async load(t,e,r){const i=await(await j.ADAPTER.fetch(t)).arrayBuffer(),n=Ik(i).map(s=>{const o=new ee(s,{mipmap:Cr.OFF,alphaMode:yt.NO_PREMULTIPLIED_ALPHA,resolution:Kr(t),...e.data});return ma(o,r,t)});return n.length===1?n[0]:n},unload(t){Array.isArray(t)?t.forEach(e=>e.destroy(!0)):t.destroy(!0)}};X.add(Ok);const Uk={extension:{type:U.LoadParser,priority:sr.High},name:"loadKTX",test(t){return Fi(t,".ktx")},async load(t,e,r){const i=await(await j.ADAPTER.fetch(t)).arrayBuffer(),{compressed:n,uncompressed:s,kvData:o}=Fk(t,i),a=n??s,l={mipmap:Cr.OFF,alphaMode:yt.NO_PREMULTIPLIED_ALPHA,resolution:Kr(t),...e.data},u=a.map(h=>{a===s&&Object.assign(l,{type:h.type,format:h.format});const c=h.resource??h,d=new ee(c,l);return d.ktxKeyValueData=o,ma(d,r,t)});return u.length===1?u[0]:u},unload(t){Array.isArray(t)?t.forEach(e=>e.destroy(!0)):t.destroy(!0)}};X.add(Uk);const Gk=["s3tc","s3tc_sRGB","etc","etc1","pvrtc","atc","astc","bptc"],Vk={extension:U.ResolveParser,test:t=>{const e=Ke.extname(t).slice(1);return["basis","ktx","dds"].includes(e)},parse:t=>{var i,n;const e=t.split("."),r=e.pop();if(["ktx","dds"].includes(r)){const s=e.pop();if(Gk.includes(s))return{resolution:parseFloat(((i=j.RETINA_PREFIX.exec(t))==null?void 0:i[1])??"1"),format:s,src:t}}return{resolution:parseFloat(((n=j.RETINA_PREFIX.exec(t))==null?void 0:n[1])??"1"),format:r,src:t}}};X.add(Vk);const il=new te,jk=4,rT=class oo{constructor(e){this.renderer=e,this._rendererPremultipliedAlpha=!1}contextChange(){var r;const e=(r=this.renderer)==null?void 0:r.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(e&&e.alpha&&e.premultipliedAlpha)}async image(e,r,i,n){const s=new Image;return s.src=await this.base64(e,r,i,n),s}async base64(e,r,i,n){const s=this.canvas(e,n);if(s.toBlob!==void 0)return new Promise((o,a)=>{s.toBlob(l=>{if(!l){a(new Error("ICanvas.toBlob failed!"));return}const u=new FileReader;u.onload=()=>o(u.result),u.onerror=a,u.readAsDataURL(l)},r,i)});if(s.toDataURL!==void 0)return s.toDataURL(r,i);if(s.convertToBlob!==void 0){const o=await s.convertToBlob({type:r,quality:i});return new Promise((a,l)=>{const u=new FileReader;u.onload=()=>a(u.result),u.onerror=l,u.readAsDataURL(o)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")}canvas(e,r){const{pixels:i,width:n,height:s,flipY:o,premultipliedAlpha:a}=this._rawPixels(e,r);o&&oo._flipY(i,n,s),a&&oo._unpremultiplyAlpha(i);const l=new TI(n,s,1),u=new ImageData(new Uint8ClampedArray(i.buffer),n,s);return l.context.putImageData(u,0,0),l.canvas}pixels(e,r){const{pixels:i,width:n,height:s,flipY:o,premultipliedAlpha:a}=this._rawPixels(e,r);return o&&oo._flipY(i,n,s),a&&oo._unpremultiplyAlpha(i),i}_rawPixels(e,r){const i=this.renderer;if(!i)throw new Error("The Extract has already been destroyed");let n,s=!1,o=!1,a,l=!1;e&&(e instanceof wn?a=e:(a=i.generateTexture(e,{region:r,resolution:i.resolution,multisample:i.multisample}),l=!0,r&&(il.width=r.width,il.height=r.height,r=il)));const u=i.gl;if(a){if(n=a.baseTexture.resolution,r=r??a.frame,s=!1,o=a.baseTexture.alphaMode>0&&a.baseTexture.format===L.RGBA,!l){i.renderTexture.bind(a);const f=a.framebuffer.glFramebuffers[i.CONTEXT_UID];f.blitFramebuffer&&i.framebuffer.bind(f.blitFramebuffer)}}else n=i.resolution,r||(r=il,r.width=i.width/n,r.height=i.height/n),s=!0,o=this._rendererPremultipliedAlpha,i.renderTexture.bind();const h=Math.max(Math.round(r.width*n),1),c=Math.max(Math.round(r.height*n),1),d=new Uint8Array(jk*h*c);return u.readPixels(Math.round(r.x*n),Math.round(r.y*n),h,c,u.RGBA,u.UNSIGNED_BYTE,d),l&&(a==null||a.destroy(!0)),{pixels:d,width:h,height:c,flipY:s,premultipliedAlpha:o}}destroy(){this.renderer=null}static _flipY(e,r,i){const n=r<<2,s=i>>1,o=new Uint8Array(n);for(let a=0;a<s;a++){const l=a*n,u=(i-a-1)*n;o.set(e.subarray(l,l+n)),e.copyWithin(l,u,u+n),e.set(o,u)}}static _unpremultiplyAlpha(e){e instanceof Uint8ClampedArray&&(e=new Uint8Array(e.buffer));const r=e.length;for(let i=0;i<r;i+=4){const n=e[i+3];if(n!==0){const s=255.001/n;e[i]=e[i]*s+.5,e[i+1]=e[i+1]*s+.5,e[i+2]=e[i+2]*s+.5}}}};rT.extension={name:"extract",type:U.RendererSystem};let zk=rT;X.add(zk);const Su={build(t){const e=t.points;let r,i,n,s,o,a;if(t.type===et.CIRC){const p=t.shape;r=p.x,i=p.y,o=a=p.radius,n=s=0}else if(t.type===et.ELIP){const p=t.shape;r=p.x,i=p.y,o=p.width,a=p.height,n=s=0}else{const p=t.shape,g=p.width/2,x=p.height/2;r=p.x+g,i=p.y+x,o=a=Math.max(0,Math.min(p.radius,Math.min(g,x))),n=g-o,s=x-a}if(!(o>=0&&a>=0&&n>=0&&s>=0)){e.length=0;return}const l=Math.ceil(2.3*Math.sqrt(o+a)),u=l*8+(n?4:0)+(s?4:0);if(e.length=u,u===0)return;if(l===0){e.length=8,e[0]=e[6]=r+n,e[1]=e[3]=i+s,e[2]=e[4]=r-n,e[5]=e[7]=i-s;return}let h=0,c=l*4+(n?2:0)+2,d=c,f=u;{const p=n+o,g=s,x=r+p,y=r-p,v=i+g;if(e[h++]=x,e[h++]=v,e[--c]=v,e[--c]=y,s){const m=i-g;e[d++]=y,e[d++]=m,e[--f]=m,e[--f]=x}}for(let p=1;p<l;p++){const g=Math.PI/2*(p/l),x=n+Math.cos(g)*o,y=s+Math.sin(g)*a,v=r+x,m=r-x,_=i+y,w=i-y;e[h++]=v,e[h++]=_,e[--c]=_,e[--c]=m,e[d++]=m,e[d++]=w,e[--f]=w,e[--f]=v}{const p=n,g=s+a,x=r+p,y=r-p,v=i+g,m=i-g;e[h++]=x,e[h++]=v,e[--f]=m,e[--f]=x,n&&(e[h++]=y,e[h++]=v,e[--f]=m,e[--f]=y)}},triangulate(t,e){const r=t.points,i=e.points,n=e.indices;if(r.length===0)return;let s=i.length/2;const o=s;let a,l;if(t.type!==et.RREC){const h=t.shape;a=h.x,l=h.y}else{const h=t.shape;a=h.x+h.width/2,l=h.y+h.height/2}const u=t.matrix;i.push(t.matrix?u.a*a+u.c*l+u.tx:a,t.matrix?u.b*a+u.d*l+u.ty:l),s++,i.push(r[0],r[1]);for(let h=2;h<r.length;h+=2)i.push(r[h],r[h+1]),n.push(s++,o,s);n.push(o+1,o,s)}};function F0(t,e=!1){const r=t.length;if(r<6)return;let i=0;for(let n=0,s=t[r-2],o=t[r-1];n<r;n+=2){const a=t[n],l=t[n+1];i+=(a-s)*(l+o),s=a,o=l}if(!e&&i>0||e&&i<=0){const n=r/2;for(let s=n+n%2;s<r;s+=2){const o=r-s-2,a=r-s-1,l=s,u=s+1;[t[o],t[l]]=[t[l],t[o]],[t[a],t[u]]=[t[u],t[a]]}}}const iT={build(t){t.points=t.shape.points.slice()},triangulate(t,e){let r=t.points;const i=t.holes,n=e.points,s=e.indices;if(r.length>=6){F0(r,!1);const o=[];for(let u=0;u<i.length;u++){const h=i[u];F0(h.points,!0),o.push(r.length/2),r=r.concat(h.points)}const a=Xb(r,o,2);if(!a)return;const l=n.length/2;for(let u=0;u<a.length;u+=3)s.push(a[u]+l),s.push(a[u+1]+l),s.push(a[u+2]+l);for(let u=0;u<r.length;u++)n.push(r[u])}}},Hk={build(t){const e=t.shape,r=e.x,i=e.y,n=e.width,s=e.height,o=t.points;o.length=0,n>=0&&s>=0&&o.push(r,i,r+n,i,r+n,i+s,r,i+s)},triangulate(t,e){const r=t.points,i=e.points;if(r.length===0)return;const n=i.length/2;i.push(r[0],r[1],r[2],r[3],r[6],r[7],r[4],r[5]),e.indices.push(n,n+1,n+2,n+1,n+2,n+3)}},$k={build(t){Su.build(t)},triangulate(t,e){Su.triangulate(t,e)}};var Ft=(t=>(t.MITER="miter",t.BEVEL="bevel",t.ROUND="round",t))(Ft||{}),mi=(t=>(t.BUTT="butt",t.ROUND="round",t.SQUARE="square",t))(mi||{});const As={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(t,e=20){if(!this.adaptive||!t||isNaN(t))return e;let r=Math.ceil(t/this.maxLength);return r<this.minSegments?r=this.minSegments:r>this.maxSegments&&(r=this.maxSegments),r}};class B0{static curveTo(e,r,i,n,s,o){const a=o[o.length-2],l=o[o.length-1]-r,u=a-e,h=n-r,c=i-e,d=Math.abs(l*c-u*h);if(d<1e-8||s===0)return(o[o.length-2]!==e||o[o.length-1]!==r)&&o.push(e,r),null;const f=l*l+u*u,p=h*h+c*c,g=l*h+u*c,x=s*Math.sqrt(f)/d,y=s*Math.sqrt(p)/d,v=x*g/f,m=y*g/p,_=x*c+y*u,w=x*h+y*l,S=u*(y+v),E=l*(y+v),T=c*(x+m),C=h*(x+m),A=Math.atan2(E-w,S-_),B=Math.atan2(C-w,T-_);return{cx:_+e,cy:w+r,radius:s,startAngle:A,endAngle:B,anticlockwise:u*h>c*l}}static arc(e,r,i,n,s,o,a,l,u){const h=a-o,c=As._segmentsCount(Math.abs(h)*s,Math.ceil(Math.abs(h)/mu)*40),d=h/(c*2),f=d*2,p=Math.cos(d),g=Math.sin(d),x=c-1,y=x%1/x;for(let v=0;v<=x;++v){const m=v+y*v,_=d+o+f*m,w=Math.cos(_),S=-Math.sin(_);u.push((p*w+g*S)*s+i,(p*-S+g*w)*s+n)}}}class Wk{constructor(){this.reset()}begin(e,r,i){this.reset(),this.style=e,this.start=r,this.attribStart=i}end(e,r){this.attribSize=r-this.attribStart,this.size=e-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}class lm{static curveLength(e,r,i,n,s,o,a,l){let u=0,h=0,c=0,d=0,f=0,p=0,g=0,x=0,y=0,v=0,m=0,_=e,w=r;for(let S=1;S<=10;++S)h=S/10,c=h*h,d=c*h,f=1-h,p=f*f,g=p*f,x=g*e+3*p*h*i+3*f*c*s+d*a,y=g*r+3*p*h*n+3*f*c*o+d*l,v=_-x,m=w-y,_=x,w=y,u+=Math.sqrt(v*v+m*m);return u}static curveTo(e,r,i,n,s,o,a){const l=a[a.length-2],u=a[a.length-1];a.length-=2;const h=As._segmentsCount(lm.curveLength(l,u,e,r,i,n,s,o));let c=0,d=0,f=0,p=0,g=0;a.push(l,u);for(let x=1,y=0;x<=h;++x)y=x/h,c=1-y,d=c*c,f=d*c,p=y*y,g=p*y,a.push(f*l+3*d*y*e+3*c*p*i+g*s,f*u+3*d*y*r+3*c*p*n+g*o)}}function L0(t,e,r,i,n,s,o,a){const l=t-r*n,u=e-i*n,h=t+r*s,c=e+i*s;let d,f;o?(d=i,f=-r):(d=-i,f=r);const p=l+d,g=u+f,x=h+d,y=c+f;return a.push(p,g,x,y),2}function Ni(t,e,r,i,n,s,o,a){const l=r-t,u=i-e;let h=Math.atan2(l,u),c=Math.atan2(n-t,s-e);a&&h<c?h+=Math.PI*2:!a&&h>c&&(c+=Math.PI*2);let d=h;const f=c-h,p=Math.abs(f),g=Math.sqrt(l*l+u*u),x=(15*p*Math.sqrt(g)/Math.PI>>0)+1,y=f/x;if(d+=y,a){o.push(t,e,r,i);for(let v=1,m=d;v<x;v++,m+=y)o.push(t,e,t+Math.sin(m)*g,e+Math.cos(m)*g);o.push(t,e,n,s)}else{o.push(r,i,t,e);for(let v=1,m=d;v<x;v++,m+=y)o.push(t+Math.sin(m)*g,e+Math.cos(m)*g,t,e);o.push(n,s,t,e)}return x*2}function Xk(t,e){const r=t.shape;let i=t.points||r.points.slice();const n=e.closePointEps;if(i.length===0)return;const s=t.lineStyle,o=new ae(i[0],i[1]),a=new ae(i[i.length-2],i[i.length-1]),l=r.type!==et.POLY||r.closeStroke,u=Math.abs(o.x-a.x)<n&&Math.abs(o.y-a.y)<n;if(l){i=i.slice(),u&&(i.pop(),i.pop(),a.set(i[i.length-2],i[i.length-1]));const O=(o.x+a.x)*.5,I=(a.y+o.y)*.5;i.unshift(O,I),i.push(O,I)}const h=e.points,c=i.length/2;let d=i.length;const f=h.length/2,p=s.width/2,g=p*p,x=s.miterLimit*s.miterLimit;let y=i[0],v=i[1],m=i[2],_=i[3],w=0,S=0,E=-(v-_),T=y-m,C=0,A=0,B=Math.sqrt(E*E+T*T);E/=B,T/=B,E*=p,T*=p;const D=s.alignment,b=(1-D)*2,M=D*2;l||(s.cap===mi.ROUND?d+=Ni(y-E*(b-M)*.5,v-T*(b-M)*.5,y-E*b,v-T*b,y+E*M,v+T*M,h,!0)+2:s.cap===mi.SQUARE&&(d+=L0(y,v,E,T,b,M,!0,h))),h.push(y-E*b,v-T*b,y+E*M,v+T*M);for(let O=1;O<c-1;++O){y=i[(O-1)*2],v=i[(O-1)*2+1],m=i[O*2],_=i[O*2+1],w=i[(O+1)*2],S=i[(O+1)*2+1],E=-(v-_),T=y-m,B=Math.sqrt(E*E+T*T),E/=B,T/=B,E*=p,T*=p,C=-(_-S),A=m-w,B=Math.sqrt(C*C+A*A),C/=B,A/=B,C*=p,A*=p;const I=m-y,G=v-_,P=m-w,k=S-_,Z=I*P+G*k,le=G*P-k*I,oe=le<0;if(Math.abs(le)<.001*Math.abs(Z)){h.push(m-E*b,_-T*b,m+E*M,_+T*M),Z>=0&&(s.join===Ft.ROUND?d+=Ni(m,_,m-E*b,_-T*b,m-C*b,_-A*b,h,!1)+4:d+=2,h.push(m-C*M,_-A*M,m+C*b,_+A*b));continue}const Re=(-E+y)*(-T+_)-(-E+m)*(-T+v),ce=(-C+w)*(-A+_)-(-C+m)*(-A+S),we=(I*ce-P*Re)/le,it=(k*Re-G*ce)/le,wt=(we-m)*(we-m)+(it-_)*(it-_),qe=m+(we-m)*b,xe=_+(it-_)*b,Le=m-(we-m)*M,Ge=_-(it-_)*M,or=Math.min(I*I+G*G,P*P+k*k),ar=oe?b:M,Ns=or+ar*ar*g,ZE=wt<=Ns;let _a=s.join;if(_a===Ft.MITER&&wt/g>x&&(_a=Ft.BEVEL),ZE)switch(_a){case Ft.MITER:{h.push(qe,xe,Le,Ge);break}case Ft.BEVEL:{oe?h.push(qe,xe,m+E*M,_+T*M,qe,xe,m+C*M,_+A*M):h.push(m-E*b,_-T*b,Le,Ge,m-C*b,_-A*b,Le,Ge),d+=2;break}case Ft.ROUND:{oe?(h.push(qe,xe,m+E*M,_+T*M),d+=Ni(m,_,m+E*M,_+T*M,m+C*M,_+A*M,h,!0)+4,h.push(qe,xe,m+C*M,_+A*M)):(h.push(m-E*b,_-T*b,Le,Ge),d+=Ni(m,_,m-E*b,_-T*b,m-C*b,_-A*b,h,!1)+4,h.push(m-C*b,_-A*b,Le,Ge));break}}else{switch(h.push(m-E*b,_-T*b,m+E*M,_+T*M),_a){case Ft.MITER:{oe?h.push(Le,Ge,Le,Ge):h.push(qe,xe,qe,xe),d+=2;break}case Ft.ROUND:{oe?d+=Ni(m,_,m+E*M,_+T*M,m+C*M,_+A*M,h,!0)+2:d+=Ni(m,_,m-E*b,_-T*b,m-C*b,_-A*b,h,!1)+2;break}}h.push(m-C*b,_-A*b,m+C*M,_+A*M),d+=2}}y=i[(c-2)*2],v=i[(c-2)*2+1],m=i[(c-1)*2],_=i[(c-1)*2+1],E=-(v-_),T=y-m,B=Math.sqrt(E*E+T*T),E/=B,T/=B,E*=p,T*=p,h.push(m-E*b,_-T*b,m+E*M,_+T*M),l||(s.cap===mi.ROUND?d+=Ni(m-E*(b-M)*.5,_-T*(b-M)*.5,m-E*b,_-T*b,m+E*M,_+T*M,h,!1)+2:s.cap===mi.SQUARE&&(d+=L0(m,_,E,T,b,M,!1,h)));const z=e.indices,q=As.epsilon*As.epsilon;for(let O=f;O<d+f-2;++O)y=h[O*2],v=h[O*2+1],m=h[(O+1)*2],_=h[(O+1)*2+1],w=h[(O+2)*2],S=h[(O+2)*2+1],!(Math.abs(y*(_-S)+m*(S-v)+w*(v-_))<q)&&z.push(O,O+1,O+2)}function Yk(t,e){let r=0;const i=t.shape,n=t.points||i.points,s=i.type!==et.POLY||i.closeStroke;if(n.length===0)return;const o=e.points,a=e.indices,l=n.length/2,u=o.length/2;let h=u;for(o.push(n[0],n[1]),r=1;r<l;r++)o.push(n[r*2],n[r*2+1]),a.push(h,h+1),h++;s&&a.push(h,u)}function N0(t,e){t.lineStyle.native?Yk(t,e):Xk(t,e)}class um{static curveLength(e,r,i,n,s,o){const a=e-2*i+s,l=r-2*n+o,u=2*i-2*e,h=2*n-2*r,c=4*(a*a+l*l),d=4*(a*u+l*h),f=u*u+h*h,p=2*Math.sqrt(c+d+f),g=Math.sqrt(c),x=2*c*g,y=2*Math.sqrt(f),v=d/g;return(x*p+g*d*(p-y)+(4*f*c-d*d)*Math.log((2*g+v+p)/(v+y)))/(4*x)}static curveTo(e,r,i,n,s){const o=s[s.length-2],a=s[s.length-1],l=As._segmentsCount(um.curveLength(o,a,e,r,i,n));let u=0,h=0;for(let c=1;c<=l;++c){const d=c/l;u=o+(e-o)*d,h=a+(r-a)*d,s.push(u+(e+(i-e)*d-u)*d,h+(r+(n-r)*d-h)*d)}}}const Cc={[et.POLY]:iT,[et.CIRC]:Su,[et.ELIP]:Su,[et.RECT]:Hk,[et.RREC]:$k},O0=[],nl=[];class Au{constructor(e,r=null,i=null,n=null){this.points=[],this.holes=[],this.shape=e,this.lineStyle=i,this.fillStyle=r,this.matrix=n,this.type=e.type}clone(){return new Au(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}const Rn=new ae,nT=class sT extends uw{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new _u,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),nl.push(this.drawCalls[e]);this.drawCalls.length=0;for(let e=0;e<this.batches.length;e++){const r=this.batches[e];r.reset(),O0.push(r)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(e,r=null,i=null,n=null){const s=new Au(e,r,i,n);return this.graphicsData.push(s),this.dirty++,this}drawHole(e,r=null){if(!this.graphicsData.length)return null;const i=new Au(e,null,null,r),n=this.graphicsData[this.graphicsData.length-1];return i.lineStyle=n.lineStyle,n.holes.push(i),this.dirty++,this}destroy(){super.destroy();for(let e=0;e<this.graphicsData.length;++e)this.graphicsData[e].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(e){const r=this.graphicsData;for(let i=0;i<r.length;++i){const n=r[i];if(n.fillStyle.visible&&n.shape&&(n.matrix?n.matrix.applyInverse(e,Rn):Rn.copyFrom(e),n.shape.contains(Rn.x,Rn.y))){let s=!1;if(n.holes){for(let o=0;o<n.holes.length;o++)if(n.holes[o].shape.contains(Rn.x,Rn.y)){s=!0;break}}if(!s)return!0}}return!1}updateBatches(){if(!this.graphicsData.length){this.batchable=!0;return}if(!this.validateBatching())return;this.cacheDirty=this.dirty;const e=this.uvs,r=this.graphicsData;let i=null,n=null;this.batches.length>0&&(i=this.batches[this.batches.length-1],n=i.style);for(let l=this.shapeIndex;l<r.length;l++){this.shapeIndex++;const u=r[l],h=u.fillStyle,c=u.lineStyle;Cc[u.type].build(u),u.matrix&&this.transformPoints(u.points,u.matrix),(h.visible||c.visible)&&this.processHoles(u.holes);for(let d=0;d<2;d++){const f=d===0?h:c;if(!f.visible)continue;const p=f.texture.baseTexture,g=this.indices.length,x=this.points.length/2;p.wrapMode=Si.REPEAT,d===0?this.processFill(u):this.processLine(u);const y=this.points.length/2-x;y!==0&&(i&&!this._compareStyles(n,f)&&(i.end(g,x),i=null),i||(i=O0.pop()||new Wk,i.begin(f,g,x),this.batches.push(i),n=f),this.addUvs(this.points,e,f.texture,x,y,f.matrix))}}const s=this.indices.length,o=this.points.length/2;if(i&&i.end(s,o),this.batches.length===0){this.batchable=!0;return}const a=o>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&a===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=a?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(e,r){return!(!e||!r||e.texture.baseTexture!==r.texture.baseTexture||e.color+e.alpha!==r.color+r.alpha||!!e.native!=!!r.native)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let e=0,r=this.graphicsData.length;e<r;e++){const i=this.graphicsData[e],n=i.fillStyle,s=i.lineStyle;if(n&&!n.texture.baseTexture.valid||s&&!s.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const e=this.batches;for(let r=0,i=e.length;r<i;r++){const n=e[r];for(let s=0;s<n.size;s++){const o=n.start+s;this.indicesUint16[o]=this.indicesUint16[o]-n.attribStart}}}isBatchable(){if(this.points.length>65535*2)return!1;const e=this.batches;for(let r=0;r<e.length;r++)if(e[r].style.native)return!1;return this.points.length<sT.BATCHABLE_SIZE*2}buildDrawCalls(){let e=++ee._globalBatch;for(let c=0;c<this.drawCalls.length;c++)this.drawCalls[c].texArray.clear(),nl.push(this.drawCalls[c]);this.drawCalls.length=0;const r=this.colors,i=this.textureIds;let n=nl.pop();n||(n=new hf,n.texArray=new pf),n.texArray.count=0,n.start=0,n.size=0,n.type=_r.TRIANGLES;let s=0,o=null,a=0,l=!1,u=_r.TRIANGLES,h=0;this.drawCalls.push(n);for(let c=0;c<this.batches.length;c++){const d=this.batches[c],f=8,p=d.style,g=p.texture.baseTexture;l!==!!p.native&&(l=!!p.native,u=l?_r.LINES:_r.TRIANGLES,o=null,s=f,e++),o!==g&&(o=g,g._batchEnabled!==e&&(s===f&&(e++,s=0,n.size>0&&(n=nl.pop(),n||(n=new hf,n.texArray=new pf),this.drawCalls.push(n)),n.start=h,n.size=0,n.texArray.count=0,n.type=u),g.touched=1,g._batchEnabled=e,g._batchLocation=s,g.wrapMode=Si.REPEAT,n.texArray.elements[n.texArray.count++]=g,s++)),n.size+=d.size,h+=d.size,a=g._batchLocation,this.addColors(r,p.color,p.alpha,d.attribSize,d.attribStart),this.addTextureIds(i,a,d.attribSize,d.attribStart)}ee._globalBatch=e,this.packAttributes()}packAttributes(){const e=this.points,r=this.uvs,i=this.colors,n=this.textureIds,s=new ArrayBuffer(e.length*3*4),o=new Float32Array(s),a=new Uint32Array(s);let l=0;for(let u=0;u<e.length/2;u++)o[l++]=e[u*2],o[l++]=e[u*2+1],o[l++]=r[u*2],o[l++]=r[u*2+1],a[l++]=i[u],o[l++]=n[u];this._buffer.update(s),this._indexBuffer.update(this.indicesUint16)}processFill(e){e.holes.length?iT.triangulate(e,this):Cc[e.type].triangulate(e,this)}processLine(e){N0(e,this);for(let r=0;r<e.holes.length;r++)N0(e.holes[r],this)}processHoles(e){for(let r=0;r<e.length;r++){const i=e[r];Cc[i.type].build(i),i.matrix&&this.transformPoints(i.points,i.matrix)}}calculateBounds(){const e=this._bounds;e.clear(),e.addVertexData(this.points,0,this.points.length),e.pad(this.boundsPadding,this.boundsPadding)}transformPoints(e,r){for(let i=0;i<e.length/2;i++){const n=e[i*2],s=e[i*2+1];e[i*2]=r.a*n+r.c*s+r.tx,e[i*2+1]=r.b*n+r.d*s+r.ty}}addColors(e,r,i,n,s=0){const o=me.shared.setValue(r).toLittleEndianNumber(),a=me.shared.setValue(o).toPremultiplied(i);e.length=Math.max(e.length,s+n);for(let l=0;l<n;l++)e[s+l]=a}addTextureIds(e,r,i,n=0){e.length=Math.max(e.length,n+i);for(let s=0;s<i;s++)e[n+s]=r}addUvs(e,r,i,n,s,o=null){let a=0;const l=r.length,u=i.frame;for(;a<s;){let c=e[(n+a)*2],d=e[(n+a)*2+1];if(o){const f=o.a*c+o.c*d+o.tx;d=o.b*c+o.d*d+o.ty,c=f}a++,r.push(c/u.width,d/u.height)}const h=i.baseTexture;(u.width<h.width||u.height<h.height)&&this.adjustUvs(r,i,l,s)}adjustUvs(e,r,i,n){const s=r.baseTexture,o=1e-6,a=i+n*2,l=r.frame,u=l.width/s.width,h=l.height/s.height;let c=l.x/l.width,d=l.y/l.height,f=Math.floor(e[i]+o),p=Math.floor(e[i+1]+o);for(let g=i+2;g<a;g+=2)f=Math.min(f,Math.floor(e[g]+o)),p=Math.min(p,Math.floor(e[g+1]+o));c-=f,d-=p;for(let g=i;g<a;g+=2)e[g]=(e[g]+c)*u,e[g+1]=(e[g+1]+d)*h}};nT.BATCHABLE_SIZE=100;let Kk=nT;class lh{constructor(){this.color=16777215,this.alpha=1,this.texture=W.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const e=new lh;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e}reset(){this.color=16777215,this.alpha=1,this.texture=W.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}class hm extends lh{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=mi.BUTT,this.join=Ft.MITER,this.miterLimit=10}clone(){const e=new hm;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e.width=this.width,e.alignment=this.alignment,e.native=this.native,e.cap=this.cap,e.join=this.join,e.miterLimit=this.miterLimit,e}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1,this.cap=mi.BUTT,this.join=Ft.MITER,this.miterLimit=10}}const Pc={},Df=class kl extends Ue{constructor(e=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new lh,this._lineStyle=new hm,this._matrix=null,this._holeMode=!1,this.state=Pr.for2d(),this._geometry=e||new Kk,this._geometry.refCount++,this._transformID=-1,this._tintColor=new me(16777215),this.blendMode=J.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new kl(this._geometry)}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e)}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(e=null,r=0,i,n=.5,s=!1){return typeof e=="number"&&(e={width:e,color:r,alpha:i,alignment:n,native:s}),this.lineTextureStyle(e)}lineTextureStyle(e){const r={width:0,texture:W.WHITE,color:e!=null&&e.texture?16777215:0,matrix:null,alignment:.5,native:!1,cap:mi.BUTT,join:Ft.MITER,miterLimit:10};e=Object.assign(r,e),this.normalizeColor(e),this.currentPath&&this.startPoly();const i=e.width>0&&e.alpha>0;return i?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._lineStyle,{visible:i},e)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const e=this.currentPath.points,r=this.currentPath.points.length;r>2&&(this.drawShape(this.currentPath),this.currentPath=new sn,this.currentPath.closeStroke=!1,this.currentPath.points.push(e[r-2],e[r-1]))}else this.currentPath=new sn,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(e,r){return this.startPoly(),this.currentPath.points[0]=e,this.currentPath.points[1]=r,this}lineTo(e,r){this.currentPath||this.moveTo(0,0);const i=this.currentPath.points,n=i[i.length-2],s=i[i.length-1];return(n!==e||s!==r)&&i.push(e,r),this}_initCurve(e=0,r=0){this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[e,r]):this.moveTo(e,r)}quadraticCurveTo(e,r,i,n){this._initCurve();const s=this.currentPath.points;return s.length===0&&this.moveTo(0,0),um.curveTo(e,r,i,n,s),this}bezierCurveTo(e,r,i,n,s,o){return this._initCurve(),lm.curveTo(e,r,i,n,s,o,this.currentPath.points),this}arcTo(e,r,i,n,s){this._initCurve(e,r);const o=this.currentPath.points,a=B0.curveTo(e,r,i,n,s,o);if(a){const{cx:l,cy:u,radius:h,startAngle:c,endAngle:d,anticlockwise:f}=a;this.arc(l,u,h,c,d,f)}return this}arc(e,r,i,n,s,o=!1){if(n===s)return this;if(!o&&s<=n?s+=mu:o&&n<=s&&(n+=mu),s-n===0)return this;const a=e+Math.cos(n)*i,l=r+Math.sin(n)*i,u=this._geometry.closePointEps;let h=this.currentPath?this.currentPath.points:null;if(h){const c=Math.abs(h[h.length-2]-a),d=Math.abs(h[h.length-1]-l);c<u&&d<u||h.push(a,l)}else this.moveTo(a,l),h=this.currentPath.points;return B0.arc(a,l,e,r,i,n,s,o,h),this}beginFill(e=0,r){return this.beginTextureFill({texture:W.WHITE,color:e,alpha:r})}normalizeColor(e){const r=me.shared.setValue(e.color??0);e.color=r.toNumber(),e.alpha??(e.alpha=r.alpha)}beginTextureFill(e){const r={texture:W.WHITE,color:16777215,matrix:null};e=Object.assign(r,e),this.normalizeColor(e),this.currentPath&&this.startPoly();const i=e.alpha>0;return i?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._fillStyle,{visible:i},e)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(e,r,i,n){return this.drawShape(new te(e,r,i,n))}drawRoundedRect(e,r,i,n,s){return this.drawShape(new sh(e,r,i,n,s))}drawCircle(e,r,i){return this.drawShape(new ih(e,r,i))}drawEllipse(e,r,i,n){return this.drawShape(new nh(e,r,i,n))}drawPolygon(...e){let r,i=!0;const n=e[0];n.points?(i=n.closeStroke,r=n.points):Array.isArray(e[0])?r=e[0]:r=e;const s=new sn(r);return s.closeStroke=i,this.drawShape(s),this}drawShape(e){return this._holeMode?this._geometry.drawHole(e,this._matrix):this._geometry.drawShape(e,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const e=this._geometry.graphicsData;return e.length===1&&e[0].shape.type===et.RECT&&!e[0].matrix&&!e[0].holes.length&&!(e[0].lineStyle.visible&&e[0].lineStyle.width)}_render(e){this.finishPoly();const r=this._geometry;r.updateBatches(),r.batchable?(this.batchDirty!==r.batchDirty&&this._populateBatches(),this._renderBatched(e)):(e.batch.flush(),this._renderDirect(e))}_populateBatches(){const e=this._geometry,r=this.blendMode,i=e.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=e.batchDirty,this.batches.length=i,this.vertexData=new Float32Array(e.points);for(let n=0;n<i;n++){const s=e.batches[n],o=s.style.color,a=new Float32Array(this.vertexData.buffer,s.attribStart*4*2,s.attribSize*2),l=new Float32Array(e.uvsFloat32.buffer,s.attribStart*4*2,s.attribSize*2),u=new Uint16Array(e.indicesUint16.buffer,s.start*2,s.size),h={vertexData:a,blendMode:r,indices:u,uvs:l,_batchRGB:me.shared.setValue(o).toRgbArray(),_tintRGB:o,_texture:s.style.texture,alpha:s.style.alpha,worldAlpha:1};this.batches[n]=h}}_renderBatched(e){if(this.batches.length){e.batch.setObjectRenderer(e.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let r=0,i=this.batches.length;r<i;r++){const n=this.batches[r];n.worldAlpha=this.worldAlpha*n.alpha,e.plugins[this.pluginName].render(n)}}}_renderDirect(e){const r=this._resolveDirectShader(e),i=this._geometry,n=this.worldAlpha,s=r.uniforms,o=i.drawCalls;s.translationMatrix=this.transform.worldTransform,me.shared.setValue(this._tintColor).premultiply(n).toArray(s.tint),e.shader.bind(r),e.geometry.bind(i,r),e.state.set(this.state);for(let a=0,l=o.length;a<l;a++)this._renderDrawCallDirect(e,i.drawCalls[a])}_renderDrawCallDirect(e,r){const{texArray:i,type:n,size:s,start:o}=r,a=i.count;for(let l=0;l<a;l++)e.texture.bind(i.elements[l],l);e.geometry.draw(n,s,o)}_resolveDirectShader(e){let r=this.shader;const i=this.pluginName;if(!r){if(!Pc[i]){const{maxTextures:n}=e.plugins[i],s=new Int32Array(n);for(let l=0;l<n;l++)s[l]=l;const o={tint:new Float32Array([1,1,1,1]),translationMatrix:new ye,default:ir.from({uSamplers:s},!0)},a=e.plugins[i]._shader.program;Pc[i]=new Sr(a,o)}r=Pc[i]}return r}_calculateBounds(){this.finishPoly();const e=this._geometry;if(!e.graphicsData.length)return;const{minX:r,minY:i,maxX:n,maxY:s}=e.bounds;this._bounds.addFrame(this.transform,r,i,n,s)}containsPoint(e){return this.worldTransform.applyInverse(e,kl._TEMP_POINT),this._geometry.containsPoint(kl._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this._tintColor.toNumber();for(let e=0;e<this.batches.length;e++){const r=this.batches[e];r._tintRGB=me.shared.setValue(this._tintColor).multiply(r._batchRGB).toLittleEndianNumber()}}}calculateVertices(){const e=this.transform._worldID;if(this._transformID===e)return;this._transformID=e;const r=this.transform.worldTransform,i=r.a,n=r.b,s=r.c,o=r.d,a=r.tx,l=r.ty,u=this._geometry.points,h=this.vertexData;let c=0;for(let d=0;d<u.length;d+=2){const f=u[d],p=u[d+1];h[c++]=i*f+s*p+a,h[c++]=o*p+n*f+l}}closePath(){const e=this.currentPath;return e&&(e.closeStroke=!0,this.finishPoly()),this}setMatrix(e){return this._matrix=e,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(e){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(e)}};Df.curves=As,Df._TEMP_POINT=new ae;let de=Df;class qk{constructor(e,r){this.uvBuffer=e,this.uvMatrix=r,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(e){if(!e&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const r=this.uvBuffer.data;(!this.data||this.data.length!==r.length)&&(this.data=new Float32Array(r.length)),this.uvMatrix.multiplyUvs(r,this.data),this._updateID++}}const Rc=new ae,U0=new sn,oT=class aT extends Ue{constructor(e,r,i,n=_r.TRIANGLES){super(),this.geometry=e,this.shader=r,this.state=i||Pr.for2d(),this.drawMode=n,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=j.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(e){this._geometry!==e&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=e,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(e){this.shader=e}get material(){return this.shader}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(e){this.shader.tint=e}get tintValue(){return this.shader.tintValue}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(e){this.shader.texture=e}_render(e){const r=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===_r.TRIANGLES&&r.length<aT.BATCHABLE_SIZE*2?this._renderToBatch(e):this._renderDefault(e)}_renderDefault(e){const r=this.shader;r.alpha=this.worldAlpha,r.update&&r.update(),e.batch.flush(),r.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),e.shader.bind(r),e.state.set(this.state),e.geometry.bind(this.geometry,r),e.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(e){const r=this.geometry,i=this.shader;i.uvMatrix&&(i.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=r.indexBuffer.data,this._tintRGB=i._tintRGB,this._texture=i.texture;const n=this.material.pluginName;e.batch.setObjectRenderer(e.plugins[n]),e.plugins[n].render(this)}calculateVertices(){const e=this.geometry.buffers[0],r=e.data,i=e._updateID;if(i===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==r.length&&(this.vertexData=new Float32Array(r.length));const n=this.transform.worldTransform,s=n.a,o=n.b,a=n.c,l=n.d,u=n.tx,h=n.ty,c=this.vertexData;for(let d=0;d<c.length/2;d++){const f=r[d*2],p=r[d*2+1];c[d*2]=s*f+a*p+u,c[d*2+1]=o*f+l*p+h}if(this._roundPixels){const d=j.RESOLUTION;for(let f=0;f<c.length;++f)c[f]=Math.round(c[f]*d)/d}this.vertexDirty=i}calculateUvs(){const e=this.geometry.buffers[1],r=this.shader;r.uvMatrix.isSimple?this.uvs=e.data:(this.batchUvs||(this.batchUvs=new qk(e,r.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(e){if(!this.getBounds().contains(e.x,e.y))return!1;this.worldTransform.applyInverse(e,Rc);const r=this.geometry.getBuffer("aVertexPosition").data,i=U0.points,n=this.geometry.getIndex().data,s=n.length,o=this.drawMode===4?3:1;for(let a=0;a+2<s;a+=o){const l=n[a]*2,u=n[a+1]*2,h=n[a+2]*2;if(i[0]=r[l],i[1]=r[l+1],i[2]=r[u],i[3]=r[u+1],i[4]=r[h],i[5]=r[h+1],U0.contains(Rc.x,Rc.y))return!0}return!1}destroy(e){super.destroy(e),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};oT.BATCHABLE_SIZE=100;let G0=oT;class Zk extends Ci{constructor(e,r,i){super();const n=new Fe(e),s=new Fe(r,!0),o=new Fe(i,!0,!0);this.addAttribute("aVertexPosition",n,2,!1,K.FLOAT).addAttribute("aTextureCoord",s,2,!1,K.FLOAT).addIndex(o),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}var Qk=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,Jk=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`;class V0 extends Sr{constructor(e,r){const i={uSampler:e,alpha:1,uTextureMatrix:ye.IDENTITY,uColor:new Float32Array([1,1,1,1])};r=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},r),r.uniforms&&Object.assign(i,r.uniforms),super(r.program||Gr.from(Jk,Qk),i),this._colorDirty=!1,this.uvMatrix=new Ew(e),this.batchable=r.program===void 0,this.pluginName=r.pluginName,this._tintColor=new me(r.tint),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0,this.alpha=r.alpha}get texture(){return this.uniforms.uSampler}set texture(e){this.uniforms.uSampler!==e&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!e.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=e,this.uvMatrix.texture=e)}set alpha(e){e!==this._alpha&&(this._alpha=e,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(e){e!==this.tint&&(this._tintColor.setValue(e),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0)}get tint(){return this._tintColor.value}get tintValue(){return this._tintColor.toNumber()}update(){if(this._colorDirty){this._colorDirty=!1;const e=this.texture.baseTexture.alphaMode;me.shared.setValue(this._tintColor).premultiply(this._alpha,e).toArray(this.uniforms.uColor)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}class j0{constructor(e,r,i){this.geometry=new Ci,this.indexBuffer=null,this.size=i,this.dynamicProperties=[],this.staticProperties=[];for(let n=0;n<e.length;++n){let s=e[n];s={attributeName:s.attributeName,size:s.size,uploadFunction:s.uploadFunction,type:s.type||K.FLOAT,offset:s.offset},r[n]?this.dynamicProperties.push(s):this.staticProperties.push(s)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){const e=this.geometry;let r=0;this.indexBuffer=new Fe(_I(this.size),!0,!0),e.addIndex(this.indexBuffer),this.dynamicStride=0;for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];a.offset=r,r+=a.size,this.dynamicStride+=a.size}const i=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(i),this.dynamicDataUint32=new Uint32Array(i),this.dynamicBuffer=new Fe(this.dynamicData,!1,!1);let n=0;this.staticStride=0;for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];a.offset=n,n+=a.size,this.staticStride+=a.size}const s=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(s),this.staticDataUint32=new Uint32Array(s),this.staticBuffer=new Fe(this.staticData,!0,!1);for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];e.addAttribute(a.attributeName,this.dynamicBuffer,0,a.type===K.UNSIGNED_BYTE,a.type,this.dynamicStride*4,a.offset*4)}for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];e.addAttribute(a.attributeName,this.staticBuffer,0,a.type===K.UNSIGNED_BYTE,a.type,this.staticStride*4,a.offset*4)}}uploadDynamic(e,r,i){for(let n=0;n<this.dynamicProperties.length;n++){const s=this.dynamicProperties[n];s.uploadFunction(e,r,i,s.type===K.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,s.offset)}this.dynamicBuffer._updateID++}uploadStatic(e,r,i){for(let n=0;n<this.staticProperties.length;n++){const s=this.staticProperties[n];s.uploadFunction(e,r,i,s.type===K.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,s.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}var eD=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,tD=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`;class lT extends oh{constructor(e){super(e),this.shader=null,this.properties=null,this.tempMatrix=new ye,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:K.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=Sr.from(tD,eD,{}),this.state=Pr.for2d()}render(e){const r=e.children,i=e._maxSize,n=e._batchSize,s=this.renderer;let o=r.length;if(o===0)return;o>i&&!e.autoResize&&(o=i);let a=e._buffers;a||(a=e._buffers=this.generateBuffers(e));const l=r[0]._texture.baseTexture,u=l.alphaMode>0;this.state.blendMode=ow(e.blendMode,u),s.state.set(this.state);const h=s.gl,c=e.worldTransform.copyTo(this.tempMatrix);c.prepend(s.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=c.toArray(!0),this.shader.uniforms.uColor=me.shared.setValue(e.tintRgb).premultiply(e.worldAlpha,u).toArray(this.shader.uniforms.uColor),this.shader.uniforms.uSampler=l,this.renderer.shader.bind(this.shader);let d=!1;for(let f=0,p=0;f<o;f+=n,p+=1){let g=o-f;g>n&&(g=n),p>=a.length&&a.push(this._generateOneMoreBuffer(e));const x=a[p];x.uploadDynamic(r,f,g);const y=e._bufferUpdateIDs[p]||0;d=d||x._updateID<y,d&&(x._updateID=e._updateID,x.uploadStatic(r,f,g)),s.geometry.bind(x.geometry),h.drawElements(h.TRIANGLES,g*6,h.UNSIGNED_SHORT,0)}}generateBuffers(e){const r=[],i=e._maxSize,n=e._batchSize,s=e._properties;for(let o=0;o<i;o+=n)r.push(new j0(this.properties,s,n));return r}_generateOneMoreBuffer(e){const r=e._batchSize,i=e._properties;return new j0(this.properties,i,r)}uploadVertices(e,r,i,n,s,o){let a=0,l=0,u=0,h=0;for(let c=0;c<i;++c){const d=e[r+c],f=d._texture,p=d.scale.x,g=d.scale.y,x=f.trim,y=f.orig;x?(l=x.x-d.anchor.x*y.width,a=l+x.width,h=x.y-d.anchor.y*y.height,u=h+x.height):(a=y.width*(1-d.anchor.x),l=y.width*-d.anchor.x,u=y.height*(1-d.anchor.y),h=y.height*-d.anchor.y),n[o]=l*p,n[o+1]=h*g,n[o+s]=a*p,n[o+s+1]=h*g,n[o+s*2]=a*p,n[o+s*2+1]=u*g,n[o+s*3]=l*p,n[o+s*3+1]=u*g,o+=s*4}}uploadPosition(e,r,i,n,s,o){for(let a=0;a<i;a++){const l=e[r+a].position;n[o]=l.x,n[o+1]=l.y,n[o+s]=l.x,n[o+s+1]=l.y,n[o+s*2]=l.x,n[o+s*2+1]=l.y,n[o+s*3]=l.x,n[o+s*3+1]=l.y,o+=s*4}}uploadRotation(e,r,i,n,s,o){for(let a=0;a<i;a++){const l=e[r+a].rotation;n[o]=l,n[o+s]=l,n[o+s*2]=l,n[o+s*3]=l,o+=s*4}}uploadUvs(e,r,i,n,s,o){for(let a=0;a<i;++a){const l=e[r+a]._texture._uvs;l?(n[o]=l.x0,n[o+1]=l.y0,n[o+s]=l.x1,n[o+s+1]=l.y1,n[o+s*2]=l.x2,n[o+s*2+1]=l.y2,n[o+s*3]=l.x3,n[o+s*3+1]=l.y3,o+=s*4):(n[o]=0,n[o+1]=0,n[o+s]=0,n[o+s+1]=0,n[o+s*2]=0,n[o+s*2+1]=0,n[o+s*3]=0,n[o+s*3+1]=0,o+=s*4)}}uploadTint(e,r,i,n,s,o){for(let a=0;a<i;++a){const l=e[r+a],u=me.shared.setValue(l._tintRGB).toPremultiplied(l.alpha,l.texture.baseTexture.alphaMode>0);n[o]=u,n[o+s]=u,n[o+s*2]=u,n[o+s*3]=u,o+=s*4}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}}lT.extension={name:"particle",type:U.RendererPlugin};X.add(lT);var uh=(t=>(t[t.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",t[t.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",t))(uh||{});const sl={willReadFrequently:!0},fr=class Y{static get experimentalLetterSpacingSupported(){let e=Y._experimentalLetterSpacingSupported;if(e!==void 0){const r=j.ADAPTER.getCanvasRenderingContext2D().prototype;e=Y._experimentalLetterSpacingSupported="letterSpacing"in r||"textLetterSpacing"in r}return e}constructor(e,r,i,n,s,o,a,l,u){this.text=e,this.style=r,this.width=i,this.height=n,this.lines=s,this.lineWidths=o,this.lineHeight=a,this.maxLineWidth=l,this.fontProperties=u}static measureText(e,r,i,n=Y._canvas){i=i??r.wordWrap;const s=r.toFontString(),o=Y.measureFont(s);o.fontSize===0&&(o.fontSize=r.fontSize,o.ascent=r.fontSize);const a=n.getContext("2d",sl);a.font=s;const l=(i?Y.wordWrap(e,r,n):e).split(/(?:\r\n|\r|\n)/),u=new Array(l.length);let h=0;for(let p=0;p<l.length;p++){const g=Y._measureText(l[p],r.letterSpacing,a);u[p]=g,h=Math.max(h,g)}let c=h+r.strokeThickness;r.dropShadow&&(c+=r.dropShadowDistance);const d=r.lineHeight||o.fontSize+r.strokeThickness;let f=Math.max(d,o.fontSize+r.strokeThickness*2)+r.leading+(l.length-1)*(d+r.leading);return r.dropShadow&&(f+=r.dropShadowDistance),new Y(e,r,c,f,l,u,d+r.leading,h,o)}static _measureText(e,r,i){let n=!1;Y.experimentalLetterSpacingSupported&&(Y.experimentalLetterSpacing?(i.letterSpacing=`${r}px`,i.textLetterSpacing=`${r}px`,n=!0):(i.letterSpacing="0px",i.textLetterSpacing="0px"));let s=i.measureText(e).width;return s>0&&(n?s-=r:s+=(Y.graphemeSegmenter(e).length-1)*r),s}static wordWrap(e,r,i=Y._canvas){const n=i.getContext("2d",sl);let s=0,o="",a="";const l=Object.create(null),{letterSpacing:u,whiteSpace:h}=r,c=Y.collapseSpaces(h),d=Y.collapseNewlines(h);let f=!c;const p=r.wordWrapWidth+u,g=Y.tokenize(e);for(let x=0;x<g.length;x++){let y=g[x];if(Y.isNewline(y)){if(!d){a+=Y.addLine(o),f=!c,o="",s=0;continue}y=" "}if(c){const m=Y.isBreakingSpace(y),_=Y.isBreakingSpace(o[o.length-1]);if(m&&_)continue}const v=Y.getFromCache(y,u,l,n);if(v>p)if(o!==""&&(a+=Y.addLine(o),o="",s=0),Y.canBreakWords(y,r.breakWords)){const m=Y.wordWrapSplit(y);for(let _=0;_<m.length;_++){let w=m[_],S=w,E=1;for(;m[_+E];){const C=m[_+E];if(!Y.canBreakChars(S,C,y,_,r.breakWords))w+=C;else break;S=C,E++}_+=E-1;const T=Y.getFromCache(w,u,l,n);T+s>p&&(a+=Y.addLine(o),f=!1,o="",s=0),o+=w,s+=T}}else{o.length>0&&(a+=Y.addLine(o),o="",s=0);const m=x===g.length-1;a+=Y.addLine(y,!m),f=!1,o="",s=0}else v+s>p&&(f=!1,a+=Y.addLine(o),o="",s=0),(o.length>0||!Y.isBreakingSpace(y)||f)&&(o+=y,s+=v)}return a+=Y.addLine(o,!1),a}static addLine(e,r=!0){return e=Y.trimRight(e),e=r?`${e}
`:e,e}static getFromCache(e,r,i,n){let s=i[e];return typeof s!="number"&&(s=Y._measureText(e,r,n)+r,i[e]=s),s}static collapseSpaces(e){return e==="normal"||e==="pre-line"}static collapseNewlines(e){return e==="normal"}static trimRight(e){if(typeof e!="string")return"";for(let r=e.length-1;r>=0;r--){const i=e[r];if(!Y.isBreakingSpace(i))break;e=e.slice(0,-1)}return e}static isNewline(e){return typeof e!="string"?!1:Y._newlines.includes(e.charCodeAt(0))}static isBreakingSpace(e,r){return typeof e!="string"?!1:Y._breakingSpaces.includes(e.charCodeAt(0))}static tokenize(e){const r=[];let i="";if(typeof e!="string")return r;for(let n=0;n<e.length;n++){const s=e[n],o=e[n+1];if(Y.isBreakingSpace(s,o)||Y.isNewline(s)){i!==""&&(r.push(i),i=""),r.push(s);continue}i+=s}return i!==""&&r.push(i),r}static canBreakWords(e,r){return r}static canBreakChars(e,r,i,n,s){return!0}static wordWrapSplit(e){return Y.graphemeSegmenter(e)}static measureFont(e){if(Y._fonts[e])return Y._fonts[e];const r={ascent:0,descent:0,fontSize:0},i=Y._canvas,n=Y._context;n.font=e;const s=Y.METRICS_STRING+Y.BASELINE_SYMBOL,o=Math.ceil(n.measureText(s).width);let a=Math.ceil(n.measureText(Y.BASELINE_SYMBOL).width);const l=Math.ceil(Y.HEIGHT_MULTIPLIER*a);if(a=a*Y.BASELINE_MULTIPLIER|0,o===0||l===0)return Y._fonts[e]=r,r;i.width=o,i.height=l,n.fillStyle="#f00",n.fillRect(0,0,o,l),n.font=e,n.textBaseline="alphabetic",n.fillStyle="#000",n.fillText(s,0,a);const u=n.getImageData(0,0,o,l).data,h=u.length,c=o*4;let d=0,f=0,p=!1;for(d=0;d<a;++d){for(let g=0;g<c;g+=4)if(u[f+g]!==255){p=!0;break}if(!p)f+=c;else break}for(r.ascent=a-d,f=h-c,p=!1,d=l;d>a;--d){for(let g=0;g<c;g+=4)if(u[f+g]!==255){p=!0;break}if(!p)f-=c;else break}return r.descent=d-a,r.fontSize=r.ascent+r.descent,Y._fonts[e]=r,r}static clearMetrics(e=""){e?delete Y._fonts[e]:Y._fonts={}}static get _canvas(){var e;if(!Y.__canvas){let r;try{const i=new OffscreenCanvas(0,0);if((e=i.getContext("2d",sl))!=null&&e.measureText)return Y.__canvas=i,i;r=j.ADAPTER.createCanvas()}catch{r=j.ADAPTER.createCanvas()}r.width=r.height=10,Y.__canvas=r}return Y.__canvas}static get _context(){return Y.__context||(Y.__context=Y._canvas.getContext("2d",sl)),Y.__context}};fr.METRICS_STRING="|q",fr.BASELINE_SYMBOL="M",fr.BASELINE_MULTIPLIER=1.4,fr.HEIGHT_MULTIPLIER=2,fr.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const t=new Intl.Segmenter;return e=>[...t.segment(e)].map(r=>r.segment)}return t=>[...t]})(),fr.experimentalLetterSpacing=!1,fr._fonts={},fr._newlines=[10,13],fr._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];let ai=fr;const rD=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],uT=class ao{constructor(e){this.styleID=0,this.reset(),Mc(this,e,e)}clone(){const e={};return Mc(e,this,ao.defaultStyle),new ao(e)}reset(){Mc(this,ao.defaultStyle,ao.defaultStyle)}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(e){this._breakWords!==e&&(this._breakWords=e,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(e){this._dropShadow!==e&&(this._dropShadow=e,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(e){this._dropShadowAlpha!==e&&(this._dropShadowAlpha=e,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(e){this._dropShadowAngle!==e&&(this._dropShadowAngle=e,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(e){this._dropShadowBlur!==e&&(this._dropShadowBlur=e,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(e){const r=Ic(e);this._dropShadowColor!==r&&(this._dropShadowColor=r,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(e){this._dropShadowDistance!==e&&(this._dropShadowDistance=e,this.styleID++)}get fill(){return this._fill}set fill(e){const r=Ic(e);this._fill!==r&&(this._fill=r,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(e){this._fillGradientType!==e&&(this._fillGradientType=e,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(e){iD(this._fillGradientStops,e)||(this._fillGradientStops=e,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(e){this.fontFamily!==e&&(this._fontFamily=e,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(e){this._fontVariant!==e&&(this._fontVariant=e,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight!==e&&(this._lineHeight=e,this.styleID++)}get leading(){return this._leading}set leading(e){this._leading!==e&&(this._leading=e,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(e){this._lineJoin!==e&&(this._lineJoin=e,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(e){this._miterLimit!==e&&(this._miterLimit=e,this.styleID++)}get padding(){return this._padding}set padding(e){this._padding!==e&&(this._padding=e,this.styleID++)}get stroke(){return this._stroke}set stroke(e){const r=Ic(e);this._stroke!==r&&(this._stroke=r,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(e){this._strokeThickness!==e&&(this._strokeThickness=e,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline!==e&&(this._textBaseline=e,this.styleID++)}get trim(){return this._trim}set trim(e){this._trim!==e&&(this._trim=e,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(e){this._wordWrap!==e&&(this._wordWrap=e,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.styleID++)}toFontString(){const e=typeof this.fontSize=="number"?`${this.fontSize}px`:this.fontSize;let r=this.fontFamily;Array.isArray(this.fontFamily)||(r=this.fontFamily.split(","));for(let i=r.length-1;i>=0;i--){let n=r[i].trim();!/([\"\'])[^\'\"]+\1/.test(n)&&!rD.includes(n)&&(n=`"${n}"`),r[i]=n}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${e} ${r.join(",")}`}};uT.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:uh.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let Zr=uT;function Ic(t){const e=me.shared,r=i=>{const n=e.setValue(i);return n.alpha===1?n.toHex():n.toRgbaString()};return Array.isArray(t)?t.map(r):r(t)}function iD(t,e){if(!Array.isArray(t)||!Array.isArray(e)||t.length!==e.length)return!1;for(let r=0;r<t.length;++r)if(t[r]!==e[r])return!1;return!0}function Mc(t,e,r){for(const i in r)Array.isArray(e[i])?t[i]=e[i].slice():t[i]=e[i]}const nD={texture:!0,children:!1,baseTexture:!0},hT=class Ff extends Ds{constructor(e,r,i){let n=!1;i||(i=j.ADAPTER.createCanvas(),n=!0),i.width=3,i.height=3;const s=W.from(i);s.orig=new te,s.trim=new te,super(s),this._ownCanvas=n,this.canvas=i,this.context=i.getContext("2d",{willReadFrequently:!0}),this._resolution=Ff.defaultResolution??j.RESOLUTION,this._autoResolution=Ff.defaultAutoResolution,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=e,this.style=r,this.localStyleID=-1}static get experimentalLetterSpacing(){return ai.experimentalLetterSpacing}static set experimentalLetterSpacing(e){ne("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),ai.experimentalLetterSpacing=e}updateText(e){const r=this._style;if(this.localStyleID!==r.styleID&&(this.dirty=!0,this.localStyleID=r.styleID),!this.dirty&&e)return;this._font=this._style.toFontString();const i=this.context,n=ai.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),s=n.width,o=n.height,a=n.lines,l=n.lineHeight,u=n.lineWidths,h=n.maxLineWidth,c=n.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,s)+r.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,o)+r.padding*2)*this._resolution),i.scale(this._resolution,this._resolution),i.clearRect(0,0,this.canvas.width,this.canvas.height),i.font=this._font,i.lineWidth=r.strokeThickness,i.textBaseline=r.textBaseline,i.lineJoin=r.lineJoin,i.miterLimit=r.miterLimit;let d,f;const p=r.dropShadow?2:1;for(let g=0;g<p;++g){const x=r.dropShadow&&g===0,y=x?Math.ceil(Math.max(1,o)+r.padding*2):0,v=y*this._resolution;if(x){i.fillStyle="black",i.strokeStyle="black";const _=r.dropShadowColor,w=r.dropShadowBlur*this._resolution,S=r.dropShadowDistance*this._resolution;i.shadowColor=me.shared.setValue(_).setAlpha(r.dropShadowAlpha).toRgbaString(),i.shadowBlur=w,i.shadowOffsetX=Math.cos(r.dropShadowAngle)*S,i.shadowOffsetY=Math.sin(r.dropShadowAngle)*S+v}else i.fillStyle=this._generateFillStyle(r,a,n),i.strokeStyle=r.stroke,i.shadowColor="black",i.shadowBlur=0,i.shadowOffsetX=0,i.shadowOffsetY=0;let m=(l-c.fontSize)/2;l-c.fontSize<0&&(m=0);for(let _=0;_<a.length;_++)d=r.strokeThickness/2,f=r.strokeThickness/2+_*l+c.ascent+m,r.align==="right"?d+=h-u[_]:r.align==="center"&&(d+=(h-u[_])/2),r.stroke&&r.strokeThickness&&this.drawLetterSpacing(a[_],d+r.padding,f+r.padding-y,!0),r.fill&&this.drawLetterSpacing(a[_],d+r.padding,f+r.padding-y)}this.updateTexture()}drawLetterSpacing(e,r,i,n=!1){const s=this._style.letterSpacing;let o=!1;if(ai.experimentalLetterSpacingSupported&&(ai.experimentalLetterSpacing?(this.context.letterSpacing=`${s}px`,this.context.textLetterSpacing=`${s}px`,o=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),s===0||o){n?this.context.strokeText(e,r,i):this.context.fillText(e,r,i);return}let a=r;const l=ai.graphemeSegmenter(e);let u=this.context.measureText(e).width,h=0;for(let c=0;c<l.length;++c){const d=l[c];n?this.context.strokeText(d,a,i):this.context.fillText(d,a,i);let f="";for(let p=c+1;p<l.length;++p)f+=l[p];h=this.context.measureText(f).width,a+=u-h+s,u=h}}updateTexture(){const e=this.canvas;if(this._style.trim){const o=SI(e);o.data&&(e.width=o.width,e.height=o.height,this.context.putImageData(o.data,0,0))}const r=this._texture,i=this._style,n=i.trim?0:i.padding,s=r.baseTexture;r.trim.width=r._frame.width=e.width/this._resolution,r.trim.height=r._frame.height=e.height/this._resolution,r.trim.x=-n,r.trim.y=-n,r.orig.width=r._frame.width-n*2,r.orig.height=r._frame.height-n*2,this._onTextureUpdate(),s.setRealSize(e.width,e.height,this._resolution),r.updateUvs(),this.dirty=!1}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._render(e)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(e,r){return this.updateText(!0),this._textureID===-1&&(e=!1),super.getBounds(e,r)}getLocalBounds(e){return this.updateText(!0),super.getLocalBounds.call(this,e)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(e,r,i){const n=e.fill;if(Array.isArray(n)){if(n.length===1)return n[0]}else return n;let s;const o=e.dropShadow?e.dropShadowDistance:0,a=e.padding||0,l=this.canvas.width/this._resolution-o-a*2,u=this.canvas.height/this._resolution-o-a*2,h=n.slice(),c=e.fillGradientStops.slice();if(!c.length){const d=h.length+1;for(let f=1;f<d;++f)c.push(f/d)}if(h.unshift(n[0]),c.unshift(0),h.push(n[n.length-1]),c.push(1),e.fillGradientType===uh.LINEAR_VERTICAL){s=this.context.createLinearGradient(l/2,a,l/2,u+a);const d=i.fontProperties.fontSize+e.strokeThickness;for(let f=0;f<r.length;f++){const p=i.lineHeight*(f-1)+d,g=i.lineHeight*f;let x=g;f>0&&p>g&&(x=(g+p)/2);const y=g+d,v=i.lineHeight*(f+1);let m=y;f+1<r.length&&v<y&&(m=(y+v)/2);const _=(m-x)/u;for(let w=0;w<h.length;w++){let S=0;typeof c[w]=="number"?S=c[w]:S=w/h.length;let E=Math.min(1,Math.max(0,x/u+S*_));E=Number(E.toFixed(5)),s.addColorStop(E,h[w])}}}else{s=this.context.createLinearGradient(a,u/2,l+a,u/2);const d=h.length+1;let f=1;for(let p=0;p<h.length;p++){let g;typeof c[p]=="number"?g=c[p]:g=f/d,s.addColorStop(g,h[p]),f++}}return s}destroy(e){typeof e=="boolean"&&(e={children:e}),e=Object.assign({},nD,e),super.destroy(e),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(e){this.updateText(!0);const r=pi(this.scale.x)||1;this.scale.x=r*e/this._texture.orig.width,this._width=e}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(e){this.updateText(!0);const r=pi(this.scale.y)||1;this.scale.y=r*e/this._texture.orig.height,this._height=e}get style(){return this._style}set style(e){e=e||{},e instanceof Zr?this._style=e:this._style=new Zr(e),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}};hT.defaultAutoResolution=!0;let cm=hT;class sD{constructor(e){this.maxItemsPerFrame=e,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}}function oD(t,e){var i;let r=!1;if((i=t==null?void 0:t._textures)!=null&&i.length){for(let n=0;n<t._textures.length;n++)if(t._textures[n]instanceof W){const s=t._textures[n].baseTexture;e.includes(s)||(e.push(s),r=!0)}}return r}function aD(t,e){if(t.baseTexture instanceof ee){const r=t.baseTexture;return e.includes(r)||e.push(r),!0}return!1}function lD(t,e){if(t._texture&&t._texture instanceof W){const r=t._texture.baseTexture;return e.includes(r)||e.push(r),!0}return!1}function uD(t,e){return e instanceof cm?(e.updateText(!0),!0):!1}function hD(t,e){if(e instanceof Zr){const r=e.toFontString();return ai.measureFont(r),!0}return!1}function cD(t,e){if(t instanceof cm){e.includes(t.style)||e.push(t.style),e.includes(t)||e.push(t);const r=t._texture.baseTexture;return e.includes(r)||e.push(r),!0}return!1}function dD(t,e){return t instanceof Zr?(e.includes(t)||e.push(t),!0):!1}const cT=class dT{constructor(e){this.limiter=new sD(dT.uploadsPerFrame),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{this.queue&&this.prepareItems()},this.registerFindHook(cD),this.registerFindHook(dD),this.registerFindHook(oD),this.registerFindHook(aD),this.registerFindHook(lD),this.registerUploadHook(uD),this.registerUploadHook(hD)}upload(e){return new Promise(r=>{e&&this.add(e),this.queue.length?(this.completes.push(r),this.ticking||(this.ticking=!0,ie.system.addOnce(this.tick,this,gn.UTILITY))):r()})}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){const e=this.queue[0];let r=!1;if(e&&!e._destroyed){for(let i=0,n=this.uploadHooks.length;i<n;i++)if(this.uploadHooks[i](this.uploadHookHelper,e)){this.queue.shift(),r=!0;break}}r||this.queue.shift()}if(this.queue.length)ie.system.addOnce(this.tick,this,gn.UTILITY);else{this.ticking=!1;const e=this.completes.slice(0);this.completes.length=0;for(let r=0,i=e.length;r<i;r++)e[r]()}}registerFindHook(e){return e&&this.addHooks.push(e),this}registerUploadHook(e){return e&&this.uploadHooks.push(e),this}add(e){for(let r=0,i=this.addHooks.length;r<i&&!this.addHooks[r](e,this.queue);r++);if(e instanceof Ue)for(let r=e.children.length-1;r>=0;r--)this.add(e.children[r]);return this}destroy(){this.ticking&&ie.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}};cT.uploadsPerFrame=4;let Bf=cT;Object.defineProperties(j,{UPLOADS_PER_FRAME:{get(){return Bf.uploadsPerFrame},set(t){ne("7.1.0","settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame"),Bf.uploadsPerFrame=t}}});function fT(t,e){return e instanceof ee?(e._glTextures[t.CONTEXT_UID]||t.texture.bind(e),!0):!1}function fD(t,e){if(!(e instanceof de))return!1;const{geometry:r}=e;e.finishPoly(),r.updateBatches();const{batches:i}=r;for(let n=0;n<i.length;n++){const{texture:s}=i[n].style;s&&fT(t,s.baseTexture)}return r.batchable||t.geometry.bind(r,e._resolveDirectShader(t)),!0}function pD(t,e){return t instanceof de?(e.push(t),!0):!1}class pT extends Bf{constructor(e){super(e),this.uploadHookHelper=this.renderer,this.registerFindHook(pD),this.registerUploadHook(fT),this.registerUploadHook(fD)}}pT.extension={name:"prepare",type:U.RendererSystem};X.add(pT);var mD=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,gD=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,yD=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,z0=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,vD=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`;const ol=new ye;class mT extends oh{constructor(e){super(e),e.runners.contextChange.add(this),this.quad=new xw,this.state=Pr.for2d()}contextChange(){const e=this.renderer,r={globals:e.globalUniforms};this.simpleShader=Sr.from(z0,vD,r),this.shader=e.context.webGLVersion>1?Sr.from(gD,mD,r):Sr.from(z0,yD,r)}render(e){const r=this.renderer,i=this.quad;let n=i.vertices;n[0]=n[6]=e._width*-e.anchor.x,n[1]=n[3]=e._height*-e.anchor.y,n[2]=n[4]=e._width*(1-e.anchor.x),n[5]=n[7]=e._height*(1-e.anchor.y);const s=e.uvRespectAnchor?e.anchor.x:0,o=e.uvRespectAnchor?e.anchor.y:0;n=i.uvs,n[0]=n[6]=-s,n[1]=n[3]=-o,n[2]=n[4]=1-s,n[5]=n[7]=1-o,i.invalidate();const a=e._texture,l=a.baseTexture,u=l.alphaMode>0,h=e.tileTransform.localTransform,c=e.uvMatrix;let d=l.isPowerOfTwo&&a.frame.width===l.width&&a.frame.height===l.height;d&&(l._glTextures[r.CONTEXT_UID]?d=l.wrapMode!==Si.CLAMP:l.wrapMode===Si.CLAMP&&(l.wrapMode=Si.REPEAT));const f=d?this.simpleShader:this.shader,p=a.width,g=a.height,x=e._width,y=e._height;ol.set(h.a*p/x,h.b*p/y,h.c*g/x,h.d*g/y,h.tx/x,h.ty/y),ol.invert(),d?ol.prepend(c.mapCoord):(f.uniforms.uMapCoord=c.mapCoord.toArray(!0),f.uniforms.uClampFrame=c.uClampFrame,f.uniforms.uClampOffset=c.uClampOffset),f.uniforms.uTransform=ol.toArray(!0),f.uniforms.uColor=me.shared.setValue(e.tint).premultiply(e.worldAlpha,u).toArray(f.uniforms.uColor),f.uniforms.translationMatrix=e.transform.worldTransform.toArray(!0),f.uniforms.uSampler=a,r.shader.bind(f),r.geometry.bind(i),this.state.blendMode=ow(e.blendMode,u),r.state.set(this.state),r.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}}mT.extension={name:"tilingSprite",type:U.RendererPlugin};X.add(mT);const gT=class lo{constructor(e,r,i){this.linkedSheets=[],(e instanceof ee||e instanceof W)&&(e={texture:e,data:r,resolutionFilename:i});const{texture:n,data:s,resolutionFilename:o=null,cachePrefix:a=""}=e;this.cachePrefix=a,this._texture=n instanceof W?n:null,this.baseTexture=n instanceof ee?n:this._texture.baseTexture,this.textures={},this.animations={},this.data=s;const l=this.baseTexture.resource;this.resolution=this._updateResolution(o||(l?l.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(e=null){const{scale:r}=this.data.meta;let i=Kr(e,null);return i===null&&(i=typeof r=="number"?r:parseFloat(r??"1")),i!==1&&this.baseTexture.setResolution(i),i}parse(){return new Promise(e=>{this._callback=e,this._batchIndex=0,this._frameKeys.length<=lo.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(e){let r=e;const i=lo.BATCH_SIZE;for(;r-e<i&&r<this._frameKeys.length;){const n=this._frameKeys[r],s=this._frames[n],o=s.frame;if(o){let a=null,l=null;const u=s.trimmed!==!1&&s.sourceSize?s.sourceSize:s.frame,h=new te(0,0,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution);s.rotated?a=new te(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.h)/this.resolution,Math.floor(o.w)/this.resolution):a=new te(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution),s.trimmed!==!1&&s.spriteSourceSize&&(l=new te(Math.floor(s.spriteSourceSize.x)/this.resolution,Math.floor(s.spriteSourceSize.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution)),this.textures[n]=new W(this.baseTexture,a,h,l,s.rotated?2:0,s.anchor,s.borders),W.addToCache(this.textures[n],this.cachePrefix+n.toString())}r++}}_processAnimations(){const e=this.data.animations||{};for(const r in e){this.animations[r]=[];for(let i=0;i<e[r].length;i++){const n=e[r][i];this.animations[r].push(this.textures[n])}}}_parseComplete(){const e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*lo.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*lo.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(e=!1){var r;for(const i in this.textures)this.textures[i].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&((r=this._texture)==null||r.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};gT.BATCH_SIZE=1e3;let H0=gT;const xD=["jpg","png","jpeg","avif","webp","s3tc","s3tc_sRGB","etc","etc1","pvrtc","atc","astc","bptc"];function yT(t,e,r){const i={};if(t.forEach(n=>{i[n]=e}),Object.keys(e.textures).forEach(n=>{i[`${e.cachePrefix}${n}`]=e.textures[n]}),!r){const n=Ke.dirname(t[0]);e.linkedSheets.forEach((s,o)=>{Object.assign(i,yT([`${n}/${e.data.meta.related_multi_packs[o]}`],s,!0))})}return i}const _D={extension:U.Asset,cache:{test:t=>t instanceof H0,getCacheableAssets:(t,e)=>yT(t,e,!1)},resolver:{test:t=>{const e=t.split("?")[0].split("."),r=e.pop(),i=e.pop();return r==="json"&&xD.includes(i)},parse:t=>{var r;const e=t.split(".");return{resolution:parseFloat(((r=j.RETINA_PREFIX.exec(t))==null?void 0:r[1])??"1"),format:e[e.length-2],src:t}}},loader:{name:"spritesheetLoader",extension:{type:U.LoadParser,priority:sr.Normal},async testParse(t,e){return Ke.extname(e.src).toLowerCase()===".json"&&!!t.frames},async parse(t,e,r){var h,c;const{texture:i,imageFilename:n,cachePrefix:s}=(e==null?void 0:e.data)??{};let o=Ke.dirname(e.src);o&&o.lastIndexOf("/")!==o.length-1&&(o+="/");let a;if(i&&i.baseTexture)a=i;else{const d=If(o+(n??t.meta.image),e.src);a=(await r.load([d]))[d]}const l=new H0({texture:a.baseTexture,data:t,resolutionFilename:e.src,cachePrefix:s});await l.parse();const u=(h=t==null?void 0:t.meta)==null?void 0:h.related_multi_packs;if(Array.isArray(u)){const d=[];for(const p of u){if(typeof p!="string")continue;let g=o+p;(c=e.data)!=null&&c.ignoreMultiPack||(g=If(g,e.src),d.push(r.load({src:g,data:{ignoreMultiPack:!0}})))}const f=await Promise.all(d);l.linkedSheets=f,f.forEach(p=>{p.linkedSheets=[l].concat(l.linkedSheets.filter(g=>g!==p))})}return l},unload(t){t.destroy(!0)}}};X.add(_D);class bu{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}class Dl{static test(e){return typeof e=="string"&&e.startsWith("info face=")}static parse(e){const r=e.match(/^[a-z]+\s+.+$/gm),i={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const s in r){const o=r[s].match(/^[a-z]+/gm)[0],a=r[s].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),l={};for(const u in a){const h=a[u].split("="),c=h[0],d=h[1].replace(/"/gm,""),f=parseFloat(d),p=isNaN(f)?d:f;l[c]=p}i[o].push(l)}const n=new bu;return i.info.forEach(s=>n.info.push({face:s.face,size:parseInt(s.size,10)})),i.common.forEach(s=>n.common.push({lineHeight:parseInt(s.lineHeight,10)})),i.page.forEach(s=>n.page.push({id:parseInt(s.id,10),file:s.file})),i.char.forEach(s=>n.char.push({id:parseInt(s.id,10),page:parseInt(s.page,10),x:parseInt(s.x,10),y:parseInt(s.y,10),width:parseInt(s.width,10),height:parseInt(s.height,10),xoffset:parseInt(s.xoffset,10),yoffset:parseInt(s.yoffset,10),xadvance:parseInt(s.xadvance,10)})),i.kerning.forEach(s=>n.kerning.push({first:parseInt(s.first,10),second:parseInt(s.second,10),amount:parseInt(s.amount,10)})),i.distanceField.forEach(s=>n.distanceField.push({distanceRange:parseInt(s.distanceRange,10),fieldType:s.fieldType})),n}}class Lf{static test(e){const r=e;return typeof e!="string"&&"getElementsByTagName"in e&&r.getElementsByTagName("page").length&&r.getElementsByTagName("info")[0].getAttribute("face")!==null}static parse(e){const r=new bu,i=e.getElementsByTagName("info"),n=e.getElementsByTagName("common"),s=e.getElementsByTagName("page"),o=e.getElementsByTagName("char"),a=e.getElementsByTagName("kerning"),l=e.getElementsByTagName("distanceField");for(let u=0;u<i.length;u++)r.info.push({face:i[u].getAttribute("face"),size:parseInt(i[u].getAttribute("size"),10)});for(let u=0;u<n.length;u++)r.common.push({lineHeight:parseInt(n[u].getAttribute("lineHeight"),10)});for(let u=0;u<s.length;u++)r.page.push({id:parseInt(s[u].getAttribute("id"),10)||0,file:s[u].getAttribute("file")});for(let u=0;u<o.length;u++){const h=o[u];r.char.push({id:parseInt(h.getAttribute("id"),10),page:parseInt(h.getAttribute("page"),10)||0,x:parseInt(h.getAttribute("x"),10),y:parseInt(h.getAttribute("y"),10),width:parseInt(h.getAttribute("width"),10),height:parseInt(h.getAttribute("height"),10),xoffset:parseInt(h.getAttribute("xoffset"),10),yoffset:parseInt(h.getAttribute("yoffset"),10),xadvance:parseInt(h.getAttribute("xadvance"),10)})}for(let u=0;u<a.length;u++)r.kerning.push({first:parseInt(a[u].getAttribute("first"),10),second:parseInt(a[u].getAttribute("second"),10),amount:parseInt(a[u].getAttribute("amount"),10)});for(let u=0;u<l.length;u++)r.distanceField.push({fieldType:l[u].getAttribute("fieldType"),distanceRange:parseInt(l[u].getAttribute("distanceRange"),10)});return r}}class Nf{static test(e){return typeof e=="string"&&e.includes("<font>")?Lf.test(j.ADAPTER.parseXML(e)):!1}static parse(e){return Lf.parse(j.ADAPTER.parseXML(e))}}const kc=[Dl,Lf,Nf];function wD(t){for(let e=0;e<kc.length;e++)if(kc[e].test(t))return kc[e];return null}function TD(t,e,r,i,n,s){const o=r.fill;if(Array.isArray(o)){if(o.length===1)return o[0]}else return o;let a;const l=r.dropShadow?r.dropShadowDistance:0,u=r.padding||0,h=t.width/i-l-u*2,c=t.height/i-l-u*2,d=o.slice(),f=r.fillGradientStops.slice();if(!f.length){const p=d.length+1;for(let g=1;g<p;++g)f.push(g/p)}if(d.unshift(o[0]),f.unshift(0),d.push(o[o.length-1]),f.push(1),r.fillGradientType===uh.LINEAR_VERTICAL){a=e.createLinearGradient(h/2,u,h/2,c+u);let p=0;const g=(s.fontProperties.fontSize+r.strokeThickness)/c;for(let x=0;x<n.length;x++){const y=s.lineHeight*x;for(let v=0;v<d.length;v++){let m=0;typeof f[v]=="number"?m=f[v]:m=v/d.length;const _=y/c+m*g;let w=Math.max(p,_);w=Math.min(w,1),a.addColorStop(w,d[v]),p=w}}}else{a=e.createLinearGradient(u,c/2,h+u,c/2);const p=d.length+1;let g=1;for(let x=0;x<d.length;x++){let y;typeof f[x]=="number"?y=f[x]:y=g/p,a.addColorStop(y,d[x]),g++}}return a}function ED(t,e,r,i,n,s,o){const a=r.text,l=r.fontProperties;e.translate(i,n),e.scale(s,s);const u=o.strokeThickness/2,h=-(o.strokeThickness/2);if(e.font=o.toFontString(),e.lineWidth=o.strokeThickness,e.textBaseline=o.textBaseline,e.lineJoin=o.lineJoin,e.miterLimit=o.miterLimit,e.fillStyle=TD(t,e,o,s,[a],r),e.strokeStyle=o.stroke,o.dropShadow){const c=o.dropShadowColor,d=o.dropShadowBlur*s,f=o.dropShadowDistance*s;e.shadowColor=me.shared.setValue(c).setAlpha(o.dropShadowAlpha).toRgbaString(),e.shadowBlur=d,e.shadowOffsetX=Math.cos(o.dropShadowAngle)*f,e.shadowOffsetY=Math.sin(o.dropShadowAngle)*f}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0;o.stroke&&o.strokeThickness&&e.strokeText(a,u,h+r.lineHeight-l.descent),o.fill&&e.fillText(a,u,h+r.lineHeight-l.descent),e.setTransform(1,0,0,1,0,0),e.fillStyle="rgba(0, 0, 0, 0)"}function Fl(t){return t.codePointAt?t.codePointAt(0):t.charCodeAt(0)}function vT(t){return Array.from?Array.from(t):t.split("")}function SD(t){typeof t=="string"&&(t=[t]);const e=[];for(let r=0,i=t.length;r<i;r++){const n=t[r];if(Array.isArray(n)){if(n.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${n.length}.`);const s=n[0].charCodeAt(0),o=n[1].charCodeAt(0);if(o<s)throw new Error("[BitmapFont]: Invalid character range.");for(let a=s,l=o;a<=l;a++)e.push(String.fromCharCode(a))}else e.push(...vT(n))}if(e.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}const ri=class pr{constructor(e,r,i){var h;const[n]=e.info,[s]=e.common,[o]=e.page,[a]=e.distanceField,l=Kr(o.file),u={};this._ownsTextures=i,this.font=n.face,this.size=n.size,this.lineHeight=s.lineHeight/l,this.chars={},this.pageTextures=u;for(let c=0;c<e.page.length;c++){const{id:d,file:f}=e.page[c];u[d]=r instanceof Array?r[c]:r[f],a!=null&&a.fieldType&&a.fieldType!=="none"&&(u[d].baseTexture.alphaMode=yt.NO_PREMULTIPLIED_ALPHA,u[d].baseTexture.mipmap=Cr.OFF)}for(let c=0;c<e.char.length;c++){const{id:d,page:f}=e.char[c];let{x:p,y:g,width:x,height:y,xoffset:v,yoffset:m,xadvance:_}=e.char[c];p/=l,g/=l,x/=l,y/=l,v/=l,m/=l,_/=l;const w=new te(p+u[f].frame.x/l,g+u[f].frame.y/l,x,y);this.chars[d]={xOffset:v,yOffset:m,xAdvance:_,kerning:{},texture:new W(u[f].baseTexture,w),page:f}}for(let c=0;c<e.kerning.length;c++){let{first:d,second:f,amount:p}=e.kerning[c];d/=l,f/=l,p/=l,this.chars[f]&&(this.chars[f].kerning[d]=p)}this.distanceFieldRange=a==null?void 0:a.distanceRange,this.distanceFieldType=((h=a==null?void 0:a.fieldType)==null?void 0:h.toLowerCase())??"none"}destroy(){for(const e in this.chars)this.chars[e].texture.destroy(),this.chars[e].texture=null;for(const e in this.pageTextures)this._ownsTextures&&this.pageTextures[e].destroy(!0),this.pageTextures[e]=null;this.chars=null,this.pageTextures=null}static install(e,r,i){let n;if(e instanceof bu)n=e;else{const o=wD(e);if(!o)throw new Error("Unrecognized data format for font.");n=o.parse(e)}r instanceof W&&(r=[r]);const s=new pr(n,r,i);return pr.available[s.font]=s,s}static uninstall(e){const r=pr.available[e];if(!r)throw new Error(`No font found named '${e}'`);r.destroy(),delete pr.available[e]}static from(e,r,i){if(!e)throw new Error("[BitmapFont] Property `name` is required.");const{chars:n,padding:s,resolution:o,textureWidth:a,textureHeight:l,...u}=Object.assign({},pr.defaultOptions,i),h=SD(n),c=r instanceof Zr?r:new Zr(r),d=a,f=new bu;f.info[0]={face:c.fontFamily,size:c.fontSize},f.common[0]={lineHeight:c.fontSize};let p=0,g=0,x,y,v,m=0;const _=[];for(let S=0;S<h.length;S++){x||(x=j.ADAPTER.createCanvas(),x.width=a,x.height=l,y=x.getContext("2d"),v=new ee(x,{resolution:o,...u}),_.push(new W(v)),f.page.push({id:_.length-1,file:""}));const E=h[S],T=ai.measureText(E,c,!1,x),C=T.width,A=Math.ceil(T.height),B=Math.ceil((c.fontStyle==="italic"?2:1)*C);if(g>=l-A*o){if(g===0)throw new Error(`[BitmapFont] textureHeight ${l}px is too small (fontFamily: '${c.fontFamily}', fontSize: ${c.fontSize}px, char: '${E}')`);--S,x=null,y=null,v=null,g=0,p=0,m=0;continue}if(m=Math.max(A+T.fontProperties.descent,m),B*o+p>=d){if(p===0)throw new Error(`[BitmapFont] textureWidth ${a}px is too small (fontFamily: '${c.fontFamily}', fontSize: ${c.fontSize}px, char: '${E}')`);--S,g+=m*o,g=Math.ceil(g),p=0,m=0;continue}ED(x,y,T,p,g,o,c);const D=Fl(T.text);f.char.push({id:D,page:_.length-1,x:p/o,y:g/o,width:B,height:A,xoffset:0,yoffset:0,xadvance:C-(c.dropShadow?c.dropShadowDistance:0)-(c.stroke?c.strokeThickness:0)}),p+=(B+2*s)*o,p=Math.ceil(p)}if(!(i!=null&&i.skipKerning))for(let S=0,E=h.length;S<E;S++){const T=h[S];for(let C=0;C<E;C++){const A=h[C],B=y.measureText(T).width,D=y.measureText(A).width,b=y.measureText(T+A).width-(B+D);b&&f.kerning.push({first:Fl(T),second:Fl(A),amount:b})}}const w=new pr(f,_,!0);return pr.available[e]!==void 0&&pr.uninstall(e),pr.available[e]=w,w}};ri.ALPHA=[["a","z"],["A","Z"]," "],ri.NUMERIC=[["0","9"]],ri.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],ri.ASCII=[[" ","~"]],ri.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:ri.ALPHANUMERIC},ri.available={};let ii=ri;var AD=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
  if (median < 0.01) {\r
    alpha = 0.0;\r
  } else if (median > 0.99) {\r
    alpha = 1.0;\r
  }\r
\r
  // Gamma correction for coverage-like alpha\r
  float luma = dot(uColor.rgb, vec3(0.299, 0.587, 0.114));\r
  float gamma = mix(1.0, 1.0 / 2.2, luma);\r
  float coverage = pow(uColor.a * alpha, gamma);  \r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, coverage);\r
}\r
`,bD=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`;const $0=[],W0=[],X0=[],CD=class xT extends Ue{constructor(e,r={}){super();const{align:i,tint:n,maxWidth:s,letterSpacing:o,fontName:a,fontSize:l}=Object.assign({},xT.styleDefaults,r);if(!ii.available[a])throw new Error(`Missing BitmapFont "${a}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=i,this._tintColor=new me(n),this._font=void 0,this._fontName=a,this._fontSize=l,this.text=e,this._maxWidth=s,this._maxLineHeight=0,this._letterSpacing=o,this._anchor=new Ur(()=>{this.dirty=!0},this,0,0),this._roundPixels=j.ROUND_PIXELS,this.dirty=!0,this._resolution=j.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){var B;const e=ii.available[this._fontName],r=this.fontSize,i=r/e.size,n=new ae,s=[],o=[],a=[],l=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",u=vT(l),h=this._maxWidth*e.size/r,c=e.distanceFieldType==="none"?$0:W0;let d=null,f=0,p=0,g=0,x=-1,y=0,v=0,m=0,_=0;for(let D=0;D<u.length;D++){const b=u[D],M=Fl(b);if(/(?:\s)/.test(b)&&(x=D,y=f,_++),b==="\r"||b===`
`){o.push(f),a.push(-1),p=Math.max(p,f),++g,++v,n.x=0,n.y+=e.lineHeight,d=null,_=0;continue}const z=e.chars[M];if(!z)continue;d&&z.kerning[d]&&(n.x+=z.kerning[d]);const q=X0.pop()||{texture:W.EMPTY,line:0,charCode:0,prevSpaces:0,position:new ae};q.texture=z.texture,q.line=g,q.charCode=M,q.position.x=Math.round(n.x+z.xOffset+this._letterSpacing/2),q.position.y=Math.round(n.y+z.yOffset),q.prevSpaces=_,s.push(q),f=q.position.x+Math.max(z.xAdvance-z.xOffset,z.texture.orig.width),n.x+=z.xAdvance+this._letterSpacing,m=Math.max(m,z.yOffset+z.texture.height),d=M,x!==-1&&h>0&&n.x>h&&(++v,cs(s,1+x-v,1+D-x),D=x,x=-1,o.push(y),a.push(s.length>0?s[s.length-1].prevSpaces:0),p=Math.max(p,y),g++,n.x=0,n.y+=e.lineHeight,d=null,_=0)}const w=u[u.length-1];w!=="\r"&&w!==`
`&&(/(?:\s)/.test(w)&&(f=y),o.push(f),p=Math.max(p,f),a.push(-1));const S=[];for(let D=0;D<=g;D++){let b=0;this._align==="right"?b=p-o[D]:this._align==="center"?b=(p-o[D])/2:this._align==="justify"&&(b=a[D]<0?0:(p-o[D])/a[D]),S.push(b)}const E=s.length,T={},C=[],A=this._activePagesMeshData;c.push(...A);for(let D=0;D<E;D++){const b=s[D].texture,M=b.baseTexture.uid;if(!T[M]){let z=c.pop();if(!z){const O=new Zk;let I,G;e.distanceFieldType==="none"?(I=new V0(W.EMPTY),G=J.NORMAL):(I=new V0(W.EMPTY,{program:Gr.from(bD,AD),uniforms:{uFWidth:0}}),G=J.NORMAL_NPM);const P=new G0(O,I);P.blendMode=G,z={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:P,vertices:null,uvs:null,indices:null}}z.index=0,z.indexCount=0,z.vertexCount=0,z.uvsCount=0,z.total=0;const{_textureCache:q}=this;q[M]=q[M]||new W(b.baseTexture),z.mesh.texture=q[M],z.mesh.tint=this._tintColor.value,C.push(z),T[M]=z}T[M].total++}for(let D=0;D<A.length;D++)C.includes(A[D])||this.removeChild(A[D].mesh);for(let D=0;D<C.length;D++)C[D].mesh.parent!==this&&this.addChild(C[D].mesh);this._activePagesMeshData=C;for(const D in T){const b=T[D],M=b.total;if(!(((B=b.indices)==null?void 0:B.length)>6*M)||b.vertices.length<G0.BATCHABLE_SIZE*2)b.vertices=new Float32Array(4*2*M),b.uvs=new Float32Array(4*2*M),b.indices=new Uint16Array(6*M);else{const z=b.total,q=b.vertices;for(let O=z*4*2;O<q.length;O++)q[O]=0}b.mesh.size=6*M}for(let D=0;D<E;D++){const b=s[D];let M=b.position.x+S[b.line]*(this._align==="justify"?b.prevSpaces:1);this._roundPixels&&(M=Math.round(M));const z=M*i,q=b.position.y*i,O=b.texture,I=T[O.baseTexture.uid],G=O.frame,P=O._uvs,k=I.index++;I.indices[k*6+0]=0+k*4,I.indices[k*6+1]=1+k*4,I.indices[k*6+2]=2+k*4,I.indices[k*6+3]=0+k*4,I.indices[k*6+4]=2+k*4,I.indices[k*6+5]=3+k*4,I.vertices[k*8+0]=z,I.vertices[k*8+1]=q,I.vertices[k*8+2]=z+G.width*i,I.vertices[k*8+3]=q,I.vertices[k*8+4]=z+G.width*i,I.vertices[k*8+5]=q+G.height*i,I.vertices[k*8+6]=z,I.vertices[k*8+7]=q+G.height*i,I.uvs[k*8+0]=P.x0,I.uvs[k*8+1]=P.y0,I.uvs[k*8+2]=P.x1,I.uvs[k*8+3]=P.y1,I.uvs[k*8+4]=P.x2,I.uvs[k*8+5]=P.y2,I.uvs[k*8+6]=P.x3,I.uvs[k*8+7]=P.y3}this._textWidth=p*i,this._textHeight=(n.y+e.lineHeight)*i;for(const D in T){const b=T[D];if(this.anchor.x!==0||this.anchor.y!==0){let O=0;const I=this._textWidth*this.anchor.x,G=this._textHeight*this.anchor.y;for(let P=0;P<b.total;P++)b.vertices[O++]-=I,b.vertices[O++]-=G,b.vertices[O++]-=I,b.vertices[O++]-=G,b.vertices[O++]-=I,b.vertices[O++]-=G,b.vertices[O++]-=I,b.vertices[O++]-=G}this._maxLineHeight=m*i;const M=b.mesh.geometry.getBuffer("aVertexPosition"),z=b.mesh.geometry.getBuffer("aTextureCoord"),q=b.mesh.geometry.getIndex();M.data=b.vertices,z.data=b.uvs,q.data=b.indices,M.update(),z.update(),q.update()}for(let D=0;D<s.length;D++)X0.push(s[D]);this._font=e,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0);const{distanceFieldRange:r,distanceFieldType:i,size:n}=ii.available[this._fontName];if(i!=="none"){const{a:s,b:o,c:a,d:l}=this.worldTransform,u=Math.sqrt(s*s+o*o),h=Math.sqrt(a*a+l*l),c=(Math.abs(u)+Math.abs(h))/2,d=this.fontSize/n,f=e._view.resolution;for(const p of this._activePagesMeshData)p.mesh.shader.uniforms.uFWidth=c*r*d*f}super._render(e)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){const e=ii.available[this._fontName];if(!e)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==e&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tintColor.value}set tint(e){if(this.tint!==e){this._tintColor.setValue(e);for(let r=0;r<this._activePagesMeshData.length;r++)this._activePagesMeshData[r].mesh.tint=e}}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.dirty=!0)}get fontName(){return this._fontName}set fontName(e){if(!ii.available[e])throw new Error(`Missing BitmapFont "${e}"`);this._fontName!==e&&(this._fontName=e,this.dirty=!0)}get fontSize(){return this._fontSize??ii.available[this._fontName].size}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.dirty=!0)}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get text(){return this._text}set text(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(e){this._maxWidth!==e&&(this._maxWidth=e,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(e){e!==this._roundPixels&&(this._roundPixels=e,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}destroy(e){const{_textureCache:r}=this,i=ii.available[this._fontName].distanceFieldType==="none"?$0:W0;i.push(...this._activePagesMeshData);for(const n of this._activePagesMeshData)this.removeChild(n.mesh);this._activePagesMeshData=[],i.filter(n=>r[n.mesh.texture.baseTexture.uid]).forEach(n=>{n.mesh.texture=W.EMPTY});for(const n in r)r[n].destroy(),delete r[n];this._font=null,this._tintColor=null,this._textureCache=null,super.destroy(e)}};CD.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};const PD=[".xml",".fnt"],RD={extension:{type:U.LoadParser,priority:sr.Normal},name:"loadBitmapFont",test(t){return PD.includes(Ke.extname(t).toLowerCase())},async testParse(t){return Dl.test(t)||Nf.test(t)},async parse(t,e,r){const i=Dl.test(t)?Dl.parse(t):Nf.parse(t),{src:n}=e,{page:s}=i,o=[];for(let u=0;u<s.length;++u){const h=s[u].file;let c=Ke.join(Ke.dirname(n),h);c=If(c,n),o.push(c)}const a=await r.load(o),l=o.map(u=>a[u]);return ii.install(i,l,!0)},async load(t,e){return(await j.ADAPTER.fetch(t)).text()},unload(t){t.destroy()}};X.add(RD);const Of=class Bn extends Zr{constructor(){super(...arguments),this._fonts=[],this._overrides=[],this._stylesheet="",this.fontsDirty=!1}static from(e){return new Bn(Object.keys(Bn.defaultOptions).reduce((r,i)=>({...r,[i]:e[i]}),{}))}cleanFonts(){this._fonts.length>0&&(this._fonts.forEach(e=>{URL.revokeObjectURL(e.src),e.refs--,e.refs===0&&(e.fontFace&&document.fonts.delete(e.fontFace),delete Bn.availableFonts[e.originalUrl])}),this.fontFamily="Arial",this._fonts.length=0,this.styleID++,this.fontsDirty=!0)}loadFont(e,r={}){const{availableFonts:i}=Bn;if(i[e]){const n=i[e];return this._fonts.push(n),n.refs++,this.styleID++,this.fontsDirty=!0,Promise.resolve()}return j.ADAPTER.fetch(e).then(n=>n.blob()).then(async n=>new Promise((s,o)=>{const a=URL.createObjectURL(n),l=new FileReader;l.onload=()=>s([a,l.result]),l.onerror=o,l.readAsDataURL(n)})).then(async([n,s])=>{const o=Object.assign({family:Ke.basename(e,Ke.extname(e)),weight:"normal",style:"normal",display:"auto",src:n,dataSrc:s,refs:1,originalUrl:e,fontFace:null},r);i[e]=o,this._fonts.push(o),this.styleID++;const a=new FontFace(o.family,`url(${o.src})`,{weight:o.weight,style:o.style,display:o.display});o.fontFace=a,await a.load(),document.fonts.add(a),await document.fonts.ready,this.styleID++,this.fontsDirty=!0})}addOverride(...e){const r=e.filter(i=>!this._overrides.includes(i));r.length>0&&(this._overrides.push(...r),this.styleID++)}removeOverride(...e){const r=e.filter(i=>this._overrides.includes(i));r.length>0&&(this._overrides=this._overrides.filter(i=>!r.includes(i)),this.styleID++)}toCSS(e){return[`transform: scale(${e})`,"transform-origin: top left","display: inline-block",`color: ${this.normalizeColor(this.fill)}`,`font-size: ${this.fontSize}px`,`font-family: ${this.fontFamily}`,`font-weight: ${this.fontWeight}`,`font-style: ${this.fontStyle}`,`font-variant: ${this.fontVariant}`,`letter-spacing: ${this.letterSpacing}px`,`text-align: ${this.align}`,`padding: ${this.padding}px`,`white-space: ${this.whiteSpace}`,...this.lineHeight?[`line-height: ${this.lineHeight}px`]:[],...this.wordWrap?[`word-wrap: ${this.breakWords?"break-all":"break-word"}`,`max-width: ${this.wordWrapWidth}px`]:[],...this.strokeThickness?[`-webkit-text-stroke-width: ${this.strokeThickness}px`,`-webkit-text-stroke-color: ${this.normalizeColor(this.stroke)}`,`text-stroke-width: ${this.strokeThickness}px`,`text-stroke-color: ${this.normalizeColor(this.stroke)}`,"paint-order: stroke"]:[],...this.dropShadow?[this.dropShadowToCSS()]:[],...this._overrides].join(";")}toGlobalCSS(){return this._fonts.reduce((e,r)=>`${e}
            @font-face {
                font-family: "${r.family}";
                src: url('${r.dataSrc}');
                font-weight: ${r.weight};
                font-style: ${r.style};
                font-display: ${r.display};
            }`,this._stylesheet)}get stylesheet(){return this._stylesheet}set stylesheet(e){this._stylesheet!==e&&(this._stylesheet=e,this.styleID++)}normalizeColor(e){return Array.isArray(e)&&(e=vI(e)),typeof e=="number"?yI(e):e}dropShadowToCSS(){let e=this.normalizeColor(this.dropShadowColor);const r=this.dropShadowAlpha,i=Math.round(Math.cos(this.dropShadowAngle)*this.dropShadowDistance),n=Math.round(Math.sin(this.dropShadowAngle)*this.dropShadowDistance);e.startsWith("#")&&r<1&&(e+=(r*255|0).toString(16).padStart(2,"0"));const s=`${i}px ${n}px`;return this.dropShadowBlur>0?`text-shadow: ${s} ${this.dropShadowBlur}px ${e}`:`text-shadow: ${s} ${e}`}reset(){Object.assign(this,Bn.defaultOptions)}onBeforeDraw(){const{fontsDirty:e}=this;return this.fontsDirty=!1,this.isSafari&&this._fonts.length>0&&e?new Promise(r=>setTimeout(r,100)):Promise.resolve()}get isSafari(){const{userAgent:e}=j.ADAPTER.getNavigator();return/^((?!chrome|android).)*safari/i.test(e)}set fillGradientStops(e){console.warn("[HTMLTextStyle] fillGradientStops is not supported by HTMLText")}get fillGradientStops(){return super.fillGradientStops}set fillGradientType(e){console.warn("[HTMLTextStyle] fillGradientType is not supported by HTMLText")}get fillGradientType(){return super.fillGradientType}set miterLimit(e){console.warn("[HTMLTextStyle] miterLimit is not supported by HTMLText")}get miterLimit(){return super.miterLimit}set trim(e){console.warn("[HTMLTextStyle] trim is not supported by HTMLText")}get trim(){return super.trim}set textBaseline(e){console.warn("[HTMLTextStyle] textBaseline is not supported by HTMLText")}get textBaseline(){return super.textBaseline}set leading(e){console.warn("[HTMLTextStyle] leading is not supported by HTMLText")}get leading(){return super.leading}set lineJoin(e){console.warn("[HTMLTextStyle] lineJoin is not supported by HTMLText")}get lineJoin(){return super.lineJoin}};Of.availableFonts={},Of.defaultOptions={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,padding:0,stroke:"black",strokeThickness:0,whiteSpace:"normal",wordWrap:!1,wordWrapWidth:100};let Dc=Of;const al=class Ln extends Ds{constructor(e="",r={}){super(W.EMPTY),this._text=null,this._style=null,this._autoResolution=!0,this.localStyleID=-1,this.dirty=!1,this._updateID=0,this.ownsStyle=!1;const i=new Image,n=W.from(i,{scaleMode:j.SCALE_MODE,resourceOptions:{autoLoad:!1}});n.orig=new te,n.trim=new te,this.texture=n;const s="http://www.w3.org/2000/svg",o="http://www.w3.org/1999/xhtml",a=document.createElementNS(s,"svg"),l=document.createElementNS(s,"foreignObject"),u=document.createElementNS(o,"div"),h=document.createElementNS(o,"style");l.setAttribute("width","10000"),l.setAttribute("height","10000"),l.style.overflow="hidden",a.appendChild(l),this.maxWidth=Ln.defaultMaxWidth,this.maxHeight=Ln.defaultMaxHeight,this._domElement=u,this._styleElement=h,this._svgRoot=a,this._foreignObject=l,this._foreignObject.appendChild(h),this._foreignObject.appendChild(u),this._image=i,this._loadImage=new Image,this._autoResolution=Ln.defaultAutoResolution,this._resolution=Ln.defaultResolution??j.RESOLUTION,this.text=e,this.style=r}measureText(e){var h,c;const{text:r,style:i,resolution:n}=Object.assign({text:this._text,style:this._style,resolution:this._resolution},e);Object.assign(this._domElement,{innerHTML:r,style:i.toCSS(n)}),this._styleElement.textContent=i.toGlobalCSS(),document.body.appendChild(this._svgRoot);const s=this._domElement.getBoundingClientRect();this._svgRoot.remove();const{width:o,height:a}=s;(o>this.maxWidth||a>this.maxHeight)&&console.warn("[HTMLText] Large expanse of text, increase HTMLText.maxWidth or HTMLText.maxHeight property.");const l=Math.min(this.maxWidth,Math.ceil(o)),u=Math.min(this.maxHeight,Math.ceil(a));return this._svgRoot.setAttribute("width",l.toString()),this._svgRoot.setAttribute("height",u.toString()),r!==this._text&&(this._domElement.innerHTML=this._text),i!==this._style&&(Object.assign(this._domElement,{style:(h=this._style)==null?void 0:h.toCSS(n)}),this._styleElement.textContent=(c=this._style)==null?void 0:c.toGlobalCSS()),{width:l+i.padding*2,height:u+i.padding*2}}async updateText(e=!0){const{style:r,_image:i,_loadImage:n}=this;if(this.localStyleID!==r.styleID&&(this.dirty=!0,this.localStyleID=r.styleID),!this.dirty&&e)return;const{width:s,height:o}=this.measureText();i.width=n.width=Math.ceil(Math.max(1,s)),i.height=n.height=Math.ceil(Math.max(1,o)),this._updateID++;const a=this._updateID;await new Promise(l=>{n.onload=async()=>{if(a<this._updateID){l();return}await r.onBeforeDraw(),i.src=n.src,n.onload=null,n.src="",this.updateTexture(),l()};const u=new XMLSerializer().serializeToString(this._svgRoot);n.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(u)}`})}get source(){return this._image}updateTexture(){const{style:e,texture:r,_image:i,resolution:n}=this,{padding:s}=e,{baseTexture:o}=r;r.trim.width=r._frame.width=i.width/n,r.trim.height=r._frame.height=i.height/n,r.trim.x=-s,r.trim.y=-s,r.orig.width=r._frame.width-s*2,r.orig.height=r._frame.height-s*2,this._onTextureUpdate(),o.setRealSize(i.width,i.height,n),this.dirty=!1}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._render(e)}_renderCanvas(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._renderCanvas(e)}getLocalBounds(e){return this.updateText(!0),super.getLocalBounds(e)}_calculateBounds(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_onStyleChange(){this.dirty=!0}destroy(e){var i,n,s,o,a;typeof e=="boolean"&&(e={children:e}),e=Object.assign({},Ln.defaultDestroyOptions,e),super.destroy(e);const r=null;this.ownsStyle&&((i=this._style)==null||i.cleanFonts()),this._style=r,(n=this._svgRoot)==null||n.remove(),this._svgRoot=r,(s=this._domElement)==null||s.remove(),this._domElement=r,(o=this._foreignObject)==null||o.remove(),this._foreignObject=r,(a=this._styleElement)==null||a.remove(),this._styleElement=r,this._loadImage.src="",this._loadImage.onload=null,this._loadImage=r,this._image.src="",this._image=r}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._image.width/this.resolution}set width(e){this.updateText(!0);const r=pi(this.scale.x)||1;this.scale.x=r*e/this._image.width/this.resolution,this._width=e}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._image.height/this.resolution}set height(e){this.updateText(!0);const r=pi(this.scale.y)||1;this.scale.y=r*e/this._image.height/this.resolution,this._height=e}get style(){return this._style}set style(e){this._style!==e&&(e=e||{},e instanceof Dc?(this.ownsStyle=!1,this._style=e):e instanceof Zr?(console.warn("[HTMLText] Cloning TextStyle, if this is not what you want, use HTMLTextStyle"),this.ownsStyle=!0,this._style=Dc.from(e)):(this.ownsStyle=!0,this._style=new Dc(e)),this.localStyleID=-1,this.dirty=!0)}get text(){return this._text}set text(e){e=String(e===""||e===null||e===void 0?" ":e),e=this.sanitiseText(e),this._text!==e&&(this._text=e,this.dirty=!0)}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}sanitiseText(e){return e.replace(/<br>/gi,"<br/>").replace(/<hr>/gi,"<hr/>").replace(/&nbsp;/gi,"&#160;")}};al.defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0},al.defaultMaxWidth=2024,al.defaultMaxHeight=2024,al.defaultAutoResolution=!0;class ID{constructor(){H(this,"keys",{});H(this,"virtualAxis",{x:0,y:0});window.addEventListener("keydown",e=>this.keys[e.code]=!0),window.addEventListener("keyup",e=>this.keys[e.code]=!1)}isDown(e){return!!this.keys[e]}get axis(){let e=this.virtualAxis.x,r=this.virtualAxis.y;(this.isDown("ArrowLeft")||this.isDown("KeyA"))&&(e-=1),(this.isDown("ArrowRight")||this.isDown("KeyD"))&&(e+=1),(this.isDown("ArrowUp")||this.isDown("KeyW"))&&(r-=1),(this.isDown("ArrowDown")||this.isDown("KeyS"))&&(r+=1);const i=Math.sqrt(e*e+r*r);return i>1&&(e/=i,r/=i),{x:e,y:r}}}const uo=new ID;class MD extends Ue{constructor(r){super();H(this,"speed");H(this,"fireRate");H(this,"fireTimer",0);H(this,"graphics");H(this,"data");H(this,"hp");H(this,"maxHp");this.data=r,this.speed=r.stats.speed,this.fireRate=r.stats.fireRate,this.hp=r.stats.hp,this.maxHp=r.stats.hp,this.graphics=new de,this.graphics.beginFill(r.color),this.graphics.drawRect(-16,-16,32,32),this.graphics.endFill(),this.addChild(this.graphics)}update(r){const{x:i,y:n}=uo.axis;this.x+=i*this.speed*r,this.y+=n*this.speed*r,this.fireTimer>0&&(this.fireTimer-=r)}canFire(){return this.fireTimer<=0?(this.fireTimer=this.fireRate,!0):!1}}class kD extends Ue{constructor(r,i){super();H(this,"grid");this.grid=new de,this.drawWorld(r,i),this.addChild(this.grid)}drawWorld(r,i){this.grid.clear(),this.grid.beginFill(394760),this.grid.drawRect(0,0,r,i),this.grid.endFill();for(let s=0;s<20;s++){const o=Math.random()*r,a=Math.random()*i,l=200+Math.random()*400;this.grid.beginFill(s%2===0?6514417:15485081,.02),this.grid.drawCircle(o,a,l),this.grid.endFill()}for(let s=0;s<300;s++){const o=Math.random()*r,a=Math.random()*i,l=.2+Math.random()*.8;this.grid.beginFill(16777215,l),this.grid.drawCircle(o,a,Math.random()*1.5),this.grid.endFill()}const n=100;this.grid.lineStyle(1,6514417,.03);for(let s=0;s<=r;s+=n)this.grid.moveTo(s,0),this.grid.lineTo(s,i);for(let s=0;s<=i;s+=n)this.grid.moveTo(0,s),this.grid.lineTo(r,s)}}class Fc extends Ue{constructor(r,i,n="basic",s=!1){super();H(this,"type","basic");H(this,"speed",100);H(this,"hp",10);H(this,"maxHp",10);H(this,"graphics");H(this,"isElite",!1);H(this,"state","default");H(this,"stateTimer",0);H(this,"targetPos",null);H(this,"flashTimer",0);H(this,"knockback",{x:0,y:0});this.x=r,this.y=i,this.type=n,this.isElite=s,this.graphics=new de,this.setupStats(),this.draw(),this.addChild(this.graphics)}setupStats(){switch(this.isElite&&(this.scale.set(1.5),this.hp*=3,this.speed*=1.2),this.type){case"charger":this.speed=60,this.hp=25;break;case"ranged":this.speed=80,this.hp=15;break;case"explosive":this.speed=180,this.hp=5;break;case"healer":this.speed=70,this.hp=30;break;case"splitter":this.speed=90,this.hp=20;break}this.maxHp=this.hp}draw(){this.graphics.clear();let r=16007006;switch(this.type){case"charger":r=16347926;break;case"ranged":r=3900150;break;case"explosive":r=16436245;break;case"healer":r=2278750;break;case"splitter":r=15485081;break}this.isElite&&this.graphics.lineStyle(2,16777215,.8),this.graphics.beginFill(this.flashTimer>0?16777215:r),this.graphics.drawRect(-12,-12,24,24),this.graphics.endFill(),this.graphics.beginFill(0,.5),this.graphics.drawRect(-15,-20,30,4),this.graphics.endFill(),this.graphics.beginFill(2278750),this.graphics.drawRect(-15,-20,30*(this.hp/this.maxHp),4),this.graphics.endFill()}update(r,i,n){const s=i.x-this.x,o=i.y-this.y,a=Math.sqrt(s*s+o*o);this.knockback.x*=.85,this.knockback.y*=.85,this.x+=this.knockback.x,this.y+=this.knockback.y,this.flashTimer>0&&(this.flashTimer-=r);let l=0,u=0;for(const h of n){if(h===this)continue;const c=this.x-h.x,d=this.y-h.y,f=Math.sqrt(c*c+d*d);f<30&&(l+=c/(f+1)*20,u+=d/(f+1)*20)}switch(this.type){case"basic":this.moveTowards(s,o,a,this.speed,r,l,u);break;case"charger":this.state==="default"?a<250?(this.state="winding_up",this.stateTimer=1):this.moveTowards(s,o,a,this.speed,r,l,u):this.state==="winding_up"?(this.stateTimer-=r,this.stateTimer<=0&&(this.state="charging",this.stateTimer=.5,this.targetPos={x:s/a,y:o/a})):this.state==="charging"&&(this.stateTimer-=r,this.targetPos&&(this.x+=this.targetPos.x*this.speed*4*r,this.y+=this.targetPos.y*this.speed*4*r),this.stateTimer<=0&&(this.state="default"));break;case"ranged":a>300?this.moveTowards(s,o,a,this.speed,r,l,u):a<200&&this.moveTowards(-s,-o,a,this.speed,r,l,u);break;case"explosive":this.moveTowards(s,o,a,this.speed,r,l,u),a<40&&this.state!=="exploding"&&(this.state="exploding",this.stateTimer=1),this.state==="exploding"&&(this.stateTimer-=r,this.alpha=Math.sin(this.stateTimer*20)*.5+.5,this.stateTimer<=0&&(this.hp=0));break;case"healer":if(this.moveTowards(s,o,a,this.speed,r,l,u),this.stateTimer-=r,this.stateTimer<=0){this.stateTimer=3;for(const h of n){if(h===this)continue;Math.sqrt((this.x-h.x)**2+(this.y-h.y)**2)<150&&(h.hp=Math.min(h.maxHp,h.hp+2))}}break;case"splitter":this.moveTowards(s,o,a,this.speed,r,l,u);break}this.draw()}moveTowards(r,i,n,s,o,a,l){n>1&&(this.x+=(r/n*s+a)*o,this.y+=(i/n*s+l)*o)}applyKnockback(r,i,n){this.knockback.x+=r*n,this.knockback.y+=i*n,this.flashTimer=.1}}class DD extends Ue{constructor(r,i,n){super();H(this,"speed",600);H(this,"damage",5);H(this,"lifeTime",2);H(this,"graphics");H(this,"velocity");this.x=r,this.y=i,this.velocity={x:Math.cos(n)*this.speed,y:Math.sin(n)*this.speed},this.graphics=new de,this.graphics.beginFill(16096779),this.graphics.drawRect(-4,-2,8,4),this.graphics.endFill(),this.rotation=n,this.addChild(this.graphics)}update(r){this.x+=this.velocity.x*r,this.y+=this.velocity.y*r,this.lifeTime-=r}}class FD extends Ue{constructor(r,i){super();H(this,"value",30);H(this,"graphics");this.x=r,this.y=i,this.graphics=new de,this.graphics.beginFill(6333946),this.graphics.drawPolygon([0,-6,4,0,0,6,-4,0]),this.graphics.endFill(),this.addChild(this.graphics)}}class BD extends Ue{constructor(r,i,n){super();H(this,"type");H(this,"graphics");H(this,"radius",10);H(this,"age",0);this.x=r,this.y=i,this.type=n,this.graphics=new de,this.draw(),this.addChild(this.graphics)}draw(){switch(this.graphics.clear(),this.type){case"health":this.graphics.beginFill(15680580),this.graphics.drawRoundedRect(-8,-8,16,16,4),this.graphics.endFill(),this.graphics.beginFill(16777215),this.graphics.drawRect(-6,-2,12,4),this.graphics.drawRect(-2,-6,4,12),this.graphics.endFill();break;case"magnet":this.graphics.beginFill(3900150),this.graphics.drawCircle(0,0,8),this.graphics.beginFill(16777215,.5),this.graphics.drawCircle(0,0,4),this.graphics.endFill();break;case"nuke":this.graphics.beginFill(16436245),this.graphics.drawPolygon([-10,8,0,-10,10,8]),this.graphics.endFill();break}}update(r){this.age+=r/60,this.y+=Math.sin(this.age*4)*.2}}var dm={exports:{}};dm.exports;(function(t){(function(e,r,i){function n(l){var u=this,h=a();u.next=function(){var c=2091639*u.s0+u.c*23283064365386963e-26;return u.s0=u.s1,u.s1=u.s2,u.s2=c-(u.c=c|0)},u.c=1,u.s0=h(" "),u.s1=h(" "),u.s2=h(" "),u.s0-=h(l),u.s0<0&&(u.s0+=1),u.s1-=h(l),u.s1<0&&(u.s1+=1),u.s2-=h(l),u.s2<0&&(u.s2+=1),h=null}function s(l,u){return u.c=l.c,u.s0=l.s0,u.s1=l.s1,u.s2=l.s2,u}function o(l,u){var h=new n(l),c=u&&u.state,d=h.next;return d.int32=function(){return h.next()*4294967296|0},d.double=function(){return d()+(d()*2097152|0)*11102230246251565e-32},d.quick=d,c&&(typeof c=="object"&&s(c,h),d.state=function(){return s(h,{})}),d}function a(){var l=4022871197,u=function(h){h=String(h);for(var c=0;c<h.length;c++){l+=h.charCodeAt(c);var d=.02519603282416938*l;l=d>>>0,d-=l,d*=l,l=d>>>0,d-=l,l+=d*4294967296}return(l>>>0)*23283064365386963e-26};return u}r&&r.exports?r.exports=o:this.alea=o})(Gt,t)})(dm);var LD=dm.exports,fm={exports:{}};fm.exports;(function(t){(function(e,r,i){function n(a){var l=this,u="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var c=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^c^c>>>8},a===(a|0)?l.x=a:u+=a;for(var h=0;h<u.length+64;h++)l.x^=u.charCodeAt(h)|0,l.next()}function s(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l}function o(a,l){var u=new n(a),h=l&&l.state,c=function(){return(u.next()>>>0)/4294967296};return c.double=function(){do var d=u.next()>>>11,f=(u.next()>>>0)/4294967296,p=(d+f)/(1<<21);while(p===0);return p},c.int32=u.next,c.quick=c,h&&(typeof h=="object"&&s(h,u),c.state=function(){return s(u,{})}),c}r&&r.exports?r.exports=o:this.xor128=o})(Gt,t)})(fm);var ND=fm.exports,pm={exports:{}};pm.exports;(function(t){(function(e,r,i){function n(a){var l=this,u="";l.next=function(){var c=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(c^c<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,a===(a|0)?l.x=a:u+=a;for(var h=0;h<u.length+64;h++)l.x^=u.charCodeAt(h)|0,h==u.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function s(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l.v=a.v,l.d=a.d,l}function o(a,l){var u=new n(a),h=l&&l.state,c=function(){return(u.next()>>>0)/4294967296};return c.double=function(){do var d=u.next()>>>11,f=(u.next()>>>0)/4294967296,p=(d+f)/(1<<21);while(p===0);return p},c.int32=u.next,c.quick=c,h&&(typeof h=="object"&&s(h,u),c.state=function(){return s(u,{})}),c}r&&r.exports?r.exports=o:this.xorwow=o})(Gt,t)})(pm);var OD=pm.exports,mm={exports:{}};mm.exports;(function(t){(function(e,r,i){function n(a){var l=this;l.next=function(){var h=l.x,c=l.i,d,f;return d=h[c],d^=d>>>7,f=d^d<<24,d=h[c+1&7],f^=d^d>>>10,d=h[c+3&7],f^=d^d>>>3,d=h[c+4&7],f^=d^d<<7,d=h[c+7&7],d=d^d<<13,f^=d^d<<9,h[c]=f,l.i=c+1&7,f};function u(h,c){var d,f=[];if(c===(c|0))f[0]=c;else for(c=""+c,d=0;d<c.length;++d)f[d&7]=f[d&7]<<15^c.charCodeAt(d)+f[d+1&7]<<13;for(;f.length<8;)f.push(0);for(d=0;d<8&&f[d]===0;++d);for(d==8?f[7]=-1:f[d],h.x=f,h.i=0,d=256;d>0;--d)h.next()}u(l,a)}function s(a,l){return l.x=a.x.slice(),l.i=a.i,l}function o(a,l){a==null&&(a=+new Date);var u=new n(a),h=l&&l.state,c=function(){return(u.next()>>>0)/4294967296};return c.double=function(){do var d=u.next()>>>11,f=(u.next()>>>0)/4294967296,p=(d+f)/(1<<21);while(p===0);return p},c.int32=u.next,c.quick=c,h&&(h.x&&s(h,u),c.state=function(){return s(u,{})}),c}r&&r.exports?r.exports=o:this.xorshift7=o})(Gt,t)})(mm);var UD=mm.exports,gm={exports:{}};gm.exports;(function(t){(function(e,r,i){function n(a){var l=this;l.next=function(){var h=l.w,c=l.X,d=l.i,f,p;return l.w=h=h+1640531527|0,p=c[d+34&127],f=c[d=d+1&127],p^=p<<13,f^=f<<17,p^=p>>>15,f^=f>>>12,p=c[d]=p^f,l.i=d,p+(h^h>>>16)|0};function u(h,c){var d,f,p,g,x,y=[],v=128;for(c===(c|0)?(f=c,c=null):(c=c+"\0",f=0,v=Math.max(v,c.length)),p=0,g=-32;g<v;++g)c&&(f^=c.charCodeAt((g+32)%c.length)),g===0&&(x=f),f^=f<<10,f^=f>>>15,f^=f<<4,f^=f>>>13,g>=0&&(x=x+1640531527|0,d=y[g&127]^=f+x,p=d==0?p+1:0);for(p>=128&&(y[(c&&c.length||0)&127]=-1),p=127,g=4*128;g>0;--g)f=y[p+34&127],d=y[p=p+1&127],f^=f<<13,d^=d<<17,f^=f>>>15,d^=d>>>12,y[p]=f^d;h.w=x,h.X=y,h.i=p}u(l,a)}function s(a,l){return l.i=a.i,l.w=a.w,l.X=a.X.slice(),l}function o(a,l){a==null&&(a=+new Date);var u=new n(a),h=l&&l.state,c=function(){return(u.next()>>>0)/4294967296};return c.double=function(){do var d=u.next()>>>11,f=(u.next()>>>0)/4294967296,p=(d+f)/(1<<21);while(p===0);return p},c.int32=u.next,c.quick=c,h&&(h.X&&s(h,u),c.state=function(){return s(u,{})}),c}r&&r.exports?r.exports=o:this.xor4096=o})(Gt,t)})(gm);var GD=gm.exports,ym={exports:{}};ym.exports;(function(t){(function(e,r,i){function n(a){var l=this,u="";l.next=function(){var c=l.b,d=l.c,f=l.d,p=l.a;return c=c<<25^c>>>7^d,d=d-f|0,f=f<<24^f>>>8^p,p=p-c|0,l.b=c=c<<20^c>>>12^d,l.c=d=d-f|0,l.d=f<<16^d>>>16^p,l.a=p-c|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,a===Math.floor(a)?(l.a=a/4294967296|0,l.b=a|0):u+=a;for(var h=0;h<u.length+20;h++)l.b^=u.charCodeAt(h)|0,l.next()}function s(a,l){return l.a=a.a,l.b=a.b,l.c=a.c,l.d=a.d,l}function o(a,l){var u=new n(a),h=l&&l.state,c=function(){return(u.next()>>>0)/4294967296};return c.double=function(){do var d=u.next()>>>11,f=(u.next()>>>0)/4294967296,p=(d+f)/(1<<21);while(p===0);return p},c.int32=u.next,c.quick=c,h&&(typeof h=="object"&&s(h,u),c.state=function(){return s(u,{})}),c}r&&r.exports?r.exports=o:this.tychei=o})(Gt,t)})(ym);var VD=ym.exports,_T={exports:{}};(function(t){(function(e,r,i){var n=256,s=6,o=52,a="random",l=i.pow(n,s),u=i.pow(2,o),h=u*2,c=n-1,d;function f(_,w,S){var E=[];w=w==!0?{entropy:!0}:w||{};var T=y(x(w.entropy?[_,m(r)]:_??v(),3),E),C=new p(E),A=function(){for(var B=C.g(s),D=l,b=0;B<u;)B=(B+b)*n,D*=n,b=C.g(1);for(;B>=h;)B/=2,D/=2,b>>>=1;return(B+b)/D};return A.int32=function(){return C.g(4)|0},A.quick=function(){return C.g(4)/4294967296},A.double=A,y(m(C.S),r),(w.pass||S||function(B,D,b,M){return M&&(M.S&&g(M,C),B.state=function(){return g(C,{})}),b?(i[a]=B,D):B})(A,T,"global"in w?w.global:this==i,w.state)}function p(_){var w,S=_.length,E=this,T=0,C=E.i=E.j=0,A=E.S=[];for(S||(_=[S++]);T<n;)A[T]=T++;for(T=0;T<n;T++)A[T]=A[C=c&C+_[T%S]+(w=A[T])],A[C]=w;(E.g=function(B){for(var D,b=0,M=E.i,z=E.j,q=E.S;B--;)D=q[M=c&M+1],b=b*n+q[c&(q[M]=q[z=c&z+D])+(q[z]=D)];return E.i=M,E.j=z,b})(n)}function g(_,w){return w.i=_.i,w.j=_.j,w.S=_.S.slice(),w}function x(_,w){var S=[],E=typeof _,T;if(w&&E=="object")for(T in _)try{S.push(x(_[T],w-1))}catch{}return S.length?S:E=="string"?_:_+"\0"}function y(_,w){for(var S=_+"",E,T=0;T<S.length;)w[c&T]=c&(E^=w[c&T]*19)+S.charCodeAt(T++);return m(w)}function v(){try{var _;return d&&(_=d.randomBytes)?_=_(n):(_=new Uint8Array(n),(e.crypto||e.msCrypto).getRandomValues(_)),m(_)}catch{var w=e.navigator,S=w&&w.plugins;return[+new Date,e,S,e.screen,m(r)]}}function m(_){return String.fromCharCode.apply(0,_)}if(y(i.random(),r),t.exports){t.exports=f;try{d=I1}catch{}}else i["seed"+a]=f})(typeof self<"u"?self:Gt,[],Math)})(_T);var jD=_T.exports,zD=LD,HD=ND,$D=OD,WD=UD,XD=GD,YD=VD,Tn=jD;Tn.alea=zD;Tn.xor128=HD;Tn.xorwow=$D;Tn.xorshift7=WD;Tn.xor4096=XD;Tn.tychei=YD;var KD=Tn;const qD=tp(KD);class ZD{constructor(e){H(this,"rng");H(this,"lastSpawnTime",0);H(this,"spawnInterval",1);this.rng=qD(e)}update(e,r){if(e>this.lastSpawnTime+this.spawnInterval){this.lastSpawnTime=e,this.spawnInterval=Math.max(.25,this.spawnInterval*.985);let i=1+Math.floor(e/50);Math.floor(e)%60<8&&e>30&&(i*=2.5);for(let s=0;s<i;s++){const o=this.rng()*Math.PI*2,a=800+this.rng()*200,l=Math.cos(o)*a,u=Math.sin(o)*a;let h="basic";const c=this.rng();e>15&&(c<.15?h="charger":c<.25&&(h="explosive")),e>40&&(c<.12?h="ranged":c<.2&&(h="splitter")),e>60&&c<.08&&(h="healer");const d=Math.floor(e)>0&&Math.floor(e)%120===0&&s===0,f=this.rng()<.05||d;r(l,u,h,f)}}}}const St={gunner:{id:"gunner",name:"Keskin Nianc",description:"Hzl ate eder, mermileri uzaa gider.",stats:{hp:100,speed:250,fireRate:.35,damage:8,might:1,area:1,pickupRange:60},trait:{name:"Seri At",description:"At hz her seviyede %2 artar."},startingSkillId:"spectral_swords",color:6514417},tank:{id:"tank",name:"Zrhl valye",description:"Yavatr ama ok dayankldr.",stats:{hp:250,speed:180,fireRate:.7,damage:12,might:1.2,area:1.1,pickupRange:50},trait:{name:"Dikenli Zrh",description:"Temas eden dmanlar %50 hasar geri alr."},startingSkillId:"bone_chain",color:1096065},mage:{id:"mage",name:"Gk Bycs",description:"Byk patlamalar yaratr.",stats:{hp:80,speed:220,fireRate:.6,damage:15,might:1.3,area:1.5,pickupRange:70},trait:{name:"Alan Hakimiyeti",description:"Tm yeteneklerin etki alan %20 daha genitir."},startingSkillId:"solar_beam",color:11032055},shadow:{id:"shadow",name:"Glge Suikasts",description:"Ar hzl ve lmcl.",stats:{hp:70,speed:350,fireRate:.3,damage:20,might:1.5,area:.8,pickupRange:50},trait:{name:"Kritik Darbe",description:"%20 ansla 3 kat hasar verir."},startingSkillId:"shadow_claw",color:15485081},collector:{id:"collector",name:"Enerji Toplayc",description:"Geliimi her eyden nde tutar.",stats:{hp:120,speed:280,fireRate:.5,damage:6,might:.8,area:1,pickupRange:150},trait:{name:"Mknats Gz",description:"%25 daha fazla tecrbe puan kazanr."},startingSkillId:"drone_bees",color:16096779},void:{id:"void",name:"Boluk Gezgini",description:"Kaosu kontrol eder.",stats:{hp:110,speed:240,fireRate:.5,damage:10,might:1.1,area:1.2,pickupRange:80},trait:{name:"Sekme",description:"Ana mermileri dmanlar arasnda seker."},startingSkillId:"chaos_orb",color:3900150}},Bc={shadow_claw:{id:"shadow_claw",name:"Glge Penesi",description:"En yakn dmana doru ksa mesafeli, hzl bir trmk atar.",type:"active",level:0,maxLevel:5},runic_circle:{id:"runic_circle",name:"Rnl ember",description:"Oyuncunun etrafnda yavaa genileyip daralan enerjik bir halka.",type:"active",level:0,maxLevel:5},toxic_bottle:{id:"toxic_bottle",name:"Zehirli ie",description:"Dmanlarn olduu yere zehirli bir gaz bulutu frlatr.",type:"active",level:0,maxLevel:5},spectral_swords:{id:"spectral_swords",name:"Spektral Kllar",description:"En yakn hedefe frlatlan hayalet kllar.",type:"active",level:0,maxLevel:5},earthquake:{id:"earthquake",name:"Yer Sarsnts",description:"Her 5 admda bir patlama yaratarak dmanlar geri iter.",type:"active",level:0,maxLevel:5},solar_beam:{id:"solar_beam",name:"Gne In",description:"Dmanlarn tepesine inen youn bir k stunu.",type:"active",level:0,maxLevel:5},boomerang_axe:{id:"boomerang_axe",name:"Bumerang Balta",description:"Gidip gelen ve yolundaki herkesi kesen balta.",type:"active",level:0,maxLevel:5},bone_chain:{id:"bone_chain",name:"Kemik Zinciri",description:"Etrafta savrulan ve dmanlar sersemleten bir zincir.",type:"active",level:0,maxLevel:5},chaos_orb:{id:"chaos_orb",name:"Kaos Kresi",description:"Sekerek patlayan bir enerji topu.",type:"active",level:0,maxLevel:5},drone_bees:{id:"drone_bees",name:"Dron Arlar",description:"Menzile giren dmanlara seri ineler frlatan robotik arlar.",type:"active",level:0,maxLevel:5}},Lc={honing_stone:{id:"honing_stone",name:"Keskin Bileme Ta",description:"Tm fiziksel silahlarn hasarn %10 artrr.",type:"passive",level:0,maxLevel:5},chronometer:{id:"chronometer",name:"Antik Kronometre",description:"Tm yeteneklerin bekleme sresini azaltr.",type:"passive",level:0,maxLevel:5},magnifier:{id:"magnifier",name:"Devin Byteci",description:"Skillerin kaplad alan ve patlama yarapn bytr.",type:"passive",level:0,maxLevel:5},mercury_mix:{id:"mercury_mix",name:"Civa Karm",description:"Mermilerin ve frlatlan objelerin hzn artrr.",type:"passive",level:0,maxLevel:5},spare_mag:{id:"spare_mag",name:"Yedek arjr",description:"Tek seferde frlatlan mermi/obje saysn artrr.",type:"passive",level:0,maxLevel:5},dragon_armor:{id:"dragon_armor",name:"Ejderha Zrh",description:"Alnan hasar azaltr ve savunmay glendirir.",type:"passive",level:0,maxLevel:5},rabbit_foot:{id:"rabbit_foot",name:"Tavan Aya",description:"ans orann artrr.",type:"passive",level:0,maxLevel:5},magnet_glove:{id:"magnet_glove",name:"Mknatsl Eldiven",description:"XP ve altn toplama menzilini artrr.",type:"passive",level:0,maxLevel:5},phoenix_feather:{id:"phoenix_feather",name:"Anka Kuu Ty",description:"Karakterin hareket hzn artrr.",type:"passive",level:0,maxLevel:5},life_elixir:{id:"life_elixir",name:"Yaam ksiri",description:"Maksimum HP ve can yenileme salar.",type:"passive",level:0,maxLevel:5}},Y0={shadow_claw:{required:"honing_stone",result:"Kabus Penesi",desc:"Geni koni alanna vurur, hasar kalc artar."},runic_circle:{required:"magnifier",result:"Sonsuzluk Halkas",desc:"Sabit dev enerji alan, dmanlar yavalatr."},toxic_bottle:{required:"life_elixir",result:"Veba Sisi",desc:"Devasa bulutlar, lenlerden can kresi kar."},spectral_swords:{required:"spare_mag",result:"Kl Mezarl",desc:"Dairesel patlama, kllar seker."},earthquake:{required:"phoenix_feather",result:"Tektonik Felaket",desc:"Hareket ettike arkada lav brakr."},solar_beam:{required:"chronometer",result:"Tanrsal Gazap",desc:"Kesintisiz oklu k huzmeleri."},boomerang_axe:{required:"mercury_mix",result:"Jilet Frtnas",desc:"Ekran iinde seken dev testere."},bone_chain:{required:"dragon_armor",result:"Cehennem Prangas",desc:"Dmanlar birbirine balar."},chaos_orb:{required:"rabbit_foot",result:"Kozmik Kaos",desc:"Dman takip eden enerji oklar."},drone_bees:{required:"magnet_glove",result:"Kovan Ana Gemisi",desc:"Dmanlar kemirir, XP toplar."}};class QD{constructor(e){H(this,"cooldowns",{});H(this,"worldContainer");H(this,"stepCount",0);H(this,"lastPlayerPos",{x:0,y:0});H(this,"onHit",null);H(this,"extraStats",{shadow_claw_bonus:0,axe_size:1});H(this,"ringGraphic",null);H(this,"lastTrailPos",{x:0,y:0});H(this,"boneGraphics",[]);H(this,"droneBees",[]);this.worldContainer=e}update(e,r,i,n,s,o,a,l){const u=Math.sqrt((r.x-this.lastPlayerPos.x)**2+(r.y-this.lastPlayerPos.y)**2);this.stepCount+=u,this.lastPlayerPos={x:r.x,y:r.y},n.forEach(h=>{if(this.cooldowns[h.id]||(this.cooldowns[h.id]=0),this.cooldowns[h.id]>0)this.cooldowns[h.id]-=e;else if(this.triggerSkill(h,r,i,o,a,l)){const d=this.getBaseCooldown(h.id,h.isEvolved);this.cooldowns[h.id]=d/s}}),n.forEach(h=>{h.isEvolved&&this.handleEvolvedPassiveUpdate(h,r,i,e,a,l)})}getBaseCooldown(e,r=!1){const i=e.replace("_evo","");return r?{shadow_claw:.5,runic_circle:0,toxic_bottle:2,spectral_swords:3,earthquake:.1,solar_beam:3,boomerang_axe:1.5,bone_chain:1,chaos_orb:2.5,drone_bees:.8}[i]||1:{shadow_claw:.8,runic_circle:4,toxic_bottle:3,spectral_swords:2.5,earthquake:0,solar_beam:5,boomerang_axe:2,bone_chain:1.5,chaos_orb:3,drone_bees:1.2}[i]||2}triggerSkill(e,r,i,n,s,o){const a=!!e.isEvolved||e.id.endsWith("_evo"),l=1+(e.level-1)*.25,u=o*l;switch(e.id){case"shadow_claw":case"shadow_claw_evo":return this.triggerShadowClaw(r,i,a,s,u);case"runic_circle":case"runic_circle_evo":return a?!0:this.triggerRunicCircle(r,i,s,u);case"toxic_bottle":case"toxic_bottle_evo":return this.triggerToxicBottle(r,i,a,s,u);case"spectral_swords":case"spectral_swords_evo":return this.triggerSpectralSwords(r,i,a,n,u);case"earthquake":case"earthquake_evo":return a?!1:this.stepCount>150?(this.stepCount=0,this.triggerEarthquake(r,i,s,u)):!1;case"solar_beam":case"solar_beam_evo":return this.triggerSolarBeam(r,i,a,s,u);case"boomerang_axe":case"boomerang_axe_evo":return this.triggerBoomerangAxe(r,i,a,n,s,u);case"bone_chain":case"bone_chain_evo":return a?!0:this.triggerBoneChain(r,i,a,s,u);case"chaos_orb":case"chaos_orb_evo":return this.triggerChaosOrb(r,i,a,n,s,u);case"drone_bees":case"drone_bees_evo":return a?!0:this.triggerDroneBees(r,i,a,n,s,u)}return!1}handleEvolvedPassiveUpdate(e,r,i,n,s,o){const a=o*2;switch(e.id.replace("_evo","")){case"runic_circle":this.updateInfinityRing(r,i,n,s,a);break;case"earthquake":this.updateLavaTrails(r,i,n,s,a);break;case"bone_chain":this.updateBoneSpin(r,i,n,s,a);break;case"drone_bees":this.updateDroneSwarm(r,i,n,s,a);break}}triggerShadowClaw(e,r,i,n,s){const o=this.getNearestEnemy(e,r,(i?300:180)*n);if(!o)return!1;const a=Math.atan2(o.y-e.y,o.x-e.x),l=new de;i?(l.lineStyle(6*n,10624175,.9),l.moveTo(-60,-20).lineTo(60,-10).moveTo(-60,0).lineTo(60,15).moveTo(-60,20).lineTo(60,40)):(l.lineStyle(4*n,16007006,.8),l.moveTo(-30,-15).lineTo(30,-5).moveTo(-30,0).lineTo(30,10).moveTo(-30,15).lineTo(30,25)),l.rotation=a,l.x=e.x+Math.cos(a)*50,l.y=e.y+Math.sin(a)*50,this.worldContainer.addChild(l);let u=!1;return r.forEach(h=>{const c=h.x-e.x,d=h.y-e.y,f=Math.sqrt(c*c+d*d),p=Math.atan2(d,c);let g=Math.abs(p-a);g>Math.PI&&(g=2*Math.PI-g);const x=(i?180:100)*n,y=i?1.5:.6;if(f<x&&g<y){const m=((i?60:30)+this.extraStats.shadow_claw_bonus)*s;h.hp-=m,h.applyKnockback(Math.cos(a),Math.sin(a),i?15:8),u=!0,i&&h.hp<=0&&(this.extraStats.shadow_claw_bonus+=.2)}}),u&&this.onHit&&this.onHit(i?.4:.2),setTimeout(()=>{l.destroyed||l.destroy()},120),!0}updateInfinityRing(e,r,i,n,s){this.ringGraphic||(this.ringGraphic=new de,this.worldContainer.addChild(this.ringGraphic));const o=220*n;this.ringGraphic.clear(),this.ringGraphic.lineStyle(4,6514417,.4),this.ringGraphic.beginFill(6514417,.05),this.ringGraphic.drawCircle(e.x,e.y,o),this.ringGraphic.endFill(),r.forEach(a=>{const l=Math.sqrt((e.x-a.x)**2+(e.y-a.y)**2);l<o&&(a.hp-=40*i*s,a.speed*=.5,a.applyKnockback((a.x-e.x)/l,(a.y-e.y)/l,.4))})}triggerToxicBottle(e,r,i,n,s){const o=this.getNearestEnemy(e,r,500),a=o?o.x:e.x+(Math.random()-.5)*300,l=o?o.y:e.y+(Math.random()-.5)*300,u=new de;u.beginFill(i?1409085:2278750),u.drawCircle(0,0,(i?12:8)*n),u.endFill(),u.x=e.x,u.y=e.y,this.worldContainer.addChild(u);let h=0;const c=d=>{h+=d/30,u.x+=(a-u.x)*.15,u.y+=(l-u.y)*.15,h>=1&&(u.destroy(),ie.shared.remove(c),this.createToxicCloud(a,l,r,i,n,s))};return ie.shared.add(c),!0}createToxicCloud(e,r,i,n,s,o){const a=new de;this.worldContainer.addChild(a);let l=n?6:4;const u=(n?160:90)*s,h=c=>{l-=c/60,a.clear(),a.beginFill(n?1332013:2278750,.4*(l/5)),a.drawCircle(e,r,u),a.endFill(),i.forEach(d=>{const f=Math.sqrt((e-d.x)**2+(r-d.y)**2);f<u&&(d.hp-=(n?6:2)*c*o,d.applyKnockback((d.x-e)/f,(d.y-r)/f,.3),n&&d.hp<=0&&this.spawnHealthOrb(d.x,d.y))}),l<=0&&(a.destroy(),ie.shared.remove(h))};ie.shared.add(h)}spawnHealthOrb(e,r){const i=new de;i.beginFill(15680580),i.drawCircle(0,0,6),i.x=e,i.y=r,this.worldContainer.addChild(i),setTimeout(()=>i.destroy(),1e3)}triggerSpectralSwords(e,r,i,n,s){if(i){const o=8+n*2;for(let a=0;a<o;a++){const l=a/o*Math.PI*2,u=e.x+Math.cos(l)*500,h=e.y+Math.sin(l)*500;this.fireSpectralSword(e.x,e.y,{x:u,y:h},r,1,s)}return!0}else{const o=1+n,a=this.getNearestEnemy(e,r,550);if(!a)return!1;for(let l=0;l<o;l++)setTimeout(()=>this.fireSpectralSword(e.x,e.y,a,r,0,s),l*100);return!0}}fireSpectralSword(e,r,i,n,s,o){const a=new de;a.beginFill(11032055,.8),a.drawPolygon([-20,0,0,-5,25,0,0,5]),a.x=e,a.y=r;let l=Math.atan2(i.y-r,i.x-e);a.rotation=l,this.worldContainer.addChild(a);const u=h=>{a.x+=Math.cos(l)*15,a.y+=Math.sin(l)*15;for(let c=n.length-1;c>=0;c--){const d=n[c];if((a.x-d.x)**2+(a.y-d.y)**2<900){if(d.hp-=50*o,d.applyKnockback(Math.cos(l),Math.sin(l),10),this.onHit&&this.onHit(.2),s>0){const p=this.getNearestEnemy(d,n,450);if(p){l=Math.atan2(p.y-d.y,p.x-d.x),a.rotation=l,s--;return}}a.destroy(),ie.shared.remove(u);return}}(a.x-e)**2+(a.y-r)**2>1e6&&(a.destroyed||a.destroy(),ie.shared.remove(u))};ie.shared.add(u)}updateLavaTrails(e,r,i,n,s){Math.sqrt((e.x-this.lastTrailPos.x)**2+(e.y-this.lastTrailPos.y)**2)>30&&(this.createLava(e.x,e.y,r,n,s),this.lastTrailPos={x:e.x,y:e.y})}createLava(e,r,i,n,s){const o=new de;o.beginFill(16347926,.6),o.drawCircle(0,0,45*n),o.x=e,o.y=r,this.worldContainer.addChild(o);let a=3;const l=45*n,u=h=>{a-=h/60,i.forEach(c=>{const d=Math.sqrt((e-c.x)**2+(r-c.y)**2);d<l&&(c.hp-=10*h*s,c.applyKnockback((c.x-e)/d,(c.y-r)/d,.4))}),a<=0&&(o.destroy(),ie.shared.remove(u))};ie.shared.add(u)}triggerSolarBeam(e,r,i,n,s){const o=i?3:1;for(let a=0;a<o;a++){const l=(Math.random()-.5)*(i?600:0),u=(Math.random()-.5)*(i?600:0),h=this.getNearestEnemy({x:e.x+l,y:e.y+u},r,700);h&&this.spawnBeam(h.x,h.y,r,i,n,s)}return!0}spawnBeam(e,r,i,n,s,o){const a=new de;a.x=e,a.y=r,this.worldContainer.addChild(a);let l=0;const u=(n?110:70)*s,h=c=>{l+=c/60,a.clear(),l<.5?(a.lineStyle(2,16638023,l*2),a.drawCircle(0,0,u*.8)):l<.9?(a.beginFill(16777215,1),a.drawCircle(0,0,u),i.forEach(d=>{const f=Math.sqrt((e-d.x)**2+(r-d.y)**2);f<u&&(d.hp-=(n?150:80)*o,d.applyKnockback((d.x-e)/f,(d.y-r)/f,n?20:10),this.onHit&&this.onHit(n?.6:.4))})):(a.destroy(),ie.shared.remove(h))};ie.shared.add(h)}triggerRunicCircle(e,r,i,n){const s=new de;this.worldContainer.addChild(s);let o=0;const a=1.8,l=u=>{const h=.016666666666666666;o+=h/60;const c=180*i,d=Math.sin(o/a*Math.PI)*c;s.clear(),s.lineStyle(4,6514417,.7*(1-o/a)),s.drawCircle(e.x,e.y,d),r.forEach(f=>{const p=Math.sqrt((e.x-f.x)**2+(e.y-f.y)**2);if(Math.abs(p-d)<25){f.hp-=25*h*n;const g=Math.atan2(f.y-e.y,f.x-e.x);f.applyKnockback(Math.cos(g),Math.sin(g),1.5)}}),o>=a&&(s.destroy(),ie.shared.remove(l))};return ie.shared.add(l),!0}triggerEarthquake(e,r,i,n){const s=new de;this.worldContainer.addChild(s);let o=0;const a=280*i,l=u=>{o+=10,s.clear(),s.lineStyle(5,7877903,1-o/a),s.drawCircle(e.x,e.y,o),r.forEach(h=>{const c=Math.sqrt((e.x-h.x)**2+(e.y-h.y)**2);if(Math.abs(c-o)<25){const d=Math.atan2(h.y-e.y,h.x-e.x);h.applyKnockback(Math.cos(d),Math.sin(d),12),h.hp-=15*n}}),this.onHit&&this.onHit(.3),o>a&&(s.destroy(),ie.shared.remove(l))};return ie.shared.add(l),!0}triggerBoomerangAxe(e,r,i,n,s,o){const a=1+n;for(let l=0;l<a;l++){const u=l/a*Math.PI*2,h=new de;if(h.beginFill(i?9741240:4674921),i){h.drawCircle(0,0,30*s),h.lineStyle(4,16777215,.5);for(let g=0;g<8;g++){const x=g/8*Math.PI*2;h.moveTo(Math.cos(x)*30*s,Math.sin(x)*30*s).lineTo(Math.cos(x+.2)*40*s,Math.sin(x+.2)*40*s)}}else h.drawPolygon([-10,-20,10,-20,5,20,-5,20]);h.endFill(),h.x=e.x,h.y=e.y,this.worldContainer.addChild(h);let c=0;const d=Math.cos(u+(Math.random()-.5)*.5),f=Math.sin(u+(Math.random()-.5)*.5),p=g=>{if(c+=g/60,h.rotation+=.3,i){if(h.x+=d*10,h.y+=f*10,Math.abs(h.x-e.x)>600||Math.abs(h.y-e.y)>400){h.destroy(),ie.shared.remove(p);return}}else{const x=Math.sin(c*Math.PI)*300;h.x=e.x+d*x,h.y=e.y+f*x}r.forEach(x=>{Math.sqrt((h.x-x.x)**2+(h.y-x.y)**2)<40*s&&(x.hp-=(i?40:25)*g*o,x.applyKnockback((x.x-h.x)/10,(x.y-h.y)/10,2))}),c>=1&&(h.destroy(),ie.shared.remove(p))};ie.shared.add(p)}return!0}triggerBoneChain(e,r,i,n,s){if(!i){const o=new de;o.lineStyle(5,13751771),o.moveTo(0,0).lineTo(150*n,0),o.x=e.x,o.y=e.y,this.worldContainer.addChild(o);let a=0;const l=u=>{a+=u/20,o.rotation+=.5,o.x=e.x,o.y=e.y,r.forEach(h=>{const c=Math.sqrt((h.x-e.x)**2+(h.y-e.y)**2);c<150*n&&(h.hp-=30*u*s,h.applyKnockback((h.x-e.x)/c,(h.y-e.y)/c,5))}),a>1&&(o.destroy(),ie.shared.remove(l))};return ie.shared.add(l),!0}return!1}updateBoneSpin(e,r,i,n,s){if(this.boneGraphics.length===0)for(let a=0;a<3;a++){const l=new de;l.beginFill(15680580),l.drawCircle(40,0,10),l.endFill(),l.lineStyle(4,10033947),l.moveTo(0,0).lineTo(40,0),this.worldContainer.addChild(l),this.boneGraphics.push(l)}const o=Date.now()/1e3;this.boneGraphics.forEach((a,l)=>{const u=o*4+l*Math.PI*2/3,h=120*n;a.x=e.x+Math.cos(u)*h,a.y=e.y+Math.sin(u)*h,a.rotation=u,r.forEach(c=>{Math.sqrt((c.x-a.x)**2+(c.y-a.y)**2)<30&&(c.hp-=20*i*s,c.applyKnockback((c.x-e.x)/100,(c.y-e.y)/100,2))})})}triggerChaosOrb(e,r,i,n,s,o){const a=1+n;for(let l=0;l<a;l++){const u=new de;u.beginFill(i?8141549:10980346),u.drawCircle(0,0,15*s),u.endFill(),u.x=e.x,u.y=e.y,this.worldContainer.addChild(u);let h=(Math.random()-.5)*10,c=(Math.random()-.5)*10,d=3;const f=p=>{d-=p/60,u.x+=h,u.y+=c,Math.abs(u.x-e.x)>400&&(h*=-1),Math.abs(u.y-e.y)>400&&(c*=-1),r.forEach(g=>{Math.sqrt((g.x-u.x)**2+(g.y-u.y)**2)<30*s&&(g.hp-=40*p*o,i&&this.fireSpectralSword(u.x,u.y,g,r,0,o*.5))}),d<=0&&(u.destroy(),ie.shared.remove(f))};ie.shared.add(f)}return!0}triggerDroneBees(e,r,i,n,s,o){if(!i){const a=this.getNearestEnemy(e,r,400);if(!a)return!1;const l=new de;l.beginFill(16436245),l.drawRect(-4,-2,8,4),l.endFill(),l.x=e.x,l.y=e.y,this.worldContainer.addChild(l);const u=h=>{const c=a.x-l.x,d=a.y-l.y,f=Math.sqrt(c*c+d*d);l.x+=c/f*12,l.y+=d/f*12,f<10&&(a.hp-=20*o,l.destroy(),ie.shared.remove(u))};return ie.shared.add(u),!0}return!1}updateDroneSwarm(e,r,i,n,s){if(this.droneBees.length<5){const o=new de;o.beginFill(16096779),o.drawCircle(0,0,5),o.endFill(),this.worldContainer.addChild(o),this.droneBees.push(o)}this.droneBees.forEach((o,a)=>{const l=Date.now()/500+a*Math.PI*2/5,u=e.x+Math.cos(l)*80,h=e.y+Math.sin(l)*80;o.x+=(u-o.x)*.1,o.y+=(h-o.y)*.1;const c=this.getNearestEnemy(o,r,150);c&&(c.hp-=5*i*s)})}getNearestEnemy(e,r,i){let n=null,s=i;return r.forEach(o=>{const a=Math.sqrt((e.x-o.x)**2+(e.y-o.y)**2);a<s&&(s=a,n=o)}),n}}class JD{constructor(e,r,i){H(this,"app");H(this,"gameContainer");H(this,"worldContainer");H(this,"uiContainer");H(this,"player",null);H(this,"world",null);H(this,"enemies",[]);H(this,"bullets",[]);H(this,"xpGems",[]);H(this,"pickups",[]);H(this,"spawnSystem");H(this,"skillSystem");H(this,"gameTime",0);H(this,"characterId");H(this,"paused",!1);H(this,"shakeIntensity",0);H(this,"isGameOver",!1);H(this,"hudGraphics");H(this,"onGameOver");H(this,"stats",{level:1,xp:0,xpToNext:100});H(this,"onLevelUp");H(this,"inventory",{active:[],passive:[]});this.characterId=e,this.onLevelUp=r,this.onGameOver=i,this.app=null,this.gameContainer=new Ue,this.worldContainer=new Ue,this.uiContainer=new Ue,this.hudGraphics=new de;const n=Math.random().toString(36).substring(7);this.spawnSystem=new ZD(n),this.skillSystem=new QD(this.worldContainer)}async init(e){this.app=new Zw({resizeTo:e,backgroundColor:657932,antialias:!0,resolution:window.devicePixelRatio||1,autoDensity:!0}),e.appendChild(this.app.view),this.app.stage.addChild(this.gameContainer),this.gameContainer.addChild(this.worldContainer),this.app.stage.addChild(this.uiContainer),this.uiContainer.addChild(this.hudGraphics),this.setupWorld(),this.setupPlayer(),this.app.ticker.add(()=>{if(this.paused)return;const r=this.app.ticker.deltaTime/60;this.update(r)}),console.log("GameApp Initialized")}setupWorld(){this.world=new kD(4e3,4e3),this.worldContainer.addChild(this.world)}setupPlayer(){const e=St[this.characterId]||St.gunner;if(this.player=new MD(e),this.player.x=2e3,this.player.y=2e3,this.worldContainer.addChild(this.player),e.startingSkillId){const r={...Bc[e.startingSkillId]};r.level=1,this.inventory.active.push(r)}this.skillSystem.onHit=r=>{this.shakeIntensity=Math.max(this.shakeIntensity,r)}}update(e){if(!this.isGameOver&&(this.gameTime+=e,this.shakeIntensity>0&&(this.shakeIntensity-=e*10),this.player)){this.player.update(e),this.updateCamera();const r=St[this.characterId],i=this.getPassiveModifier("chronometer",.15),n=Math.floor(this.getPassiveModifier("spare_mag",1.2)-.8);let s=this.getPassiveModifier("magnifier",.2),o=this.getPassiveModifier("honing_stone",.2);this.characterId==="mage"&&(s*=1.2),o*=r.stats.might,this.skillSystem.update(e,this.player,this.enemies,this.inventory.active,i,n,s,o),this.handlePlayerFiring(),this.updateHUD(),this.checkPlayerDeath(),this.updatePickups(e),this.gameTime<600?this.spawnSystem.update(this.gameTime,(a,l,u,h)=>{const c=new Fc(this.player.x+a,this.player.y+l,u,h),d=1+Math.floor(this.gameTime/60)*.15;c.hp*=d,c.maxHp=c.hp,this.enemies.push(c),this.worldContainer.addChild(c)}):this.enemies.length===0&&!this.gameContainer.getChildByName("boss")&&this.spawnBoss();for(let a=this.enemies.length-1;a>=0;a--){const l=this.enemies[a];if(l.update(e,{x:this.player.x,y:this.player.y},this.enemies),Math.sqrt((this.player.x-l.x)**2+(this.player.y-l.y)**2)<25&&(this.player.hp-=20*e,this.shakeIntensity=Math.max(this.shakeIntensity,.1),this.characterId==="tank"&&(l.hp-=30*e,l.applyKnockback(l.x-this.player.x,l.y-this.player.y,2))),l.hp<=0){const h=l.x,c=l.y;if(l.type==="explosive")Math.sqrt((this.player.x-l.x)**2+(this.player.y-l.y)**2)<100&&(this.player.hp-=10);else if(l.type==="splitter"&&l.scale.x>.6)for(let d=0;d<2;d++){const f=new Fc(h+(Math.random()-.5)*20,c+(Math.random()-.5)*20,"basic");f.scale.set(.5),f.hp=5,f.speed=150,this.enemies.push(f),this.worldContainer.addChild(f)}this.createDeathExplosion(h,c,l.graphics.fill.color),this.shakeIntensity=Math.max(this.shakeIntensity,.3),this.removeEnemy(a),this.spawnGem(h,c),Math.random()<.03&&this.spawnPickup(h,c)}}for(let a=this.xpGems.length-1;a>=0;a--){const l=this.xpGems[a],u=Math.sqrt((this.player.x-l.x)**2+(this.player.y-l.y)**2),h=St[this.characterId].stats.pickupRange,c=this.getPassiveModifier("magnet_glove",.5)<1?0:100,d=h+c;u<d&&(this.gainXP(l.value),this.removeGem(a))}for(let a=this.bullets.length-1;a>=0;a--){const l=this.bullets[a];if(l.update(e),l.lifeTime<=0){this.removeBullet(a);continue}for(let u=this.enemies.length-1;u>=0;u--){const h=this.enemies[u];if(Math.sqrt((l.x-h.x)**2+(l.y-h.y)**2)<20){h.hp-=l.damage,this.spawnDamageNumber(h.x,h.y,Math.floor(l.damage)),h.applyKnockback(Math.cos(l.rotation),Math.sin(l.rotation),5),this.shakeIntensity=Math.max(this.shakeIntensity,.1),this.removeBullet(a),h.hp<=0;break}}}}}createDeathExplosion(e,r,i){for(let n=0;n<6;n++){const s=new de;s.beginFill(i),s.drawCircle(0,0,3+Math.random()*3),s.endFill(),s.x=e,s.y=r,this.worldContainer.addChild(s);const o=Math.random()*Math.PI*2,a=2+Math.random()*4,l=Math.cos(o)*a,u=Math.sin(o)*a;let h=.5;const c=d=>{h-=d/60,s.x+=l,s.y+=u,s.alpha=h*2,h<=0&&(s.destroy(),this.app.ticker.remove(c))};this.app.ticker.add(c)}}spawnDamageNumber(e,r,i){const n=new Zr({fontFamily:"Outfit",fontSize:18,fontWeight:"bold",fill:"#ffffff",stroke:"#000000",strokeThickness:3}),s=new cm(i.toString(),n);s.x=e,s.y=r-20,s.anchor.set(.5),this.worldContainer.addChild(s);let o=.6;const a=l=>{o-=l/60,s.y-=1,s.alpha=o*2,o<=0&&(s.destroy(),this.app.ticker.remove(a))};this.app.ticker.add(a)}updateHUD(){if(!this.player)return;this.hudGraphics.clear();const e=this.app.screen.width,r=this.stats.xp/this.stats.xpToNext;this.hudGraphics.beginFill(1976635,.8),this.hudGraphics.drawRect(0,0,e,8),this.hudGraphics.endFill(),this.hudGraphics.beginFill(6333946),this.hudGraphics.drawRect(0,0,e*r,8),this.hudGraphics.endFill();const i=Math.max(0,this.player.hp/this.player.maxHp),n=50,s=this.app.screen.width/2-n/2,o=this.app.screen.height/2+25;this.hudGraphics.beginFill(0,.5),this.hudGraphics.drawRoundedRect(s,o,n,6,3),this.hudGraphics.endFill(),this.hudGraphics.beginFill(i>.3?2278750:15680580),this.hudGraphics.drawRoundedRect(s,o,n*i,6,3),this.hudGraphics.endFill()}checkPlayerDeath(){this.player&&this.player.hp<=0&&(this.isGameOver=!0,this.onGameOver())}spawnGem(e,r){const i=new FD(e,r);this.xpGems.push(i),this.worldContainer.addChild(i)}gainXP(e){let r=e;this.characterId==="collector"&&(r*=1.25),this.stats.xp+=r,this.stats.xp>=this.stats.xpToNext&&(this.stats.xp-=this.stats.xpToNext,this.stats.level++,this.stats.xpToNext=Math.floor(this.stats.xpToNext*(this.stats.level<15?1.1:1.2)+20),this.onLevelUp())}handlePlayerFiring(){if(!this.player)return;let r=St[this.characterId].stats.fireRate;if(this.characterId==="gunner"?r-=this.stats.level*.008:r-=this.stats.level*.004,this.player.fireRate=Math.max(.05,r),!this.player.canFire())return;let i=null,n=1/0;for(const s of this.enemies){const o=Math.sqrt((this.player.x-s.x)**2+(this.player.y-s.y)**2);o<n&&o<500&&(n=o,i=s)}if(i){const s=Math.atan2(i.y-this.player.y,i.x-this.player.x),o=new DD(this.player.x,this.player.y,s),a=St[this.characterId].stats,l=this.getPassiveModifier("honing_stone",.2)*a.might;let u=a.damage*l;this.characterId==="shadow"&&Math.random()<.2&&(u*=3,this.spawnDamageNumber(i.x,i.y,Math.floor(u)),this.shakeIntensity=Math.max(this.shakeIntensity,.5)),o.damage=u,this.characterId==="void"&&(o.speed*=1.3),this.bullets.push(o),this.worldContainer.addChild(o)}}updatePickups(e){for(let r=this.pickups.length-1;r>=0;r--){const i=this.pickups[r];if(i.update(e),!this.player)continue;const n=this.player.x,s=this.player.y;Math.sqrt((n-i.x)**2+(s-i.y)**2)<30&&(this.consumePickup(i),this.pickups.splice(r,1),this.worldContainer.removeChild(i))}}spawnPickup(e,r){const i=["health","magnet","nuke"],n=i[Math.floor(Math.random()*i.length)],s=new BD(e,r,n);this.pickups.push(s),this.worldContainer.addChild(s)}consumePickup(e){switch(this.shakeIntensity=.5,e.type){case"health":this.player&&(this.player.hp=Math.min(this.player.maxHp,this.player.hp+30));break;case"magnet":this.player&&this.xpGems.forEach(r=>{r.x=this.player.x,r.y=this.player.y});break;case"nuke":this.enemies.forEach(r=>{r.hp-=200,this.createDeathExplosion(r.x,r.y,16436245)}),this.shakeIntensity=2;break}}removeBullet(e){const r=this.bullets[e];this.worldContainer.removeChild(r),this.bullets.splice(e,1),r.destroy({children:!0})}removeEnemy(e){const r=this.enemies[e];this.worldContainer.removeChild(r),this.enemies.splice(e,1),r.destroy({children:!0})}removeGem(e){const r=this.xpGems[e];this.worldContainer.removeChild(r),this.xpGems.splice(e,1),r.destroy({children:!0})}updateCamera(){if(!this.player)return;const e=.8;this.worldContainer.scale.set(e);let r=this.app.screen.width/2-this.player.x*e,i=this.app.screen.height/2-this.player.y*e;this.shakeIntensity>0&&(r+=(Math.random()-.5)*this.shakeIntensity*10,i+=(Math.random()-.5)*this.shakeIntensity*10),this.worldContainer.x=r,this.worldContainer.y=i}applyUpgrade(e){if(e.endsWith("_evo")){const o=e.replace("_evo",""),a=this.inventory.active.find(l=>l.id===o);if(a){a.isEvolved=!0,a.id=e;const l=Y0[o];a.name=l.result,a.description=l.desc,console.log(`EVOLVED: ${a.name}`)}return}const r=!!Lc[e],i=r?"passive":"active",n=r?Lc:Bc,s=this.inventory[i].find(o=>o.id===e);if(s)s.level<s.maxLevel&&(s.level++,r&&this.applyPassiveEffect(s));else{const o={...n[e]};o.level=1,this.inventory[i].push(o),r&&this.applyPassiveEffect(o)}}getPassiveModifier(e,r){const i=this.inventory.passive.find(n=>n.id===e);return i?1+i.level*r:1}applyPassiveEffect(e){if(this.player)switch(e.id){case"phoenix_feather":this.player.speed=St[this.characterId].stats.speed*(1+e.level*.1);break}}getRandomUpgrades(e){const r=[];return this.inventory.active.forEach(i=>{if(i.level===i.maxLevel&&!i.isEvolved){const n=Y0[i.id],s=this.inventory.passive.some(o=>o.id===(n==null?void 0:n.required));n&&s&&r.push({...i,id:`${i.id}_evo`,name:n.result,description:`EVRIM: ${n.desc}`,isEvolved:!0})}}),[...this.inventory.active,...this.inventory.passive].forEach(i=>{i.level<i.maxLevel&&!i.id.endsWith("_evo")&&r.push(i)}),this.inventory.active.length<5&&Object.values(Bc).forEach(i=>{this.inventory.active.find(n=>n.id===i.id)||r.push(i)}),this.inventory.passive.length<5&&Object.values(Lc).forEach(i=>{this.inventory.passive.find(n=>n.id===i.id)||r.push(i)}),r.sort(()=>Math.random()-.5).slice(0,e)}spawnBoss(){const e=new Fc(2e3,1500);e.name="boss",e.scale.set(4),e.hp=1e3,e.speed=50,this.enemies.push(e),this.worldContainer.addChild(e),console.log("BOSS SPAWNED!")}getGameTime(){return this.gameTime}destroy(){this.app&&this.app.destroy(!0,{children:!0,texture:!0})}}/**
 * @license lucide-react v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eF=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),wT=(...t)=>t.filter((e,r,i)=>!!e&&i.indexOf(e)===r).join(" ");/**
 * @license lucide-react v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var tF={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rF=N.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:i,className:n="",children:s,iconNode:o,...a},l)=>N.createElement("svg",{ref:l,...tF,width:e,height:e,stroke:t,strokeWidth:i?Number(r)*24/Number(e):r,className:wT("lucide",n),...a},[...o.map(([u,h])=>N.createElement(u,h)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vm=(t,e)=>{const r=N.forwardRef(({className:i,...n},s)=>N.createElement(rF,{ref:s,iconNode:e,className:wT(`lucide-${eF(t)}`,i),...n}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iF=vm("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K0=vm("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nF=vm("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),xm=N.createContext({});function _m(t){const e=N.useRef(null);return e.current===null&&(e.current=t()),e.current}const hh=N.createContext(null),wm=N.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class sF extends N.Component{getSnapshotBeforeUpdate(e){const r=this.props.childRef.current;if(r&&e.isPresent&&!this.props.isPresent){const i=this.props.sizeRef.current;i.height=r.offsetHeight||0,i.width=r.offsetWidth||0,i.top=r.offsetTop,i.left=r.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function oF({children:t,isPresent:e}){const r=N.useId(),i=N.useRef(null),n=N.useRef({width:0,height:0,top:0,left:0}),{nonce:s}=N.useContext(wm);return N.useInsertionEffect(()=>{const{width:o,height:a,top:l,left:u}=n.current;if(e||!i.current||!o||!a)return;i.current.dataset.motionPopId=r;const h=document.createElement("style");return s&&(h.nonce=s),document.head.appendChild(h),h.sheet&&h.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${a}px !important;
            top: ${l}px !important;
            left: ${u}px !important;
          }
        `),()=>{document.head.removeChild(h)}},[e]),R.jsx(sF,{isPresent:e,childRef:i,sizeRef:n,children:N.cloneElement(t,{ref:i})})}const aF=({children:t,initial:e,isPresent:r,onExitComplete:i,custom:n,presenceAffectsLayout:s,mode:o})=>{const a=_m(lF),l=N.useId(),u=N.useCallback(c=>{a.set(c,!0);for(const d of a.values())if(!d)return;i&&i()},[a,i]),h=N.useMemo(()=>({id:l,initial:e,isPresent:r,custom:n,onExitComplete:u,register:c=>(a.set(c,!1),()=>a.delete(c))}),s?[Math.random(),u]:[r,u]);return N.useMemo(()=>{a.forEach((c,d)=>a.set(d,!1))},[r]),N.useEffect(()=>{!r&&!a.size&&i&&i()},[r]),o==="popLayout"&&(t=R.jsx(oF,{isPresent:r,children:t})),R.jsx(hh.Provider,{value:h,children:t})};function lF(){return new Map}function TT(t=!0){const e=N.useContext(hh);if(e===null)return[!0,null];const{isPresent:r,onExitComplete:i,register:n}=e,s=N.useId();N.useEffect(()=>{t&&n(s)},[t]);const o=N.useCallback(()=>t&&i&&i(s),[s,i,t]);return!r&&i?[!1,o]:[!0]}const ll=t=>t.key||"";function q0(t){const e=[];return N.Children.forEach(t,r=>{N.isValidElement(r)&&e.push(r)}),e}const Tm=typeof window<"u",ET=Tm?N.useLayoutEffect:N.useEffect,Nc=({children:t,custom:e,initial:r=!0,onExitComplete:i,presenceAffectsLayout:n=!0,mode:s="sync",propagate:o=!1})=>{const[a,l]=TT(o),u=N.useMemo(()=>q0(t),[t]),h=o&&!a?[]:u.map(ll),c=N.useRef(!0),d=N.useRef(u),f=_m(()=>new Map),[p,g]=N.useState(u),[x,y]=N.useState(u);ET(()=>{c.current=!1,d.current=u;for(let _=0;_<x.length;_++){const w=ll(x[_]);h.includes(w)?f.delete(w):f.get(w)!==!0&&f.set(w,!1)}},[x,h.length,h.join("-")]);const v=[];if(u!==p){let _=[...u];for(let w=0;w<x.length;w++){const S=x[w],E=ll(S);h.includes(E)||(_.splice(w,0,S),v.push(S))}s==="wait"&&v.length&&(_=v),y(q0(_)),g(u);return}const{forceRender:m}=N.useContext(xm);return R.jsx(R.Fragment,{children:x.map(_=>{const w=ll(_),S=o&&!a?!1:u===x||h.includes(w),E=()=>{if(f.has(w))f.set(w,!0);else return;let T=!0;f.forEach(C=>{C||(T=!1)}),T&&(m==null||m(),y(d.current),o&&(l==null||l()),i&&i())};return R.jsx(aF,{isPresent:S,initial:!c.current||r?void 0:!1,custom:S?void 0:e,presenceAffectsLayout:n,mode:s,onExitComplete:S?void 0:E,children:_},w)})})},Ct=t=>t;let ST=Ct;function Em(t){let e;return()=>(e===void 0&&(e=t()),e)}const bs=(t,e,r)=>{const i=e-t;return i===0?1:(r-t)/i},zr=t=>t*1e3,Hr=t=>t/1e3,uF={useManualTiming:!1};function hF(t){let e=new Set,r=new Set,i=!1,n=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function a(u){s.has(u)&&(l.schedule(u),t()),u(o)}const l={schedule:(u,h=!1,c=!1)=>{const f=c&&i?e:r;return h&&s.add(u),f.has(u)||f.add(u),u},cancel:u=>{r.delete(u),s.delete(u)},process:u=>{if(o=u,i){n=!0;return}i=!0,[e,r]=[r,e],e.forEach(a),e.clear(),i=!1,n&&(n=!1,l.process(u))}};return l}const ul=["read","resolveKeyframes","update","preRender","render","postRender"],cF=40;function AT(t,e){let r=!1,i=!0;const n={delta:0,timestamp:0,isProcessing:!1},s=()=>r=!0,o=ul.reduce((y,v)=>(y[v]=hF(s),y),{}),{read:a,resolveKeyframes:l,update:u,preRender:h,render:c,postRender:d}=o,f=()=>{const y=performance.now();r=!1,n.delta=i?1e3/60:Math.max(Math.min(y-n.timestamp,cF),1),n.timestamp=y,n.isProcessing=!0,a.process(n),l.process(n),u.process(n),h.process(n),c.process(n),d.process(n),n.isProcessing=!1,r&&e&&(i=!1,t(f))},p=()=>{r=!0,i=!0,n.isProcessing||t(f)};return{schedule:ul.reduce((y,v)=>{const m=o[v];return y[v]=(_,w=!1,S=!1)=>(r||p(),m.schedule(_,w,S)),y},{}),cancel:y=>{for(let v=0;v<ul.length;v++)o[ul[v]].cancel(y)},state:n,steps:o}}const{schedule:ve,cancel:Pi,state:Je,steps:Oc}=AT(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ct,!0),bT=N.createContext({strict:!1}),Z0={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Cs={};for(const t in Z0)Cs[t]={isEnabled:e=>Z0[t].some(r=>!!e[r])};function dF(t){for(const e in t)Cs[e]={...Cs[e],...t[e]}}const fF=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Cu(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||fF.has(t)}let CT=t=>!Cu(t);function pF(t){t&&(CT=e=>e.startsWith("on")?!Cu(e):t(e))}try{pF(require("@emotion/is-prop-valid").default)}catch{}function mF(t,e,r){const i={};for(const n in t)n==="values"&&typeof t.values=="object"||(CT(n)||r===!0&&Cu(n)||!e&&!Cu(n)||t.draggable&&n.startsWith("onDrag"))&&(i[n]=t[n]);return i}function gF(t){if(typeof Proxy>"u")return t;const e=new Map,r=(...i)=>t(...i);return new Proxy(r,{get:(i,n)=>n==="create"?t:(e.has(n)||e.set(n,t(n)),e.get(n))})}const ch=N.createContext({});function ea(t){return typeof t=="string"||Array.isArray(t)}function dh(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const Sm=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Am=["initial",...Sm];function fh(t){return dh(t.animate)||Am.some(e=>ea(t[e]))}function PT(t){return!!(fh(t)||t.variants)}function yF(t,e){if(fh(t)){const{initial:r,animate:i}=t;return{initial:r===!1||ea(r)?r:void 0,animate:ea(i)?i:void 0}}return t.inherit!==!1?e:{}}function vF(t){const{initial:e,animate:r}=yF(t,N.useContext(ch));return N.useMemo(()=>({initial:e,animate:r}),[Q0(e),Q0(r)])}function Q0(t){return Array.isArray(t)?t.join(" "):t}const xF=Symbol.for("motionComponentSymbol");function Zn(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function _F(t,e,r){return N.useCallback(i=>{i&&t.onMount&&t.onMount(i),e&&(i?e.mount(i):e.unmount()),r&&(typeof r=="function"?r(i):Zn(r)&&(r.current=i))},[e])}const bm=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),wF="framerAppearId",RT="data-"+bm(wF),{schedule:Cm}=AT(queueMicrotask,!1),IT=N.createContext({});function TF(t,e,r,i,n){var s,o;const{visualElement:a}=N.useContext(ch),l=N.useContext(bT),u=N.useContext(hh),h=N.useContext(wm).reducedMotion,c=N.useRef(null);i=i||l.renderer,!c.current&&i&&(c.current=i(t,{visualState:e,parent:a,props:r,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:h}));const d=c.current,f=N.useContext(IT);d&&!d.projection&&n&&(d.type==="html"||d.type==="svg")&&EF(c.current,r,n,f);const p=N.useRef(!1);N.useInsertionEffect(()=>{d&&p.current&&d.update(r,u)});const g=r[RT],x=N.useRef(!!g&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,g))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,g)));return ET(()=>{d&&(p.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),Cm.render(d.render),x.current&&d.animationState&&d.animationState.animateChanges())}),N.useEffect(()=>{d&&(!x.current&&d.animationState&&d.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{var y;(y=window.MotionHandoffMarkAsComplete)===null||y===void 0||y.call(window,g)}),x.current=!1))}),d}function EF(t,e,r,i){const{layoutId:n,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:u}=e;t.projection=new r(t.latestValues,e["data-framer-portal-id"]?void 0:MT(t.parent)),t.projection.setOptions({layoutId:n,layout:s,alwaysMeasureLayout:!!o||a&&Zn(a),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:i,layoutScroll:l,layoutRoot:u})}function MT(t){if(t)return t.options.allowProjection!==!1?t.projection:MT(t.parent)}function SF({preloadedFeatures:t,createVisualElement:e,useRender:r,useVisualState:i,Component:n}){var s,o;t&&dF(t);function a(u,h){let c;const d={...N.useContext(wm),...u,layoutId:AF(u)},{isStatic:f}=d,p=vF(u),g=i(u,f);if(!f&&Tm){bF();const x=CF(d);c=x.MeasureLayout,p.visualElement=TF(n,g,d,e,x.ProjectionNode)}return R.jsxs(ch.Provider,{value:p,children:[c&&p.visualElement?R.jsx(c,{visualElement:p.visualElement,...d}):null,r(n,u,_F(g,p.visualElement,h),g,f,p.visualElement)]})}a.displayName=`motion.${typeof n=="string"?n:`create(${(o=(s=n.displayName)!==null&&s!==void 0?s:n.name)!==null&&o!==void 0?o:""})`}`;const l=N.forwardRef(a);return l[xF]=n,l}function AF({layoutId:t}){const e=N.useContext(xm).id;return e&&t!==void 0?e+"-"+t:t}function bF(t,e){N.useContext(bT).strict}function CF(t){const{drag:e,layout:r}=Cs;if(!e&&!r)return{};const i={...e,...r};return{MeasureLayout:e!=null&&e.isEnabled(t)||r!=null&&r.isEnabled(t)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}const PF=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Pm(t){return typeof t!="string"||t.includes("-")?!1:!!(PF.indexOf(t)>-1||/[A-Z]/u.test(t))}function J0(t){const e=[{},{}];return t==null||t.values.forEach((r,i)=>{e[0][i]=r.get(),e[1][i]=r.getVelocity()}),e}function Rm(t,e,r,i){if(typeof e=="function"){const[n,s]=J0(i);e=e(r!==void 0?r:t.custom,n,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[n,s]=J0(i);e=e(r!==void 0?r:t.custom,n,s)}return e}const Uf=t=>Array.isArray(t),RF=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),IF=t=>Uf(t)?t[t.length-1]||0:t,lt=t=>!!(t&&t.getVelocity);function Bl(t){const e=lt(t)?t.get():t;return RF(e)?e.toValue():e}function MF({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:r},i,n,s){const o={latestValues:kF(i,n,s,t),renderState:e()};return r&&(o.onMount=a=>r({props:i,current:a,...o}),o.onUpdate=a=>r(a)),o}const kT=t=>(e,r)=>{const i=N.useContext(ch),n=N.useContext(hh),s=()=>MF(t,e,i,n);return r?s():_m(s)};function kF(t,e,r,i){const n={},s=i(t,{});for(const d in s)n[d]=Bl(s[d]);let{initial:o,animate:a}=t;const l=fh(t),u=PT(t);e&&u&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let h=r?r.initial===!1:!1;h=h||o===!1;const c=h?a:o;if(c&&typeof c!="boolean"&&!dh(c)){const d=Array.isArray(c)?c:[c];for(let f=0;f<d.length;f++){const p=Rm(t,d[f]);if(p){const{transitionEnd:g,transition:x,...y}=p;for(const v in y){let m=y[v];if(Array.isArray(m)){const _=h?m.length-1:0;m=m[_]}m!==null&&(n[v]=m)}for(const v in g)n[v]=g[v]}}}return n}const Bs=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],En=new Set(Bs),DT=t=>e=>typeof e=="string"&&e.startsWith(t),FT=DT("--"),DF=DT("var(--"),Im=t=>DF(t)?FF.test(t.split("/*")[0].trim()):!1,FF=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,BT=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Qr=(t,e,r)=>r>e?e:r<t?t:r,Ls={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},ta={...Ls,transform:t=>Qr(0,1,t)},hl={...Ls,default:1},ga=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),ni=ga("deg"),Ar=ga("%"),Q=ga("px"),BF=ga("vh"),LF=ga("vw"),ev={...Ar,parse:t=>Ar.parse(t)/100,transform:t=>Ar.transform(t*100)},NF={borderWidth:Q,borderTopWidth:Q,borderRightWidth:Q,borderBottomWidth:Q,borderLeftWidth:Q,borderRadius:Q,radius:Q,borderTopLeftRadius:Q,borderTopRightRadius:Q,borderBottomRightRadius:Q,borderBottomLeftRadius:Q,width:Q,maxWidth:Q,height:Q,maxHeight:Q,top:Q,right:Q,bottom:Q,left:Q,padding:Q,paddingTop:Q,paddingRight:Q,paddingBottom:Q,paddingLeft:Q,margin:Q,marginTop:Q,marginRight:Q,marginBottom:Q,marginLeft:Q,backgroundPositionX:Q,backgroundPositionY:Q},OF={rotate:ni,rotateX:ni,rotateY:ni,rotateZ:ni,scale:hl,scaleX:hl,scaleY:hl,scaleZ:hl,skew:ni,skewX:ni,skewY:ni,distance:Q,translateX:Q,translateY:Q,translateZ:Q,x:Q,y:Q,z:Q,perspective:Q,transformPerspective:Q,opacity:ta,originX:ev,originY:ev,originZ:Q},tv={...Ls,transform:Math.round},Mm={...NF,...OF,zIndex:tv,size:Q,fillOpacity:ta,strokeOpacity:ta,numOctaves:tv},UF={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},GF=Bs.length;function VF(t,e,r){let i="",n=!0;for(let s=0;s<GF;s++){const o=Bs[s],a=t[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||r){const u=BT(a,Mm[o]);if(!l){n=!1;const h=UF[o]||o;i+=`${h}(${u}) `}r&&(e[o]=u)}}return i=i.trim(),r?i=r(e,n?"":i):n&&(i="none"),i}function km(t,e,r){const{style:i,vars:n,transformOrigin:s}=t;let o=!1,a=!1;for(const l in e){const u=e[l];if(En.has(l)){o=!0;continue}else if(FT(l)){n[l]=u;continue}else{const h=BT(u,Mm[l]);l.startsWith("origin")?(a=!0,s[l]=h):i[l]=h}}if(e.transform||(o||r?i.transform=VF(e,t.transform,r):i.transform&&(i.transform="none")),a){const{originX:l="50%",originY:u="50%",originZ:h=0}=s;i.transformOrigin=`${l} ${u} ${h}`}}const jF={offset:"stroke-dashoffset",array:"stroke-dasharray"},zF={offset:"strokeDashoffset",array:"strokeDasharray"};function HF(t,e,r=1,i=0,n=!0){t.pathLength=1;const s=n?jF:zF;t[s.offset]=Q.transform(-i);const o=Q.transform(e),a=Q.transform(r);t[s.array]=`${o} ${a}`}function rv(t,e,r){return typeof t=="string"?t:Q.transform(e+r*t)}function $F(t,e,r){const i=rv(e,t.x,t.width),n=rv(r,t.y,t.height);return`${i} ${n}`}function Dm(t,{attrX:e,attrY:r,attrScale:i,originX:n,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...u},h,c){if(km(t,u,c),h){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:d,style:f,dimensions:p}=t;d.transform&&(p&&(f.transform=d.transform),delete d.transform),p&&(n!==void 0||s!==void 0||f.transform)&&(f.transformOrigin=$F(p,n!==void 0?n:.5,s!==void 0?s:.5)),e!==void 0&&(d.x=e),r!==void 0&&(d.y=r),i!==void 0&&(d.scale=i),o!==void 0&&HF(d,o,a,l,!1)}const Fm=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),LT=()=>({...Fm(),attrs:{}}),Bm=t=>typeof t=="string"&&t.toLowerCase()==="svg";function NT(t,{style:e,vars:r},i,n){Object.assign(t.style,e,n&&n.getProjectionStyles(i));for(const s in r)t.style.setProperty(s,r[s])}const OT=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function UT(t,e,r,i){NT(t,e,void 0,i);for(const n in e.attrs)t.setAttribute(OT.has(n)?n:bm(n),e.attrs[n])}const Pu={};function WF(t){Object.assign(Pu,t)}function GT(t,{layout:e,layoutId:r}){return En.has(t)||t.startsWith("origin")||(e||r!==void 0)&&(!!Pu[t]||t==="opacity")}function Lm(t,e,r){var i;const{style:n}=t,s={};for(const o in n)(lt(n[o])||e.style&&lt(e.style[o])||GT(o,t)||((i=r==null?void 0:r.getValue(o))===null||i===void 0?void 0:i.liveStyle)!==void 0)&&(s[o]=n[o]);return s}function VT(t,e,r){const i=Lm(t,e,r);for(const n in t)if(lt(t[n])||lt(e[n])){const s=Bs.indexOf(n)!==-1?"attr"+n.charAt(0).toUpperCase()+n.substring(1):n;i[s]=t[n]}return i}function XF(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const iv=["x","y","width","height","cx","cy","r"],YF={useVisualState:kT({scrapeMotionValuesFromProps:VT,createRenderState:LT,onUpdate:({props:t,prevProps:e,current:r,renderState:i,latestValues:n})=>{if(!r)return;let s=!!t.drag;if(!s){for(const a in n)if(En.has(a)){s=!0;break}}if(!s)return;let o=!e;if(e)for(let a=0;a<iv.length;a++){const l=iv[a];t[l]!==e[l]&&(o=!0)}o&&ve.read(()=>{XF(r,i),ve.render(()=>{Dm(i,n,Bm(r.tagName),t.transformTemplate),UT(r,i)})})}})},KF={useVisualState:kT({scrapeMotionValuesFromProps:Lm,createRenderState:Fm})};function jT(t,e,r){for(const i in e)!lt(e[i])&&!GT(i,r)&&(t[i]=e[i])}function qF({transformTemplate:t},e){return N.useMemo(()=>{const r=Fm();return km(r,e,t),Object.assign({},r.vars,r.style)},[e])}function ZF(t,e){const r=t.style||{},i={};return jT(i,r,t),Object.assign(i,qF(t,e)),i}function QF(t,e){const r={},i=ZF(t,e);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=i,r}function JF(t,e,r,i){const n=N.useMemo(()=>{const s=LT();return Dm(s,e,Bm(i),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};jT(s,t.style,t),n.style={...s,...n.style}}return n}function eB(t=!1){return(r,i,n,{latestValues:s},o)=>{const l=(Pm(r)?JF:QF)(i,s,o,r),u=mF(i,typeof r=="string",t),h=r!==N.Fragment?{...u,...l,ref:n}:{},{children:c}=i,d=N.useMemo(()=>lt(c)?c.get():c,[c]);return N.createElement(r,{...h,children:d})}}function tB(t,e){return function(i,{forwardMotionProps:n}={forwardMotionProps:!1}){const o={...Pm(i)?YF:KF,preloadedFeatures:t,useRender:eB(n),createVisualElement:e,Component:i};return SF(o)}}function zT(t,e){if(!Array.isArray(e))return!1;const r=e.length;if(r!==t.length)return!1;for(let i=0;i<r;i++)if(e[i]!==t[i])return!1;return!0}function ph(t,e,r){const i=t.getProps();return Rm(i,e,r!==void 0?r:i.custom,t)}const rB=Em(()=>window.ScrollTimeline!==void 0);class iB{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,r){for(let i=0;i<this.animations.length;i++)this.animations[i][e]=r}attachTimeline(e,r){const i=this.animations.map(n=>{if(rB()&&n.attachTimeline)return n.attachTimeline(e);if(typeof r=="function")return r(n)});return()=>{i.forEach((n,s)=>{n&&n(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let r=0;r<this.animations.length;r++)e=Math.max(e,this.animations[r].duration);return e}runAll(e){this.animations.forEach(r=>r[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class nB extends iB{then(e,r){return Promise.all(this.animations).then(e).catch(r)}}function Nm(t,e){return t?t[e]||t.default||t:void 0}const Gf=2e4;function HT(t){let e=0;const r=50;let i=t.next(e);for(;!i.done&&e<Gf;)e+=r,i=t.next(e);return e>=Gf?1/0:e}function Om(t){return typeof t=="function"}function nv(t,e){t.timeline=e,t.onfinish=null}const Um=t=>Array.isArray(t)&&typeof t[0]=="number",sB={linearEasing:void 0};function oB(t,e){const r=Em(t);return()=>{var i;return(i=sB[e])!==null&&i!==void 0?i:r()}}const Ru=oB(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),$T=(t,e,r=10)=>{let i="";const n=Math.max(Math.round(e/r),2);for(let s=0;s<n;s++)i+=t(bs(0,n-1,s))+", ";return`linear(${i.substring(0,i.length-2)})`};function WT(t){return!!(typeof t=="function"&&Ru()||!t||typeof t=="string"&&(t in Vf||Ru())||Um(t)||Array.isArray(t)&&t.every(WT))}const ho=([t,e,r,i])=>`cubic-bezier(${t}, ${e}, ${r}, ${i})`,Vf={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ho([0,.65,.55,1]),circOut:ho([.55,0,1,.45]),backIn:ho([.31,.01,.66,-.59]),backOut:ho([.33,1.53,.69,.99])};function XT(t,e){if(t)return typeof t=="function"&&Ru()?$T(t,e):Um(t)?ho(t):Array.isArray(t)?t.map(r=>XT(r,e)||Vf.easeOut):Vf[t]}const Kt={x:!1,y:!1};function YT(){return Kt.x||Kt.y}function aB(t,e,r){var i;if(t instanceof Element)return[t];if(typeof t=="string"){let n=document;const s=(i=void 0)!==null&&i!==void 0?i:n.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}function KT(t,e){const r=aB(t),i=new AbortController,n={passive:!0,...e,signal:i.signal};return[r,n,()=>i.abort()]}function sv(t){return e=>{e.pointerType==="touch"||YT()||t(e)}}function lB(t,e,r={}){const[i,n,s]=KT(t,r),o=sv(a=>{const{target:l}=a,u=e(a);if(typeof u!="function"||!l)return;const h=sv(c=>{u(c),l.removeEventListener("pointerleave",h)});l.addEventListener("pointerleave",h,n)});return i.forEach(a=>{a.addEventListener("pointerenter",o,n)}),s}const qT=(t,e)=>e?t===e?!0:qT(t,e.parentElement):!1,Gm=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,uB=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function hB(t){return uB.has(t.tagName)||t.tabIndex!==-1}const co=new WeakSet;function ov(t){return e=>{e.key==="Enter"&&t(e)}}function Uc(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const cB=(t,e)=>{const r=t.currentTarget;if(!r)return;const i=ov(()=>{if(co.has(r))return;Uc(r,"down");const n=ov(()=>{Uc(r,"up")}),s=()=>Uc(r,"cancel");r.addEventListener("keyup",n,e),r.addEventListener("blur",s,e)});r.addEventListener("keydown",i,e),r.addEventListener("blur",()=>r.removeEventListener("keydown",i),e)};function av(t){return Gm(t)&&!YT()}function dB(t,e,r={}){const[i,n,s]=KT(t,r),o=a=>{const l=a.currentTarget;if(!av(a)||co.has(l))return;co.add(l);const u=e(a),h=(f,p)=>{window.removeEventListener("pointerup",c),window.removeEventListener("pointercancel",d),!(!av(f)||!co.has(l))&&(co.delete(l),typeof u=="function"&&u(f,{success:p}))},c=f=>{h(f,r.useGlobalTarget||qT(l,f.target))},d=f=>{h(f,!1)};window.addEventListener("pointerup",c,n),window.addEventListener("pointercancel",d,n)};return i.forEach(a=>{!hB(a)&&a.getAttribute("tabindex")===null&&(a.tabIndex=0),(r.useGlobalTarget?window:a).addEventListener("pointerdown",o,n),a.addEventListener("focus",u=>cB(u,n),n)}),s}function fB(t){return t==="x"||t==="y"?Kt[t]?null:(Kt[t]=!0,()=>{Kt[t]=!1}):Kt.x||Kt.y?null:(Kt.x=Kt.y=!0,()=>{Kt.x=Kt.y=!1})}const ZT=new Set(["width","height","top","left","right","bottom",...Bs]);let Ll;function pB(){Ll=void 0}const br={now:()=>(Ll===void 0&&br.set(Je.isProcessing||uF.useManualTiming?Je.timestamp:performance.now()),Ll),set:t=>{Ll=t,queueMicrotask(pB)}};function Vm(t,e){t.indexOf(e)===-1&&t.push(e)}function jm(t,e){const r=t.indexOf(e);r>-1&&t.splice(r,1)}class zm{constructor(){this.subscriptions=[]}add(e){return Vm(this.subscriptions,e),()=>jm(this.subscriptions,e)}notify(e,r,i){const n=this.subscriptions.length;if(n)if(n===1)this.subscriptions[0](e,r,i);else for(let s=0;s<n;s++){const o=this.subscriptions[s];o&&o(e,r,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function QT(t,e){return e?t*(1e3/e):0}const lv=30,mB=t=>!isNaN(parseFloat(t));class gB{constructor(e,r={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(i,n=!0)=>{const s=br.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),n&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=r.owner}setCurrent(e){this.current=e,this.updatedAt=br.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=mB(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,r){this.events[e]||(this.events[e]=new zm);const i=this.events[e].add(r);return e==="change"?()=>{i(),ve.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,r){this.passiveEffect=e,this.stopPassiveEffect=r}set(e,r=!0){!r||!this.passiveEffect?this.updateAndNotify(e,r):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,r,i){this.set(r),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,r=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=br.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>lv)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,lv);return QT(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(e){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=e(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ra(t,e){return new gB(t,e)}function yB(t,e,r){t.hasValue(e)?t.getValue(e).set(r):t.addValue(e,ra(r))}function vB(t,e){const r=ph(t,e);let{transitionEnd:i={},transition:n={},...s}=r||{};s={...s,...i};for(const o in s){const a=IF(s[o]);yB(t,o,a)}}function xB(t){return!!(lt(t)&&t.add)}function jf(t,e){const r=t.getValue("willChange");if(xB(r))return r.add(e)}function JT(t){return t.props[RT]}const eE=(t,e,r)=>(((1-3*r+3*e)*t+(3*r-6*e))*t+3*e)*t,_B=1e-7,wB=12;function TB(t,e,r,i,n){let s,o,a=0;do o=e+(r-e)/2,s=eE(o,i,n)-t,s>0?r=o:e=o;while(Math.abs(s)>_B&&++a<wB);return o}function ya(t,e,r,i){if(t===e&&r===i)return Ct;const n=s=>TB(s,0,1,t,r);return s=>s===0||s===1?s:eE(n(s),e,i)}const tE=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,rE=t=>e=>1-t(1-e),iE=ya(.33,1.53,.69,.99),Hm=rE(iE),nE=tE(Hm),sE=t=>(t*=2)<1?.5*Hm(t):.5*(2-Math.pow(2,-10*(t-1))),$m=t=>1-Math.sin(Math.acos(t)),oE=rE($m),aE=tE($m),lE=t=>/^0[^.\s]+$/u.test(t);function EB(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||lE(t):!0}const Po=t=>Math.round(t*1e5)/1e5,Wm=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function SB(t){return t==null}const AB=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Xm=(t,e)=>r=>!!(typeof r=="string"&&AB.test(r)&&r.startsWith(t)||e&&!SB(r)&&Object.prototype.hasOwnProperty.call(r,e)),uE=(t,e,r)=>i=>{if(typeof i!="string")return i;const[n,s,o,a]=i.match(Wm);return{[t]:parseFloat(n),[e]:parseFloat(s),[r]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},bB=t=>Qr(0,255,t),Gc={...Ls,transform:t=>Math.round(bB(t))},en={test:Xm("rgb","red"),parse:uE("red","green","blue"),transform:({red:t,green:e,blue:r,alpha:i=1})=>"rgba("+Gc.transform(t)+", "+Gc.transform(e)+", "+Gc.transform(r)+", "+Po(ta.transform(i))+")"};function CB(t){let e="",r="",i="",n="";return t.length>5?(e=t.substring(1,3),r=t.substring(3,5),i=t.substring(5,7),n=t.substring(7,9)):(e=t.substring(1,2),r=t.substring(2,3),i=t.substring(3,4),n=t.substring(4,5),e+=e,r+=r,i+=i,n+=n),{red:parseInt(e,16),green:parseInt(r,16),blue:parseInt(i,16),alpha:n?parseInt(n,16)/255:1}}const zf={test:Xm("#"),parse:CB,transform:en.transform},Qn={test:Xm("hsl","hue"),parse:uE("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:r,alpha:i=1})=>"hsla("+Math.round(t)+", "+Ar.transform(Po(e))+", "+Ar.transform(Po(r))+", "+Po(ta.transform(i))+")"},ot={test:t=>en.test(t)||zf.test(t)||Qn.test(t),parse:t=>en.test(t)?en.parse(t):Qn.test(t)?Qn.parse(t):zf.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?en.transform(t):Qn.transform(t)},PB=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function RB(t){var e,r;return isNaN(t)&&typeof t=="string"&&(((e=t.match(Wm))===null||e===void 0?void 0:e.length)||0)+(((r=t.match(PB))===null||r===void 0?void 0:r.length)||0)>0}const hE="number",cE="color",IB="var",MB="var(",uv="${}",kB=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function ia(t){const e=t.toString(),r=[],i={color:[],number:[],var:[]},n=[];let s=0;const a=e.replace(kB,l=>(ot.test(l)?(i.color.push(s),n.push(cE),r.push(ot.parse(l))):l.startsWith(MB)?(i.var.push(s),n.push(IB),r.push(l)):(i.number.push(s),n.push(hE),r.push(parseFloat(l))),++s,uv)).split(uv);return{values:r,split:a,indexes:i,types:n}}function dE(t){return ia(t).values}function fE(t){const{split:e,types:r}=ia(t),i=e.length;return n=>{let s="";for(let o=0;o<i;o++)if(s+=e[o],n[o]!==void 0){const a=r[o];a===hE?s+=Po(n[o]):a===cE?s+=ot.transform(n[o]):s+=n[o]}return s}}const DB=t=>typeof t=="number"?0:t;function FB(t){const e=dE(t);return fE(t)(e.map(DB))}const Ri={test:RB,parse:dE,createTransformer:fE,getAnimatableNone:FB},BB=new Set(["brightness","contrast","saturate","opacity"]);function LB(t){const[e,r]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[i]=r.match(Wm)||[];if(!i)return t;const n=r.replace(i,"");let s=BB.has(e)?1:0;return i!==r&&(s*=100),e+"("+s+n+")"}const NB=/\b([a-z-]*)\(.*?\)/gu,Hf={...Ri,getAnimatableNone:t=>{const e=t.match(NB);return e?e.map(LB).join(" "):t}},OB={...Mm,color:ot,backgroundColor:ot,outlineColor:ot,fill:ot,stroke:ot,borderColor:ot,borderTopColor:ot,borderRightColor:ot,borderBottomColor:ot,borderLeftColor:ot,filter:Hf,WebkitFilter:Hf},Ym=t=>OB[t];function pE(t,e){let r=Ym(t);return r!==Hf&&(r=Ri),r.getAnimatableNone?r.getAnimatableNone(e):void 0}const UB=new Set(["auto","none","0"]);function GB(t,e,r){let i=0,n;for(;i<t.length&&!n;){const s=t[i];typeof s=="string"&&!UB.has(s)&&ia(s).values.length&&(n=t[i]),i++}if(n&&r)for(const s of e)t[s]=pE(r,n)}const hv=t=>t===Ls||t===Q,cv=(t,e)=>parseFloat(t.split(", ")[e]),dv=(t,e)=>(r,{transform:i})=>{if(i==="none"||!i)return 0;const n=i.match(/^matrix3d\((.+)\)$/u);if(n)return cv(n[1],e);{const s=i.match(/^matrix\((.+)\)$/u);return s?cv(s[1],t):0}},VB=new Set(["x","y","z"]),jB=Bs.filter(t=>!VB.has(t));function zB(t){const e=[];return jB.forEach(r=>{const i=t.getValue(r);i!==void 0&&(e.push([r,i.get()]),i.set(r.startsWith("scale")?1:0))}),e}const Ps={width:({x:t},{paddingLeft:e="0",paddingRight:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),height:({y:t},{paddingTop:e="0",paddingBottom:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:dv(4,13),y:dv(5,14)};Ps.translateX=Ps.x;Ps.translateY=Ps.y;const an=new Set;let $f=!1,Wf=!1;function mE(){if(Wf){const t=Array.from(an).filter(i=>i.needsMeasurement),e=new Set(t.map(i=>i.element)),r=new Map;e.forEach(i=>{const n=zB(i);n.length&&(r.set(i,n),i.render())}),t.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const n=r.get(i);n&&n.forEach(([s,o])=>{var a;(a=i.getValue(s))===null||a===void 0||a.set(o)})}),t.forEach(i=>i.measureEndState()),t.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}Wf=!1,$f=!1,an.forEach(t=>t.complete()),an.clear()}function gE(){an.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Wf=!0)})}function HB(){gE(),mE()}class Km{constructor(e,r,i,n,s,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=r,this.name=i,this.motionValue=n,this.element=s,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(an.add(this),$f||($f=!0,ve.read(gE),ve.resolveKeyframes(mE))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:r,element:i,motionValue:n}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const o=n==null?void 0:n.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(i&&r){const l=i.readValue(r,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),n&&o===void 0&&n.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),an.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,an.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const yE=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),$B=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function WB(t){const e=$B.exec(t);if(!e)return[,];const[,r,i,n]=e;return[`--${r??i}`,n]}function vE(t,e,r=1){const[i,n]=WB(t);if(!i)return;const s=window.getComputedStyle(e).getPropertyValue(i);if(s){const o=s.trim();return yE(o)?parseFloat(o):o}return Im(n)?vE(n,e,r+1):n}const xE=t=>e=>e.test(t),XB={test:t=>t==="auto",parse:t=>t},_E=[Ls,Q,Ar,ni,LF,BF,XB],fv=t=>_E.find(xE(t));class wE extends Km{constructor(e,r,i,n,s){super(e,r,i,n,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:r,name:i}=this;if(!r||!r.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let u=e[l];if(typeof u=="string"&&(u=u.trim(),Im(u))){const h=vE(u,r.current);h!==void 0&&(e[l]=h),l===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!ZT.has(i)||e.length!==2)return;const[n,s]=e,o=fv(n),a=fv(s);if(o!==a)if(hv(o)&&hv(a))for(let l=0;l<e.length;l++){const u=e[l];typeof u=="string"&&(e[l]=parseFloat(u))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:r}=this,i=[];for(let n=0;n<e.length;n++)EB(e[n])&&i.push(n);i.length&&GB(e,i,r)}measureInitialState(){const{element:e,unresolvedKeyframes:r,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ps[i](e.measureViewportBox(),window.getComputedStyle(e.current)),r[0]=this.measuredOrigin;const n=r[r.length-1];n!==void 0&&e.getValue(i,n).jump(n,!1)}measureEndState(){var e;const{element:r,name:i,unresolvedKeyframes:n}=this;if(!r||!r.current)return;const s=r.getValue(i);s&&s.jump(this.measuredOrigin,!1);const o=n.length-1,a=n[o];n[o]=Ps[i](r.measureViewportBox(),window.getComputedStyle(r.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,u])=>{r.getValue(l).set(u)}),this.resolveNoneKeyframes()}}const pv=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Ri.test(t)||t==="0")&&!t.startsWith("url("));function YB(t){const e=t[0];if(t.length===1)return!0;for(let r=0;r<t.length;r++)if(t[r]!==e)return!0}function KB(t,e,r,i){const n=t[0];if(n===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=pv(n,e),a=pv(s,e);return!o||!a?!1:YB(t)||(r==="spring"||Om(r))&&i}const qB=t=>t!==null;function mh(t,{repeat:e,repeatType:r="loop"},i){const n=t.filter(qB),s=e&&r!=="loop"&&e%2===1?0:n.length-1;return!s||i===void 0?n[s]:i}const ZB=40;class TE{constructor({autoplay:e=!0,delay:r=0,type:i="keyframes",repeat:n=0,repeatDelay:s=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=br.now(),this.options={autoplay:e,delay:r,type:i,repeat:n,repeatDelay:s,repeatType:o,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>ZB?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&HB(),this._resolved}onKeyframesResolved(e,r){this.resolvedAt=br.now(),this.hasAttemptedResolve=!0;const{name:i,type:n,velocity:s,delay:o,onComplete:a,onUpdate:l,isGenerator:u}=this.options;if(!u&&!KB(e,i,n,s))if(o)this.options.duration=0;else{l&&l(mh(e,this.options,r)),a&&a(),this.resolveFinishedPromise();return}const h=this.initPlayback(e,r);h!==!1&&(this._resolved={keyframes:e,finalKeyframe:r,...h},this.onPostResolved())}onPostResolved(){}then(e,r){return this.currentFinishedPromise.then(e,r)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const Ae=(t,e,r)=>t+(e-t)*r;function Vc(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(e-t)*6*r:r<1/2?e:r<2/3?t+(e-t)*(2/3-r)*6:t}function QB({hue:t,saturation:e,lightness:r,alpha:i}){t/=360,e/=100,r/=100;let n=0,s=0,o=0;if(!e)n=s=o=r;else{const a=r<.5?r*(1+e):r+e-r*e,l=2*r-a;n=Vc(l,a,t+1/3),s=Vc(l,a,t),o=Vc(l,a,t-1/3)}return{red:Math.round(n*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:i}}function Iu(t,e){return r=>r>0?e:t}const jc=(t,e,r)=>{const i=t*t,n=r*(e*e-i)+i;return n<0?0:Math.sqrt(n)},JB=[zf,en,Qn],eL=t=>JB.find(e=>e.test(t));function mv(t){const e=eL(t);if(!e)return!1;let r=e.parse(t);return e===Qn&&(r=QB(r)),r}const gv=(t,e)=>{const r=mv(t),i=mv(e);if(!r||!i)return Iu(t,e);const n={...r};return s=>(n.red=jc(r.red,i.red,s),n.green=jc(r.green,i.green,s),n.blue=jc(r.blue,i.blue,s),n.alpha=Ae(r.alpha,i.alpha,s),en.transform(n))},tL=(t,e)=>r=>e(t(r)),va=(...t)=>t.reduce(tL),Xf=new Set(["none","hidden"]);function rL(t,e){return Xf.has(t)?r=>r<=0?t:e:r=>r>=1?e:t}function iL(t,e){return r=>Ae(t,e,r)}function qm(t){return typeof t=="number"?iL:typeof t=="string"?Im(t)?Iu:ot.test(t)?gv:oL:Array.isArray(t)?EE:typeof t=="object"?ot.test(t)?gv:nL:Iu}function EE(t,e){const r=[...t],i=r.length,n=t.map((s,o)=>qm(s)(s,e[o]));return s=>{for(let o=0;o<i;o++)r[o]=n[o](s);return r}}function nL(t,e){const r={...t,...e},i={};for(const n in r)t[n]!==void 0&&e[n]!==void 0&&(i[n]=qm(t[n])(t[n],e[n]));return n=>{for(const s in i)r[s]=i[s](n);return r}}function sL(t,e){var r;const i=[],n={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],a=t.indexes[o][n[o]],l=(r=t.values[a])!==null&&r!==void 0?r:0;i[s]=l,n[o]++}return i}const oL=(t,e)=>{const r=Ri.createTransformer(e),i=ia(t),n=ia(e);return i.indexes.var.length===n.indexes.var.length&&i.indexes.color.length===n.indexes.color.length&&i.indexes.number.length>=n.indexes.number.length?Xf.has(t)&&!n.values.length||Xf.has(e)&&!i.values.length?rL(t,e):va(EE(sL(i,n),n.values),r):Iu(t,e)};function SE(t,e,r){return typeof t=="number"&&typeof e=="number"&&typeof r=="number"?Ae(t,e,r):qm(t)(t,e)}const aL=5;function AE(t,e,r){const i=Math.max(e-aL,0);return QT(r-t(i),e-i)}const Me={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},zc=.001;function lL({duration:t=Me.duration,bounce:e=Me.bounce,velocity:r=Me.velocity,mass:i=Me.mass}){let n,s,o=1-e;o=Qr(Me.minDamping,Me.maxDamping,o),t=Qr(Me.minDuration,Me.maxDuration,Hr(t)),o<1?(n=u=>{const h=u*o,c=h*t,d=h-r,f=Yf(u,o),p=Math.exp(-c);return zc-d/f*p},s=u=>{const c=u*o*t,d=c*r+r,f=Math.pow(o,2)*Math.pow(u,2)*t,p=Math.exp(-c),g=Yf(Math.pow(u,2),o);return(-n(u)+zc>0?-1:1)*((d-f)*p)/g}):(n=u=>{const h=Math.exp(-u*t),c=(u-r)*t+1;return-zc+h*c},s=u=>{const h=Math.exp(-u*t),c=(r-u)*(t*t);return h*c});const a=5/t,l=hL(n,s,a);if(t=zr(t),isNaN(l))return{stiffness:Me.stiffness,damping:Me.damping,duration:t};{const u=Math.pow(l,2)*i;return{stiffness:u,damping:o*2*Math.sqrt(i*u),duration:t}}}const uL=12;function hL(t,e,r){let i=r;for(let n=1;n<uL;n++)i=i-t(i)/e(i);return i}function Yf(t,e){return t*Math.sqrt(1-e*e)}const cL=["duration","bounce"],dL=["stiffness","damping","mass"];function yv(t,e){return e.some(r=>t[r]!==void 0)}function fL(t){let e={velocity:Me.velocity,stiffness:Me.stiffness,damping:Me.damping,mass:Me.mass,isResolvedFromDuration:!1,...t};if(!yv(t,dL)&&yv(t,cL))if(t.visualDuration){const r=t.visualDuration,i=2*Math.PI/(r*1.2),n=i*i,s=2*Qr(.05,1,1-(t.bounce||0))*Math.sqrt(n);e={...e,mass:Me.mass,stiffness:n,damping:s}}else{const r=lL(t);e={...e,...r,mass:Me.mass},e.isResolvedFromDuration=!0}return e}function bE(t=Me.visualDuration,e=Me.bounce){const r=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:i,restDelta:n}=r;const s=r.keyframes[0],o=r.keyframes[r.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:u,mass:h,duration:c,velocity:d,isResolvedFromDuration:f}=fL({...r,velocity:-Hr(r.velocity||0)}),p=d||0,g=u/(2*Math.sqrt(l*h)),x=o-s,y=Hr(Math.sqrt(l/h)),v=Math.abs(x)<5;i||(i=v?Me.restSpeed.granular:Me.restSpeed.default),n||(n=v?Me.restDelta.granular:Me.restDelta.default);let m;if(g<1){const w=Yf(y,g);m=S=>{const E=Math.exp(-g*y*S);return o-E*((p+g*y*x)/w*Math.sin(w*S)+x*Math.cos(w*S))}}else if(g===1)m=w=>o-Math.exp(-y*w)*(x+(p+y*x)*w);else{const w=y*Math.sqrt(g*g-1);m=S=>{const E=Math.exp(-g*y*S),T=Math.min(w*S,300);return o-E*((p+g*y*x)*Math.sinh(T)+w*x*Math.cosh(T))/w}}const _={calculatedDuration:f&&c||null,next:w=>{const S=m(w);if(f)a.done=w>=c;else{let E=0;g<1&&(E=w===0?zr(p):AE(m,w,S));const T=Math.abs(E)<=i,C=Math.abs(o-S)<=n;a.done=T&&C}return a.value=a.done?o:S,a},toString:()=>{const w=Math.min(HT(_),Gf),S=$T(E=>_.next(w*E).value,w,30);return w+"ms "+S}};return _}function vv({keyframes:t,velocity:e=0,power:r=.8,timeConstant:i=325,bounceDamping:n=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:u=.5,restSpeed:h}){const c=t[0],d={done:!1,value:c},f=T=>a!==void 0&&T<a||l!==void 0&&T>l,p=T=>a===void 0?l:l===void 0||Math.abs(a-T)<Math.abs(l-T)?a:l;let g=r*e;const x=c+g,y=o===void 0?x:o(x);y!==x&&(g=y-c);const v=T=>-g*Math.exp(-T/i),m=T=>y+v(T),_=T=>{const C=v(T),A=m(T);d.done=Math.abs(C)<=u,d.value=d.done?y:A};let w,S;const E=T=>{f(d.value)&&(w=T,S=bE({keyframes:[d.value,p(d.value)],velocity:AE(m,T,d.value),damping:n,stiffness:s,restDelta:u,restSpeed:h}))};return E(0),{calculatedDuration:null,next:T=>{let C=!1;return!S&&w===void 0&&(C=!0,_(T),E(T)),w!==void 0&&T>=w?S.next(T-w):(!C&&_(T),d)}}}const pL=ya(.42,0,1,1),mL=ya(0,0,.58,1),CE=ya(.42,0,.58,1),gL=t=>Array.isArray(t)&&typeof t[0]!="number",yL={linear:Ct,easeIn:pL,easeInOut:CE,easeOut:mL,circIn:$m,circInOut:aE,circOut:oE,backIn:Hm,backInOut:nE,backOut:iE,anticipate:sE},xv=t=>{if(Um(t)){ST(t.length===4);const[e,r,i,n]=t;return ya(e,r,i,n)}else if(typeof t=="string")return yL[t];return t};function vL(t,e,r){const i=[],n=r||SE,s=t.length-1;for(let o=0;o<s;o++){let a=n(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||Ct:e;a=va(l,a)}i.push(a)}return i}function xL(t,e,{clamp:r=!0,ease:i,mixer:n}={}){const s=t.length;if(ST(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=vL(e,i,n),l=a.length,u=h=>{if(o&&h<t[0])return e[0];let c=0;if(l>1)for(;c<t.length-2&&!(h<t[c+1]);c++);const d=bs(t[c],t[c+1],h);return a[c](d)};return r?h=>u(Qr(t[0],t[s-1],h)):u}function _L(t,e){const r=t[t.length-1];for(let i=1;i<=e;i++){const n=bs(0,e,i);t.push(Ae(r,1,n))}}function wL(t){const e=[0];return _L(e,t.length-1),e}function TL(t,e){return t.map(r=>r*e)}function EL(t,e){return t.map(()=>e||CE).splice(0,t.length-1)}function Mu({duration:t=300,keyframes:e,times:r,ease:i="easeInOut"}){const n=gL(i)?i.map(xv):xv(i),s={done:!1,value:e[0]},o=TL(r&&r.length===e.length?r:wL(e),t),a=xL(o,e,{ease:Array.isArray(n)?n:EL(e,n)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}const SL=t=>{const e=({timestamp:r})=>t(r);return{start:()=>ve.update(e,!0),stop:()=>Pi(e),now:()=>Je.isProcessing?Je.timestamp:br.now()}},AL={decay:vv,inertia:vv,tween:Mu,keyframes:Mu,spring:bE},bL=t=>t/100;class Zm extends TE{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:r,motionValue:i,element:n,keyframes:s}=this.options,o=(n==null?void 0:n.KeyframeResolver)||Km,a=(l,u)=>this.onKeyframesResolved(l,u);this.resolver=new o(s,a,r,i,n),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:r="keyframes",repeat:i=0,repeatDelay:n=0,repeatType:s,velocity:o=0}=this.options,a=Om(r)?r:AL[r]||Mu;let l,u;a!==Mu&&typeof e[0]!="number"&&(l=va(bL,SE(e[0],e[1])),e=[0,100]);const h=a({...this.options,keyframes:e});s==="mirror"&&(u=a({...this.options,keyframes:[...e].reverse(),velocity:-o})),h.calculatedDuration===null&&(h.calculatedDuration=HT(h));const{calculatedDuration:c}=h,d=c+n,f=d*(i+1)-n;return{generator:h,mirroredGenerator:u,mapPercentToKeyframes:l,calculatedDuration:c,resolvedDuration:d,totalDuration:f}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,r=!1){const{resolved:i}=this;if(!i){const{keyframes:T}=this.options;return{done:!0,value:T[T.length-1]}}const{finalKeyframe:n,generator:s,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:l,calculatedDuration:u,totalDuration:h,resolvedDuration:c}=i;if(this.startTime===null)return s.next(0);const{delay:d,repeat:f,repeatType:p,repeatDelay:g,onUpdate:x}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-h/this.speed,this.startTime)),r?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const y=this.currentTime-d*(this.speed>=0?1:-1),v=this.speed>=0?y<0:y>h;this.currentTime=Math.max(y,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=h);let m=this.currentTime,_=s;if(f){const T=Math.min(this.currentTime,h)/c;let C=Math.floor(T),A=T%1;!A&&T>=1&&(A=1),A===1&&C--,C=Math.min(C,f+1),!!(C%2)&&(p==="reverse"?(A=1-A,g&&(A-=g/c)):p==="mirror"&&(_=o)),m=Qr(0,1,A)*c}const w=v?{done:!1,value:l[0]}:_.next(m);a&&(w.value=a(w.value));let{done:S}=w;!v&&u!==null&&(S=this.speed>=0?this.currentTime>=h:this.currentTime<=0);const E=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&S);return E&&n!==void 0&&(w.value=mh(l,this.options,n)),x&&x(w.value),E&&this.finish(),w}get duration(){const{resolved:e}=this;return e?Hr(e.calculatedDuration):0}get time(){return Hr(this.currentTime)}set time(e){e=zr(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const r=this.playbackSpeed!==e;this.playbackSpeed=e,r&&(this.time=Hr(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=SL,onPlay:r,startTime:i}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),r&&r();const n=this.driver.now();this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=n):this.startTime=i??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const CL=new Set(["opacity","clipPath","filter","transform"]);function PL(t,e,r,{delay:i=0,duration:n=300,repeat:s=0,repeatType:o="loop",ease:a="easeInOut",times:l}={}){const u={[e]:r};l&&(u.offset=l);const h=XT(a,n);return Array.isArray(h)&&(u.easing=h),t.animate(u,{delay:i,duration:n,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}const RL=Em(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),ku=10,IL=2e4;function ML(t){return Om(t.type)||t.type==="spring"||!WT(t.ease)}function kL(t,e){const r=new Zm({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let i={done:!1,value:t[0]};const n=[];let s=0;for(;!i.done&&s<IL;)i=r.sample(s),n.push(i.value),s+=ku;return{times:void 0,keyframes:n,duration:s-ku,ease:"linear"}}const PE={anticipate:sE,backInOut:nE,circInOut:aE};function DL(t){return t in PE}class _v extends TE{constructor(e){super(e);const{name:r,motionValue:i,element:n,keyframes:s}=this.options;this.resolver=new wE(s,(o,a)=>this.onKeyframesResolved(o,a),r,i,n),this.resolver.scheduleResolve()}initPlayback(e,r){let{duration:i=300,times:n,ease:s,type:o,motionValue:a,name:l,startTime:u}=this.options;if(!a.owner||!a.owner.current)return!1;if(typeof s=="string"&&Ru()&&DL(s)&&(s=PE[s]),ML(this.options)){const{onComplete:c,onUpdate:d,motionValue:f,element:p,...g}=this.options,x=kL(e,g);e=x.keyframes,e.length===1&&(e[1]=e[0]),i=x.duration,n=x.times,s=x.ease,o="keyframes"}const h=PL(a.owner.current,l,e,{...this.options,duration:i,times:n,ease:s});return h.startTime=u??this.calcStartTime(),this.pendingTimeline?(nv(h,this.pendingTimeline),this.pendingTimeline=void 0):h.onfinish=()=>{const{onComplete:c}=this.options;a.set(mh(e,this.options,r)),c&&c(),this.cancel(),this.resolveFinishedPromise()},{animation:h,duration:i,times:n,type:o,ease:s,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:r}=e;return Hr(r)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:r}=e;return Hr(r.currentTime||0)}set time(e){const{resolved:r}=this;if(!r)return;const{animation:i}=r;i.currentTime=zr(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:r}=e;return r.playbackRate}set speed(e){const{resolved:r}=this;if(!r)return;const{animation:i}=r;i.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:r}=e;return r.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:r}=e;return r.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:r}=this;if(!r)return Ct;const{animation:i}=r;nv(i,e)}return Ct}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:r}=e;r.playState==="finished"&&this.updateFinishedPromise(),r.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:r}=e;r.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:r,keyframes:i,duration:n,type:s,ease:o,times:a}=e;if(r.playState==="idle"||r.playState==="finished")return;if(this.time){const{motionValue:u,onUpdate:h,onComplete:c,element:d,...f}=this.options,p=new Zm({...f,keyframes:i,duration:n,type:s,ease:o,times:a,isGenerator:!0}),g=zr(this.time);u.setWithVelocity(p.sample(g-ku).value,p.sample(g).value,ku)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:r,name:i,repeatDelay:n,repeatType:s,damping:o,type:a}=e;if(!r||!r.owner||!(r.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:u}=r.owner.getProps();return RL()&&i&&CL.has(i)&&!l&&!u&&!n&&s!=="mirror"&&o!==0&&a!=="inertia"}}const FL={type:"spring",stiffness:500,damping:25,restSpeed:10},BL=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),LL={type:"keyframes",duration:.8},NL={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},OL=(t,{keyframes:e})=>e.length>2?LL:En.has(t)?t.startsWith("scale")?BL(e[1]):FL:NL;function UL({when:t,delay:e,delayChildren:r,staggerChildren:i,staggerDirection:n,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:u,...h}){return!!Object.keys(h).length}const Qm=(t,e,r,i={},n,s)=>o=>{const a=Nm(i,t)||{},l=a.delay||i.delay||0;let{elapsed:u=0}=i;u=u-zr(l);let h={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-u,onUpdate:d=>{e.set(d),a.onUpdate&&a.onUpdate(d)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:s?void 0:n};UL(a)||(h={...h,...OL(t,h)}),h.duration&&(h.duration=zr(h.duration)),h.repeatDelay&&(h.repeatDelay=zr(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let c=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(h.duration=0,h.delay===0&&(c=!0)),c&&!s&&e.get()!==void 0){const d=mh(h.keyframes,a);if(d!==void 0)return ve.update(()=>{h.onUpdate(d),h.onComplete()}),new nB([])}return!s&&_v.supports(h)?new _v(h):new Zm(h)};function GL({protectedKeys:t,needsAnimating:e},r){const i=t.hasOwnProperty(r)&&e[r]!==!0;return e[r]=!1,i}function RE(t,e,{delay:r=0,transitionOverride:i,type:n}={}){var s;let{transition:o=t.getDefaultTransition(),transitionEnd:a,...l}=e;i&&(o=i);const u=[],h=n&&t.animationState&&t.animationState.getState()[n];for(const c in l){const d=t.getValue(c,(s=t.latestValues[c])!==null&&s!==void 0?s:null),f=l[c];if(f===void 0||h&&GL(h,c))continue;const p={delay:r,...Nm(o||{},c)};let g=!1;if(window.MotionHandoffAnimation){const y=JT(t);if(y){const v=window.MotionHandoffAnimation(y,c,ve);v!==null&&(p.startTime=v,g=!0)}}jf(t,c),d.start(Qm(c,d,f,t.shouldReduceMotion&&ZT.has(c)?{type:!1}:p,t,g));const x=d.animation;x&&u.push(x)}return a&&Promise.all(u).then(()=>{ve.update(()=>{a&&vB(t,a)})}),u}function Kf(t,e,r={}){var i;const n=ph(t,e,r.type==="exit"?(i=t.presenceContext)===null||i===void 0?void 0:i.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=n||{};r.transitionOverride&&(s=r.transitionOverride);const o=n?()=>Promise.all(RE(t,n,r)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:h=0,staggerChildren:c,staggerDirection:d}=s;return VL(t,e,h+u,c,d,r)}:()=>Promise.resolve(),{when:l}=s;if(l){const[u,h]=l==="beforeChildren"?[o,a]:[a,o];return u().then(()=>h())}else return Promise.all([o(),a(r.delay)])}function VL(t,e,r=0,i=0,n=1,s){const o=[],a=(t.variantChildren.size-1)*i,l=n===1?(u=0)=>u*i:(u=0)=>a-u*i;return Array.from(t.variantChildren).sort(jL).forEach((u,h)=>{u.notify("AnimationStart",e),o.push(Kf(u,e,{...s,delay:r+l(h)}).then(()=>u.notify("AnimationComplete",e)))}),Promise.all(o)}function jL(t,e){return t.sortNodePosition(e)}function zL(t,e,r={}){t.notify("AnimationStart",e);let i;if(Array.isArray(e)){const n=e.map(s=>Kf(t,s,r));i=Promise.all(n)}else if(typeof e=="string")i=Kf(t,e,r);else{const n=typeof e=="function"?ph(t,e,r.custom):e;i=Promise.all(RE(t,n,r))}return i.then(()=>{t.notify("AnimationComplete",e)})}const HL=Am.length;function IE(t){if(!t)return;if(!t.isControllingVariants){const r=t.parent?IE(t.parent)||{}:{};return t.props.initial!==void 0&&(r.initial=t.props.initial),r}const e={};for(let r=0;r<HL;r++){const i=Am[r],n=t.props[i];(ea(n)||n===!1)&&(e[i]=n)}return e}const $L=[...Sm].reverse(),WL=Sm.length;function XL(t){return e=>Promise.all(e.map(({animation:r,options:i})=>zL(t,r,i)))}function YL(t){let e=XL(t),r=wv(),i=!0;const n=l=>(u,h)=>{var c;const d=ph(t,h,l==="exit"?(c=t.presenceContext)===null||c===void 0?void 0:c.custom:void 0);if(d){const{transition:f,transitionEnd:p,...g}=d;u={...u,...g,...p}}return u};function s(l){e=l(t)}function o(l){const{props:u}=t,h=IE(t.parent)||{},c=[],d=new Set;let f={},p=1/0;for(let x=0;x<WL;x++){const y=$L[x],v=r[y],m=u[y]!==void 0?u[y]:h[y],_=ea(m),w=y===l?v.isActive:null;w===!1&&(p=x);let S=m===h[y]&&m!==u[y]&&_;if(S&&i&&t.manuallyAnimateOnMount&&(S=!1),v.protectedKeys={...f},!v.isActive&&w===null||!m&&!v.prevProp||dh(m)||typeof m=="boolean")continue;const E=KL(v.prevProp,m);let T=E||y===l&&v.isActive&&!S&&_||x>p&&_,C=!1;const A=Array.isArray(m)?m:[m];let B=A.reduce(n(y),{});w===!1&&(B={});const{prevResolvedValues:D={}}=v,b={...D,...B},M=O=>{T=!0,d.has(O)&&(C=!0,d.delete(O)),v.needsAnimating[O]=!0;const I=t.getValue(O);I&&(I.liveStyle=!1)};for(const O in b){const I=B[O],G=D[O];if(f.hasOwnProperty(O))continue;let P=!1;Uf(I)&&Uf(G)?P=!zT(I,G):P=I!==G,P?I!=null?M(O):d.add(O):I!==void 0&&d.has(O)?M(O):v.protectedKeys[O]=!0}v.prevProp=m,v.prevResolvedValues=B,v.isActive&&(f={...f,...B}),i&&t.blockInitialAnimation&&(T=!1),T&&(!(S&&E)||C)&&c.push(...A.map(O=>({animation:O,options:{type:y}})))}if(d.size){const x={};d.forEach(y=>{const v=t.getBaseTarget(y),m=t.getValue(y);m&&(m.liveStyle=!0),x[y]=v??null}),c.push({animation:x})}let g=!!c.length;return i&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(g=!1),i=!1,g?e(c):Promise.resolve()}function a(l,u){var h;if(r[l].isActive===u)return Promise.resolve();(h=t.variantChildren)===null||h===void 0||h.forEach(d=>{var f;return(f=d.animationState)===null||f===void 0?void 0:f.setActive(l,u)}),r[l].isActive=u;const c=o(l);for(const d in r)r[d].protectedKeys={};return c}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>r,reset:()=>{r=wv(),i=!0}}}function KL(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!zT(e,t):!1}function Oi(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function wv(){return{animate:Oi(!0),whileInView:Oi(),whileHover:Oi(),whileTap:Oi(),whileDrag:Oi(),whileFocus:Oi(),exit:Oi()}}class Bi{constructor(e){this.isMounted=!1,this.node=e}update(){}}class qL extends Bi{constructor(e){super(e),e.animationState||(e.animationState=YL(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();dh(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:r}=this.node.prevProps||{};e!==r&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let ZL=0;class QL extends Bi{constructor(){super(...arguments),this.id=ZL++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:r}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const n=this.node.animationState.setActive("exit",!e);r&&!e&&n.then(()=>r(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const JL={animation:{Feature:qL},exit:{Feature:QL}};function na(t,e,r,i={passive:!0}){return t.addEventListener(e,r,i),()=>t.removeEventListener(e,r)}function xa(t){return{point:{x:t.pageX,y:t.pageY}}}const eN=t=>e=>Gm(e)&&t(e,xa(e));function Ro(t,e,r,i){return na(t,e,eN(r),i)}const Tv=(t,e)=>Math.abs(t-e);function tN(t,e){const r=Tv(t.x,e.x),i=Tv(t.y,e.y);return Math.sqrt(r**2+i**2)}class ME{constructor(e,r,{transformPagePoint:i,contextWindow:n,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const c=$c(this.lastMoveEventInfo,this.history),d=this.startEvent!==null,f=tN(c.offset,{x:0,y:0})>=3;if(!d&&!f)return;const{point:p}=c,{timestamp:g}=Je;this.history.push({...p,timestamp:g});const{onStart:x,onMove:y}=this.handlers;d||(x&&x(this.lastMoveEvent,c),this.startEvent=this.lastMoveEvent),y&&y(this.lastMoveEvent,c)},this.handlePointerMove=(c,d)=>{this.lastMoveEvent=c,this.lastMoveEventInfo=Hc(d,this.transformPagePoint),ve.update(this.updatePoint,!0)},this.handlePointerUp=(c,d)=>{this.end();const{onEnd:f,onSessionEnd:p,resumeAnimation:g}=this.handlers;if(this.dragSnapToOrigin&&g&&g(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=$c(c.type==="pointercancel"?this.lastMoveEventInfo:Hc(d,this.transformPagePoint),this.history);this.startEvent&&f&&f(c,x),p&&p(c,x)},!Gm(e))return;this.dragSnapToOrigin=s,this.handlers=r,this.transformPagePoint=i,this.contextWindow=n||window;const o=xa(e),a=Hc(o,this.transformPagePoint),{point:l}=a,{timestamp:u}=Je;this.history=[{...l,timestamp:u}];const{onSessionStart:h}=r;h&&h(e,$c(a,this.history)),this.removeListeners=va(Ro(this.contextWindow,"pointermove",this.handlePointerMove),Ro(this.contextWindow,"pointerup",this.handlePointerUp),Ro(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Pi(this.updatePoint)}}function Hc(t,e){return e?{point:e(t.point)}:t}function Ev(t,e){return{x:t.x-e.x,y:t.y-e.y}}function $c({point:t},e){return{point:t,delta:Ev(t,kE(e)),offset:Ev(t,rN(e)),velocity:iN(e,.1)}}function rN(t){return t[0]}function kE(t){return t[t.length-1]}function iN(t,e){if(t.length<2)return{x:0,y:0};let r=t.length-1,i=null;const n=kE(t);for(;r>=0&&(i=t[r],!(n.timestamp-i.timestamp>zr(e)));)r--;if(!i)return{x:0,y:0};const s=Hr(n.timestamp-i.timestamp);if(s===0)return{x:0,y:0};const o={x:(n.x-i.x)/s,y:(n.y-i.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const DE=1e-4,nN=1-DE,sN=1+DE,FE=.01,oN=0-FE,aN=0+FE;function Rt(t){return t.max-t.min}function lN(t,e,r){return Math.abs(t-e)<=r}function Sv(t,e,r,i=.5){t.origin=i,t.originPoint=Ae(e.min,e.max,t.origin),t.scale=Rt(r)/Rt(e),t.translate=Ae(r.min,r.max,t.origin)-t.originPoint,(t.scale>=nN&&t.scale<=sN||isNaN(t.scale))&&(t.scale=1),(t.translate>=oN&&t.translate<=aN||isNaN(t.translate))&&(t.translate=0)}function Io(t,e,r,i){Sv(t.x,e.x,r.x,i?i.originX:void 0),Sv(t.y,e.y,r.y,i?i.originY:void 0)}function Av(t,e,r){t.min=r.min+e.min,t.max=t.min+Rt(e)}function uN(t,e,r){Av(t.x,e.x,r.x),Av(t.y,e.y,r.y)}function bv(t,e,r){t.min=e.min-r.min,t.max=t.min+Rt(e)}function Mo(t,e,r){bv(t.x,e.x,r.x),bv(t.y,e.y,r.y)}function hN(t,{min:e,max:r},i){return e!==void 0&&t<e?t=i?Ae(e,t,i.min):Math.max(t,e):r!==void 0&&t>r&&(t=i?Ae(r,t,i.max):Math.min(t,r)),t}function Cv(t,e,r){return{min:e!==void 0?t.min+e:void 0,max:r!==void 0?t.max+r-(t.max-t.min):void 0}}function cN(t,{top:e,left:r,bottom:i,right:n}){return{x:Cv(t.x,r,n),y:Cv(t.y,e,i)}}function Pv(t,e){let r=e.min-t.min,i=e.max-t.max;return e.max-e.min<t.max-t.min&&([r,i]=[i,r]),{min:r,max:i}}function dN(t,e){return{x:Pv(t.x,e.x),y:Pv(t.y,e.y)}}function fN(t,e){let r=.5;const i=Rt(t),n=Rt(e);return n>i?r=bs(e.min,e.max-i,t.min):i>n&&(r=bs(t.min,t.max-n,e.min)),Qr(0,1,r)}function pN(t,e){const r={};return e.min!==void 0&&(r.min=e.min-t.min),e.max!==void 0&&(r.max=e.max-t.min),r}const qf=.35;function mN(t=qf){return t===!1?t=0:t===!0&&(t=qf),{x:Rv(t,"left","right"),y:Rv(t,"top","bottom")}}function Rv(t,e,r){return{min:Iv(t,e),max:Iv(t,r)}}function Iv(t,e){return typeof t=="number"?t:t[e]||0}const Mv=()=>({translate:0,scale:1,origin:0,originPoint:0}),Jn=()=>({x:Mv(),y:Mv()}),kv=()=>({min:0,max:0}),De=()=>({x:kv(),y:kv()});function Dt(t){return[t("x"),t("y")]}function BE({top:t,left:e,right:r,bottom:i}){return{x:{min:e,max:r},y:{min:t,max:i}}}function gN({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function yN(t,e){if(!e)return t;const r=e({x:t.left,y:t.top}),i=e({x:t.right,y:t.bottom});return{top:r.y,left:r.x,bottom:i.y,right:i.x}}function Wc(t){return t===void 0||t===1}function Zf({scale:t,scaleX:e,scaleY:r}){return!Wc(t)||!Wc(e)||!Wc(r)}function Xi(t){return Zf(t)||LE(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function LE(t){return Dv(t.x)||Dv(t.y)}function Dv(t){return t&&t!=="0%"}function Du(t,e,r){const i=t-r,n=e*i;return r+n}function Fv(t,e,r,i,n){return n!==void 0&&(t=Du(t,n,i)),Du(t,r,i)+e}function Qf(t,e=0,r=1,i,n){t.min=Fv(t.min,e,r,i,n),t.max=Fv(t.max,e,r,i,n)}function NE(t,{x:e,y:r}){Qf(t.x,e.translate,e.scale,e.originPoint),Qf(t.y,r.translate,r.scale,r.originPoint)}const Bv=.999999999999,Lv=1.0000000000001;function vN(t,e,r,i=!1){const n=r.length;if(!n)return;e.x=e.y=1;let s,o;for(let a=0;a<n;a++){s=r[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(i&&s.options.layoutScroll&&s.scroll&&s!==s.root&&ts(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,NE(t,o)),i&&Xi(s.latestValues)&&ts(t,s.latestValues))}e.x<Lv&&e.x>Bv&&(e.x=1),e.y<Lv&&e.y>Bv&&(e.y=1)}function es(t,e){t.min=t.min+e,t.max=t.max+e}function Nv(t,e,r,i,n=.5){const s=Ae(t.min,t.max,n);Qf(t,e,r,s,i)}function ts(t,e){Nv(t.x,e.x,e.scaleX,e.scale,e.originX),Nv(t.y,e.y,e.scaleY,e.scale,e.originY)}function OE(t,e){return BE(yN(t.getBoundingClientRect(),e))}function xN(t,e,r){const i=OE(t,r),{scroll:n}=e;return n&&(es(i.x,n.offset.x),es(i.y,n.offset.y)),i}const UE=({current:t})=>t?t.ownerDocument.defaultView:null,_N=new WeakMap;class wN{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=De(),this.visualElement=e}start(e,{snapToCursor:r=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const n=h=>{const{dragSnapToOrigin:c}=this.getProps();c?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(xa(h).point)},s=(h,c)=>{const{drag:d,dragPropagation:f,onDragStart:p}=this.getProps();if(d&&!f&&(this.openDragLock&&this.openDragLock(),this.openDragLock=fB(d),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Dt(x=>{let y=this.getAxisMotionValue(x).get()||0;if(Ar.test(y)){const{projection:v}=this.visualElement;if(v&&v.layout){const m=v.layout.layoutBox[x];m&&(y=Rt(m)*(parseFloat(y)/100))}}this.originPoint[x]=y}),p&&ve.postRender(()=>p(h,c)),jf(this.visualElement,"transform");const{animationState:g}=this.visualElement;g&&g.setActive("whileDrag",!0)},o=(h,c)=>{const{dragPropagation:d,dragDirectionLock:f,onDirectionLock:p,onDrag:g}=this.getProps();if(!d&&!this.openDragLock)return;const{offset:x}=c;if(f&&this.currentDirection===null){this.currentDirection=TN(x),this.currentDirection!==null&&p&&p(this.currentDirection);return}this.updateAxis("x",c.point,x),this.updateAxis("y",c.point,x),this.visualElement.render(),g&&g(h,c)},a=(h,c)=>this.stop(h,c),l=()=>Dt(h=>{var c;return this.getAnimationState(h)==="paused"&&((c=this.getAxisMotionValue(h).animation)===null||c===void 0?void 0:c.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new ME(e,{onSessionStart:n,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:UE(this.visualElement)})}stop(e,r){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:n}=r;this.startAnimation(n);const{onDragEnd:s}=this.getProps();s&&ve.postRender(()=>s(e,r))}cancel(){this.isDragging=!1;const{projection:e,animationState:r}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(e,r,i){const{drag:n}=this.getProps();if(!i||!cl(e,n,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(o=hN(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:r,dragElastic:i}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;r&&Zn(r)?this.constraints||(this.constraints=this.resolveRefConstraints()):r&&n?this.constraints=cN(n.layoutBox,r):this.constraints=!1,this.elastic=mN(i),s!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&Dt(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=pN(n.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:r}=this.getProps();if(!e||!Zn(e))return!1;const i=e.current,{projection:n}=this.visualElement;if(!n||!n.layout)return!1;const s=xN(i,n.root,this.visualElement.getTransformPagePoint());let o=dN(n.layout.layoutBox,s);if(r){const a=r(gN(o));this.hasMutatedConstraints=!!a,a&&(o=BE(a))}return o}startAnimation(e){const{drag:r,dragMomentum:i,dragElastic:n,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},u=Dt(h=>{if(!cl(h,r,this.currentDirection))return;let c=l&&l[h]||{};o&&(c={min:0,max:0});const d=n?200:1e6,f=n?40:1e7,p={type:"inertia",velocity:i?e[h]:0,bounceStiffness:d,bounceDamping:f,timeConstant:750,restDelta:1,restSpeed:10,...s,...c};return this.startAxisValueAnimation(h,p)});return Promise.all(u).then(a)}startAxisValueAnimation(e,r){const i=this.getAxisMotionValue(e);return jf(this.visualElement,e),i.start(Qm(e,i,0,r,this.visualElement,!1))}stopAnimation(){Dt(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Dt(e=>{var r;return(r=this.getAxisMotionValue(e).animation)===null||r===void 0?void 0:r.pause()})}getAnimationState(e){var r;return(r=this.getAxisMotionValue(e).animation)===null||r===void 0?void 0:r.state}getAxisMotionValue(e){const r=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),n=i[r];return n||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){Dt(r=>{const{drag:i}=this.getProps();if(!cl(r,i,this.currentDirection))return;const{projection:n}=this.visualElement,s=this.getAxisMotionValue(r);if(n&&n.layout){const{min:o,max:a}=n.layout.layoutBox[r];s.set(e[r]-Ae(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:r}=this.getProps(),{projection:i}=this.visualElement;if(!Zn(r)||!i||!this.constraints)return;this.stopAnimation();const n={x:0,y:0};Dt(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();n[o]=fN({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),Dt(o=>{if(!cl(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:u}=this.constraints[o];a.set(Ae(l,u,n[o]))})}addListeners(){if(!this.visualElement.current)return;_N.set(this.visualElement,this);const e=this.visualElement.current,r=Ro(e,"pointerdown",l=>{const{drag:u,dragListener:h=!0}=this.getProps();u&&h&&this.start(l)}),i=()=>{const{dragConstraints:l}=this.getProps();Zn(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,s=n.addEventListener("measure",i);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),ve.read(i);const o=na(window,"resize",()=>this.scalePositionWithinConstraints()),a=n.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(Dt(h=>{const c=this.getAxisMotionValue(h);c&&(this.originPoint[h]+=l[h].translate,c.set(c.get()+l[h].translate))}),this.visualElement.render())});return()=>{o(),r(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:i=!1,dragPropagation:n=!1,dragConstraints:s=!1,dragElastic:o=qf,dragMomentum:a=!0}=e;return{...e,drag:r,dragDirectionLock:i,dragPropagation:n,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function cl(t,e,r){return(e===!0||e===t)&&(r===null||r===t)}function TN(t,e=10){let r=null;return Math.abs(t.y)>e?r="y":Math.abs(t.x)>e&&(r="x"),r}class EN extends Bi{constructor(e){super(e),this.removeGroupControls=Ct,this.removeListeners=Ct,this.controls=new wN(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ct}unmount(){this.removeGroupControls(),this.removeListeners()}}const Ov=t=>(e,r)=>{t&&ve.postRender(()=>t(e,r))};class SN extends Bi{constructor(){super(...arguments),this.removePointerDownListener=Ct}onPointerDown(e){this.session=new ME(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:UE(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:r,onPan:i,onPanEnd:n}=this.node.getProps();return{onSessionStart:Ov(e),onStart:Ov(r),onMove:i,onEnd:(s,o)=>{delete this.session,n&&ve.postRender(()=>n(s,o))}}}mount(){this.removePointerDownListener=Ro(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Nl={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Uv(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Zs={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Q.test(t))t=parseFloat(t);else return t;const r=Uv(t,e.target.x),i=Uv(t,e.target.y);return`${r}% ${i}%`}},AN={correct:(t,{treeScale:e,projectionDelta:r})=>{const i=t,n=Ri.parse(t);if(n.length>5)return i;const s=Ri.createTransformer(t),o=typeof n[0]!="number"?1:0,a=r.x.scale*e.x,l=r.y.scale*e.y;n[0+o]/=a,n[1+o]/=l;const u=Ae(a,l,.5);return typeof n[2+o]=="number"&&(n[2+o]/=u),typeof n[3+o]=="number"&&(n[3+o]/=u),s(n)}};class bN extends N.Component{componentDidMount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:i,layoutId:n}=this.props,{projection:s}=e;WF(CN),s&&(r.group&&r.group.add(s),i&&i.register&&n&&i.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Nl.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:r,visualElement:i,drag:n,isPresent:s}=this.props,o=i.projection;return o&&(o.isPresent=s,n||e.layoutDependency!==r||r===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||ve.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Cm.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:i}=this.props,{projection:n}=e;n&&(n.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(n),i&&i.deregister&&i.deregister(n))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function GE(t){const[e,r]=TT(),i=N.useContext(xm);return R.jsx(bN,{...t,layoutGroup:i,switchLayoutGroup:N.useContext(IT),isPresent:e,safeToRemove:r})}const CN={borderRadius:{...Zs,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Zs,borderTopRightRadius:Zs,borderBottomLeftRadius:Zs,borderBottomRightRadius:Zs,boxShadow:AN};function PN(t,e,r){const i=lt(t)?t:ra(t);return i.start(Qm("",i,e,r)),i.animation}function RN(t){return t instanceof SVGElement&&t.tagName!=="svg"}const IN=(t,e)=>t.depth-e.depth;class MN{constructor(){this.children=[],this.isDirty=!1}add(e){Vm(this.children,e),this.isDirty=!0}remove(e){jm(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(IN),this.isDirty=!1,this.children.forEach(e)}}function kN(t,e){const r=br.now(),i=({timestamp:n})=>{const s=n-r;s>=e&&(Pi(i),t(s-e))};return ve.read(i,!0),()=>Pi(i)}const VE=["TopLeft","TopRight","BottomLeft","BottomRight"],DN=VE.length,Gv=t=>typeof t=="string"?parseFloat(t):t,Vv=t=>typeof t=="number"||Q.test(t);function FN(t,e,r,i,n,s){n?(t.opacity=Ae(0,r.opacity!==void 0?r.opacity:1,BN(i)),t.opacityExit=Ae(e.opacity!==void 0?e.opacity:1,0,LN(i))):s&&(t.opacity=Ae(e.opacity!==void 0?e.opacity:1,r.opacity!==void 0?r.opacity:1,i));for(let o=0;o<DN;o++){const a=`border${VE[o]}Radius`;let l=jv(e,a),u=jv(r,a);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||Vv(l)===Vv(u)?(t[a]=Math.max(Ae(Gv(l),Gv(u),i),0),(Ar.test(u)||Ar.test(l))&&(t[a]+="%")):t[a]=u}(e.rotate||r.rotate)&&(t.rotate=Ae(e.rotate||0,r.rotate||0,i))}function jv(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const BN=jE(0,.5,oE),LN=jE(.5,.95,Ct);function jE(t,e,r){return i=>i<t?0:i>e?1:r(bs(t,e,i))}function zv(t,e){t.min=e.min,t.max=e.max}function kt(t,e){zv(t.x,e.x),zv(t.y,e.y)}function Hv(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function $v(t,e,r,i,n){return t-=e,t=Du(t,1/r,i),n!==void 0&&(t=Du(t,1/n,i)),t}function NN(t,e=0,r=1,i=.5,n,s=t,o=t){if(Ar.test(e)&&(e=parseFloat(e),e=Ae(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Ae(s.min,s.max,i);t===s&&(a-=e),t.min=$v(t.min,e,r,a,n),t.max=$v(t.max,e,r,a,n)}function Wv(t,e,[r,i,n],s,o){NN(t,e[r],e[i],e[n],e.scale,s,o)}const ON=["x","scaleX","originX"],UN=["y","scaleY","originY"];function Xv(t,e,r,i){Wv(t.x,e,ON,r?r.x:void 0,i?i.x:void 0),Wv(t.y,e,UN,r?r.y:void 0,i?i.y:void 0)}function Yv(t){return t.translate===0&&t.scale===1}function zE(t){return Yv(t.x)&&Yv(t.y)}function Kv(t,e){return t.min===e.min&&t.max===e.max}function GN(t,e){return Kv(t.x,e.x)&&Kv(t.y,e.y)}function qv(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function HE(t,e){return qv(t.x,e.x)&&qv(t.y,e.y)}function Zv(t){return Rt(t.x)/Rt(t.y)}function Qv(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class VN{constructor(){this.members=[]}add(e){Vm(this.members,e),e.scheduleRender()}remove(e){if(jm(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(e){const r=this.members.findIndex(n=>e===n);if(r===0)return!1;let i;for(let n=r;n>=0;n--){const s=this.members[n];if(s.isPresent!==!1){i=s;break}}return i?(this.promote(i),!0):!1}promote(e,r){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,r&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:n}=e.options;n===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:r,resumingFrom:i}=e;r.onExitComplete&&r.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function jN(t,e,r){let i="";const n=t.x.translate/e.x,s=t.y.translate/e.y,o=(r==null?void 0:r.z)||0;if((n||s||o)&&(i=`translate3d(${n}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),r){const{transformPerspective:u,rotate:h,rotateX:c,rotateY:d,skewX:f,skewY:p}=r;u&&(i=`perspective(${u}px) ${i}`),h&&(i+=`rotate(${h}deg) `),c&&(i+=`rotateX(${c}deg) `),d&&(i+=`rotateY(${d}deg) `),f&&(i+=`skewX(${f}deg) `),p&&(i+=`skewY(${p}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(i+=`scale(${a}, ${l})`),i||"none"}const Yi={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},fo=typeof window<"u"&&window.MotionDebug!==void 0,Xc=["","X","Y","Z"],zN={visibility:"hidden"},Jv=1e3;let HN=0;function Yc(t,e,r,i){const{latestValues:n}=e;n[t]&&(r[t]=n[t],e.setStaticValue(t,0),i&&(i[t]=0))}function $E(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const r=JT(e);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:n,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(r,"transform",ve,!(n||s))}const{parent:i}=t;i&&!i.hasCheckedOptimisedAppear&&$E(i)}function WE({attachResizeListener:t,defaultParent:e,measureScroll:r,checkIsScrollRoot:i,resetTransform:n}){return class{constructor(o={},a=e==null?void 0:e()){this.id=HN++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,fo&&(Yi.totalNodes=Yi.resolvedTargetDeltas=Yi.recalculatedProjection=0),this.nodes.forEach(XN),this.nodes.forEach(QN),this.nodes.forEach(JN),this.nodes.forEach(YN),fo&&window.MotionDebug.record(Yi)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new MN)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new zm),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=RN(o),this.instance=o;const{layoutId:l,layout:u,visualElement:h}=this.options;if(h&&!h.current&&h.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(u||l)&&(this.isLayoutDirty=!0),t){let c;const d=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,c&&c(),c=kN(d,250),Nl.hasAnimatedSinceResize&&(Nl.hasAnimatedSinceResize=!1,this.nodes.forEach(tx))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&h&&(l||u)&&this.addEventListener("didUpdate",({delta:c,hasLayoutChanged:d,hasRelativeTargetChanged:f,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||h.getDefaultTransition()||nO,{onLayoutAnimationStart:x,onLayoutAnimationComplete:y}=h.getProps(),v=!this.targetLayout||!HE(this.targetLayout,p)||f,m=!d&&f;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||m||d&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(c,m);const _={...Nm(g,"layout"),onPlay:x,onComplete:y};(h.shouldReduceMotion||this.options.layoutRoot)&&(_.delay=0,_.type=!1),this.startAnimation(_)}else d||tx(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Pi(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(eO),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&$E(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const c=this.path[h];c.shouldResetTransform=!0,c.updateScroll("snapshot"),c.options.layoutRoot&&c.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(ex);return}this.isUpdating||this.nodes.forEach(qN),this.isUpdating=!1,this.nodes.forEach(ZN),this.nodes.forEach($N),this.nodes.forEach(WN),this.clearAllSnapshots();const a=br.now();Je.delta=Qr(0,1e3/60,a-Je.timestamp),Je.timestamp=a,Je.isProcessing=!0,Oc.update.process(Je),Oc.preRender.process(Je),Oc.render.process(Je),Je.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Cm.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(KN),this.sharedNodes.forEach(tO)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ve.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ve.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=De(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a){const l=i(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!n)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!zE(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,h=u!==this.prevTransformTemplateValue;o&&(a||Xi(this.latestValues)||h)&&(n(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),sO(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:a}=this.options;if(!a)return De();const l=a.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(oO))){const{scroll:h}=this.root;h&&(es(l.x,h.offset.x),es(l.y,h.offset.y))}return l}removeElementScroll(o){var a;const l=De();if(kt(l,o),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return l;for(let u=0;u<this.path.length;u++){const h=this.path[u],{scroll:c,options:d}=h;h!==this.root&&c&&d.layoutScroll&&(c.wasRoot&&kt(l,o),es(l.x,c.offset.x),es(l.y,c.offset.y))}return l}applyTransform(o,a=!1){const l=De();kt(l,o);for(let u=0;u<this.path.length;u++){const h=this.path[u];!a&&h.options.layoutScroll&&h.scroll&&h!==h.root&&ts(l,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),Xi(h.latestValues)&&ts(l,h.latestValues)}return Xi(this.latestValues)&&ts(l,this.latestValues),l}removeTransform(o){const a=De();kt(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!Xi(u.latestValues))continue;Zf(u.latestValues)&&u.updateSnapshot();const h=De(),c=u.measurePageBox();kt(h,c),Xv(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,h)}return Xi(this.latestValues)&&Xv(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Je.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:c,layoutId:d}=this.options;if(!(!this.layout||!(c||d))){if(this.resolvedRelativeTargetAt=Je.timestamp,!this.targetDelta&&!this.relativeTarget){const f=this.getClosestProjectingParent();f&&f.layout&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=De(),this.relativeTargetOrigin=De(),Mo(this.relativeTargetOrigin,this.layout.layoutBox,f.layout.layoutBox),kt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=De(),this.targetWithTransforms=De()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),uN(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):kt(this.target,this.layout.layoutBox),NE(this.target,this.targetDelta)):kt(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const f=this.getClosestProjectingParent();f&&!!f.resumingFrom==!!this.resumingFrom&&!f.options.layoutScroll&&f.target&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=De(),this.relativeTargetOrigin=De(),Mo(this.relativeTargetOrigin,this.target,f.target),kt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}fo&&Yi.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Zf(this.parent.latestValues)||LE(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let u=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===Je.timestamp&&(u=!1),u)return;const{layout:h,layoutId:c}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||c))return;kt(this.layoutCorrected,this.layout.layoutBox);const d=this.treeScale.x,f=this.treeScale.y;vN(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=De());const{target:p}=a;if(!p){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Hv(this.prevProjectionDelta.x,this.projectionDelta.x),Hv(this.prevProjectionDelta.y,this.projectionDelta.y)),Io(this.projectionDelta,this.layoutCorrected,p,this.latestValues),(this.treeScale.x!==d||this.treeScale.y!==f||!Qv(this.projectionDelta.x,this.prevProjectionDelta.x)||!Qv(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p)),fo&&Yi.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Jn(),this.projectionDelta=Jn(),this.projectionDeltaWithTransform=Jn()}setAnimationOrigin(o,a=!1){const l=this.snapshot,u=l?l.latestValues:{},h={...this.latestValues},c=Jn();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const d=De(),f=l?l.source:void 0,p=this.layout?this.layout.source:void 0,g=f!==p,x=this.getStack(),y=!x||x.members.length<=1,v=!!(g&&!y&&this.options.crossfade===!0&&!this.path.some(iO));this.animationProgress=0;let m;this.mixTargetDelta=_=>{const w=_/1e3;rx(c.x,o.x,w),rx(c.y,o.y,w),this.setTargetDelta(c),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Mo(d,this.layout.layoutBox,this.relativeParent.layout.layoutBox),rO(this.relativeTarget,this.relativeTargetOrigin,d,w),m&&GN(this.relativeTarget,m)&&(this.isProjectionDirty=!1),m||(m=De()),kt(m,this.relativeTarget)),g&&(this.animationValues=h,FN(h,u,this.latestValues,w,v,y)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=w},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Pi(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ve.update(()=>{Nl.hasAnimatedSinceResize=!0,this.currentAnimation=PN(0,Jv,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Jv),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:u,latestValues:h}=o;if(!(!a||!l||!u)){if(this!==o&&this.layout&&u&&XE(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||De();const c=Rt(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+c;const d=Rt(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+d}kt(a,l),ts(a,h),Io(this.projectionDeltaWithTransform,this.layoutCorrected,a,h)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new VN),this.sharedNodes.get(o).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const u={};l.z&&Yc("z",o,u,this.animationValues);for(let h=0;h<Xc.length;h++)Yc(`rotate${Xc[h]}`,o,u,this.animationValues),Yc(`skew${Xc[h]}`,o,u,this.animationValues);o.render();for(const h in u)o.setStaticValue(h,u[h]),this.animationValues&&(this.animationValues[h]=u[h]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return zN;const u={visibility:""},h=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=Bl(o==null?void 0:o.pointerEvents)||"",u.transform=h?h(this.latestValues,""):"none",u;const c=this.getLead();if(!this.projectionDelta||!this.layout||!c.target){const g={};return this.options.layoutId&&(g.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,g.pointerEvents=Bl(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Xi(this.latestValues)&&(g.transform=h?h({},""):"none",this.hasProjected=!1),g}const d=c.animationValues||c.latestValues;this.applyTransformsToTarget(),u.transform=jN(this.projectionDeltaWithTransform,this.treeScale,d),h&&(u.transform=h(d,u.transform));const{x:f,y:p}=this.projectionDelta;u.transformOrigin=`${f.origin*100}% ${p.origin*100}% 0`,c.animationValues?u.opacity=c===this?(l=(a=d.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:u.opacity=c===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const g in Pu){if(d[g]===void 0)continue;const{correct:x,applyTo:y}=Pu[g],v=u.transform==="none"?d[g]:x(d[g],c);if(y){const m=y.length;for(let _=0;_<m;_++)u[y[_]]=v}else u[g]=v}return this.options.layoutId&&(u.pointerEvents=c===this?Bl(o==null?void 0:o.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(ex),this.root.sharedNodes.clear()}}}function $N(t){t.updateLayout()}function WN(t){var e;const r=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&r&&t.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:n}=t.layout,{animationType:s}=t.options,o=r.source!==t.layout.source;s==="size"?Dt(c=>{const d=o?r.measuredBox[c]:r.layoutBox[c],f=Rt(d);d.min=i[c].min,d.max=d.min+f}):XE(s,r.layoutBox,i)&&Dt(c=>{const d=o?r.measuredBox[c]:r.layoutBox[c],f=Rt(i[c]);d.max=d.min+f,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[c].max=t.relativeTarget[c].min+f)});const a=Jn();Io(a,i,r.layoutBox);const l=Jn();o?Io(l,t.applyTransform(n,!0),r.measuredBox):Io(l,i,r.layoutBox);const u=!zE(a);let h=!1;if(!t.resumeFrom){const c=t.getClosestProjectingParent();if(c&&!c.resumeFrom){const{snapshot:d,layout:f}=c;if(d&&f){const p=De();Mo(p,r.layoutBox,d.layoutBox);const g=De();Mo(g,i,f.layoutBox),HE(p,g)||(h=!0),c.options.layoutRoot&&(t.relativeTarget=g,t.relativeTargetOrigin=p,t.relativeParent=c)}}}t.notifyListeners("didUpdate",{layout:i,snapshot:r,delta:l,layoutDelta:a,hasLayoutChanged:u,hasRelativeTargetChanged:h})}else if(t.isLead()){const{onExitComplete:i}=t.options;i&&i()}t.options.transition=void 0}function XN(t){fo&&Yi.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function YN(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function KN(t){t.clearSnapshot()}function ex(t){t.clearMeasurements()}function qN(t){t.isLayoutDirty=!1}function ZN(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function tx(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function QN(t){t.resolveTargetDelta()}function JN(t){t.calcProjection()}function eO(t){t.resetSkewAndRotation()}function tO(t){t.removeLeadSnapshot()}function rx(t,e,r){t.translate=Ae(e.translate,0,r),t.scale=Ae(e.scale,1,r),t.origin=e.origin,t.originPoint=e.originPoint}function ix(t,e,r,i){t.min=Ae(e.min,r.min,i),t.max=Ae(e.max,r.max,i)}function rO(t,e,r,i){ix(t.x,e.x,r.x,i),ix(t.y,e.y,r.y,i)}function iO(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const nO={duration:.45,ease:[.4,0,.1,1]},nx=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),sx=nx("applewebkit/")&&!nx("chrome/")?Math.round:Ct;function ox(t){t.min=sx(t.min),t.max=sx(t.max)}function sO(t){ox(t.x),ox(t.y)}function XE(t,e,r){return t==="position"||t==="preserve-aspect"&&!lN(Zv(e),Zv(r),.2)}function oO(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const aO=WE({attachResizeListener:(t,e)=>na(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Kc={current:void 0},YE=WE({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Kc.current){const t=new aO({});t.mount(window),t.setOptions({layoutScroll:!0}),Kc.current=t}return Kc.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),lO={pan:{Feature:SN},drag:{Feature:EN,ProjectionNode:YE,MeasureLayout:GE}};function ax(t,e,r){const{props:i}=t;t.animationState&&i.whileHover&&t.animationState.setActive("whileHover",r==="Start");const n="onHover"+r,s=i[n];s&&ve.postRender(()=>s(e,xa(e)))}class uO extends Bi{mount(){const{current:e}=this.node;e&&(this.unmount=lB(e,r=>(ax(this.node,r,"Start"),i=>ax(this.node,i,"End"))))}unmount(){}}class hO extends Bi{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=va(na(this.node.current,"focus",()=>this.onFocus()),na(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function lx(t,e,r){const{props:i}=t;t.animationState&&i.whileTap&&t.animationState.setActive("whileTap",r==="Start");const n="onTap"+(r==="End"?"":r),s=i[n];s&&ve.postRender(()=>s(e,xa(e)))}class cO extends Bi{mount(){const{current:e}=this.node;e&&(this.unmount=dB(e,r=>(lx(this.node,r,"Start"),(i,{success:n})=>lx(this.node,i,n?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Jf=new WeakMap,qc=new WeakMap,dO=t=>{const e=Jf.get(t.target);e&&e(t)},fO=t=>{t.forEach(dO)};function pO({root:t,...e}){const r=t||document;qc.has(r)||qc.set(r,{});const i=qc.get(r),n=JSON.stringify(e);return i[n]||(i[n]=new IntersectionObserver(fO,{root:t,...e})),i[n]}function mO(t,e,r){const i=pO(e);return Jf.set(t,r),i.observe(t),()=>{Jf.delete(t),i.unobserve(t)}}const gO={some:0,all:1};class yO extends Bi{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:r,margin:i,amount:n="some",once:s}=e,o={root:r?r.current:void 0,rootMargin:i,threshold:typeof n=="number"?n:gO[n]},a=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,s&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:h,onViewportLeave:c}=this.node.getProps(),d=u?h:c;d&&d(l)};return mO(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:r}=this.node;["amount","margin","root"].some(vO(e,r))&&this.startObserver()}unmount(){}}function vO({viewport:t={}},{viewport:e={}}={}){return r=>t[r]!==e[r]}const xO={inView:{Feature:yO},tap:{Feature:cO},focus:{Feature:hO},hover:{Feature:uO}},_O={layout:{ProjectionNode:YE,MeasureLayout:GE}},ep={current:null},KE={current:!1};function wO(){if(KE.current=!0,!!Tm)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>ep.current=t.matches;t.addListener(e),e()}else ep.current=!1}const TO=[..._E,ot,Ri],EO=t=>TO.find(xE(t)),ux=new WeakMap;function SO(t,e,r){for(const i in e){const n=e[i],s=r[i];if(lt(n))t.addValue(i,n);else if(lt(s))t.addValue(i,ra(n,{owner:t}));else if(s!==n)if(t.hasValue(i)){const o=t.getValue(i);o.liveStyle===!0?o.jump(n):o.hasAnimated||o.set(n)}else{const o=t.getStaticValue(i);t.addValue(i,ra(o!==void 0?o:n,{owner:t}))}}for(const i in r)e[i]===void 0&&t.removeValue(i);return e}const hx=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class AO{scrapeMotionValuesFromProps(e,r,i){return{}}constructor({parent:e,props:r,presenceContext:i,reducedMotionConfig:n,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Km,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=br.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,ve.render(this.render,!1,!0))};const{latestValues:l,renderState:u,onUpdate:h}=o;this.onUpdate=h,this.latestValues=l,this.baseTarget={...l},this.initialValues=r.initial?{...l}:{},this.renderState=u,this.parent=e,this.props=r,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=n,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=fh(r),this.isVariantNode=PT(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:c,...d}=this.scrapeMotionValuesFromProps(r,{},this);for(const f in d){const p=d[f];l[f]!==void 0&&lt(p)&&p.set(l[f],!1)}}mount(e){this.current=e,ux.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,i)=>this.bindToMotionValue(i,r)),KE.current||wO(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:ep.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){ux.delete(this.current),this.projection&&this.projection.unmount(),Pi(this.notifyUpdate),Pi(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const r=this.features[e];r&&(r.unmount(),r.isMounted=!1)}this.current=null}bindToMotionValue(e,r){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=En.has(e),n=r.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&ve.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0)}),s=r.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,r)),this.valueSubscriptions.set(e,()=>{n(),s(),o&&o(),r.owner&&r.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Cs){const r=Cs[e];if(!r)continue;const{isEnabled:i,Feature:n}=r;if(!this.features[e]&&n&&i(this.props)&&(this.features[e]=new n(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):De()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,r){this.latestValues[e]=r}update(e,r){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let i=0;i<hx.length;i++){const n=hx[i];this.propEventSubscriptions[n]&&(this.propEventSubscriptions[n](),delete this.propEventSubscriptions[n]);const s="on"+n,o=e[s];o&&(this.propEventSubscriptions[n]=this.on(n,o))}this.prevMotionValues=SO(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(e),()=>r.variantChildren.delete(e)}addValue(e,r){const i=this.values.get(e);r!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,r),this.values.set(e,r),this.latestValues[e]=r.get())}removeValue(e){this.values.delete(e);const r=this.valueSubscriptions.get(e);r&&(r(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,r){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&r!==void 0&&(i=ra(r===null?void 0:r,{owner:this}),this.addValue(e,i)),i}readValue(e,r){var i;let n=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(i=this.getBaseTargetFromProps(this.props,e))!==null&&i!==void 0?i:this.readValueFromInstance(this.current,e,this.options);return n!=null&&(typeof n=="string"&&(yE(n)||lE(n))?n=parseFloat(n):!EO(n)&&Ri.test(r)&&(n=pE(e,r)),this.setBaseTarget(e,lt(n)?n.get():n)),lt(n)?n.get():n}setBaseTarget(e,r){this.baseTarget[e]=r}getBaseTarget(e){var r;const{initial:i}=this.props;let n;if(typeof i=="string"||typeof i=="object"){const o=Rm(this.props,i,(r=this.presenceContext)===null||r===void 0?void 0:r.custom);o&&(n=o[e])}if(i&&n!==void 0)return n;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!lt(s)?s:this.initialValues[e]!==void 0&&n===void 0?void 0:this.baseTarget[e]}on(e,r){return this.events[e]||(this.events[e]=new zm),this.events[e].add(r)}notify(e,...r){this.events[e]&&this.events[e].notify(...r)}}class qE extends AO{constructor(){super(...arguments),this.KeyframeResolver=wE}sortInstanceNodePosition(e,r){return e.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(e,r){return e.style?e.style[r]:void 0}removeValueFromRenderState(e,{vars:r,style:i}){delete r[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;lt(e)&&(this.childSubscription=e.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}function bO(t){return window.getComputedStyle(t)}class CO extends qE{constructor(){super(...arguments),this.type="html",this.renderInstance=NT}readValueFromInstance(e,r){if(En.has(r)){const i=Ym(r);return i&&i.default||0}else{const i=bO(e),n=(FT(r)?i.getPropertyValue(r):i[r])||0;return typeof n=="string"?n.trim():n}}measureInstanceViewportBox(e,{transformPagePoint:r}){return OE(e,r)}build(e,r,i){km(e,r,i.transformTemplate)}scrapeMotionValuesFromProps(e,r,i){return Lm(e,r,i)}}class PO extends qE{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=De}getBaseTargetFromProps(e,r){return e[r]}readValueFromInstance(e,r){if(En.has(r)){const i=Ym(r);return i&&i.default||0}return r=OT.has(r)?r:bm(r),e.getAttribute(r)}scrapeMotionValuesFromProps(e,r,i){return VT(e,r,i)}build(e,r,i){Dm(e,r,this.isSVGTag,i.transformTemplate)}renderInstance(e,r,i,n){UT(e,r,i,n)}mount(e){this.isSVGTag=Bm(e.tagName),super.mount(e)}}const RO=(t,e)=>Pm(t)?new PO(e):new CO(e,{allowProjection:t!==N.Fragment}),IO=tB({...JL,...xO,...lO,..._O},RO),Mr=gF(IO);function MO(){const t=N.useRef(null),e=N.useRef(null),[r,i]=N.useState("menu"),[n,s]=N.useState(""),[o,a]=N.useState("gunner"),[l,u]=N.useState(!1),[h,c]=N.useState({level:1,xp:0,xpToNext:100}),[d,f]=N.useState(0),[p,g]=N.useState([]),[x,y]=N.useState({active:[],passive:[]}),[v,m]=N.useState(!1),[_,w]=N.useState(!1);N.useEffect(()=>{if(r==="playing"&&t.current&&!e.current){const A=()=>{e.current&&(e.current.paused=!0,g(e.current.getRandomUpgrades(3)),u(!0),c({...e.current.stats}))},B=()=>{w(!0)},D=new JD(o,A,B);D.init(t.current).then(()=>{e.current=D});const b=setInterval(()=>{e.current&&(c({...e.current.stats}),f(e.current.getGameTime()),y({active:[...e.current.inventory.active],passive:[...e.current.inventory.passive]}))},100);return()=>{clearInterval(b),e.current&&(e.current.destroy(),e.current=null)}}},[r]),N.useEffect(()=>{const A=B=>{if(r==="playing"&&B.key.toLowerCase()==="p"&&!l&&e.current){const D=!e.current.paused;e.current.paused=D,m(D)}};return window.addEventListener("keydown",A),()=>window.removeEventListener("keydown",A)},[r,l]);const S=A=>{e.current&&(e.current.applyUpgrade(A),e.current.paused=!1),u(!1)},E=()=>{e.current&&(e.current.paused=!1,m(!1))},T=()=>{i("menu"),m(!1),e.current&&(e.current.destroy(),e.current=null)},C=()=>{n.trim()&&(w(!1),i("playing"))};return R.jsxs("div",{className:"game-container",children:[r==="playing"?R.jsx("div",{ref:t,style:{width:"100%",height:"100%"}}):null,r==="playing"&&R.jsx(kO,{}),r!=="playing"?R.jsx(Nc,{children:R.jsxs(Mr.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:1.1},className:"glass p-8 flex flex-col items-center gap-6 ui-interactive",style:{padding:"3rem",minWidth:"800px"},children:[R.jsx("h1",{style:{fontSize:"3.5rem",fontWeight:800,background:"linear-gradient(to right, #6366f1, #f43f5e)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",marginBottom:"1rem"},children:"PLOXIANO SURVIVORS"}),R.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1.5fr",gap:"3rem",width:"100%"},children:[R.jsxs("div",{className:"flex flex-col gap-4",style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:[R.jsxs("div",{style:{position:"relative"},children:[R.jsx(iF,{size:20,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"}}),R.jsx("input",{type:"text",placeholder:"Enter Username",value:n,onChange:A=>s(A.target.value),style:{width:"100%",padding:"14px 12px 14px 42px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"8px",color:"white",fontSize:"1.1rem",outline:"none"}})]}),R.jsxs("div",{className:"flex flex-col gap-2",style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[R.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.9rem",fontWeight:600},children:"SELECT CHARACTER"}),R.jsx("div",{className:"char-select-grid",style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"10px"},children:Object.values(St).map(A=>R.jsxs("button",{onClick:()=>a(A.id),className:"glass",style:{padding:"12px",border:o===A.id?"2px solid var(--primary)":"1px solid rgba(255,255,255,0.1)",background:o===A.id?"rgba(99, 102, 241, 0.2)":"rgba(255,255,255,0.02)",color:"white",display:"flex",alignItems:"center",gap:"8px",borderRadius:"8px"},children:[R.jsx("div",{style:{width:"12px",height:"12px",background:`#${A.color.toString(16).padStart(6,"0")}`,borderRadius:"2px"}}),R.jsx("span",{style:{fontSize:"0.9rem"},children:A.name})]},A.id))})]}),R.jsx("button",{onClick:C,className:"primary-btn",disabled:!n.trim(),style:{opacity:n.trim()?1:.5,marginTop:"2rem",padding:"16px"},children:R.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"10px"},children:[R.jsx(K0,{size:24}),R.jsx("span",{style:{fontSize:"1.25rem"},children:"START RUN"})]})})]}),R.jsxs("div",{className:"glass",style:{padding:"2rem",display:"flex",flexDirection:"column",gap:"1rem",background:"rgba(255,255,255,0.02)"},children:[R.jsx("h3",{style:{fontSize:"1.5rem",color:"var(--primary)"},children:St[o].name}),R.jsx("p",{style:{color:"var(--text-muted)"},children:St[o].description}),R.jsxs("div",{style:{padding:"12px",background:"rgba(99, 102, 241, 0.1)",borderRadius:"8px",border:"1px solid rgba(99, 102, 241, 0.2)"},children:[R.jsx("p",{style:{fontSize:"0.8rem",color:"var(--primary)",fontWeight:800,marginBottom:"4px"},children:"ZEL YETENEK"}),R.jsx("p",{style:{fontWeight:600,color:"white"},children:St[o].trait.name}),R.jsx("p",{style:{fontSize:"0.85rem",color:"var(--text-muted)"},children:St[o].trait.description})]}),R.jsx("div",{style:{marginTop:"1rem",display:"flex",flexDirection:"column",gap:"12px"},children:Object.entries(St[o].stats).map(([A,B])=>R.jsxs("div",{children:[R.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[R.jsx("span",{style:{textTransform:"uppercase",fontSize:"0.75rem",letterSpacing:"1px",color:"var(--text-muted)"},children:A}),R.jsx("span",{style:{fontSize:"0.8rem",color:"white"},children:B})]}),R.jsx("div",{style:{height:"4px",background:"rgba(255,255,255,0.05)",borderRadius:"2px",overflow:"hidden"},children:R.jsx(Mr.div,{initial:{width:0},animate:{width:`${Math.min(100,B/500*100)}%`},style:{height:"100%",background:"var(--primary)",boxShadow:"0 0 10px var(--primary)"}})})]},A))})]})]})]})}):null,r==="playing"&&R.jsxs("div",{className:"ui-layer",children:[R.jsx("div",{style:{position:"absolute",top:"20px",left:"50%",transform:"translateX(-50%)"},children:R.jsxs("div",{className:"glass",style:{padding:"8px 24px",fontSize:"1.5rem",fontWeight:800,letterSpacing:"2px",color:"var(--text-main)",border:"1px solid var(--primary)"},children:[Math.floor(d/60).toString().padStart(2,"0"),":",Math.floor(d%60).toString().padStart(2,"0")]})}),R.jsx("div",{style:{padding:"20px"},children:R.jsxs("div",{className:"glass",style:{padding:"10px 20px",display:"inline-block"},children:[R.jsxs("span",{style:{color:"var(--gold)",fontWeight:"bold"},children:["LVL ",h.level]}),R.jsx("div",{style:{width:"300px",height:"10px",background:"rgba(255,255,255,0.1)",borderRadius:"5px",marginTop:"6px",overflow:"hidden"},children:R.jsx(Mr.div,{animate:{width:`${h.xp/h.xpToNext*100}%`},style:{height:"100%",background:"linear-gradient(to right, var(--primary), #818cf8)"}})})]})}),R.jsxs("div",{style:{position:"absolute",top:"20px",right:"20px",display:"flex",flexDirection:"column",gap:"8px",alignItems:"flex-end"},children:[R.jsx("div",{style:{display:"flex",gap:"4px"},children:[...Array(5)].map((A,B)=>R.jsx("div",{className:"glass",style:{width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",borderColor:x.active[B]?"var(--primary)":"rgba(255,255,255,0.05)",position:"relative"},children:x.active[B]&&R.jsxs(R.Fragment,{children:[R.jsx("span",{style:{fontSize:"0.7rem",fontWeight:800},children:x.active[B].name[0]}),R.jsxs("span",{style:{position:"absolute",bottom:"2px",right:"4px",fontSize:"0.6rem",color:"var(--primary)"},children:["L",x.active[B].level]})]})},`act-${B}`))}),R.jsx("div",{style:{display:"flex",gap:"4px"},children:[...Array(5)].map((A,B)=>R.jsx("div",{className:"glass",style:{width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%",borderColor:x.passive[B]?"var(--gold)":"rgba(255,255,255,0.05)",position:"relative"},children:x.passive[B]&&R.jsxs(R.Fragment,{children:[R.jsx("span",{style:{fontSize:"0.7rem",fontWeight:800},children:x.passive[B].name[0]}),R.jsxs("span",{style:{position:"absolute",bottom:"2px",right:"4px",fontSize:"0.6rem",color:"var(--gold)"},children:["L",x.passive[B].level]})]})},`pas-${B}`))})]}),R.jsx(Nc,{children:(l||v)&&R.jsx("div",{className:"ui-layer ui-interactive",style:{background:"rgba(5, 5, 10, 0.9)",display:"flex",justifyContent:"center",alignItems:"center",backdropFilter:"blur(10px)",zIndex:100},children:v?R.jsxs("div",{style:{display:"flex",width:"90%",maxWidth:"1200px",gap:"40px"},children:[R.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:"30px",justifyContent:"center",alignItems:"center"},children:[R.jsx("h1",{style:{fontSize:"4rem",color:"var(--primary)",textShadow:"0 0 20px var(--primary)"},children:"PAUSED"}),R.jsxs("div",{style:{display:"flex",gap:"20px"},children:[R.jsx("button",{onClick:E,className:"btn btn-primary",style:{padding:"15px 40px",fontSize:"1.2rem"},children:"DEVAM ET"}),R.jsx("button",{onClick:T,className:"btn btn-secondary",style:{padding:"15px 40px",fontSize:"1.2rem",color:"#f43f5e",borderColor:"#f43f5e"},children:"PES ET"})]})]}),R.jsxs("div",{className:"glass",style:{width:"450px",padding:"30px",display:"flex",flexDirection:"column",gap:"24px",maxHeight:"80vh",overflowY:"auto"},children:[R.jsxs("div",{children:[R.jsx("h2",{style:{color:"var(--gold)",marginBottom:"16px",borderBottom:"1px solid rgba(255,215,0,0.2)",paddingBottom:"8px"},children:"ENVANTER"}),R.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[R.jsx("h3",{style:{fontSize:"0.9rem",color:"var(--primary)"},children:"AKTF SLAHLAR"}),x.active.map(A=>R.jsxs("div",{style:{display:"flex",justifyContent:"space-between",background:"rgba(255,255,255,0.05)",padding:"10px",borderRadius:"8px",borderLeft:A.isEvolved?"4px solid #a21caf":"none"},children:[R.jsxs("span",{style:{color:A.isEvolved?"#d8b4fe":"white"},children:[A.name," ",A.isEvolved&&""]}),R.jsx("span",{style:{color:"var(--primary)"},children:A.isEvolved?"MAX":`LVL ${A.level}`})]},A.id)),x.active.length===0&&R.jsx("span",{style:{color:"var(--text-muted)",fontSize:"0.8rem"},children:"Henz aktif silah yok"}),R.jsx("h3",{style:{fontSize:"0.9rem",color:"var(--gold)",marginTop:"12px"},children:"PASF GELTRMELER"}),x.passive.map(A=>R.jsxs("div",{style:{display:"flex",justifyContent:"space-between",background:"rgba(255,255,255,0.05)",padding:"10px",borderRadius:"8px"},children:[R.jsx("span",{children:A.name}),R.jsxs("span",{style:{color:"var(--gold)"},children:["LVL ",A.level]})]},A.id)),x.passive.length===0&&R.jsx("span",{style:{color:"var(--text-muted)",fontSize:"0.8rem"},children:"Henz pasif gelitirme yok"})]})]}),R.jsxs("div",{children:[R.jsx("h2",{style:{color:"var(--accent)",marginBottom:"16px",borderBottom:"1px solid rgba(244,63,94,0.2)",paddingBottom:"8px"},children:"STATSTKLER"}),R.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px"},children:[R.jsxs("div",{className:"glass",style:{padding:"10px",textAlign:"center"},children:[R.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)"},children:"SEVYE"}),R.jsx("div",{style:{fontSize:"1.2rem",fontWeight:800},children:h.level})]}),R.jsxs("div",{className:"glass",style:{padding:"10px",textAlign:"center"},children:[R.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)"},children:"SRE"}),R.jsxs("div",{style:{fontSize:"1.2rem",fontWeight:800},children:[Math.floor(d/60),":",Math.floor(d%60).toString().padStart(2,"0")]})]}),R.jsxs("div",{className:"glass",style:{padding:"10px",textAlign:"center",gridColumn:"span 2"},children:[R.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)"},children:"TECRBE"}),R.jsxs("div",{style:{fontSize:"1rem"},children:[h.xp," / ",h.xpToNext]})]})]})]})]})]}):R.jsxs("div",{style:{textAlign:"center",perspective:"1000px"},children:[R.jsx(Mr.h2,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},className:"floating",style:{fontSize:"4rem",color:"var(--gold)",marginBottom:"50px",textShadow:"0 10px 40px rgba(245, 158, 11, 0.4)",fontWeight:800},children:"LEVEL UP!"}),R.jsx("div",{className:"upgrade-cards-container",style:{display:"flex",gap:"24px",justifyContent:"center"},children:p.map((A,B)=>R.jsxs(Mr.button,{initial:{y:50,opacity:0,rotateY:-20},animate:{y:0,opacity:1,rotateY:0},transition:{delay:B*.1,duration:.4},whileHover:{y:-10,scale:1.05},onClick:()=>S(A.id),className:`glass-premium ${A.id.endsWith("_evo")?"glow-purple":A.type==="active"?"glow-blue":"glow-gold"}`,style:{width:"min(240px, 80vw)",minHeight:"280px",padding:"24px",display:"flex",flexDirection:"column",alignItems:"center",gap:"16px",textAlign:"center",cursor:"pointer"},children:[R.jsx("div",{style:{background:A.id.endsWith("_evo")?"rgba(162, 28, 175, 0.15)":A.type==="active"?"rgba(99, 102, 241, 0.15)":"rgba(245, 158, 11, 0.15)",padding:"24px",borderRadius:"50%",boxShadow:"inset 0 0 20px rgba(255,255,255,0.05)"},children:A.type==="active"?R.jsx(K0,{size:40,color:A.id.endsWith("_evo")?"#d8b4fe":"#6366f1"}):R.jsx(nF,{size:40,color:"#f59e0b"})}),R.jsx("h3",{style:{fontSize:"1.4rem",color:A.id.endsWith("_evo")?"#d8b4fe":"white",fontWeight:700},children:A.name}),R.jsx("p",{style:{fontSize:"0.95rem",color:"var(--text-muted)",lineHeight:1.5},children:A.description}),R.jsx("div",{style:{marginTop:"auto",fontSize:"0.8rem",padding:"6px 16px",borderRadius:"20px",background:A.id.endsWith("_evo")?"#a21caf":A.type==="active"?"var(--primary)":"var(--gold)",color:"white",fontWeight:800,letterSpacing:"1px"},children:A.id.endsWith("_evo")?"EVRM":A.type.toUpperCase()})]},A.id))})]})})}),R.jsx(Nc,{children:_&&R.jsxs(Mr.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{position:"fixed",inset:0,backgroundColor:"rgba(0,0,0,0.9)",backdropFilter:"blur(10px)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",zIndex:2e3,textAlign:"center"},children:[R.jsx("div",{className:"floating",children:R.jsx(Mr.h1,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},style:{fontSize:"6rem",color:"var(--accent)",fontWeight:800,textShadow:"0 0 50px rgba(244, 63, 94, 0.5)",marginBottom:"10px"},children:"ELENDN!"})}),R.jsxs("p",{style:{color:"var(--text-muted)",fontSize:"1.4rem",marginBottom:"40px"},children:["Level ",h.level,"  ",Math.floor(d)," Saniye Hayatta Kaldn"]}),R.jsxs("div",{style:{display:"flex",gap:"20px"},children:[R.jsx(Mr.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{w(!1),T(),setTimeout(()=>C(),100)},className:"primary-btn glow-blue",style:{padding:"16px 48px",fontSize:"1.2rem"},children:"TEKRAR DENE"}),R.jsx(Mr.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{w(!1),T()},className:"glass",style:{padding:"16px 48px",fontSize:"1.2rem",color:"white"},children:"ANA MEN"})]})]})})]})]})}function kO(){const t=N.useRef(null),e=N.useRef(null),[r,i]=N.useState(!1),n=o=>{if(!t.current||!e.current)return;const a=t.current.getBoundingClientRect(),l=a.left+a.width/2,u=a.top+a.height/2,h="touches"in o?o.touches[0].clientX:o.clientX,c="touches"in o?o.touches[0].clientY:o.clientY;let d=h-l,f=c-u;const p=Math.sqrt(d*d+f*f),g=40;p>g&&(d*=g/p,f*=g/p),e.current.style.transform=`translate(calc(-50% + ${d}px), calc(-50% + ${f}px))`,uo.virtualAxis.x=d/g,uo.virtualAxis.y=f/g},s=()=>{i(!1),e.current&&(e.current.style.transform="translate(-50%, -50%)"),uo.virtualAxis.x=0,uo.virtualAxis.y=0};return R.jsx("div",{ref:t,className:"joystick-container joystick-show",onPointerDown:o=>{i(!0),n(o)},onPointerMove:o=>{r&&n(o)},onPointerUp:s,onPointerLeave:s,children:R.jsx("div",{ref:e,className:"joystick-handle"})})}console.log("Main.tsx executing...");const cx=document.getElementById("root");cx?(console.log("Root found, rendering..."),S1(cx).render(R.jsx(N.StrictMode,{children:R.jsx(MO,{})}))):console.error("Root NOT found!");
